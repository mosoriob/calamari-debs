!function(){!function(a,b){function c(a){var b=a.length,c=ia.type(a);return ia.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xa[a]={};return ia.each(a.match(ka)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ia.acceptData(a)){var f,g,h=ia.expando,i="string"==typeof c,j=a.nodeType,k=j?ia.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ia.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ia.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ia.extend(k[l],c):k[l].data=ia.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ia.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ia.camelCase(c)])):g=f,g}}function f(a,b,c){if(ia.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ia.cache:a,j=g?a[ia.expando]:ia.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ia.isArray(b)?b=b.concat(ia.map(b,ia.camelCase)):b in f?b=[b]:(b=ia.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ia.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ia.cleanData([a],!0):ia.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(za,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ya.test(d)?ia.parseJSON(d):d}catch(f){}ia.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ia.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ia.isFunction(b))return ia.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ia.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ia.grep(a,function(a){return 1===a.nodeType});if(Ra.test(b))return ia.filter(b,d,!c);b=ia.filter(b,d)}return ia.grep(a,function(a){return ia.inArray(a,b)>=0===c})}function m(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ia._data(c,"globalEval",!b||ia._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ia.hasData(a)){var c,d,e,f=ia._data(a),g=ia._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ia.event.add(b,c,h[c][d])}g.data&&(g.data=ia.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ia.support.noCloneEvent&&b[ia.expando]){e=ia._data(b);for(d in e.events)ia.removeEvent(b,d,e.handle);b.removeAttribute(ia.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ia.support.html5Clone&&a.innerHTML&&!ia.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ia.nodeName(e,c)?g.push(e):ia.merge(g,t(e,c));return c===b||c&&ia.nodeName(a,c)?ia.merge([a],g):g}function u(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ia.css(a,"display")||!ia.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ia._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ia._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ia._data(d,"olddisplay",e?c:ia.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ia.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ia.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ia.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ia.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ia.css(a,"border"+xb[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ia.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=ub[a];return c||(c=C(a,b),"none"!==c&&c||(jb=(jb||ia("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jb.detach()),ub[a]=c),c}function C(a,b){var c=ia(b.createElement(a)).appendTo(b.body),d=ia.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ia.isArray(b))ia.each(b,function(b,e){c||Ab.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ia.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ka)||[];if(ia.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function e(h){var i;return f[h]=!0,ia.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function G(a,c){var d,e,f=ia.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ia.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$b=b}),$b=ia.now()}function M(a,b){ia.each(b,function(b,c){for(var d=(ec[b]||[]).concat(ec["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dc.length,h=ia.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ia.extend({},b),opts:ia.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ia.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return M(j,k),ia.isFunction(j.opts.start)&&j.opts.start.call(a,j),ia.fx.timer(ia.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ia.camelCase(e),f=b[d],c=a[e],ia.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ia.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ia._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ia.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ia.css(a,"display")&&"none"===ia.css(a,"float")&&(ia.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ia.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ac.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ia._data(a,"fxshow")||ia._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ia(a).show():m.done(function(){ia(a).hide()}),m.done(function(){var b;ia._removeData(a,"fxshow");for(b in o)ia.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ia.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ia.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],aa="1.9.1",ba=_.concat,ca=_.push,da=_.slice,ea=_.indexOf,fa=$.toString,ga=$.hasOwnProperty,ha=aa.trim,ia=function(a,b){return new ia.fn.init(a,b,U)},ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ka=/\S+/g,la=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ma=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,na=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oa=/^[\],:{}\s]*$/,pa=/(?:^|:|,)(?:\s*\[)+/g,qa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ra=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sa=/^-ms-/,ta=/-([\da-z])/gi,ua=function(a,b){return b.toUpperCase()},va=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wa(),ia.ready())},wa=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",va,!1),a.removeEventListener("load",va,!1)):(W.detachEvent("onreadystatechange",va),a.detachEvent("onload",va))};ia.fn=ia.prototype={jquery:aa,constructor:ia,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ma.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ia?c[0]:c,ia.merge(this,ia.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),na.test(e[1])&&ia.isPlainObject(c))for(e in c)ia.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ia.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ia.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return da.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ia.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ia.each(this,a,b)},ready:function(a){return ia.ready.promise().done(a),this},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ia.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ca,sort:[].sort,splice:[].splice},ia.fn.init.prototype=ia.fn,ia.extend=ia.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ia.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ia.isPlainObject(d)||(c=ia.isArray(d)))?(c?(c=!1,g=a&&ia.isArray(a)?a:[]):g=a&&ia.isPlainObject(a)?a:{},h[e]=ia.extend(k,g,d)):d!==b&&(h[e]=d));return h},ia.extend({noConflict:function(b){return a.$===ia&&(a.$=Z),b&&a.jQuery===ia&&(a.jQuery=Y),ia},isReady:!1,readyWait:1,holdReady:function(a){a?ia.readyWait++:ia.ready(!0)},ready:function(a){if(a===!0?!--ia.readyWait:!ia.isReady){if(!W.body)return setTimeout(ia.ready);ia.isReady=!0,a!==!0&&--ia.readyWait>0||(T.resolveWith(W,[ia]),ia.fn.trigger&&ia(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ia.type(a)},isArray:Array.isArray||function(a){return"array"===ia.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?$[fa.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ia.type(a)||a.nodeType||ia.isWindow(a))return!1;try{if(a.constructor&&!ga.call(a,"constructor")&&!ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||ga.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=na.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ia.buildFragment([a],b,e),e&&ia(e).remove(),ia.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ia.trim(b),b&&oa.test(b.replace(qa,"@").replace(ra,"]").replace(pa,"")))?new Function("return "+b)():void ia.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ia.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ia.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sa,"ms-").replace(ta,ua)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ha&&!ha.call("\ufeff ")?function(a){return null==a?"":ha.call(a)}:function(a){return null==a?"":(a+"").replace(la,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ia.merge(d,"string"==typeof a?[a]:a):ca.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ea)return ea.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return ba.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ia.isFunction(a)?(d=da.call(arguments,2),e=function(){return a.apply(c||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||ia.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ia.type(d)){f=!0;for(i in d)ia.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ia.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ia(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ia.ready.promise=function(b){if(!T)if(T=ia.Deferred(),"complete"===W.readyState)setTimeout(ia.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",va,!1),a.addEventListener("load",va,!1);else{W.attachEvent("onreadystatechange",va),a.attachEvent("onload",va);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ia.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wa(),ia.ready()}}()}return T.promise(b)},ia.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ia(W);var xa={};ia.Callbacks=function(a){a="string"==typeof a?xa[a]||d(a):ia.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ia.each(b,function(b,c){var e=ia.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ia.each(arguments,function(a,b){for(var d;(d=ia.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ia.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ia.extend({Deferred:function(a){var b=[["resolve","done",ia.Callbacks("once memory"),"resolved"],["reject","fail",ia.Callbacks("once memory"),"rejected"],["notify","progress",ia.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ia.Deferred(function(c){ia.each(b,function(b,f){var g=f[0],h=ia.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ia.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ia.extend(a,d):d}},e={};return d.pipe=d.then,ia.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=da.call(arguments),g=f.length,h=1!==g||a&&ia.isFunction(a.promise)?g:0,i=1===h?a:ia.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?da.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ia.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ia.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ia(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var ya=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,za=/([A-Z])/g;ia.extend({cache:{},expando:"jQuery"+(aa+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ia.cache[a[ia.expando]]:a[ia.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ia.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ia.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ia.data(f),1===f.nodeType&&!ia._data(f,"parsedAttrs"))){for(d=f.attributes;h<d.length;h++)e=d[h].name,e.indexOf("data-")||(e=ia.camelCase(e.slice(5)),g(f,e,i[e]));ia._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ia.data(this,a)}):ia.access(this,function(c){return c===b?f?g(f,a,ia.data(f,a)):null:void this.each(function(){ia.data(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ia.removeData(this,a)})}}),ia.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ia._data(a,b),c&&(!d||ia.isArray(c)?d=ia._data(a,b,ia.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ia.queue(a,b),d=c.length,e=c.shift(),f=ia._queueHooks(a,b),g=function(){ia.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ia._data(a,c)||ia._data(a,c,{empty:ia.Callbacks("once memory").add(function(){ia._removeData(a,b+"queue"),ia._removeData(a,c)})})}}),ia.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ia.queue(this[0],a):c===b?this:this.each(function(){var b=ia.queue(this,a,c);ia._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ia.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ia.dequeue(this,a)})},delay:function(a,b){return a=ia.fx?ia.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ia.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ia._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Aa,Ba,Ca=/[\t\r\n]/g,Da=/\r/g,Ea=/^(?:input|select|textarea|button|object)$/i,Fa=/^(?:a|area)$/i,Ga=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ha=/^(?:checked|selected)$/i,Ia=ia.support.getSetAttribute,Ja=ia.support.input;ia.fn.extend({attr:function(a,b){return ia.access(this,ia.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ia.removeAttr(this,a)})},prop:function(a,b){return ia.access(this,ia.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ia.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ia.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ia.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ia.isFunction(a)?this.each(function(c){ia(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ia(this),h=b,i=a.match(ka)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===V||"boolean"===c)&&(this.className&&ia._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ia._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ca," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ia.isFunction(a),this.each(function(c){var f,g=ia(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ia.isArray(f)&&(f=ia.map(f,function(a){return null==a?"":a+""})),d=ia.valHooks[this.type]||ia.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ia.valHooks[f.type]||ia.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Da,""):null==c?"":c)}}}),ia.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(ia.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ia.nodeName(c.parentNode,"optgroup"))){if(b=ia(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ia.makeArray(b);return ia(a).find("option").each(function(){this.selected=ia.inArray(ia(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return typeof a.getAttribute===V?ia.prop(a,c,d):(f=1!==h||!ia.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ia.attrHooks[c]||(Ga.test(c)?Ba:Aa)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):void ia.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ka);if(f&&1===a.nodeType)for(;c=f[e++];)d=ia.propFix[c]||c,Ga.test(c)?!Ia&&Ha.test(c)?a[ia.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ia.attr(a,c,""),a.removeAttribute(Ia?c:d)},attrHooks:{type:{set:function(a,b){if(!ia.support.radioValue&&"radio"===b&&ia.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ia.isXMLDoc(a),g&&(c=ia.propFix[c]||c,f=ia.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Ea.test(a.nodeName)||Fa.test(a.nodeName)&&a.href?0:b}}}}),Ba={get:function(a,c){var d=ia.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Ja&&Ia?null!=e:Ha.test(c)?a[ia.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);
return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ia.removeAttr(a,c):Ja&&Ia||!Ha.test(c)?a.setAttribute(!Ia&&ia.propFix[c]||c,c):a[ia.camelCase("default-"+c)]=a[c]=!0,c}},Ja&&Ia||(ia.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ia.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,b,c){return ia.nodeName(a,"input")?void(a.defaultValue=b):Aa&&Aa.set(a,b,c)}}),Ia||(Aa=ia.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ia.attrHooks.contenteditable={get:Aa.get,set:function(a,b,c){Aa.set(a,""===b?!1:b,c)}},ia.each(["width","height"],function(a,b){ia.attrHooks[b]=ia.extend(ia.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})})),ia.support.hrefNormalized||(ia.each(["href","src","width","height"],function(a,c){ia.attrHooks[c]=ia.extend(ia.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ia.each(["href","src"],function(a,b){ia.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ia.support.style||(ia.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ia.support.optSelected||(ia.propHooks.selected=ia.extend(ia.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ia.support.enctype||(ia.propFix.enctype="encoding"),ia.support.checkOn||ia.each(["radio","checkbox"],function(){ia.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ia.each(["radio","checkbox"],function(){ia.valHooks[this]=ia.extend(ia.valHooks[this],{set:function(a,b){return ia.isArray(b)?a.checked=ia.inArray(ia(a).val(),b)>=0:void 0}})});var Ka=/^(?:input|select|textarea)$/i,La=/^key/,Ma=/^(?:mouse|contextmenu)|click/,Na=/^(?:focusinfocus|focusoutblur)$/,Oa=/^([^.]*)(?:\.(.+)|)$/;ia.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ia._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ia.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ia===V||a&&ia.event.triggered===a.type?b:ia.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ka)||[""],i=c.length;i--;)g=Oa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ia.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ia.event.special[o]||{},m=ia.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ia.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ia.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ia.hasData(a)&&ia._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ka)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ia.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ia.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ia.event.remove(a,n+b[j],c,d,!0);ia.isEmptyObject(k)&&(delete q.handle,ia._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=ga.call(c,"type")?c.type:c,p=ga.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Na.test(o+ia.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ia.expando]?c:new ia.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ia.makeArray(d,[c]),k=ia.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ia.isWindow(e)){for(j=k.delegateType||o,Na.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ia._data(i,"events")||{})[c.type]&&ia._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ia.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(e.ownerDocument,d)===!1)&&("click"!==o||!ia.nodeName(e,"a"))&&ia.acceptData(e)&&h&&e[o]&&!ia.isWindow(e)){l=e[h],l&&(e[h]=null),ia.event.triggered=o;try{e[o]()}catch(q){}ia.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ia.event.fix(a);var c,d,e,f,g,h=[],i=da.call(arguments),j=(ia._data(this,"events")||{})[a.type]||[],k=ia.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ia.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ia.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ia(d,this).index(j)>=0:ia.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ia.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ma.test(e)?this.mouseHooks:La.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ia.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ia.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ia.extend(new ia.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ia.event.trigger(e,null,b):ia.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ia.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ia.Event=function(a,b){return this instanceof ia.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ia.extend(this,b),this.timeStamp=a&&a.timeStamp||ia.now(),void(this[ia.expando]=!0)):new ia.Event(a,b)},ia.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ia.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ia.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ia.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ia.support.submitBubbles||(ia.event.special.submit={setup:function(){return ia.nodeName(this,"form")?!1:void ia.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ia.nodeName(c,"input")||ia.nodeName(c,"button")?c.form:b;d&&!ia._data(d,"submitBubbles")&&(ia.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ia._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ia.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ia.nodeName(this,"form")?!1:void ia.event.remove(this,"._submit")}}),ia.support.changeBubbles||(ia.event.special.change={setup:function(){return Ka.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ia.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ia.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ia.event.simulate("change",this,a,!0)})),!1):void ia.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ka.test(b.nodeName)&&!ia._data(b,"changeBubbles")&&(ia.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ia.event.simulate("change",this.parentNode,a,!0)}),ia._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ia.event.remove(this,"._change"),!Ka.test(this.nodeName)}}),ia.support.focusinBubbles||ia.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ia.event.simulate(b,a.target,ia.event.fix(a),!0)};ia.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ia.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ia().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ia.guid++)),this.each(function(){ia.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ia(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ia.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ia.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ia.event.trigger(a,b,c,!0):void 0}}),function(a,b){function c(a){return oa.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sa,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(ga,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=ha.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=ja.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(ga," ")}),h=h.slice(c.length));for(f in y.filter)!(d=ma[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(ga,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ua,va),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ma.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ua,va),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,na.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ca=ba.replace("w","w#"),da="([*^$|!~]?=)",ea="\\["+aa+"*("+ba+")"+aa+"*(?:"+da+aa+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ca+")|)|)"+aa+"*\\]",fa=":("+ba+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ea.replace(3,8)+")*)|.*)\\)|)",ga=new RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ha=new RegExp("^"+aa+"*,"+aa+"*"),ja=new RegExp("^"+aa+"*([\\x20\\t\\r\\n\\f>+~])"+aa+"*"),ka=new RegExp(fa),la=new RegExp("^"+ca+"$"),ma={ID:new RegExp("^#("+ba+")"),CLASS:new RegExp("^\\.("+ba+")"),NAME:new RegExp("^\\[name=['\"]?("+ba+")['\"]?\\]"),TAG:new RegExp("^("+ba.replace("w","w*")+")"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),needsContext:new RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},na=/[\x20\t\r\n\f]*[+~]/,oa=/^[^{]+\{\s*\[native code/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/^(?:input|select|textarea|button)$/i,ra=/^h\d$/i,sa=/'|\\/g,ta=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ua=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,va=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wa){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,b){return typeof b.getElementsByName!==V?b.getElementsByName(name):void 0},y.find.CLASS=P.getByClassName&&function(a,b){return typeof b.getElementsByClassName===V||H?void 0:b.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+aa+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fa)}),I=new RegExp(I.join("|")),J=new RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(ta,"='$1']"),P.matchesSelector&&!H&&(!J||!J.test(b))&&!I.test(b))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:ma,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ma.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&ka.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ua,va).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(ga,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return la.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return ra.test(a.nodeName)},input:function(a){return qa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ia.attr,ia.find=g,ia.expr=g.selectors,ia.expr[":"]=ia.expr.pseudos,ia.unique=g.uniqueSort,ia.text=g.getText,ia.isXMLDoc=g.isXML,ia.contains=g.contains}(a);var Pa=/Until$/,Qa=/^(?:parents|prev(?:Until|All))/,Ra=/^.[^:#\[\.,]*$/,Sa=ia.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ia.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ia(a).filter(function(){for(b=0;e>b;b++)if(ia.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ia.find(a,this[b],c);return c=this.pushStack(e>1?ia.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ia(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ia.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Sa.test(a)?ia(a,this.context).index(this[0])>=0:ia.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ia(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ia.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ia.unique(f):f)},index:function(a){return a?"string"==typeof a?ia.inArray(this[0],ia(a)):ia.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ia(a,b):ia.makeArray(a&&a.nodeType?[a]:a),d=ia.merge(this.get(),c);return this.pushStack(ia.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ia.fn.andSelf=ia.fn.addBack,ia.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ia.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ia.dir(a,"parentNode",c);
},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ia.dir(a,"nextSibling")},prevAll:function(a){return ia.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ia.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ia.dir(a,"previousSibling",c)},siblings:function(a){return ia.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ia.sibling(a.firstChild)},contents:function(a){return ia.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ia.merge([],a.childNodes)}},function(a,b){ia.fn[a]=function(c,d){var e=ia.map(this,b,c);return Pa.test(a)||(d=c),d&&"string"==typeof d&&(e=ia.filter(d,e)),e=this.length>1&&!Ta[a]?ia.unique(e):e,this.length>1&&Qa.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ia.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ia.find.matchesSelector(b[0],a)?[b[0]]:[]:ia.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ia(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ia.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=m(W),ib=hb.appendChild(W.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ia.fn.extend({text:function(a){return ia.access(this,function(a){return a===b?ia.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ia.isFunction(a))return this.each(function(b){ia(this).wrapAll(a.call(this,b))});if(this[0]){var b=ia(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ia.isFunction(a)?this.each(function(b){ia(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ia(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ia.isFunction(a);return this.each(function(c){ia(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ia.nodeName(this,"body")||ia(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ia.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ia.cleanData(t(c)),c.parentNode&&(b&&ia.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ia.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ia.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ia.clone(this,a,b)})},html:function(a){return ia.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if("string"==typeof a&&!ab.test(a)&&(ia.support.htmlSerialize||!Wa.test(a))&&(ia.support.leadingWhitespace||!Xa.test(a))&&!gb[(Za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ia.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ia.isFunction(a);return b||"string"==typeof a||(a=ia(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ia(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=ba.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ia.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ia.support.checkClone)&&cb.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ia.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ia.nodeName(e,"tr"),h=ia.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ia.clone(f,!0,!0),g&&ia.merge(h,t(f,"script"))),d.call(c&&ia.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ia.map(h,p),k=0;g>k;k++)f=h[k],db.test(f.type||"")&&!ia._data(f,"globalEval")&&ia.contains(i,f)&&(f.src?ia.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ia.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fb,"")));j=e=null}return this}}),ia.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ia.fn[a]=function(a){for(var c,d=0,e=[],f=ia(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ia(f[d])[b](c),ca.apply(e,c.get());return this.pushStack(e)}}),ia.extend({clone:function(a,b,c){var d,e,f,g,h,i=ia.contains(a.ownerDocument,a);if(ia.support.html5Clone||ia.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ia.support.noCloneEvent&&ia.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ia.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ia.type(f))ia.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ia.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ia.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ia.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ia.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ia.support.appendChecked||ia.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ia.inArray(f,d))&&(g=ia.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ia.expando,i=ia.cache,j=ia.support.deleteExpando,k=ia.event.special;null!=(c=a[g]);g++)if((b||ia.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ia.event.remove(c,d):ia.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+ja+")(.*)$","i"),sb=new RegExp("^("+ja+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+ja+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ia.fn.extend({css:function(a,c){return ia.access(this,function(a,c,d){var e,f,g={},h=0;if(ia.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ia.css(a,c[h],!1,f);return g}return d!==b?ia.style(a,c,d):ia.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ia(this).show():ia(this).hide()})}}),ia.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ia.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ia.camelCase(c),j=a.style;if(c=ia.cssProps[i]||(ia.cssProps[i]=v(j,i)),h=ia.cssHooks[c]||ia.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ia.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ia.cssNumber[i]||(d+="px"),ia.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ia.camelCase(c);return c=ia.cssProps[i]||(ia.cssProps[i]=v(a.style,i)),h=ia.cssHooks[c]||ia.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ia.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ia.contains(a.ownerDocument,a)||(i=ia.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ia.each(["height","width"],function(a,b){ia.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pb.test(ia.css(a,"display"))?ia.swap(a,vb,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&kb(a);return y(a,c,d?z(a,b,d,ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,e),e):0)}}}),ia.support.opacity||(ia.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ia.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ia.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ia(function(){ia.support.reliableMarginRight||(ia.cssHooks.marginRight={get:function(a,b){return b?ia.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):void 0}}),!ia.support.pixelPosition&&ia.fn.position&&ia.each(["top","left"],function(a,b){ia.cssHooks[b]={get:function(a,c){return c?(c=lb(a,b),sb.test(c)?ia(a).position()[b]+"px":c):void 0}}})}),ia.expr&&ia.expr.filters&&(ia.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ia.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ia.css(a,"display"))},ia.expr.filters.visible=function(a){return!ia.expr.filters.hidden(a)}),ia.each({margin:"",padding:"",border:"Width"},function(a,b){ia.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ia.cssHooks[a+b].set=y)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ia.fn.extend({serialize:function(){return ia.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ia.prop(this,"elements");return a?ia.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ia(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ia(this).val();return null==c?null:ia.isArray(c)?ia.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ia.param=function(a,c){var d,e=[],f=function(a,b){b=ia.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ia.ajaxSettings&&ia.ajaxSettings.traditional),ia.isArray(a)||a.jquery&&!ia.isPlainObject(a))ia.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zb,"+")},ia.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ia.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ia.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Eb,Fb,Gb=ia.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ia.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=W.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ia.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ia.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ia.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ia("<div>").append(ia.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ia.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ia.fn[b]=function(a){return this.on(b,a)}}),ia.each(["get","post"],function(a,c){ia[c]=function(a,d,e,f){return ia.isFunction(d)&&(f=f||e,e=d,d=b),ia.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ia.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ia.parseJSON,"text xml":ia.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ia.ajaxSettings),b):G(ia.ajaxSettings,a)},ajaxPrefilter:E(Qb),ajaxTransport:E(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ia.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ia.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ia.active||ia.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ia.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ia(n):ia.event,p=ia.Deferred(),q=ia.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ia.trim(m.dataType||"*").toLowerCase().match(ka)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?80:443))==(Eb[3]||("http:"===Eb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ia.param(m.data,m.traditional)),F(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ia.active++&&ia.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ia.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ia.lastModified[g]),ia.etag[g]&&w.setRequestHeader("If-None-Match",ia.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ia.get(a,b,c,"script")},getJSON:function(a,b,c){return ia.get(a,b,c,"json")}}),ia.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ia.globalEval(a),a}}}),ia.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ia.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ia("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ia.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ia.expando+"_"+Gb++;return this[a]=!0,a}}),ia.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ia.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ia.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ia.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ia.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xb=ia.ajaxSettings.xhr(),ia.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ia.support.ajax=!!Xb,Xb&&ia.ajaxTransport(function(c){if(!c.crossDomain||ia.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ia.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ia(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+ja+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[P],ec={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ia.cssNumber[a]?"":"px"),"px"!==d&&h){h=ia.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ia.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ia.Animation=ia.extend(N,{tweener:function(a,b){ia.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ia.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ia.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.options.duration?this.pos=b=ia.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ia.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ia.fx.step[a.prop]?ia.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ia.cssProps[a.prop]]||ia.cssHooks[a.prop])?ia.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ia.each(["toggle","show","hide"],function(a,b){var c=ia.fn[b];ia.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ia.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ia.isEmptyObject(a),f=ia.speed(b,c,d),g=function(){var b=N(this,ia.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ia._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ia.timers,g=ia._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ia.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ia._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ia.timers,g=d?d.length:0;for(c.finish=!0,ia.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ia.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ia.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ia.speed=function(a,b,c){var d=a&&"object"==typeof a?ia.extend({},a):{complete:c||!c&&b||ia.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ia.isFunction(b)&&b};return d.duration=ia.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ia.fx.speeds?ia.fx.speeds[d.duration]:ia.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ia.isFunction(d.old)&&d.old.call(this),d.queue&&ia.dequeue(this,d.queue)},d},ia.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ia.timers=[],ia.fx=Q.prototype.init,ia.fx.tick=function(){var a,c=ia.timers,d=0;for($b=ia.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ia.fx.stop(),$b=b},ia.fx.timer=function(a){a()&&ia.timers.push(a)&&ia.fx.start()},ia.fx.interval=13,ia.fx.start=function(){_b||(_b=setInterval(ia.fx.tick,ia.fx.interval))},ia.fx.stop=function(){clearInterval(_b),_b=null},ia.fx.speeds={slow:600,fast:200,_default:400},ia.fx.step={},ia.expr&&ia.expr.filters&&(ia.expr.filters.animated=function(a){return ia.grep(ia.timers,function(b){return a===b.elem}).length}),ia.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ia.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ia.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ia.offset={setOffset:function(a,b,c){var d=ia.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ia(a),h=g.offset(),i=ia.css(a,"top"),j=ia.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ia.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ia.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ia.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ia.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ia.nodeName(a[0],"html")||(c=a.offset()),c.top+=ia.css(a[0],"borderTopWidth",!0),c.left+=ia.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ia.css(d,"marginTop",!0),left:b.left-c.left-ia.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ia.nodeName(a,"html")&&"static"===ia.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ia.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ia.fn[a]=function(e){return ia.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ia(g).scrollLeft():f,d?f:ia(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ia.each({Height:"height",Width:"width"},function(a,c){ia.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ia.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ia.access(this,function(c,d,e){var f;return ia.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ia.css(c,d,h):ia.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ia,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ia})}(window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0;
})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(a,b){"undefined"!=typeof exports?b(a,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.0",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=!0);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e],g=i instanceof m?h=i:i[n.prototype.idAttribute],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),h.on("all",this._onModelEvent,this),this._byId[h.cid]=h,null!=h.id&&(this._byId[h.id]=h)}x&&x.push(j||h)}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d]);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a.id]||this._byId[a.cid]||this._byId[a]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,b,c){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);e&&e.apply(f,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/]+)"}).replace(B,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a){return a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/[?#].*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(d)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var g=this.location,h=g.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a){var b="undefined";!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define("loglevel",b):this[a]=b()}("log",function(){function c(c){return typeof console===b?l:console[c]===a?console.log!==a?d(console,"log"):l:d(console,c)}function d(b,c){var d=b[c];if(d.bind!==a)return b[c].bind(b);if(Function.prototype.bind===a)return e(d,b);try{return Function.prototype.bind.call(b[c],b)}catch(f){return e(d,b)}}function e(a,b){return function(){Function.prototype.apply.apply(a,[b,arguments])}}function f(a){for(var b=0;b<m.length;b++)k[m[b]]=a(m[b])}function g(){return typeof window!==b&&window.document!==a&&window.document.cookie!==a}function h(){try{return typeof window!==b&&window.localStorage!==a}catch(c){return!1}}function i(a){var b;for(var c in k.levels)if(k.levels.hasOwnProperty(c)&&k.levels[c]===a){b=c;break}if(h())window.localStorage.loglevel=b;else{if(!g())return;window.document.cookie="loglevel="+b+";"}}function j(){var a;if(h()&&(a=window.localStorage.loglevel),!a&&g()){var b=n.exec(window.document.cookie)||[];a=b[1]}k.setLevel(k.levels[a]||k.levels.WARN)}var k={},l=function(){},m=["trace","debug","info","warn","error"],n=/loglevel=([^;]+)/;return k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.setLevel=function(d){if("number"==typeof d&&d>=0&&d<=k.levels.SILENT){if(i(d),d===k.levels.SILENT)return void f(function(){return l});if(typeof console===b)return f(function(a){return function(){typeof console!==b&&(k.setLevel(d),k[a].apply(k,arguments))}}),"No console available for logging";f(function(a){return d<=k.levels[a.toUpperCase()]?c(a):l})}else{if("string"!=typeof d||k.levels[d.toUpperCase()]===a)throw"log.setLevel() called with invalid level: "+d;k.setLevel(k.levels[d.toUpperCase()])}},k.enableAll=function(){k.setLevel(k.levels.TRACE)},k.disableAll=function(){k.setLevel(k.levels.SILENT)},j(),k})}(),function(){var a=this,b=a.humanize,c={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.humanize=c):("function"==typeof define&&define.amd&&define("humanize",[],function(){return c}),a.humanize=c),c.noConflict=function(){return a.humanize=b,
this},c.pad=function(a,b,c,d){if(a+="",c?c.length>1&&(c=c.charAt(0)):c=" ",d=void 0===d?"left":"right","right"===d)for(;a.length<b;)a+=c;else for(;a.length<b;)a=c+a;return a},c.time=function(){return(new Date).getTime()/1e3};var d=[0,0,31,59,90,120,151,181,212,243,273,304,334],e=[0,0,31,60,91,121,152,182,213,244,274,305,335];c.date=function(a,b){var f=void 0===b?new Date:b instanceof Date?new Date(b):new Date(1e3*b),g=/\\?([a-z])/gi,h=function(a,b){return k[a]?k[a]():b},i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"],k={d:function(){return c.pad(k.j(),2,"0")},D:function(){return k.l().slice(0,3)},j:function(){return f.getDate()},l:function(){return i[k.w()]},N:function(){return k.w()||7},S:function(){var a=k.j();return a>4&&21>a?"th":{1:"st",2:"nd",3:"rd"}[a%10]||"th"},w:function(){return f.getDay()},z:function(){return(k.L()?e[k.n()]:d[k.n()])+k.j()-1},W:function(){var a=k.z()-k.N()+1.5;return c.pad(1+Math.floor(Math.abs(a)/7)+(a%7>3.5?1:0),2,"0")},F:function(){return j[f.getMonth()]},m:function(){return c.pad(k.n(),2,"0")},M:function(){return k.F().slice(0,3)},n:function(){return f.getMonth()+1},t:function(){return new Date(k.Y(),k.n(),0).getDate()},L:function(){return 1===new Date(k.Y(),1,29).getMonth()?1:0},o:function(){var a=k.n(),b=k.W();return k.Y()+(12===a&&9>b?-1:1===a&&b>9)},Y:function(){return f.getFullYear()},y:function(){return String(k.Y()).slice(-2)},a:function(){return f.getHours()>11?"pm":"am"},A:function(){return k.a().toUpperCase()},B:function(){var a=f.getTime()/1e3,b=a%86400+3600;0>b&&(b+=86400);var c=b/86.4%1e3;return 0>a?Math.ceil(c):Math.floor(c)},g:function(){return k.G()%12||12},G:function(){return f.getHours()},h:function(){return c.pad(k.g(),2,"0")},H:function(){return c.pad(k.G(),2,"0")},i:function(){return c.pad(f.getMinutes(),2,"0")},s:function(){return c.pad(f.getSeconds(),2,"0")},u:function(){return c.pad(1e3*f.getMilliseconds(),6,"0")},O:function(){var a=f.getTimezoneOffset(),b=Math.abs(a);return(a>0?"-":"+")+c.pad(100*Math.floor(b/60)+b%60,4,"0")},P:function(){var a=k.O();return a.substr(0,3)+":"+a.substr(3,2)},Z:function(){return 60*-f.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(g,h)},r:function(){return"D, d M Y H:i:s O".replace(g,h)},U:function(){return f.getTime()/1e3||0}};return a.replace(g,h)},c.numberFormat=function(a,b,c,d){b=isNaN(b)?2:Math.abs(b),c=void 0===c?".":c,d=void 0===d?",":d;var e=0>a?"-":"";a=Math.abs(+a||0);var f=parseInt(a.toFixed(b),10)+"",g=f.length>3?f.length%3:0;return e+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")},c.naturalDay=function(a,b){a=void 0===a?c.time():a,b=void 0===b?"Y-m-d":b;var d=86400,e=new Date,f=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3;return f>a&&a>=f-d?"yesterday":a>=f&&f+d>a?"today":a>=f+d&&f+2*d>a?"tomorrow":c.date(b,a)},c.catalog={just_now:"just now",now:"now",seconds_ago:" seconds ago","in":"in ",seconds:" seconds",about_a_minute_ago:"about a minute ago",in_about_a_minute:"in about a minute",minutes_ago:" minutes ago",minutes:" minutes",about_an_hour_ago:"about an hour ago",in_about_an_hour:"in about an hour",hours_ago:" hours ago",hours:" hours",one_day_ago:"1 day ago",in_1_day:"in 1 day",days_ago:" days ago",days:" days",about_a_month_ago:"about a month ago",in_about_a_month:"in about a month",months_ago:" months ago",months:" months",a_year_ago:" a year ago",in_a_year:"in a year",years_ago:" years ago",years:" years"},c.relativeTime=function(a){a=void 0===a?c.time():a;var b=c.time(),d=b-a;if(2>d&&d>-2)return d>=0?c.catalog.just_now:c.catalog.now;if(60>d&&d>-60)return d>=0?Math.floor(d)+c.catalog.seconds_ago:c.catalog["in"]+Math.floor(-d)+c.catalog.seconds;if(120>d&&d>-120)return d>=0?c.catalog.about_a_minute_ago:c.catalog.in_about_a_minute;if(3600>d&&d>-3600)return d>=0?Math.floor(d/60)+c.catalog.minutes_ago:c.catalog["in"]+Math.floor(-d/60)+c.catalog.minutes;if(7200>d&&d>-7200)return d>=0?c.catalog.about_an_hour_ago:c.catalog.in_about_an_hour;if(86400>d&&d>-86400)return d>=0?Math.floor(d/3600)+c.catalog.hours_ago:c.catalog["in"]+Math.floor(-d/3600)+c.catalog.hours;var e=172800;if(e>d&&d>-e)return d>=0?c.catalog.one_day_ago:c.catalog.in_1_day;var f=2505600;if(f>d&&d>-f)return d>=0?Math.floor(d/86400)+c.catalog.days_ago:c.catalog["in"]+Math.floor(-d/86400)+c.catalog.days;var g=5184e3;if(g>d&&d>-g)return d>=0?c.catalog.about_a_month_ago:c.catalog.in_about_a_month;var h=parseInt(c.date("Y",b),10),i=parseInt(c.date("Y",a),10),j=12*h+parseInt(c.date("n",b),10),k=12*i+parseInt(c.date("n",a),10),l=j-k;if(12>l&&l>-12)return l>=0?l+c.catalog.months_ago:c.catalog["in"]+-l+c.catalog.months;var m=h-i;return 2>m&&m>-2?m>=0?c.catalog.a_year_ago:c.catalog.in_a_year:m>=0?m+c.catalog.years_ago:c.catalog["in"]+-m+c.catalog.years},c.ordinal=function(a){a=parseInt(a,10),a=isNaN(a)?0:a;var b=0>a?"-":"";a=Math.abs(a);var c=a%100;return b+a+(c>4&&21>c?"th":{1:"st",2:"nd",3:"rd"}[a%10]||"th")},c.filesize=function(a,b,d,e,f){if(b=void 0===b?1024:b,d=isNaN(d)?2:Math.abs(d),e=void 0===e?".":e,f=void 0===f?",":f,0>=a)return"0 bytes";var g=[1],h=["bytes","Kb","Mb","Gb","Tb","Pb"];if(b>a)return c.numberFormat(a,0)+" "+h[0];for(var i=1;i<h.length;i++)if(g[i]=g[i-1]*b,a<g[i])return c.numberFormat(a/g[i-1],d,e,f)+" "+h[i-1];return c.numberFormat(a/g[h.length-1],d,e,f)+" "+h[h.length-1]},c.linebreaks=function(a){return a=a.replace(/^([\n|\r]*)/,""),a=a.replace(/([\n|\r]*)$/,""),a=a.replace(/(\r\n|\n|\r)/g,"\n"),a=a.replace(/(\n{2,})/g,"</p><p>"),a=a.replace(/\n/g,"<br />"),"<p>"+a+"</p>"},c.nl2br=function(a){return a.replace(/(\r\n|\n|\r)/g,"<br />")},c.truncatechars=function(a,b){return a.length<=b?a:a.substr(0,b)+"…"},c.truncatewords=function(a,b){var c=a.split(" ");return c.length<b?a:c.slice(0,b).join(" ")+"…"}}.call(this),function(a){var b,c,d="0.3.4",e="hasOwnProperty",f=/[\.\/]/,g="*",h=function(){},i=function(a,b){return a-b},j={n:{}},k=function(a,d){var e,f=c,g=Array.prototype.slice.call(arguments,2),h=k.listeners(a),j=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=h.length;q>p;p++)"zIndex"in h[p]&&(l.push(h[p].zIndex),h[p].zIndex<0&&(m[h[p].zIndex]=h[p]));for(l.sort(i);l[j]<0;)if(e=m[l[j++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if(e=h[p],"zIndex"in e)if(e.zIndex==l[j]){if(n.push(e.apply(d,g)),c)break;do if(j++,e=m[l[j]],e&&n.push(e.apply(d,g)),c)break;while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};k.listeners=function(a){var b,c,d,e,h,i,k,l,m=a.split(f),n=j,o=[n],p=[];for(e=0,h=m.length;h>e;e++){for(l=[],i=0,k=o.length;k>i;i++)for(n=o[i].n,c=[n[m[e]],n[g]],d=2;d--;)b=c[d],b&&(l.push(b),p=p.concat(b.f||[]));o=l}return p},k.on=function(a,b){for(var c=a.split(f),d=j,e=0,g=c.length;g>e;e++)d=d.n,!d[c[e]]&&(d[c[e]]={n:{}}),d=d[c[e]];for(d.f=d.f||[],e=0,g=d.f.length;g>e;e++)if(d.f[e]==b)return h;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){c=1},k.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},k.off=k.unbind=function(a,b){var c,d,h,i,k,l,m,n=a.split(f),o=[j];for(i=0,k=n.length;k>i;i++)for(l=0;l<o.length;l+=h.length-2){if(h=[l,1],c=o[l].n,n[i]!=g)c[n[i]]&&h.push(c[n[i]]);else for(d in c)c[e](d)&&h.push(c[d]);o.splice.apply(o,h)}for(i=0,k=o.length;k>i;i++)for(c=o[i];c.n;){if(b){if(c.f){for(l=0,m=c.f.length;m>l;l++)if(c.f[l]==b){c.f.splice(l,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var p=c.n[d].f;for(l=0,m=p.length;m>l;l++)if(p[l]==b){p.splice(l,1);break}!p.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);return k.unbind(a,c),d};return k.on(a,c)},k.version=d,k.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(this),define("raphael",["eve"],function(a){function b(c){if(b.is(c,"function"))return t?c():a.on("raphael.DOMload",c);if(b.is(c,U))return b._engine.create[C](b,c.splice(0,3+b.is(c[0],S))).add(c);var d=Array.prototype.slice.call(arguments,0);if(b.is(d[d.length-1],"function")){var e=d.pop();return t?e.call(b._engine.create[C](b,d)):a.on("raphael.DOMload",function(){e.call(b._engine.create[C](b,d))})}return b._engine.create[C](b,arguments)}function c(a){if(Object(a)!==a)return a;var b=new a.constructor;for(var d in a)a[y](d)&&(b[d]=c(a[d]));return b}function d(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function e(a,b,c){function e(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=e.cache=e.cache||{},i=e.count=e.count||[];return h[y](g)?(d(i,g),c?c(h[g]):h[g]):(i.length>=1e3&&delete h[i.shift()],i.push(g),h[g]=a[C](b,f),c?c(h[g]):h[g])}return e}function f(){return this.hex}function g(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function h(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function i(a,b,c,d,e,f,g,i,j){null==j&&(j=1),j=j>1?1:0>j?0:j;for(var k=j/2,l=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0,p=0;l>p;p++){var q=k*m[p]+k,r=h(q,a,c,e,g),s=h(q,b,d,f,i),t=r*r+s*s;o+=n[p]*M.sqrt(t)}return k*o}function j(a,b,c,d,e,f,g,h,j){if(!(0>j||i(a,b,c,d,e,f,g,h)<j)){var k,l=1,m=l/2,n=l-m,o=.01;for(k=i(a,b,c,d,e,f,g,h,n);P(k-j)>o;)m/=2,n+=(j>k?1:-1)*m,k=i(a,b,c,d,e,f,g,h,n);return n}}function k(a,b,c,d,e,f,g,h){if(!(N(a,c)<O(e,g)||O(a,c)>N(e,g)||N(b,d)<O(f,h)||O(b,d)>N(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(k){var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(!(n<+O(a,c).toFixed(2)||n>+N(a,c).toFixed(2)||n<+O(e,g).toFixed(2)||n>+N(e,g).toFixed(2)||o<+O(b,d).toFixed(2)||o>+N(b,d).toFixed(2)||o<+O(f,h).toFixed(2)||o>+N(f,h).toFixed(2)))return{x:l,y:m}}}}function l(a,c,d){var e=b.bezierBBox(a),f=b.bezierBBox(c);if(!b.isBBoxIntersect(e,f))return d?0:[];for(var g=i.apply(0,a),h=i.apply(0,c),j=~~(g/5),l=~~(h/5),m=[],n=[],o={},p=d?0:[],q=0;j+1>q;q++){var r=b.findDotsAtSegment.apply(b,a.concat(q/j));m.push({x:r.x,y:r.y,t:q/j})}for(q=0;l+1>q;q++)r=b.findDotsAtSegment.apply(b,c.concat(q/l)),n.push({x:r.x,y:r.y,t:q/l});for(q=0;j>q;q++)for(var s=0;l>s;s++){var t=m[q],u=m[q+1],v=n[s],w=n[s+1],x=P(u.x-t.x)<.001?"y":"x",y=P(w.x-v.x)<.001?"y":"x",z=k(t.x,t.y,u.x,u.y,v.x,v.y,w.x,w.y);if(z){if(o[z.x.toFixed(4)]==z.y.toFixed(4))continue;o[z.x.toFixed(4)]=z.y.toFixed(4);var A=t.t+P((z[x]-t[x])/(u[x]-t[x]))*(u.t-t.t),B=v.t+P((z[y]-v[y])/(w[y]-v[y]))*(w.t-v.t);A>=0&&1>=A&&B>=0&&1>=B&&(d?p++:p.push({x:z.x,y:z.y,t1:A,t2:B}))}}return p}function m(a,c,d){a=b._path2curve(a),c=b._path2curve(c);for(var e,f,g,h,i,j,k,m,n,o,p=d?0:[],q=0,r=a.length;r>q;q++){var s=a[q];if("M"==s[0])e=i=s[1],f=j=s[2];else{"C"==s[0]?(n=[e,f].concat(s.slice(1)),e=n[6],f=n[7]):(n=[e,f,e,f,i,j,i,j],e=i,f=j);for(var t=0,u=c.length;u>t;t++){var v=c[t];if("M"==v[0])g=k=v[1],h=m=v[2];else{"C"==v[0]?(o=[g,h].concat(v.slice(1)),g=o[6],h=o[7]):(o=[g,h,g,h,k,m,k,m],g=k,h=m);var w=l(n,o,d);if(d)p+=w;else{for(var x=0,y=w.length;y>x;x++)w[x].segment1=q,w[x].segment2=t,w[x].bez1=n,w[x].bez2=o;p=p.concat(w)}}}}}return p}function n(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function o(){return this.x+G+this.y+G+this.width+" × "+this.height}function p(a,b,c,d,e,f){function g(a){return((l*a+k)*a+j)*a}function h(a,b){var c=i(a,b);return((o*c+n)*c+m)*c}function i(a,b){var c,d,e,f,h,i;for(e=a,i=0;8>i;i++){if(f=g(e)-a,P(f)<b)return e;if(h=(3*l*e+2*k)*e+j,P(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),P(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function q(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[y](e)&&(d[$(e)]=a[e],c.push($(e)));c.sort(ka)}this.anim=d,this.top=c[c.length-1],this.percents=c}function r(c,d,e,f,g,h){e=$(e);var i,j,k,l,m,o,q=c.ms,r={},s={},t={};if(f)for(w=0,x=gb.length;x>w;w++){var u=gb[w];if(u.el.id==d.id&&u.anim==c){u.percent!=e?(gb.splice(w,1),k=1):j=u,d.attr(u.totalOrigin);break}}else f=+s;for(var w=0,x=c.percents.length;x>w;w++){if(c.percents[w]==e||c.percents[w]>f*c.top){e=c.percents[w],m=c.percents[w-1]||0,q=q/c.top*(e-m),l=c.percents[w+1],i=c.anim[e];break}f&&d.attr(c.anim[c.percents[w]])}if(i){if(j)j.initstatus=f,j.start=new Date-j.ms*f;else{for(var z in i)if(i[y](z)&&(ca[y](z)||d.paper.customAttributes[y](z)))switch(r[z]=d.attr(z),null==r[z]&&(r[z]=ba[z]),s[z]=i[z],ca[z]){case S:t[z]=(s[z]-r[z])/q;break;case"colour":r[z]=b.getRGB(r[z]);var A=b.getRGB(s[z]);t[z]={r:(A.r-r[z].r)/q,g:(A.g-r[z].g)/q,b:(A.b-r[z].b)/q};break;case"path":var B=Ja(r[z],s[z]),C=B[1];for(r[z]=B[0],t[z]=[],w=0,x=r[z].length;x>w;w++){t[z][w]=[0];for(var E=1,F=r[z][w].length;F>E;E++)t[z][w][E]=(C[w][E]-r[z][w][E])/q}break;case"transform":var G=d._,J=Oa(G[z],s[z]);if(J)for(r[z]=J.from,s[z]=J.to,t[z]=[],t[z].real=!0,w=0,x=r[z].length;x>w;w++)for(t[z][w]=[r[z][w][0]],E=1,F=r[z][w].length;F>E;E++)t[z][w][E]=(s[z][w][E]-r[z][w][E])/q;else{var K=d.matrix||new n,L={_:{transform:G.transform},getBBox:function(){return d.getBBox(1)}};r[z]=[K.a,K.b,K.c,K.d,K.e,K.f],Ma(L,s[z]),s[z]=L._.transform,t[z]=[(L.matrix.a-K.a)/q,(L.matrix.b-K.b)/q,(L.matrix.c-K.c)/q,(L.matrix.d-K.d)/q,(L.matrix.e-K.e)/q,(L.matrix.f-K.f)/q]}break;case"csv":var M=H(i[z])[I](v),N=H(r[z])[I](v);if("clip-rect"==z)for(r[z]=N,t[z]=[],w=N.length;w--;)t[z][w]=(M[w]-r[z][w])/q;s[z]=M;break;default:for(M=[][D](i[z]),N=[][D](r[z]),t[z]=[],w=d.paper.customAttributes[z].length;w--;)t[z][w]=((M[w]||0)-(N[w]||0))/q}var O=i.easing,P=b.easing_formulas[O];if(!P)if(P=H(O).match(Y),P&&5==P.length){var Q=P;P=function(a){return p(a,+Q[1],+Q[2],+Q[3],+Q[4],q)}}else P=ma;if(o=i.start||c.start||+new Date,u={anim:c,percent:e,timestamp:o,start:o+(c.del||0),status:0,initstatus:f||0,stop:!1,ms:q,easing:P,from:r,diff:t,to:s,el:d,callback:i.callback,prev:m,next:l,repeat:h||c.times,origin:d.attr(),totalOrigin:g},gb.push(u),f&&!j&&!k&&(u.stop=!0,u.start=new Date-q*f,1==gb.length))return ib();k&&(u.start=new Date-u.ms*f),1==gb.length&&hb(ib)}a("raphael.anim.start."+d.id,d,c)}}function s(a){for(var b=0;b<gb.length;b++)gb[b].el.paper==a&&gb.splice(b--,1)}b.version="2.1.0",b.eve=a;var t,u,v=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},x=/\{(\d+)\}/g,y="hasOwnProperty",z={doc:document,win:window},A={was:Object.prototype[y].call(z.win,"Raphael"),is:z.win.Raphael},B=function(){this.ca=this.customAttributes={}},C="apply",D="concat",E="createTouch"in z.doc,F="",G=" ",H=String,I="split",J="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](G),K={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},L=H.prototype.toLowerCase,M=Math,N=M.max,O=M.min,P=M.abs,Q=M.pow,R=M.PI,S="number",T="string",U="array",V=Object.prototype.toString,W=(b._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},Y=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Z=M.round,$=parseFloat,_=parseInt,aa=H.prototype.toUpperCase,ba=b._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ca=b._availableAnimAttrs={blur:S,"clip-rect":"csv",cx:S,cy:S,fill:"colour","fill-opacity":S,"font-size":S,height:S,opacity:S,path:"path",r:S,rx:S,ry:S,stroke:"colour","stroke-opacity":S,"stroke-width":S,transform:"transform",width:S,x:S,y:S},da=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ea={hs:1,rg:1},fa=/,?([achlmqrstvxz]),?/gi,ga=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ha=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ia=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ja=(b._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ka=function(a,b){return $(a)-$(b)},la=function(){},ma=function(a){return a},na=b._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},oa=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},pa=b._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return oa(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return oa(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return na(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return na(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return na(b.x,b.y,b.width,b.height)}},qa=b.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=Ja(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(b._g=z,b.type=z.win.SVGAngle||z.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==b.type){var ra,sa=z.doc.createElement("div");if(sa.innerHTML='<v:shape adj="1"/>',ra=sa.firstChild,ra.style.behavior="url(#default#VML)",!ra||"object"!=typeof ra.adj)return b.type=F;sa=null}b.svg=!(b.vml="VML"==b.type),b._Paper=B,b.fn=u=B.prototype=b.prototype,b._id=0,b._oid=0,b.is=function(a,b){return b=L.call(b),"finite"==b?!X[y](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||V.call(a).slice(8,-1).toLowerCase()==b},b.angle=function(a,c,d,e,f,g){if(null==f){var h=a-d,i=c-e;return h||i?(180+180*M.atan2(-i,-h)/R+360)%360:0}return b.angle(a,c,f,g)-b.angle(d,e,f,g)},b.rad=function(a){return a%360*R/180},b.deg=function(a){return 180*a/R%360},b.snapTo=function(a,c,d){if(d=b.is(d,"finite")?d:10,b.is(a,U)){for(var e=a.length;e--;)if(P(a[e]-c)<=d)return a[e]}else{a=+a;var f=c%a;if(d>f)return c-f;if(f>a-d)return c-f+a}return c};b.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=16*M.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});b.setWindow=function(c){a("raphael.setWindow",b,z.win,c),z.win=c,z.doc=z.win.document,b._engine.initWin&&b._engine.initWin(z.win)};var ta=function(a){if(b.vml){var c,d=/^\s+|\s+$/g;try{var f=new ActiveXObject("htmlfile");f.write("<body>"),f.close(),c=f.body}catch(g){c=createPopup().document.body}var h=c.createTextRange();ta=e(function(a){try{c.style.color=H(a).replace(d,F);var b=h.queryCommandValue("ForeColor");return b=(255&b)<<16|65280&b|(16711680&b)>>>16,"#"+("000000"+b.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=z.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",z.doc.body.appendChild(i),ta=e(function(a){return i.style.color=a,z.doc.defaultView.getComputedStyle(i,F).getPropertyValue("color")})}return ta(a)},ua=function(){return"hsb("+[this.h,this.s,this.b]+")"},va=function(){return"hsl("+[this.h,this.s,this.l]+")"},wa=function(){return this.hex},xa=function(a,c,d){if(null==c&&b.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(d=a.b,c=a.g,a=a.r),null==c&&b.is(a,T)){var e=b.getRGB(a);a=e.r,c=e.g,d=e.b}return(a>1||c>1||d>1)&&(a/=255,c/=255,d/=255),[a,c,d]},ya=function(a,c,d,e){a*=255,c*=255,d*=255;var f={r:a,g:c,b:d,hex:b.rgb(a,c,d),toString:wa};return b.is(e,"finite")&&(f.opacity=e),f};b.color=function(a){var c;return b.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(c=b.hsb2rgb(a),a.r=c.r,a.g=c.g,a.b=c.b,a.hex=c.hex):b.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(c=b.hsl2rgb(a),a.r=c.r,a.g=c.g,a.b=c.b,a.hex=c.hex):(b.is(a,"string")&&(a=b.getRGB(a)),b.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(c=b.rgb2hsl(a),a.h=c.h,a.s=c.s,a.l=c.l,c=b.rgb2hsb(a),a.v=c.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=wa,a},b.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-P(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],ya(e,f,g,d)},b.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-P(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],ya(e,f,g,d)},b.rgb2hsb=function(a,b,c){c=xa(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=N(a,b,c),g=f-O(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:ua}},b.rgb2hsl=function(a,b,c){c=xa(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=N(a,b,c),h=O(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:va}},b._path2string=function(){return this.join(",").replace(fa,"$1")};b._preload=function(a,b){var c=z.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,z.doc.body.removeChild(this)},c.onerror=function(){z.doc.body.removeChild(this)},z.doc.body.appendChild(c),c.src=a};b.getRGB=e(function(a){if(!a||(a=H(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!(ea[y](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=ta(a));var c,d,e,g,h,i,j=a.match(W);return j?(j[2]&&(e=_(j[2].substring(5),16),d=_(j[2].substring(3,5),16),c=_(j[2].substring(1,3),16)),j[3]&&(e=_((h=j[3].charAt(3))+h,16),d=_((h=j[3].charAt(2))+h,16),c=_((h=j[3].charAt(1))+h,16)),j[4]&&(i=j[4][I](da),c=$(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=$(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=$(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),"rgba"==j[1].toLowerCase().slice(0,4)&&(g=$(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100)),j[5]?(i=j[5][I](da),c=$(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=$(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=$(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(c/=360),"hsba"==j[1].toLowerCase().slice(0,4)&&(g=$(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100),b.hsb2rgb(c,d,e,g)):j[6]?(i=j[6][I](da),c=$(i[0]),"%"==i[0].slice(-1)&&(c*=2.55),d=$(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=$(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(c/=360),"hsla"==j[1].toLowerCase().slice(0,4)&&(g=$(i[3])),i[3]&&"%"==i[3].slice(-1)&&(g/=100),b.hsl2rgb(c,d,e,g)):(j={r:c,g:d,b:e,toString:f},j.hex="#"+(16777216|e|d<<8|c<<16).toString(16).slice(1),b.is(g,"finite")&&(j.opacity=g),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},b),b.hsb=e(function(a,c,d){return b.hsb2rgb(a,c,d).hex}),b.hsl=e(function(a,c,d){return b.hsl2rgb(a,c,d).hex}),b.rgb=e(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),b.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},b.getColor.reset=function(){delete this.start},b.parsePathString=function(a){if(!a)return null;var c=za(a);if(c.arr)return Ba(c.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return b.is(a,U)&&b.is(a[0],U)&&(e=Ba(a)),e.length||H(a).replace(ga,function(a,b,c){var f=[],g=b.toLowerCase();if(c.replace(ia,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(e.push([b][D](f.splice(0,2))),g="l",b="m"==b?"l":"L"),"r"==g)e.push([b][D](f));else for(;f.length>=d[g]&&(e.push([b][D](f.splice(0,d[g]))),d[g]););}),e.toString=b._path2string,c.arr=Ba(e),e},b.parseTransformString=e(function(a){if(!a)return null;var c=[];return b.is(a,U)&&b.is(a[0],U)&&(c=Ba(a)),c.length||H(a).replace(ha,function(a,b,d){var e=[];L.call(b);d.replace(ia,function(a,b){b&&e.push(+b)}),c.push([b][D](e))}),c.toString=b._path2string,c});var za=function(a){var b=za.ps=za.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[y](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}),b[a]};b.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=Q(j,3),l=Q(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*M.atan2(q-s,r-t)/R;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},b.bezierBBox=function(a,c,d,e,f,g,h,i){b.is(a,"array")||(a=[a,c,d,e,f,g,h,i]);var j=Ia.apply(null,a);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},b.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},b.isBBoxIntersect=function(a,c){var d=b.isPointInsideBBox;return d(c,a.x,a.y)||d(c,a.x2,a.y)||d(c,a.x,a.y2)||d(c,a.x2,a.y2)||d(a,c.x,c.y)||d(a,c.x2,c.y)||d(a,c.x,c.y2)||d(a,c.x2,c.y2)||(a.x<c.x2&&a.x>c.x||c.x<a.x2&&c.x>a.x)&&(a.y<c.y2&&a.y>c.y||c.y<a.y2&&c.y>a.y)},b.pathIntersection=function(a,b){return m(a,b)},b.pathIntersectionNumber=function(a,b){return m(a,b,1)},b.isPointInsidePath=function(a,c,d){var e=b.pathBBox(a);return b.isPointInsideBBox(e,c,d)&&m(a,[["M",c,d],["H",e.x2+10]],1)%2==1},b._removedFactory=function(b){return function(){a("raphael.log",null,"Raphaël: you are calling to method “"+b+"” of removed object",b)}};var Aa=b.pathBBox=function(a){var b=za(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Ja(a);for(var d,e=0,f=0,g=[],h=[],i=0,j=a.length;j>i;i++)if(d=a[i],"M"==d[0])e=d[1],f=d[2],g.push(e),h.push(f);else{var k=Ia(e,f,d[1],d[2],d[3],d[4],d[5],d[6]);g=g[D](k.min.x,k.max.x),h=h[D](k.min.y,k.max.y),e=d[5],f=d[6]}var l=O[C](0,g),m=O[C](0,h),n=N[C](0,g),o=N[C](0,h),p={x:l,y:m,x2:n,y2:o,width:n-l,height:o-m};return b.bbox=c(p),p},Ba=function(a){var d=c(a);return d.toString=b._path2string,d},Ca=b._pathToRelative=function(a){var c=za(a);if(c.rel)return Ba(c.rel);b.is(a,U)&&b.is(a&&a[0],U)||(a=b.parsePathString(a));var d=[],e=0,f=0,g=0,h=0,i=0;"M"==a[0][0]&&(e=a[0][1],f=a[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=a.length;k>j;j++){var l=d[j]=[],m=a[j];if(m[0]!=L.call(m[0]))switch(l[0]=L.call(m[0]),l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;o>n;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}else{l=d[j]=[],"m"==m[0]&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;q>p;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}return d.toString=b._path2string,c.rel=Ba(d),d},Da=b._pathToAbsolute=function(a){var c=za(a);if(c.abs)return Ba(c.abs);if(b.is(a,U)&&b.is(a&&a[0],U)||(a=b.parsePathString(a)),!a||!a.length)return[["M",0,0]];var d=[],e=0,f=0,h=0,i=0,j=0;"M"==a[0][0]&&(e=+a[0][1],f=+a[0][2],h=e,i=f,j++,d[0]=["M",e,f]);for(var k,l,m=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),n=j,o=a.length;o>n;n++){if(d.push(k=[]),l=a[n],l[0]!=aa.call(l[0]))switch(k[0]=aa.call(l[0]),k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":for(var p=[e,f][D](l.slice(1)),q=2,r=p.length;r>q;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[D](g(p,m));break;case"M":h=+l[1]+e,i=+l[2]+f;default:for(q=1,r=l.length;r>q;q++)k[q]=+l[q]+(q%2?e:f)}else if("R"==l[0])p=[e,f][D](l.slice(1)),d.pop(),d=d[D](g(p,m)),k=["R"][D](l.slice(-2));else for(var s=0,t=l.length;t>s;s++)k[s]=l[s];switch(k[0]){case"Z":e=h,f=i;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":h=k[k.length-2],i=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}return d.toString=b._path2string,c.abs=Ba(d),d},Ea=function(a,b,c,d){return[a,b,c,d,c,d]},Fa=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Ga=function(a,b,c,d,f,g,h,i,j,k){var l,m=120*R/180,n=R/180*(+f||0),o=[],p=e(function(a,b,c){var d=a*M.cos(c)-b*M.sin(c),e=a*M.sin(c)+b*M.cos(c);return{x:d,y:e}});if(k)y=k[0],z=k[1],w=k[2],x=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(M.cos(R/180*f),M.sin(R/180*f),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(d*d);s>1&&(s=M.sqrt(s),c=s*c,d=s*d);var t=c*c,u=d*d,v=(g==h?-1:1)*M.sqrt(P((t*u-t*r*r-u*q*q)/(t*r*r+u*q*q))),w=v*c*r/d+(a+i)/2,x=v*-d*q/c+(b+j)/2,y=M.asin(((b-x)/d).toFixed(9)),z=M.asin(((j-x)/d).toFixed(9));y=w>a?R-y:y,z=w>i?R-z:z,0>y&&(y=2*R+y),0>z&&(z=2*R+z),h&&y>z&&(y-=2*R),!h&&z>y&&(z-=2*R)}var A=z-y;if(P(A)>m){var B=z,C=i,E=j;z=y+m*(h&&z>y?1:-1),i=w+c*M.cos(z),j=x+d*M.sin(z),o=Ga(i,j,c,d,f,0,h,C,E,[z,B,w,x])}A=z-y;var F=M.cos(y),G=M.sin(y),H=M.cos(z),J=M.sin(z),K=M.tan(A/4),L=4/3*c*K,N=4/3*d*K,O=[a,b],Q=[a+L*G,b-N*F],S=[i+L*J,j-N*H],T=[i,j];if(Q[0]=2*O[0]-Q[0],
Q[1]=2*O[1]-Q[1],k)return[Q,S,T][D](o);o=[Q,S,T][D](o).join()[I](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},Ha=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:Q(j,3)*a+3*Q(j,2)*i*c+3*j*i*i*e+Q(i,3)*g,y:Q(j,3)*b+3*Q(j,2)*i*d+3*j*i*i*f+Q(i,3)*h}},Ia=e(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+M.sqrt(k*k-4*j*l))/2/j,n=(-k-M.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return P(m)>"1e12"&&(m=.5),P(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ha(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ha(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+M.sqrt(k*k-4*j*l))/2/j,n=(-k-M.sqrt(k*k-4*j*l))/2/j,P(m)>"1e12"&&(m=.5),P(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ha(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ha(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:O[C](0,p),y:O[C](0,o)},max:{x:N[C](0,p),y:N[C](0,o)}}}),Ja=b._path2curve=e(function(a,b){var c=!b&&za(a);if(!b&&c.curve)return Ba(c.curve);for(var d=Da(a),e=b&&Da(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][D](Ga[C](0,[b.x,b.y][D](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][D](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][D](Fa(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][D](Fa(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][D](Ea(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][D](Ea(b.x,b.y,a[1],b.y));break;case"V":a=["C"][D](Ea(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][D](Ea(b.x,b.y,b.X,b.Y))}return a}),i=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)a.splice(b++,0,["C"][D](c.splice(0,6)));a.splice(b,1),l=N(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=N(d.length,e&&e.length||0))},k=0,l=N(d.length,e&&e.length||0);l>k;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var m=d[k],n=e&&e[k],o=m.length,p=e&&n.length;f.x=m[o-2],f.y=m[o-1],f.bx=$(m[o-4])||f.x,f.by=$(m[o-3])||f.y,g.bx=e&&($(n[p-4])||g.x),g.by=e&&($(n[p-3])||g.y),g.x=e&&n[p-2],g.y=e&&n[p-1]}return e||(c.curve=Ba(d)),e?[d,e]:d},null,Ba),Ka=(b._parseDots=e(function(a){for(var c=[],d=0,e=a.length;e>d;d++){var f={},g=a[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=b.getRGB(g[1]),f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c.push(f)}for(d=1,e=c.length-1;e>d;d++)if(!c[d].offset){for(var h=$(c[d-1].offset||0),i=0,j=d+1;e>j;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=$(i);for(var k=(i-h)/(j-d+1);j>d;d++)h+=k,c[d].offset=h+"%"}return c}),b._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),La=(b._tofront=function(a,b){b.top!==a&&(Ka(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},b._toback=function(a,b){b.bottom!==a&&(Ka(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},b._insertafter=function(a,b,c){Ka(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},b._insertbefore=function(a,b,c){Ka(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},b.toMatrix=function(a,b){var c=Aa(a),d={_:{transform:F},getBBox:function(){return c}};return Ma(d,b),d.matrix}),Ma=(b.transformPath=function(a,b){return qa(a,La(a,b))},b._extractTransform=function(a,c){if(null==c)return a._.transform;c=H(c).replace(/\.{3}|\u2026/g,a._.transform||F);var d=b.parseTransformString(c),e=0,f=0,g=0,h=1,i=1,j=a._,k=new n;if(j.transform=d||[],d)for(var l=0,m=d.length;m>l;l++){var o,p,q,r,s,t=d[l],u=t.length,v=H(t[0]).toLowerCase(),w=t[0]!=v,x=w?k.invert():0;"t"==v&&3==u?w?(o=x.x(0,0),p=x.y(0,0),q=x.x(t[1],t[2]),r=x.y(t[1],t[2]),k.translate(q-o,r-p)):k.translate(t[1],t[2]):"r"==v?2==u?(s=s||a.getBBox(1),k.rotate(t[1],s.x+s.width/2,s.y+s.height/2),e+=t[1]):4==u&&(w?(q=x.x(t[2],t[3]),r=x.y(t[2],t[3]),k.rotate(t[1],q,r)):k.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==v?2==u||3==u?(s=s||a.getBBox(1),k.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(w?(q=x.x(t[3],t[4]),r=x.y(t[3],t[4]),k.scale(t[1],t[2],q,r)):k.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&k.add(t[1],t[2],t[3],t[4],t[5],t[6]),j.dirtyT=1,a.matrix=k}a.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,1==h&&1==i&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1}),Na=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Oa=b._equaliseTransform=function(a,c){c=H(c).replace(/\.{3}|\u2026/g,a),a=b.parseTransformString(a)||[],c=b.parseTransformString(c)||[];for(var d,e,f,g,h=N(a.length,c.length),i=[],j=[],k=0;h>k;k++){if(f=a[k]||Na(c[k]),g=c[k]||Na(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;for(i[k]=[],j[k]=[],d=0,e=N(f.length,g.length);e>d;d++)d in f&&(i[k][d]=f[d]),d in g&&(j[k][d]=g[d])}return{from:i,to:j}};b._getContainer=function(a,c,d,e){var f;return f=null!=e||b.is(a,"object")?a:z.doc.getElementById(a),null!=f?f.tagName?null==c?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d}:{container:1,x:a,y:c,width:d,height:e}:void 0},b.pathToRelative=Ca,b._engine={},b.path2curve=Ja,b.matrix=function(a,b,c,d,e,f){return new n(a,b,c,d,e,f)},function(a){function c(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var b=M.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}a.add=function(a,b,c,d,e,f){var g,h,i,j,k=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],m=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof n&&(m=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),g=0;3>g;g++)for(h=0;3>h;h++){for(j=0,i=0;3>i;i++)j+=l[g][i]*m[i][h];k[g][h]=j}this.a=k[0][0],this.b=k[1][0],this.c=k[0][1],this.d=k[1][1],this.e=k[0][2],this.f=k[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new n(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,c,d){a=b.rad(a),c=c||0,d=d||0;var e=+M.cos(a).toFixed(9),f=+M.sin(a).toFixed(9);this.add(e,f,-f,e,c,d),this.add(1,0,0,1,-c,-d)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[H.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return b.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=M.sqrt(c(e[0])),d(e[0]),a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear],a.scaley=M.sqrt(c(e[1])),d(e[1]),a.shear/=a.scaley;var f=-e[0][1],g=e[1][1];return 0>g?(a.rotate=b.deg(M.acos(g)),0>f&&(a.rotate=360-a.rotate)):a.rotate=b.deg(M.asin(f)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[I]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:F)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:F)+(b.rotate?"r"+[b.rotate,0,0]:F)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(n.prototype);var Pa=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Pa&&Pa[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Pa&&Pa[1]<8?u.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:u.safari=la;for(var Qa=function(){this.returnValue=!1},Ra=function(){return this.originalEvent.preventDefault()},Sa=function(){this.cancelBubble=!0},Ta=function(){return this.originalEvent.stopPropagation()},Ua=function(){return z.doc.addEventListener?function(a,b,c,d){var e=E&&K[b]?K[b]:b,f=function(e){var f=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,g=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft,h=e.clientX+g,i=e.clientY+f;if(E&&K[y](b))for(var j=0,k=e.targetTouches&&e.targetTouches.length;k>j;j++)if(e.targetTouches[j].target==a){var l=e;e=e.targetTouches[j],e.originalEvent=l,e.preventDefault=Ra,e.stopPropagation=Ta;break}return c.call(d,e,h,i)};return a.addEventListener(e,f,!1),function(){return a.removeEventListener(e,f,!1),!0}}:z.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||z.win.event;var b=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,e=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Qa,a.stopPropagation=a.stopPropagation||Sa,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}:void 0}(),Va=[],Wa=function(b){for(var c,d=b.clientX,e=b.clientY,f=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,g=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft,h=Va.length;h--;){if(c=Va[h],E){for(var i,j=b.touches.length;j--;)if(i=b.touches[j],i.identifier==c.el._drag.id){d=i.clientX,e=i.clientY,(b.originalEvent?b.originalEvent:b).preventDefault();break}}else b.preventDefault();var k,l=c.el.node,m=l.nextSibling,n=l.parentNode,o=l.style.display;z.win.opera&&n.removeChild(l),l.style.display="none",k=c.el.paper.getElementByPoint(d,e),l.style.display=o,z.win.opera&&(m?n.insertBefore(l,m):n.appendChild(l)),k&&a("raphael.drag.over."+c.el.id,c.el,k),d+=g,e+=f,a("raphael.drag.move."+c.el.id,c.move_scope||c.el,d-c.el._drag.x,e-c.el._drag.y,d,e,b)}},Xa=function(c){b.unmousemove(Wa).unmouseup(Xa);for(var d,e=Va.length;e--;)d=Va[e],d.el._drag={},a("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,c);Va=[]},Ya=b.el={},Za=J.length;Za--;)!function(a){b[a]=Ya[a]=function(c,d){return b.is(c,"function")&&(this.events=this.events||[],this.events.push({name:a,f:c,unbind:Ua(this.shape||this.node||z.doc,a,c,d||this)})),this},b["un"+a]=Ya["un"+a]=function(b){for(var c=this.events||[],d=c.length;d--;)if(c[d].name==a&&c[d].f==b)return c[d].unbind(),c.splice(d,1),!c.length&&delete this.events,this;return this}}(J[Za]);Ya.data=function(c,d){var e=ja[this.id]=ja[this.id]||{};if(1==arguments.length){if(b.is(c,"object")){for(var f in c)c[y](f)&&this.data(f,c[f]);return this}return a("raphael.data.get."+this.id,this,e[c],c),e[c]}return e[c]=d,a("raphael.data.set."+this.id,this,d,c),this},Ya.removeData=function(a){return null==a?ja[this.id]={}:ja[this.id]&&delete ja[this.id][a],this},Ya.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},Ya.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var $a=[];Ya.drag=function(c,d,e,f,g,h){function i(i){(i.originalEvent||i).preventDefault();var j=z.doc.documentElement.scrollTop||z.doc.body.scrollTop,k=z.doc.documentElement.scrollLeft||z.doc.body.scrollLeft;this._drag.x=i.clientX+k,this._drag.y=i.clientY+j,this._drag.id=i.identifier,!Va.length&&b.mousemove(Wa).mouseup(Xa),Va.push({el:this,move_scope:f,start_scope:g,end_scope:h}),d&&a.on("raphael.drag.start."+this.id,d),c&&a.on("raphael.drag.move."+this.id,c),e&&a.on("raphael.drag.end."+this.id,e),a("raphael.drag.start."+this.id,g||f||this,i.clientX+k,i.clientY+j,i)}return this._drag={},$a.push({el:this,start:i}),this.mousedown(i),this},Ya.onDragOver=function(b){b?a.on("raphael.drag.over."+this.id,b):a.unbind("raphael.drag.over."+this.id)},Ya.undrag=function(){for(var c=$a.length;c--;)$a[c].el==this&&(this.unmousedown($a[c].start),$a.splice(c,1),a.unbind("raphael.drag.*."+this.id));!$a.length&&b.unmousemove(Wa).unmouseup(Xa)},u.circle=function(a,c,d){var e=b._engine.circle(this,a||0,c||0,d||0);return this.__set__&&this.__set__.push(e),e},u.rect=function(a,c,d,e,f){var g=b._engine.rect(this,a||0,c||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},u.ellipse=function(a,c,d,e){var f=b._engine.ellipse(this,a||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},u.path=function(a){a&&!b.is(a,T)&&!b.is(a[0],U)&&(a+=F);var c=b._engine.path(b.format[C](b,arguments),this);return this.__set__&&this.__set__.push(c),c},u.image=function(a,c,d,e,f){var g=b._engine.image(this,a||"about:blank",c||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},u.text=function(a,c,d){var e=b._engine.text(this,a||0,c||0,H(d));return this.__set__&&this.__set__.push(e),e},u.set=function(a){!b.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var c=new kb(a);return this.__set__&&this.__set__.push(c),c},u.setStart=function(a){this.__set__=a||this.set()},u.setFinish=function(a){var b=this.__set__;return delete this.__set__,b},u.setSize=function(a,c){return b._engine.setSize.call(this,a,c)},u.setViewBox=function(a,c,d,e,f){return b._engine.setViewBox.call(this,a,c,d,e,f)},u.top=u.bottom=null,u.raphael=b;var _a=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(z.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(z.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};u.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=z.doc.elementFromPoint(a,b);if(z.win.opera&&"svg"==e.tagName){var f=_a(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},u.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},u.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===!1)return this;c=c.next}return this},u.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c},Ya.isPointInside=function(a,c){var d=this.realPath=this.realPath||pa[this.type](this);return b.isPointInsidePath(d,a,c)},Ya.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=pa[this.type](this),b.bboxwt=Aa(this.realPath),b.bboxwt.toString=o,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=pa[this.type](this)),b.bbox=Aa(qa(this.realPath,this.matrix)),b.bbox.toString=o,b.dirty=b.dirtyT=0),b.bbox)},Ya.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},Ya.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||pa[this.type](this);f=this.matrix?qa(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var ab=function(a,c,d,e,f,g,h,k,l){return null==l?i(a,c,d,e,f,g,h,k):b.findDotsAtSegment(a,c,d,e,f,g,h,k,j(a,c,d,e,f,g,h,k,l))},bb=function(a,c){return function(d,e,f){d=Ja(d);for(var g,h,i,j,k,l="",m={},n=0,o=0,p=d.length;p>o;o++){if(i=d[o],"M"==i[0])g=+i[1],h=+i[2];else{if(j=ab(g,h,i[1],i[2],i[3],i[4],i[5],i[6]),n+j>e){if(c&&!m.start){if(k=ab(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],f)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!a&&!c)return k=ab(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=j,g=+i[5],h=+i[6]}l+=i.shift()+i}return m.end=l,k=a?n:c?m:b.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},cb=bb(1),db=bb(),eb=bb(0,1);b.getTotalLength=cb,b.getPointAtLength=db,b.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return eb(a,b).end;var d=eb(a,c,1);return b?eb(d,b).end:d},Ya.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():cb(this.attrs.path):void 0},Ya.getPointAtLength=function(a){return"path"==this.type?db(this.attrs.path,a):void 0},Ya.getSubpath=function(a,c){return"path"==this.type?b.getSubpath(this.attrs.path,a,c):void 0};var fb=b.easing_formulas={linear:function(a){return a},"<":function(a){return Q(a,1.7)},">":function(a){return Q(a,.48)},"<>":function(a){var b=.48-a/1.04,c=M.sqrt(.1734+b*b),d=c-b,e=Q(P(d),1/3)*(0>d?-1:1),f=-c-b,g=Q(P(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:Q(2,-10*a)*M.sin((a-.075)*(2*R)/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};fb.easeIn=fb["ease-in"]=fb["<"],fb.easeOut=fb["ease-out"]=fb[">"],fb.easeInOut=fb["ease-in-out"]=fb["<>"],fb["back-in"]=fb.backIn,fb["back-out"]=fb.backOut;var gb=[],hb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},ib=function(){for(var c=+new Date,d=0;d<gb.length;d++){var e=gb[d];if(!e.el.removed&&!e.paused){var f,g,h=c-e.start,i=e.ms,j=e.easing,k=e.from,l=e.diff,m=e.to,n=(e.t,e.el),o={},p={};if(e.initstatus?(h=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*i,e.status=e.initstatus,delete e.initstatus,e.stop&&gb.splice(d--,1)):e.status=(e.prev+(e.percent-e.prev)*(h/i))/e.anim.top,!(0>h))if(i>h){var q=j(h/i);for(var s in k)if(k[y](s)){switch(ca[s]){case S:f=+k[s]+q*i*l[s];break;case"colour":f="rgb("+[jb(Z(k[s].r+q*i*l[s].r)),jb(Z(k[s].g+q*i*l[s].g)),jb(Z(k[s].b+q*i*l[s].b))].join(",")+")";break;case"path":f=[];for(var t=0,u=k[s].length;u>t;t++){f[t]=[k[s][t][0]];for(var v=1,w=k[s][t].length;w>v;v++)f[t][v]=+k[s][t][v]+q*i*l[s][t][v];f[t]=f[t].join(G)}f=f.join(G);break;case"transform":if(l[s].real)for(f=[],t=0,u=k[s].length;u>t;t++)for(f[t]=[k[s][t][0]],v=1,w=k[s][t].length;w>v;v++)f[t][v]=k[s][t][v]+q*i*l[s][t][v];else{var x=function(a){return+k[s][a]+q*i*l[s][a]};f=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if("clip-rect"==s)for(f=[],t=4;t--;)f[t]=+k[s][t]+q*i*l[s][t];break;default:var z=[][D](k[s]);for(f=[],t=n.paper.customAttributes[s].length;t--;)f[t]=+z[t]+q*i*l[s][t]}o[s]=f}n.attr(o),function(b,c,d){setTimeout(function(){a("raphael.anim.frame."+b,c,d)})}(n.id,n,e.anim)}else{if(function(c,d,e){setTimeout(function(){a("raphael.anim.frame."+d.id,d,e),a("raphael.anim.finish."+d.id,d,e),b.is(c,"function")&&c.call(d)})}(e.callback,n,e.anim),n.attr(m),gb.splice(d--,1),e.repeat>1&&!e.next){for(g in m)m[y](g)&&(p[g]=e.totalOrigin[g]);e.el.attr(p),r(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&r(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}b.svg&&n&&n.paper&&n.paper.safari(),gb.length&&hb(ib)},jb=function(a){return a>255?255:0>a?0:a};Ya.animateWith=function(a,c,d,e,f,g){var h=this;if(h.removed)return g&&g.call(h),h;var i=d instanceof q?d:b.animation(d,e,f,g);r(i,h,i.percents[0],null,h.attr());for(var j=0,k=gb.length;k>j;j++)if(gb[j].anim==c&&gb[j].el==a){gb[k-1].start=gb[j].start;break}return h},Ya.onAnimation=function(b){return b?a.on("raphael.anim.frame."+this.id,b):a.unbind("raphael.anim.frame."+this.id),this},q.prototype.delay=function(a){var b=new q(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},q.prototype.repeat=function(a){var b=new q(this.anim,this.ms);return b.del=this.del,b.times=M.floor(N(a,0))||1,b},b.animation=function(a,c,d,e){if(a instanceof q)return a;(b.is(d,"function")||!d)&&(e=e||d||null,d=null),a=Object(a),c=+c||0;var f,g,h={};for(g in a)a[y](g)&&$(g)!=g&&$(g)+"%"!=g&&(f=!0,h[g]=a[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new q({100:h},c)):new q(a,c)},Ya.animate=function(a,c,d,e){var f=this;if(f.removed)return e&&e.call(f),f;var g=a instanceof q?a:b.animation(a,c,d,e);return r(g,f,g.percents[0],null,f.attr()),f},Ya.setTime=function(a,b){return a&&null!=b&&this.status(a,O(b,a.ms)/a.ms),this},Ya.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return r(a,this,-1,O(b,1)),this;for(c=gb.length;c>f;f++)if(d=gb[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e},Ya.pause=function(b){for(var c=0;c<gb.length;c++)gb[c].el.id!=this.id||b&&gb[c].anim!=b||a("raphael.anim.pause."+this.id,this,gb[c].anim)!==!1&&(gb[c].paused=!0);return this},Ya.resume=function(b){for(var c=0;c<gb.length;c++)if(gb[c].el.id==this.id&&(!b||gb[c].anim==b)){var d=gb[c];a("raphael.anim.resume."+this.id,this,d.anim)!==!1&&(delete d.paused,this.status(d.anim,d.status))}return this},Ya.stop=function(b){for(var c=0;c<gb.length;c++)gb[c].el.id!=this.id||b&&gb[c].anim!=b||a("raphael.anim.stop."+this.id,this,gb[c].anim)!==!1&&gb.splice(c--,1);return this},a.on("raphael.remove",s),a.on("raphael.clear",s),Ya.toString=function(){return"Raphaël’s object"};var kb=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=Ya.constructor&&a[b].constructor!=kb||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},lb=kb.prototype;lb.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],!a||a.constructor!=Ya.constructor&&a.constructor!=kb||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},lb.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},lb.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var mb in Ya)Ya[y](mb)&&(lb[mb]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][C](c,b)})}}(mb));lb.attr=function(a,c){if(a&&b.is(a,U)&&b.is(a[0],"object"))for(var d=0,e=a.length;e>d;d++)this.items[d].attr(a[d]);else for(var f=0,g=this.items.length;g>f;f++)this.items[f].attr(a,c);return this},lb.clear=function(){for(;this.length;)this.pop()},lb.splice=function(a,b,c){a=0>a?N(this.length+a,0):a,b=N(0,O(this.length-a,b));var d,e=[],f=[],g=[];for(d=2;d<arguments.length;d++)g.push(arguments[d]);for(d=0;b>d;d++)f.push(this[a+d]);for(;d<this.length-a;d++)e.push(this[a+d]);var h=g.length;for(d=0;d<h+e.length;d++)this.items[a+d]=this[a+d]=h>d?g[d]:e[d-h];for(d=this.items.length=this.length-=b-h;this[d];)delete this[d++];return new kb(f)},lb.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},lb.animate=function(a,c,d,e){(b.is(d,"function")||!d)&&(e=d||null);var f,g,h=this.items.length,i=h,j=this;if(!h)return this;e&&(g=function(){!--h&&e.call(j)}),d=b.is(d,T)?d:g;var k=b.animation(a,c,d,g);for(f=this.items[--i].animate(k);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(f,k,k);return this},lb.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},lb.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=O[C](0,a),b=O[C](0,b),c=N[C](0,c),d=N[C](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},lb.clone=function(a){a=new kb;for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},lb.toString=function(){return"Raphaël‘s set"},b.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[y](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=_(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[y](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[y](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},u.getFont=function(a,c,d,e){if(e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400,b.fonts){var f=b.fonts[a];if(!f){var g=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,F)+"(\\s|$)","i");for(var h in b.fonts)if(b.fonts[y](h)&&g.test(h)){f=b.fonts[h];break}}var i;if(f)for(var j=0,k=f.length;k>j&&(i=f[j],i.face["font-weight"]!=c||i.face["font-style"]!=d&&i.face["font-style"]||i.face["font-stretch"]!=e);j++);return i}},u.print=function(a,c,d,e,f,g,h){g=g||"middle",h=N(O(h||0,1),-1);var i,j=H(d)[I](F),k=0,l=0,m=F;if(b.is(e,d)&&(e=this.getFont(e)),e){i=(f||16)/e.face["units-per-em"];for(var n=e.face.bbox[I](v),o=+n[0],p=n[3]-n[1],q=0,r=+n[1]+("baseline"==g?p+ +e.face.descent:p/2),s=0,t=j.length;t>s;s++){if("\n"==j[s])k=0,w=0,l=0,q+=p;else{var u=l&&e.glyphs[j[s-1]]||{},w=e.glyphs[j[s]];k+=l?(u.w||e.w)+(u.k&&u.k[j[s]]||0)+e.w*h:0,l=1}w&&w.d&&(m+=b.transformPath(w.d,["t",k*i,q*i,"s",i,i,o,r,"t",(a-o)/i,(c-r)/i]))}}return this.path(m).attr({fill:"#000",stroke:"none"})},u.add=function(a){if(b.is(a,"array"))for(var c,d=this.set(),e=0,f=a.length;f>e;e++)c=a[e]||{},w[y](c.type)&&d.push(this[c.type]().attr(c));return d},b.format=function(a,c){var d=b.is(c,U)?[0][D](c):arguments;return a&&b.is(a,T)&&d.length-1&&(a=a.replace(x,function(a,b){return null==d[++b]?F:d[b]})),a||F},b.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),b.ninja=function(){return A.was?z.win.Raphael=A.is:delete Raphael,b},b.st=lb,function(a,c,d){function e(){/in/.test(a.readyState)?setTimeout(e,9):b.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(c,d=function(){a.removeEventListener(c,d,!1),a.readyState="complete"},!1),a.readyState="loading"),e()}(document,"DOMContentLoaded"),A.was?z.win.Raphael=b:Raphael=b,a.on("raphael.DOMload",function(){t=!0}),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[b](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){if(e=c(e).replace(a._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient),!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=c(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y;a._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=a._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-E*u):(g=E*u,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=Raphael.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-g):(g=0,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:Raphael.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[b](k)&&!p[k]){var F=a._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){if(b=u[c(b).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;h--;)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;
i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];switch(k[o]=p,o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if("a"!=u.tagName.toLowerCase()){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}"target"==o?u.setAttributeNS(n,"show","blank"==p?"new":p):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(4==x.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(i.setAttribute(o,p),d._.dirty=1,!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if("rx"==o&&"rect"==d.type)break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":if(i.setAttribute(o,p),d._.dirty=1,!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if("ry"==o&&"rect"==d.type)break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":"image"==d.type&&i.setAttributeNS(n,"href",p);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(p/=g(h(d._.sx),h(d._.sy))||1),d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var E=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(E,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(E),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(E,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var F=a.getRGB(p);if(F.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=c(p).charAt())&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(G){var H=G.getElementsByTagName("stop");q(H[H.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}}else delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});F[b]("opacity")&&q(i,{"fill-opacity":F.opacity>1?F.opacity/100:F.opacity});case"stroke":F=a.getRGB(p),i.setAttribute(o,F.hex),"stroke"==o&&F[b]("opacity")&&q(i,{"stroke-opacity":F.opacity>1?F.opacity/100:F.opacity}),"stroke"==o&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=c(p).charAt())&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),G&&(H=G.getElementsByTagName("stop"),q(H[H.length-1],{"stop-opacity":p}));break}default:"font-size"==o&&(p=e(p,10)+"px");var I=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[I]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if("text"==d.type&&(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=c(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:i*x,x:g.x}),j.appendChild(a._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:i*x,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(m[0],{dy:r})}},z=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,b,e){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,b,e]])),this},A.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this},A.translate=function(a,b){return this.removed?this:(a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]])),this)},A.transform=function(c){var d=this._;if(null==c)return d.transform;if(a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed&&this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]="function"==typeof this[c]?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if("fill"==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;for(var g=c.split(j),h={},i=0,l=g.length;l>i;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(null==d&&a.is(c,"array")){for(h={},i=0,l=c.length;l>i;i++)h[c[i]]=this.attr(c[i]);return h}if(null!=d){var m={};m[c]=d}else null!=c&&a.is(c,"object")&&(m=c);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;return b.top!=this&&a._tofront(this,b),this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;"a"==b.tagName.toLowerCase()?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;return c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;return c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper),this},A.blur=function(b){var c=this;if(0!==+b){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);return g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},a._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==c?(i.style.cssText=j+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:relative",c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i)),c=new a._Paper,c.width=f,c.height=g,c.canvas=i,c.clear(),c._left=c._top=0,h&&(c.renderfix=function(){}),c.renderfix(),c},a._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=g(c/this.width,d/this.height),j=this.top,l=e?"meet":"xMinYMin";for(null==a?(this._vbSize&&(i=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=i,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:l});i&&j;)h="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":h}),j._.dirty=1,j._.dirtyT=1,j=j.prev;return this._viewBox=[a,b,c,d,!!e],this},a.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}var e=-a.e%1,f=-a.f%1;(e||f)&&(e&&(this._left=(this._left+e)%1,c.left=this._left+"px"),f&&(this._top=(this._top+f)%1,c.top=this._top+"px"))},a.prototype.clear=function(){a.eve("raphael.clear",this);for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/gi,e=a._pathToAbsolute;if(c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g,e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=p[b];return c.replace(s,function(a){e&&2==d.length&&(g+=d+p["m"==b?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h,i,j=e(b);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],i=j[k][0].toLowerCase(),"z"==i&&(i="x");for(var m=1,r=h.length;r>m;m++)i+=f(h[m]*u)+(m!=r-1?",":o);g.push(i)}return g.join(n)},y=function(b,c,d){var e=a.matrix();return e.rotate(-b,.5,.5),{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q=u/b,r=u/c;if(m.visibility="hidden",b&&c){if(l.coordsize=i(q)+n+i(r),m.rotation=f*(0>b*c?-1:1),f){var s=y(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-q+n+e*-r,k||g.fillsize){var t=l.getElementsByTagName(j);t=t&&t[0],l.removeChild(t),k&&(s=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),t.position=s.dx*o+n+s.dy*o),g.fillsize&&(t.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(t)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,b,d){for(var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),r=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),s=e;for(var t in i)i[b](t)&&(m[t]=i[t]);if(q&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),"image"==e.type&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var y=+m.cx,B=+m.cy,D=+m.rx||+m.r||0,E=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((y-D)*u),f((B-E)*u),f((y+D)*u),f((B+E)*u),f(y*u))}if("clip-rect"in i){var G=c(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||a._g.doc.createElement("div"),I=H.style;I.clip=a.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&A(s,i["arrow-start"]),"arrow-end"in i&&A(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j),L=!1;if(K=K&&K[0],!K&&(L=K=F(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var M=c(i.fill).match(a._ISURL);if(M){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=M[1],K.type="tile";var N=e.getBBox(1);K.position=N.x+n+N.y,e._.fillpos=[N.x,N.y],a._preload(M[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=a.getRGB(i.fill).hex,K.src=o,K.type="solid",a.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=c(i.fill).charAt())&&C(s,i.fill,K)&&(m.fill="none",m.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var O=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);O=h(g(O,0),1),K.opacity=O,K.src&&(K.color="none")}l.appendChild(K);var P=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Q=!1;!P&&(Q=P=F("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(P.on=!0),("none"==i.stroke||null===i.stroke||null==P.on||0==i.stroke||0==i["stroke-width"])&&(P.on=!1);var R=a.getRGB(i.stroke);P.on&&i.stroke&&(P.color=R.hex),O=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+R.o+1||2)-1);var S=.75*(d(i["stroke-width"])||1);if(O=h(g(O,0),1),null==i["stroke-width"]&&(S=m["stroke-width"]),i["stroke-width"]&&(P.weight=S),S&&1>S&&(O*=S)&&(P.weight=1),P.opacity=O,i["stroke-linejoin"]&&(P.joinstyle=i["stroke-linejoin"]||"miter"),P.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(P.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var T={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=T[b](i["stroke-dasharray"])?T[i["stroke-dasharray"]]:o}Q&&l.appendChild(P)}if("text"==s.type){s.paper.canvas.style.display=o;var U=s.paper.span,V=100,W=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=U.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),W=d(m["font-size"]||W&&W[0])||10,p.fontSize=W*V+"px",s.textpath.string&&(U.innerHTML=c(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=U.getBoundingClientRect();s.W=m.w=(X.right-X.left)/V,s.H=m.h=(X.bottom-X.top)/V,s.X=m.x,s.Y=m.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,$=Y.length;$>Z;Z++)if(Y[Z]in i){s._.dirty=1;break}switch(m["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=(b.attrs,Math.pow),i="linear",j=".5 .5";if(b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+n+c),o}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=a._parseDots(f);if(!l)return null;if(b=b.shape||b.node,l.length){b.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var m=[],p=0,q=l.length;q>p;p++)l[p].offset&&m.push(l[p].offset+n+l[p].color);g.colors=m.length?m.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(null==b)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:o;e&&(d=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,f+b);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");if(h.translate(-.5,-.5),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;j.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else j.style.filter=o,z(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=o,i.matrix=c(h),i.offset=h.offset();return d&&(this._.transform=d),this},E.rotate=function(a,b,e){if(this.removed)return this;if(null!=a){if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]])),this}},E.translate=function(a,b){return this.removed?this:(a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]])),this)},E.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if(c==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=c.split(k),h={},i=0,m=g.length;m>i;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&a.is(c,"array")){for(h={},i=0,m=c.length;m>i;i++)h[c[i]]=this.attr(c[i]);return h}var n;null!=d&&(n={},n[c]=d),null==d&&a.is(c,"object")&&(n=c);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper)),this)},E.insertAfter=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this)},E.insertBefore=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper),this)},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),0!==+b?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;return i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path();f.attrs;return f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},a._engine.circle=function(a,b,c,d){var e=a.path();e.attrs;return e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},a._engine.setSize=function(b,c){var d=this.canvas.style;return this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox),this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("raphael.setViewBox",this,this._viewBox,[b,c,d,e,f]);var h,i,j=this.width,k=this.height,l=1/g(d/j,e/k);return f&&(h=k/e,i=j/d,j>d*h&&(b-=(j-d*h)/2/h),k>e*i&&(c-=(k-e*i)/2/i)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:l},this.forEach(function(a){a.transform("...")}),this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e=b.width,f=b.x,g=b.y;if(!c)throw new Error("VML container not found.");var h=new a._Paper,i=h.canvas=a._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=1e3*u+n+1e3*u,h.coordorigin="0 0",h.span=a._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==c?(a._g.doc.body.appendChild(i),j.left=f+"px",j.top=g+"px",j.position="absolute"):c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i),h.renderfix=function(){},h},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael)}),define("models/notification",["underscore","backbone","raphael"],function(a,b){"use strict";var c=b.Model.extend({initialize:function(){0===this.timestamp&&(this.timestamp=Date.now())},defaults:{title:"",message:"",priority:0,timestamp:0,acked:!1}});return c}),define("collections/notifications",["underscore","backbone","models/notification"],function(a,b,c){"use strict";var d=b.Collection.extend({model:c});return d}),define("templates",[],function(){return this.JST=this.JST||{},this.JST["app/scripts/templates/about-modal.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='    <div class="bbm-modal__topbar">\n      <h3 class="bbm-modal__title"><i class="fa fa-lg fa-info-circle"></i> <span class="">About Calamari</span></h3>\n    </div>\n    <div class="bbm-modal__section">\n                <p>&copy; 2013-2014 Inktank Storage, Inc and Red Hat, Inc.</p>\n                <p class="text-muted">Brought to you by Dan, Gary, Gregory, Ian, JohnS, JohnW, Neil, Noah, Sage, Sandon, and\n                    Yan</p>\n                 <h4 style="font-family: Titillium Web, sans-serif;">Versions</h4>\n\n                <ul>\n                    <li>Calamari-Server: '+__e(version.calamariAPI)+"</li>\n                    <li>Calamari-Client: "+__e(version.client)+'</li>\n                </ul>\n    </div>\n    <div class="bbm-modal__bottombar">\n      <a href="#" class="btn btn-primary">Close</a>\n    </div>\n';return __p},this.JST["app/scripts/templates/alerts.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<p>Your content here.</p>\n\n";return __p},this.JST["app/scripts/templates/breadcrumb.ejs"]=function(obj){obj||(obj={});
var __p="",__e=_.escape;with(obj)__p+="<div class='bc-item'>\n    <div class='bc-circle'>\n        <span title='"+__e(title.dashboard)+"' data-action='dashboard' class='bc-entry bc-active'>\n            <i title='"+__e(title.dashboard)+"' class=\"fa fa-tachometer fa-lg\"></i>\n        </span>\n    </div>\n    <div class='bc-title bc-title-one'>"+__e(dashboard)+"</div>\n</div><div class=\"bc-line\"></div><div class='bc-item'>\n    <div class='bc-circle'>\n        <span title='"+__e(title.bench)+"' data-action='bench' class='bc-entry'>\n            <i title='"+__e(title.bench)+"' class=\"fa fa-sitemap fa-lg\"></i>\n        </span>\n    </div>\n    <div class='bc-title bc-title-two'>"+__e(workbench)+"</div>\n</div><div class=\"bc-line\"></div><div class='bc-item'>\n    <div class='bc-circle'>\n        <span title='"+__e(title.chart)+"' data-action='chart' class='bc-entry'>\n            <i title=\""+__e(title.chart)+'" class="fa fa-bar-chart-o fa-lg"></i>\n        </span>\n    </div>\n    <div class=\'bc-title bc-title-three\'>'+__e(graph)+"</div>\n</div><div class=\"bc-line\"></div><div class='bc-item'>\n    <div class='bc-circle'>\n        <span title='"+__e(title.manage)+"' data-action='manage' class='bc-entry'>\n            <i title=\""+__e(title.manage)+'" class="fa fa-wrench fa-lg"></i>\n        </span>\n    </div>\n    <div class=\'bc-title bc-title-four\'>'+__e(manage)+"</div>\n</div>\n";return __p},this.JST["app/scripts/templates/clusterdropdown.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='    <li class="dropdown">\n    <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#">Loading... <i class=\'fa fa-cloud\'></i></a>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n    </ul>\n    </li>\n';return __p},this.JST["app/scripts/templates/filter-label.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<label>"+__e(label)+"</label>\n<div class='make-switch switch-mini pull-right' data-filter='"+__e(index)+"' data-text-label='"+__e(count)+"'>\n    <input type='checkbox' checked>\n</div>\n";return __p},this.JST["app/scripts/templates/filter.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="filter by\n";return __p},this.JST["app/scripts/templates/filterBy.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<input type="checkbox" checked>\n\n';return __p},this.JST["app/scripts/templates/gauges.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class='one'></div>\n<div class='two'></div>\n<div class='three'></div>\n<div class='four'></div>\n";return __p},this.JST["app/scripts/templates/graph.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<div class='row'>\n    <div class='col-md-12 col-lg-12 col-sm-12 col-xs-12'>\n      <div class='card graph-card "+__e(graphid)+"'>\n        <div class='graph-spinner'><i class=\"fa fa-spinner fa-spin fa-lg fa-3x\"></i></div>\n        <h2 class='graph-subtitle'></h2>\n        <div class='workarea_g col-md-7 col-lg-7 col-sm-7 col-xs-7'></div>\n        <div class='rhs'>\n        <div class='graph-controls'>\n          <h3 class='graph-control-title'><i class='fa fa-clock-o'></i> Time Axis</h3>\n          <div class='graph-value'>Day</div>\n          <div class='graph-range'>\n            <input type='range' value=2 min=0 max=4 />\n          </div>\n          <div class='graph-label'>\n            <div class='a'></div>\n            <div class='b'></div>\n            <div class='c'></div>\n            <div class='d'></div>\n            <div class='e'></div>\n          </div>\n        </div>\n        <div class='legend-area'>\n          <h3 class='dygraph-legend-title'>Legend</h3>\n          <div class='dygraph-legend'></div>\n        </div>\n        </div>\n        <div class='icon-space'></div>\n      </div>\n    </div>\n</div>\n";return __p},this.JST["app/scripts/templates/graphwall.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<h1 class='title'>WALL-O-GRAPHS</h1>\n<div class='row'>\n    <div class='col-md-2 col-sm-2 hosts-select'></div>\n    <div class=\"col-md-9 col-sm-9 it-graph-controls btn-toolbar\" style='visibility: hidden;'>\n        <div class='btn-graph btn-group btn-group-sm' data-toggle='buttons-radio'>\n            <span class='graph-title graph-title-system hidden-xs'>system</span>\n            <button type='button' data-id='overview' class='btn it-btn-left btn-primary active hidden-sm hidden-xs'>Summary</button>\n        </div>\n        <div class='btn-graph btn-group btn-group-sm' data-toggle='buttons-radio'>\n            <button type='button' data-id='cpudetail' class='btn it-btn-left btn-primary'>All CPUs</button>\n        </div>\n        <div class='btn-graph btn-group btn-group-sm' data-toggle='buttons-radio'>\n            <span class='graph-title hidden-xs'>Disk</span>\n            <button type='button' data-id='rwbytes' class='btn it-btn-left btn-primary hidden-xs'>Bytes</button>\n            <button type='button' data-id='rwbytes' class='btn it-btn-left btn-primary visible-xs'>Disk Bytes</button>\n            <button type='button' data-id='rwawait' class='btn btn-primary hidden-xs'>Await</button>\n            <button type='button' data-id='iops' class='btn btn-primary hidden-xs'>IOPS</button>\n            <button type='button' data-id='iops' class='btn btn-primary it-btn-right visible-xs'>IOPS</button>\n            <button type='button' data-id='diskbytes' class='btn btn-primary hidden-xs'>Capacity</button>\n            <button type='button' data-id='diskinodes' class='btn btn-primary hidden-xs'>Inodes</button>\n        </div>\n        <div class='btn-graph btn-group btn-group-sm' data-toggle='buttons-radio'>\n            <span class='graph-title hidden-xs'>Network</span>\n            <button type='button' data-id='netbytes' class='btn it-btn-left btn-primary hidden-xs'>Bytes</button>\n            <button type='button' data-id='netbytes' class='btn it-btn-left btn-primary visible-xs'>Net Bytes</button>\n            <button type='button' data-id='netpackets' class='btn btn-primary'>Packets</button>\n        </div>\n    </div>\n</div>\n";return __p},this.JST["app/scripts/templates/growl.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<button type="button" class="close">&times;</button>\n<div>\n    <div>'+__e(text)+"</div>\n</div>\n";return __p},this.JST["app/scripts/templates/health-modal.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='    <div class="bbm-modal__topbar">\n      <h3 class="bbm-modal__title"><i class="fa fa-lg fa-heart"></i> <span class="text-primary">Health Report</span></h3>\n    </div>\n    <div class="bbm-modal__section">\n        <table class="table table-condensed health-table">\n            <thead>\n                <tr>\n                    <th class="text-muted">SEVERITY</th>\n                    <th class="text-muted">DETAILS</th>\n                </tr>\n            <thead>\n            <tbody>\n                '+(null==(__t=content)?"":__t)+'\n            </tbody>\n        </table>\n    </div>\n    <div class="bbm-modal__bottombar">\n      <a href="#" class="bbm-button">Close</a>\n    </div>\n';return __p},this.JST["app/scripts/templates/health.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="gauge card health">\n  <span class="card-title"><i class="fa fa-heart fa-lg"></i> '+__e(title)+'</span>\n  <div class="content">\n    <div class="headline"><i class="fa fa-refresh fa-spin"></i></div>\n    <div class="subline"></div>\n    <div class="subtext"></div>\n  </div>\n  <div class=\'card-icon ok\'>\n    <span class="fa-stack fa-lg fa-2x">\n      <i class="fa fa-square-o fa-stack-2x"></i>\n      <i class="fa fa-check fa-stack-1x"></i>\n    </span>\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/hosts-dash.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class=\"gauge card hosts\">\n    <span class='card-title'><i class=\"fa fa-desktop fa-lg\"></i> HOSTS</span>\n    <div class='content'>\n<div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n<div class='subline'>Reporting</div>\n<div class='subtext'></div>\n</div>\n<div class='card-icon ok'>\n  <span class=\"fa-stack fa-lg fa-2x\">\n    <i class=\"fa fa-square-o fa-stack-2x\"></i>\n    <i class=\"fa fa-check fa-stack-1x\"></i>\n  </span>\n</div>\n<div class='card-status-icon ok'>\n</div>\n</div>\n";return __p},this.JST["app/scripts/templates/iops-dash.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class='iops card gauge'>\n     <div class='card-title'><i class=\"fa fa-exchange fa-rotate-270 fa-lg\"></i> IOPS</div>\n     <div class='iops-stats col-lg-3 col-md-3 col-sm-3 col-xs-3'>\n       <div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n       <div class='subline'>Reads + Writes</div>\n       <div class='subtext'></div>\n     </div>\n     <div class='col-lg-9 col-md-9 col-sm-9 col-xs-9'>\n        <div class='iopscanvas'></div>\n     </div>\n     <div class='legend' style='display: none;'></div>\n     <div class='card-icon ok'>\n       <span class=\"fa-stack fa-lg fa-2x\">\n         <i class=\"fa fa-square-o fa-stack-2x\"></i>\n         <i class=\"fa fa-check fa-stack-1x\"></i>\n       </span>\n     </div>\n<div class='card-status-icon'>\n</div>\n</div>\n";return __p},this.JST["app/scripts/templates/modal.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='    <div class="bbm-modal__topbar">\n      <h3 class="bbm-modal__title text-warning">Warning</h3>\n    </div>\n    <div class="bbm-modal__section">\n        <p>\n            Request Tracking depends on a feature (<a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>) in your browser which only works\n            when you are not in \n            <a href="https://support.mozilla.org/en-US/kb/private-browsing-browse-web-without-saving-info?redirectlocale=en-US&as=u&redirectslug=Private+Browsing&utm_source=inproduct" target="_blank">private</a>\n            or incognito mode.\n        </p>\n        <p>\n            The application will still function, and you may view requested tasks via the notification menu (<i class="fa fa-bell"></i>).\n        </p>\n        <p>\n            Pop up event notifications however, will be disabled until you stop using private browsing.\n        </p>\n    </div>\n    <div class="bbm-modal__bottombar">\n      <a href="#" class="bbm-button">Close</a>\n    </div>\n';return __p},this.JST["app/scripts/templates/mon-dash.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class=\"gauge card mon\">\n    <span class='card-title'><i class=\"fa fa-eye fa-lg fa-1x\"></i> Monitors</span>\n    <div class='content'>\n<div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n<div class='subline'>Quorum</div>\n<div class='subtext'></div>\n</div>\n<div class='card-icon ok'>\n  <span class=\"fa-stack fa-lg fa-2x\">\n    <i class=\"fa fa-square-o fa-stack-2x\"></i>\n    <i class=\"fa fa-check fa-stack-1x\"></i>\n  </span>\n</div>\n<div class='card-status-icon ok'>\n</div>\n</div>\n";return __p},this.JST["app/scripts/templates/no-request.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<tr ng-if="empty">\n    <td style="text-align: center;" colspan=4>No Requests Submitted</td>\n</tr>\n';return __p},this.JST["app/scripts/templates/notification.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<span class="timesince">'+__e(timeStr)+'</span>\n<span class="message">\n<span class="message-title"><i class="'+__e(className)+'"></i> '+__e(title)+'</span>\n<span class="message-detail">'+__e(message)+"</span>\n</span>\n";return __p},this.JST["app/scripts/templates/notifications.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<span class="card-title">Notifications</span> <span class="badge '+__e(className)+'">'+__e(count)+'</span>\n<hr class="style-two"></hr>\n<div class="notification-rows"></div>\n';return __p},this.JST["app/scripts/templates/osd-dash.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class=\"gauge card osd\">\n    <span class='card-title'><i class=\"fa fa-hdd-o fa-lg\"></i> OSD</span>\n    <div class='content'>\n<div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n<div class='subline'></div>\n<div class='subtext'></div>\n</div>\n<div class='card-icon ok'>\n  <span style='' class=\"fa-stack fa-lg fa-2x\">\n    <i class=\"fa fa-square-o fa-stack-2x\"></i>\n    <i class=\"fa fa-check fa-stack-1x\"></i>\n  </span>\n</div>\n<div class='card-status-icon'>\n</div>\n</div>\n";return __p},this.JST["app/scripts/templates/osd-details-full.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='OSD Attributes <i class=\'pull-right fa fa-times\'></i>\n<hr class="style-two">\n            <table>\n              <tbody>\n<tr>\n    <td>OSD ID</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(osd)+'</td>\n</tr>\n<tr>\n    <td>Status</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(status)+'</td>\n</tr>\n<tr>\n    <td>Public IP</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(public_addr)+'</td>\n</tr>\n<tr>\n    <td>UUID</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(uuid)+'</td>\n</tr>\n<tr>\n    <td>Hostname</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(host)+'</td>\n</tr>\n              </tbody>\n            </table>\n\n<button class=\'graph-button btn btn-primary\'><i class="fa fa-icon-bar-chart-o fa-lg"></i> Graphs</button>\n<i class="fa fa-cloud fa-lg"></i>\n<i class="fa fa-info-circle fa-lg"></i>\n';return __p},this.JST["app/scripts/templates/osd-details.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='OSD Attributes\n<hr class="style-two">\n            <table>\n              <tbody>\n<tr>\n    <td>OSD</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(osd)+'</td>\n</tr>\n<tr>\n    <td>Status</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(status)+'</td>\n</tr>\n<tr>\n    <td>Public IP</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(public_addr)+'</td>\n</tr>\n<tr>\n    <td>UUID</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(uuid)+'</td>\n</tr>\n<tr>\n    <td>Up From</td>\n</tr>\n<tr class="value-row">\n    <td class="value">'+__e(up_from)+"</td>\n</tr>\n              </tbody>\n            </table>\n";return __p},this.JST["app/scripts/templates/osd-hex.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class=\'dots\'>\n    <div class="pixel-row"></div>\n    <div class="pixel-row"></div>\n    <div class="pixel-row"></div>\n    <div class="pixel-row"></div>\n    <div class="pixel-row"></div>\n    <div class="pixel-row"></div>\n</div>\n';return __p},this.JST["app/scripts/templates/pgmap.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class='pgmap card gauge'>\n     <div class='card-title'><i class=\"fa fa-sitemap fa-lg\"></i> Placement Group Status</div>\n     <div class='pgstats col-md-4 col-sm-4 col-xs-12'>\n       <div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n       <div class='subline'>Active & Clean</div>\n       <div class='subtext'></div>\n     </div>\n     <div class='pgcanvas col-md-8 col-sm-8 hidden-xs'></div>\n     <div class='card-icon ok'>\n       <span class=\"fa-stack fa-lg fa-2x\">\n         <i class=\"fa fa-square-o fa-stack-2x\"></i>\n         <i class=\"fa fa-check fa-stack-1x\"></i>\n       </span>\n     </div>\n<div class='card-status-icon'>\n</div>\n</div>\n";return __p},this.JST["app/scripts/templates/pools-dash.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class=\"gauge card pools\">\n  <span class='card-title'><i class=\"fa fa-tint fa-lg\"></i> POOLS</span>\n  <div class='content'>\n    <div class='headline'><i class='fa fa-refresh fa-spin'></i></div>\n    <div class='subline'>Active</div>\n    <div class='subtext'></div>\n  </div>\n  <div class='card-icon ok'>\n    <span class=\"fa-stack fa-lg fa-2x\">\n      <i class=\"fa fa-square-o fa-stack-2x\"></i>\n      <i class=\"fa fa-check fa-stack-1x\"></i>\n    </span>\n  </div>\n  <div class='card-status-icon ok'>\n  </div>\n</div>\n\n";return __p},this.JST["app/scripts/templates/request-error.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<tr>\n    <td><i class="'+__e(clazz)+'"></i></td>\n    <td>'+__e(headline)+'</td>\n    <td><a class="errorPop" data-trigger="hover" data-title="Error Message" data-toggle="popover" data-placement="bottom" data-content="'+__e(error_message)+'">'+__e(state)+"</a></td>\n    <td>"+__e(time)+"</td>\n</tr>\n";return __p},this.JST["app/scripts/templates/request.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<tr>\n    <td><i class="'+__e(clazz)+'"></i></td>\n    <td>'+__e(headline)+"</td>\n    <td>"+__e(state)+"</td>\n    <td>"+__e(time)+"</td>\n</tr>\n";return __p},this.JST["app/scripts/templates/status-icon.ejs"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+="<div class='fa fa-crosshairs' data-trigger='hover' data-placement='top' data-html='true' data-title='"+__e(title)+"' data-content='"+(null==(__t=content)?"":__t)+"'><i class='"+__e(iconClass)+"'></i></div>\n";return __p},this.JST["app/scripts/templates/status-line.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<i class='fa fa-heart'></i> Updating Now</i>\n";return __p},this.JST["app/scripts/templates/usage.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class=\'gauge card usage\'>\n    <span class="card-title"><i class="fa fa-cloud fa-lg"></i> Usage</span>\n    <span style="visibility:hidden;" class="fa fa-spinner fa-spin"></span>\n    <hr class="style-two"></hr>\n    <!--div class="totalused">0</div-->\n    <div class="totalcap">0T</div>\n    <canvas class="usage-canvas"></canvas>\n    <span class="subtext">\n        <span class="number">0</span> Used\n    </span>\n    <div class=\'card-icon ok\'>\n      <span class="fa-stack fa-lg fa-2x">\n        <i class="fa fa-square-o fa-stack-2x"></i>\n        <i class="fa fa-check fa-stack-1x"></i>\n      </span>\n    </div>\n    <div class=\'card-status-icon ok\'>\n    </div>\n</div>\n';return __p},this.JST["app/scripts/templates/user-request.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="aside right am-fade-and-slide-right" tabindex="-1" role="dialog">\n  <div class="aside-dialog">\n    <div class="aside-content">\n      <div class="aside-header">\n        <button type="button" class="close closer">&times;</button>\n        <i class=\'fa fa-bell fa-lg\'></i><h4 style=\'margin-left:10px; display: inline-block\' class="aside-title">'+__e(title)+'</h4>\n      </div>\n      <div class="aside-body">\n          <table class="table table-condensed user-request">\n              <thead>\n                  <tr>\n                      <th>&nbsp;</th>\n                      <th style="min-width: 23em;">'+__e(colTask)+"</th>\n                      <th>"+__e(colStatus)+'</th>\n                      <th style="min-width: 8em;">'+__e(colUpdated)+'</th>\n                  </tr>\n              <thead>\n              <tbody>\n              </tbody>\n          </table>\n      </div>\n      <div class="aside-footer">\n        <button type="button" class="btn btn-primary closer">'+__e(closeBtn)+'</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="aside-backdrop animation-fade closer"></div>\n';return __p},this.JST["app/scripts/templates/userdropdown.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<li class=\'dropdown\'>\n    <a class="admin-menu dropdown-toggle" role="button" data-toggle="dropdown" href="#"><i class=\'fa fa-bars fa-lg fa-fw\'></i></a>\n    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">\n        <li role="presentation">\n            <i style="margin: 7px;" class="fa fa-user fa-lg fa-2x fa-fw"></i> '+__e(username)+'</i>\n        </li>\n        <li role="presentation" style="background-color: darkgray;" class="divider"></li>\n        <li style="display:none;" role=\'presentation\'><a role=\'menuitem\' class=\'settings\' tabindex="-1" href="#"><span class=\'ddicon\'><i class=\''+__e(settingsIcon)+"'></i></span>"+__e(settingsLabel)+"</a></li>\n        <li role='presentation'><a role='menuitem' class='about' tabindex=\"-1\" href=\"#\"><span class='ddicon'><i class='"+__e(aboutIcon)+"'></i></span>"+__e(aboutLabel)+"</a></li>\n        <li role='presentation'><a role='menuitem' class='logout' tabindex=\"-1\" href=\"#\"><span class='ddicon'><i class='"+__e(logoutIcon)+"'></i></span>"+__e(logoutLabel)+"</a></li>\n    </ul>\n</li>\n";return __p},this.JST["app/scripts/templates/viz.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<span class=\"card-title\">OSD Status</span>\n<span style=\"visibility:hidden;\" class=\"fa fa-spinner fa-spin\"></span>\n<hr class=\"style-two\"></hr>\n<div class='col-md-12'>\n<div style='display:none' class='filter-panel col-md-2'>\n  <h5 class='legend-pos'>Sort by</h5>\n  <div class='viz-controls sort make-switch' data-text-label='Sort' data-off='info' data-on='info' data-on-label='OSD' data-off-label='Host'>\n      <input type='checkbox' checked>\n  </div>\n  <h5 class='legend-pos'>Filter by<h5>\n  <div class=\"switcher make-switch\" data-on-label=\"OSD\" data-off-label=\"PG\" data-on='primary' data-off='primary' data-label-icon='fa fa-lg fa-hdd-o'></div>\n  <h5 class='legend-pos'>States</h5>\n  <ul class=\"filter\"></ul>\n</div>\n<div style=\"margin-top: -25px;position:relative;float:left;\" class=\"col-md-9\">\n  <div id=\"viz\" class=\"viz\">\n  </div>\n</div>\n</div>\n<div class=\"detail-outer\">\n  <div class=\"detail span2 detail-popover\">OSD Attributes\n     <hr class=\"style-two\">\n     <table>\n         <tbody>\n             <tr>\n                 <td colspan=2>No OSD selected</td>\n             </tr>\n         </tbody>\n     </table>\n  </div>\n</div>\n";return __p},this.JST["app/scripts/templates/graphite/CPUDetailedTargets.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".cpu."+__e(id)+"."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/CPUTargets.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".cpu.total."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/DiskSpaceTargets.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".diskspace._var_lib_ceph_osd_ceph-"+__e(id)+"."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/IOStatIOPSTargets.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".iostat."+__e(id)+"."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/LoadAvgTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".loadavg."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/MemoryTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".memory."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/NetworkTargets.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".network."+__e(id)+"."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/OSDFilestoreTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".CephCollector.ceph.osd-"+__e(id)+".filestore."+__e(metric)+"\n";return __p},this.JST["app/scripts/templates/graphite/OSDOpLatencyTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="servers."+__e(hostname)+".CephCollector.ceph.osd-"+__e(id)+".osd."+__e(metric)+".last_interval_avg\n";return __p},this.JST["app/scripts/templates/graphite/PoolDiskFreeTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="scale(ceph.cluster."+__e(clusterName)+".df."+__e(metric)+", 1024)\n";return __p},this.JST["app/scripts/templates/graphite/PoolIOPSTarget.ejs"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="ceph.cluster."+__e(clusterName)+".pool."+__e(id)+"."+__e(metric)+"\n";return __p},this.JST}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],b)}(this,function(a,b){"use strict";return b.Wreqr=function(a,b,c){var d={};return d.Handlers=function(a,b){var c=function(a){this.options=a,this._wreqrHandlers={},b.isFunction(this.initialize)&&this.initialize(a)};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback),this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){var d={callback:b,context:c};this._wreqrHandlers[a]=d,this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw new Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),c}(a,c),d.CommandStorage=function(){var b=function(a){this.options=a,this._commands={},c.isFunction(this.initialize)&&this.initialize(a)};return c.extend(b.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];return b||(b={command:a,instances:[]},this._commands[a]=b),b},addCommand:function(a,b){var c=this.getCommands(a);c.instances.push(b)},clearCommands:function(a){var b=this.getCommands(a);b.instances=[]}}),b}(),d.Commands=function(a){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);a.Handlers.prototype.constructor.apply(this,c)},execute:function(a,b){a=arguments[0],b=Array.prototype.slice.call(arguments,1),this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,d){var e=this.storage.getCommands(a);c.each(e.instances,function(a){b.apply(d,a)}),this.storage.clearCommands(a)},_initializeStorage:function(a){var b,d=a.storageType||this.storageType;b=c.isFunction(d)?new d:d,this.storage=b}})}(d),d.RequestResponse=function(a){return a.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return this.getHandler(a).apply(this,b)}})}(d),d.EventAggregator=function(a,b){var c=function(){};return c.extend=a.Model.extend,b.extend(c.prototype,a.Events),c}(a,c),d}(b,b.Marionette,a),b.Wreqr}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone");module.exports=b(c,d)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],b)}(this,function(a,b){"option strict";return b.ChildViewContainer=function(a,b){var c=function(a){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a,a.model&&(this._indexByModel[a.model.cid]=c),b&&(this._indexByCustom[b]=c),this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){var b=this._indexByModel[a];return this.findByCid(b)},findByCustom:function(a){var b=this._indexByCustom[a];return this.findByCid(b)},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid],b.any(this._indexByCustom,function(a,b){return a===c?(delete this._indexByCustom[b],!0):void 0},this),delete this._views[c],this._updateLength()},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(d){b.isFunction(d[a])&&d[a].apply(d,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});var d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return b.each(d,function(a){c.prototype[a]=function(){var c=b.values(this._views),d=[c].concat(b.toArray(arguments));return b[a].apply(b,d)}}),c}(b,a),b.ChildViewContainer}),function(a,b){if("object"==typeof exports){var c=require("underscore"),d=require("backbone"),e=require("backbone.wreqr"),f=require("backbone.babysitter");module.exports=b(c,d,e,f)}else"function"==typeof define&&define.amd&&define("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],b)}(this,function(a,b){(function(a,b,c){"use strict";function d(a){return g.call(a)}function e(a,b){var c=new Error(a);throw c.name=b||"Error",c}var f={};b.Marionette=f,f.$=b.$;var g=Array.prototype.slice;return f.extend=b.Model.extend,f.getOption=function(a,b){if(a&&b){var c;return c=a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]}},f.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi,d=function(d){var e="on"+d.replace(b,a),f=this[e];return c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(f)?f.apply(this,c.tail(arguments)):void 0};return d}(),f.MonitorDOMRefresh=function(){function a(a){a._isShown=!0,d(a)}function b(a){a._isRendered=!0,d(a)}function d(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(c){c.listenTo(c,"show",function(){a(c)}),c.listenTo(c,"render",function(){b(c)})}}(),function(a){function b(a,b,d,f){var g=f.split(/\s+/);c.each(g,function(c){var f=a[c];f||e("Method '"+c+"' was configured as an event handler, but does not exist."),a.listenTo(b,d,f,a)})}function d(a,b,c,d){a.listenTo(b,c,d,a)}function f(a,b,d,e){var f=e.split(/\s+/);c.each(f,function(c){var e=a[c];a.stopListening(b,d,e,a)})}function g(a,b,c,d){a.stopListening(b,c,d,a)}function h(a,b,d,e,f){b&&d&&(c.isFunction(d)&&(d=d.call(a)),c.each(d,function(d,g){c.isFunction(d)?e(a,b,g,d):f(a,b,g,d)}))}a.bindEntityEvents=function(a,c,e){h(a,c,e,d,b)},a.unbindEntityEvents=function(a,b,c){h(a,b,c,g,f)}}(f),f.Callbacks=function(){this._deferred=f.$.Deferred(),this._callbacks=[]},c.extend(f.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b}),this._deferred.done(function(c,d){b&&(c=b),a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=f.$.Deferred(),this._callbacks=[],c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),f.Controller=function(a){this.triggerMethod=f.triggerMethod,this.options=a||{},c.isFunction(this.initialize)&&this.initialize(this.options)},f.Controller.extend=f.extend,c.extend(f.Controller.prototype,b.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),f.Region=function(a){if(this.options=a||{},this.el=f.getOption(this,"el"),!this.el){var b=new Error("An 'el' must be specified for a region.");throw b.name="NoElError",b}if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,c)}},c.extend(f.Region,{buildRegion:function(a,b){var d="string"==typeof a,e="string"==typeof a.selector,f="undefined"==typeof a.regionType,g="function"==typeof a;if(!g&&!d&&!e)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");
var h,i;d&&(h=a),a.selector&&(h=a.selector),g&&(i=a),!g&&f&&(i=b),a.regionType&&(i=a.regionType);var j=new i({el:h});return a.parentEl&&(j.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),j}}),c.extend(f.Region.prototype,b.Events,{show:function(a){this.ensureEl();var b=a.isClosed||c.isUndefined(a.$el),d=a!==this.currentView;d&&this.close(),a.render(),(d||b)&&this.open(a),this.currentView=a,f.triggerMethod.call(this,"show",a),f.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return f.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),f.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close(),delete this.$el}}),f.Region.extend=f.extend,f.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={},a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,e){"string"==typeof a&&(a={selector:a}),a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(e,a);d[e]=f},this),d},addRegion:function(b,d){var e,f=c.isObject(d),g=c.isString(d),h=!!d.selector;return e=g||f&&h?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},removeRegion:function(a){var b=this._regions[a];this._remove(a,b)},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a,b){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b,this._setLength()},_remove:function(a,b){b.close(),delete this._regions[a],this._setLength(),this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=c.size(this._regions)}}),d=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return c.each(d,function(a){b.prototype[a]=function(){var b=c.values(this._regions),d=[b].concat(c.toArray(arguments));return c[a].apply(c,d)}}),b}(f),f.TemplateCache=function(a){this.templateId=a},c.extend(f.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];return b||(b=new f.TemplateCache(a),this.templateCaches[a]=b),b.load()},clear:function(){var a,b=d(arguments),c=b.length;if(c>0)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(f.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var b=f.$(a).html();return b&&0!==b.length||e("Could not find template: '"+a+"'","NoTemplateError"),b},compileTemplate:function(a){return c.template(a)}}),f.Renderer={render:function(a,b){if(!a){var c=new Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c}var d;return(d="function"==typeof a?a:f.TemplateCache.get(a))(b)}},f.View=b.View.extend({constructor:function(a){c.bindAll(this,"render");var d=Array.prototype.slice.apply(arguments);this.options=a||{},b.View.prototype.constructor.apply(this,d),f.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:f.triggerMethod,getTemplate:function(){return f.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var b=f.getOption(this,"templateHelpers");return c.isFunction(b)&&(b=b.call(this)),c.extend(a,b)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,d){var e=c.isObject(b),f=e?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,g=e?b.preventDefault:c,h=e?b.stopPropagation:d;g&&c&&c.apply(a),h&&d&&d.apply(a)}var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(f,i)}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a),f.bindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.bindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events,c.isFunction(a)&&(a=a.call(this));var d={},e=this.configureTriggers();c.extend(d,a,e),b.View.prototype.delegateEvents.call(this,d)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);b.View.prototype.undelegateEvents.apply(this,a),f.unbindEntityEvents(this,this.model,f.getOption(this,"modelEvents")),f.unbindEntityEvents(this,this.collection,f.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=this.triggerMethod("before:close");a!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={},c.each(c.keys(a),function(b){var c=a[b];this.ui[b]=this.$(c)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),f.ItemView=f.View.extend({constructor:function(){f.View.prototype.constructor.apply(this,d(arguments))},serializeData:function(){var a={};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var b=this.getTemplate(),c=f.Renderer.render(b,a);return this.$el.html(c),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),f.View.prototype.close.apply(this,d(arguments)),this.triggerMethod("item:closed"))}}),f.CollectionView=f.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage(),f.View.prototype.constructor.apply(this,d(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a,b,c){this.closeEmptyView();var d=this.getItemView(a),e=this.collection.indexOf(a);this.addItemView(a,d,e)},onShowCalled:function(){this.children.each(function(a){f.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b),this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var c=new b.Model;this.addItemView(c,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return f.getOption(this,"emptyView")},getItemView:function(a){var b=f.getOption(this,"itemView");return b||e("An `itemView` must be specified","NoItemViewError"),b},addItemView:function(a,b,d){var e=f.getOption(this,"itemViewOptions");c.isFunction(e)&&(e=e.call(this,a,d));var g=this.buildItemView(a,b,e);this.addChildViewEventForwarding(g),this.triggerMethod("before:item:added",g),this.children.add(g),this.renderItemView(g,d),this._isShown&&f.triggerMethod.call(g,"show"),this.triggerMethod("after:item:added",g)},addChildViewEventForwarding:function(a){var b=f.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=d(arguments);c[0]=b+":"+c[0],c.splice(1,0,a),f.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render(),this.appendHtml(this,a,b)},buildItemView:function(a,b,d){var e=c.extend({model:a},d);return new b(e)},removeItemView:function(a){var b=this.children.findByModel(a);this.removeChildView(b),this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a)),this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(a,b,c){a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),f.View.prototype.close.apply(this,d(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this),this.checkEmpty()}}),f.CompositeView=f.CollectionView.extend({constructor:function(){f.CollectionView.prototype.constructor.apply(this,d(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(a){var b=f.getOption(this,"itemView")||this.constructor;return b||e("An `itemView` must be specified","NoItemViewError"),b},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(f.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={};a=this.serializeData(),a=this.mixinTemplateHelpers(a);var b=this.getTemplate();return f.Renderer.render(b,a)},appendHtml:function(a,b,c){var d=this.getItemViewContainer(a);d.append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b,d=f.getOption(a,"itemViewContainer");if(d){var g=c.isFunction(d)?d():d;b=a.$(g),b.length<=0&&e("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")}else b=a.$el;return a.$itemViewContainer=b,b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),f.Layout=f.ItemView.extend({regionType:f.Region,constructor:function(a){a=a||{},this._firstRender=!0,this._initializeRegions(a),f.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments),b=f.ItemView.prototype.render.apply(this,a);return b},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);f.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,c={regionType:f.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager(),b=c.isFunction(this.regions)?this.regions(a):this.regions||{},this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new f.RegionManager,this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b,this.trigger("region:add",a,b)}),this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a],this.trigger("region:remove",a,b)})}}),f.AppRouter=b.Router.extend({constructor:function(a){b.Router.prototype.constructor.apply(this,d(arguments)),this.options=a||{};var c=f.getOption(this,"appRoutes"),e=this._getController();this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return f.getOption(this,"controller")},_addAppRoute:function(a,b,d){var e=a[d];if(!e)throw new Error("Method '"+d+"' was not found on the controller");this.route(b,d,c.bind(e,a))}}),f.Application=function(a){this._initRegionManager(),this._initCallbacks=new f.Callbacks,this.vent=new b.Wreqr.EventAggregator,this.commands=new b.Wreqr.Commands,this.reqres=new b.Wreqr.RequestResponse,this.submodules={},c.extend(this,a),this.triggerMethod=f.triggerMethod},c.extend(f.Application.prototype,b.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a),this._initCallbacks.run(a,this),this.triggerMethod("initialize:after",a),this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var c=d(arguments);return c.unshift(this),f.Module.create.apply(f.Module,c)},_initRegionManager:function(){this._regionManager=new f.RegionManager,this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b}),this.listenTo(this._regionManager,"region:remove",function(a,b){delete this[a]})}}),f.Application.extend=f.extend,f.Module=function(a,b){this.moduleName=a,this.submodules={},this._setupInitializersAndFinalizers(),this.app=b,this.startWithParent=!0,this.triggerMethod=f.triggerMethod},c.extend(f.Module.prototype,b.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,f.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),f.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var e=c.flatten([this,this.app,b,f,f.$,c,d]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new f.Callbacks,this._finalizerCallbacks=new f.Callbacks}}),c.extend(f.Module,{create:function(a,b,e){var f=a,g=d(arguments);g.splice(0,3),b=b.split(".");var h=b.length,i=[];return i[h-1]=e,c.each(b,function(b,c){var d=f;f=this._getModule(d,b,a),this._addModuleDefinition(d,f,i[c],g)},this),f},_getModule:function(a,b,c,d,e){var g=a[b];return g||(g=new f.Module(b,c),a[b]=g,a.submodules[b]=g),g},_addModuleDefinition:function(a,b,d,e){var f,g;c.isFunction(d)?(f=d,g=!0):c.isObject(d)?(f=d.define,g=d.startWithParent):g=!0,f&&b.addDefinition(f,e),b.startWithParent=b.startWithParent&&g,b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}}),f})(this,b,a);return b.Marionette}),define("views/notification-item-view",["jquery","underscore","backbone","templates","humanize","../models/notification","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.ItemView.extend({tagName:"div",className:"notification",model:f,template:d["app/scripts/templates/notification.ejs"],modelEvents:{},serializeData:function(){var a=this.model.toJSON(),b="";switch(a.priority){case 0:b="fa-check-circle-o ok";break;case 1:b="fa-warning";break;case 2:b="fa-exclamation-circle fail";break;default:b=""}return a.className=b,a.timeStr=e.relativeTime(a.timestamp),a},initialize:function(){}});return g}),define("views/notification-collection-view",["jquery","underscore","backbone","templates","humanize","../views/notification-item-view","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.CollectionView.extend({itemView:f,initialize:function(){},template:d["app/scripts/templates/notifications.ejs"],onBeforeRender:function(){this.$el.empty();var a={count:this.collection.length,className:0===this.collection.length?"":"badge-important"};this.$el.html(this.template(a))},appendHtml:function(a,b){a.$(".notification-rows").prepend(b.el)}});return g}),define("views/notification-card-view",["jquery","underscore","collections/notifications","views/notification-collection-view"],function(a,b,c,d){var e=new c,f=new d({collection:e});return{collection:e,view:f}}),define("models/osd-model",["underscore","backbone","raphael"],function(a,b){"use strict";return b.Model.extend({radius:20,animationTime:500,delay:125,easing:"easeIn",minPerc:.4,idAttribute:"osd",initialize:function(){this.getPercentage=this._getStatus,a.bindAll(this,"_getStatus","_getUsedPercentage","updateSize","getColor","isDown"),this.listenTo(this,"change:up change:in",this.updateSize),this.listenTo(this,"change",this.showChange)},isDown:function(){return 0===this.get("up")&&0===this.get("in")},_getStatus:function(){var a=this.get("up"),b=this.get("in");return 1===a&&1===b?.4:0===a&&1===b?.66:1===a&&0===b?.66:1},_getUsedPercentage:function(){if(0===this.get("used"))return 0;var a=Math.max(this.get("used")/this.get("capacity"),this.minPerc);return a},getColor:function(){var a="hsb("+[.5*(1-this.getPercentage()),1,.75]+")";return a},updateSize:function(){if(this.views&&this.views.circle){var a=window.Raphael.animation({r:Math.floor(this.radius*this.getPercentage()),fill:this.getColor()},this.animationTime,this.easing);this.views.circle.animate(a.delay(this.delay))}},showChange:function(){if(this.views&&this.views.text){var a=this.views.text,b=window.Raphael.animation({opacity:.3},333,"easeOut",function(){a.animate({opacity:1},333,"easeIn")});this.views.text.animate(b.delay(this.delay))}},defaults:{osd:"1",capacity:1024,used:0,uuid:"",up:!0,"in":!0,up_from:1,public_addr:"127.0.0.1:0",cluster_addr:"127.0.0.1:0",heartbeat_back_addr:"127.0.0.1:0",heartbeat_front_addr:"127.0.0.1:0",ports:[]},destroy:function(){this.off("change"),this.views&&(this.views=null)}})}),define("models/usage-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v1/cluster/"+this.get("cluster")+"/space"},defaults:{added_date:Date.now(),cluster:1,id:0,space:{free_bytes:0,used_bytes:0,capacity_bytes:0}},getPercentageUsed:function(){var a=this.get("space");return 0===a.capacity_bytes?0:a.used_bytes/a.capacity_bytes*100}});return c}),define("models/health-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v1/cluster/"+this.get("cluster")+"/health"},defaults:{cluster:1,cluster_update_time:"",cluster_update_time_unix:Date.now(),report:{overall_status:"HEALTH_OK",detail:[],summary:[{severity:"HEALTH_OK",summary:""}]}}});return c}),define("models/status-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({initialize:function(){this.getPGCounts=this.makeCounter("pg"),this.getPGStates=this.makeStates("pg"),this.getOSDCounts=this.makeCounter("osd"),this.getOSDStates=this.makeStates("osd"),this.getMONCounts=this.makeCounter("mon"),this.getMONStates=this.makeStates("mon")},url:function(){return"/api/v1/cluster/"+this.get("cluster")+"/health_counters"},defaults:{cluster:1,cluster_update_time_unix:Date.now(),mon:{ok:{count:0},warn:{count:0},critical:{count:0}},mds:{not_up_not_in:0,total:0,up_in:0,up_not_in:0},osd:{ok:{count:0},warn:{count:0},critical:{count:0}},pg:{ok:{count:0},warn:{count:0},critical:{count:0}},pool:{total:0}},makeDefault:function(a){return function(b){try{var c=b();return c?c:a}catch(d){return a}}},makeReader:function(a,b,c){var d=this.makeDefault(c);return function(c){return d(function(){return c[a][b]})}},makeCounter:function(a){var b=this.makeReader("ok","count",0),c=this.makeReader("warn","count",0),d=this.makeReader("critical","count",0),e=this;return function(){var f=e.get(a);return{ok:b(f),warn:c(f),crit:d(f)}}},makeStates:function(a){var b=this.makeReader("ok","states",{}),c=this.makeReader("warn","states",{}),d=this.makeReader("critical","states",{}),e=this;return function(){var f=e.get(a);return{ok:b(f),warn:c(f),crit:d(f)}}}});return c}),define("models/server-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v1/cluster/"+this.get("cluster")+"/server"},defaults:{cluster:1}});return c}),define("models/pool-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v1/cluster/"+this.get("cluster")+"/pool"},defaults:{id:0,cluster:1,pool_id:0,name:"unknown",quota_max_bytes:0,quota_max_objects:0,used_objects:0,used_bytes:0}});return c}),define("models/graph-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({defaults:{target:[],origin:"",format:"svg"}});return c}),define("models/graphite-model",["underscore","backbone","marionette"],function(a,b){"use strict";var c=b.Model.extend({url:function(){throw"you need to define a url function"},parse:function(b){return a.reduce(b,function(a,b){return a[b.text]=b.id,a},{})},initialize:function(a,c){this.graphiteHost=b.Marionette.getOption(c,"graphiteHost"),this.clusterName=b.Marionette.getOption(c,"clusterName")},fetchMetrics:function(a){return this.host=a.replace(/\./g,"_"),this.fetch()},defaults:{}});return c}),define("models/graphite-cpu-model",["underscore","models/graphite-model"],function(a,b){"use strict";var c=b.extend({url:function(){return this.graphiteHost+"/metrics/find?query=servers."+this.host+".cpu.*"},keys:function(){return a.map(this.attributes,function(a,b){return b})}});return c}),define("models/graphite-iostat-model",["underscore","models/graphite-model"],function(a,b){"use strict";var c=b.extend({url:function(){return this.graphiteHost+"/metrics/find?query=servers."+this.host+".iostat.*"},DriveRegexp:new RegExp("[sv]d[a-z][a-z]?$"),keys:function(){var b=this.DriveRegexp;return a.filter(a.map(this.attributes,function(a,b){return b}),function(a){return b.test(a)})}});return c}),define("models/graphite-net-model",["underscore","models/graphite-model"],function(a,b){"use strict";var c=b.extend({url:function(){return this.graphiteHost+"/metrics/find?query=servers."+this.host+".network.*"},keys:function(){return a.map(this.attributes,function(a,b){return b})}});return c}),define("models/graphite-pool-iops-model",["underscore","models/graphite-model"],function(a,b){"use strict";var c=b.extend({url:function(){var a=this.clusterName||"ceph";return this.graphiteHost+"/metrics/find?query=ceph.cluster."+a+".pool.*"},keys:function(){var b=a.map(this.attributes,function(a,b){return b});return this.filter?this.filter(b):b}});return c}),define("models/user-request-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v2/cluster/"+this.get("cluster")+"/request/"+this.get("id")},defaults:{id:0,cluster:1}});return c}),define("models/application-model",["underscore","backbone","models/osd-model","models/usage-model","models/health-model","models/status-model","models/server-model","models/pool-model","models/graph-model","models/graphite-cpu-model","models/graphite-iostat-model","models/graphite-net-model","models/graphite-pool-iops-model","models/user-request-model","marionette"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";return{OSDModel:c,UsageModel:d,HealthModel:e,StatusModel:f,ServerModel:g,PoolModel:h,GraphModel:i,GraphiteCPUModel:j,GraphiteIOModel:k,GraphiteNetModel:l,GraphitePoolIOPSModel:m,UserRequestModel:n}}),define("helpers/animation",["jquery","underscore"],function(a,b){function c(a,c){var e=d(a),f=d(c);return function(a,c,d){return e.call(this,a,c).then(b.bind(f,this,a,d))}}function d(c){return function(d,e){var g=a.Deferred(),h=function(a){a.stopPropagation(),g.resolve()},i=this;return d.jquery||(d=a(d)),d.one(f,h),d.addClass(c),g.promise().then(function(){if(d.removeClass(c),b.isFunction(e)){var a=b.toArray(arguments);e.apply(i,a)}})}}var e={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationEnd",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"},f=e[Modernizr.prefixed("animation")];return{pair:c,single:d}}),define("views/osd-detail-view",["jquery","underscore","backbone","templates","../models/application-model","humanize","helpers/animation"],function(a,b,c,d,e,f,g){"use strict";var h=c.Marionette.ItemView.extend({tagName:"div",template:d["app/scripts/templates/osd-details-full.ejs"],state:"dashboard",events:{"click .fa-times":"removeDialog","click .graph-button":"goToGraph"},ui:{},initialize:function(a){this.replaceAnimation=g.pair("animated fadeOutRightToLeft-enter fadeOutRightToLeft","animated fadeInRightToLeft-enter fadeInRightToLeft"),this.popInAnimation=g.single("animated DialogIn-enter DialogIn"),this.fadeOutAnimation=g.single("animated fadeOut-leave fadeOut"),b.bindAll(this,"clearDetail","template","replaceAnimation","toFullscreen","toDashboard","removeDialog"),this.model=new e.OSDModel,this.listenTo(this.model,"change",this.render),void 0!==a.App&&(this.App=a.App,this.listenTo(this.App.vent,"status:healthok status:healthwarn",this.clearDetail),this.listenTo(this.App.vent,"viz:fullscreen",this.toFullscreen),this.listenTo(this.App.vent,"viz:dashboard",this.toDashboard),this.listenTo(this.App.vent,"escapekey",this.removeDialog)),this.pgTemplate=this.maekEmptyObjectGuard(this.makeStateTemplate("PGs"))},goToGraph:function(a){a.stopPropagation(),a.preventDefault(),this.App.vent.trigger("app:graph",this.model.get("fqdn"))},set:function(a){this.model.clear({silent:!0}).set(a)},removeDialog:function(){if("fullscreen"===this.state){var a=this;return this.fadeOutAnimation(this.ui.detail).then(function(){a.$el.css("display","none")})}},toFullscreen:function(){this.state="fullscreen",this.hide().addClass("detail-outer-popover"),this.ui.detail=this.$(".detail")},toDashboard:function(){this.state="dashboard",this.hide().removeClass("detail-outer-popover")},isVisible:function(){return this.$el.is(":visible")},clearDetail:function(){return this.isVisible()&&"dashboard"!==this.state?this.removeDialog():void 0},statusLabel:["down","down/in","up/out","up/in"],serializeData:function(){var a=this.model.toJSON(),b=0;return a["in"]&&(b+=1),a.up&&(b+=2),a.status=this.statusLabel[b],a},show:function(){return this.$el.css("display","block")},hide:function(){return this.$el.css("display","none")},makeStateTemplate:function(a){return function(c){return b.reduce(b.map(c,function(b,c){return b+" "+a+" "+c}),function(a,b){return a+",<br /> "+b})}},maekEmptyObjectGuard:function(a){return function(c){return b.keys(c).length?a(c):"N/A"}},render:function(){if("dashboard"!==this.state&&"fullscreen"===this.state){this.ui.detail.html(this.template(this.serializeData())),this.$el.removeClass("detail-outer-top-left detail-outer-top-right detail-outer-bottom-left detail-outer-bottom-right").addClass(this.model.get("clazz"));var b=a.Deferred(),c="top",d=this;return b.promise().then(function(){var a=d.model.get("pools")||[];0===a.length&&(a=["N/A"]);var b=d.$(".fa-info-circle");b.popover({title:"Pool Membership",content:a.join(", "),trigger:"hover",container:"body",placement:c});var e=d.model.get("pg_states")||{},f=d.$(".fa-cloud");f.popover({title:"PG States",content:d.pgTemplate(e),html:!0,trigger:"hover",container:"body",placement:c})}),this.isVisible()?this.replaceAnimation(this.ui.detail,function(){b.resolve()}):(this.show(),this.popInAnimation(this.ui.detail,function(){b.resolve()}))}}});return h}),define("helpers/raphael_support",["underscore","raphael"],function(){var a=function(a,b,c,d){var e=[];for(b+=d;c-d>=b;b+=2*d)e.push("M"),e.push(a),e.push(","),e.push(b),e.push("V"),e.push(b+d);return e.join("")},b=function(a,b,c,d){var e=[];for(a+=d;c-d>=a;a+=2*d)e.push("M"),e.push(a),e.push(","),e.push(b),e.push("H"),e.push(a+d);return e.join("")},c=function(c,d,e,f,g){var h,i=.5,j=c+i,k=d+i,l=e+i,m=f+i,n=[],o=c+l,p=d+m;for(n.push(a(j,k,p,g)),j+=g,h=o-g;h>=j;j+=g)n.push("M"),n.push(j),n.push(","),n.push(k),n.push("V"),n.push(p);for(n.push(a(j,k,p,g)),n.push(b(c,k,o,g)),k+=g,h=p-g,j=c;h>=k;k+=g)n.push("M"),n.push(j),n.push(","),n.push(k),n.push("H"),n.push(o);return n.push(b(c,k,o,g)),n.join("")},d=function(a,b,c,d,e,f,g){var h=d/f-1,i=b+f,j=c+f,k=Math.floor(a%h)*f,l=Math.floor(a/h)*f,m=0;a-Math.floor(g/h)*h>=0&&l/40%2===1&&(m=(Math.ceil((a+1)/h)*h-g)*f);var n=m,o=i+k,p=j+l;return{customSortx:n,nx:o,ny:p}};return{calcGrid:c,calcPosition:d}}),define("models/filter-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({defaults:{count:0,category:"osd",visible:!0,label:"filter",enabled:!0,labelState:"ok"}});return c}),define("collections/filter-collection",["underscore","backbone","models/filter-model"],function(a,b,c){"use strict";var d=b.Collection.extend({model:c,idAttribute:"index"});return d}),!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b);
},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||e.toggleClass("open"),g.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on(".dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),define("bootstrap",["jquery"],function(a){return function(){var b;return b||a.jquery}}(this)),!function(a){"use strict";a.fn.bootstrapSwitch=function(b){var c='input[type!="hidden"]',d={init:function(){return this.each(function(){var b,d,e,f,g,h,i=a(this),j=i.closest("form"),k="",l=i.attr("class"),m="ON",n="OFF",o=!1,p=!1;a.each(["switch-mini","switch-small","switch-large"],function(a,b){l.indexOf(b)>=0&&(k=b)}),i.addClass("has-switch"),void 0!==i.data("on")&&(g="switch-"+i.data("on")),void 0!==i.data("on-label")&&(m=i.data("on-label")),void 0!==i.data("off-label")&&(n=i.data("off-label")),void 0!==i.data("label-icon")&&(o=i.data("label-icon")),void 0!==i.data("text-label")&&(p=i.data("text-label")),d=a("<span>").addClass("switch-left").addClass(k).addClass(g).html(""+m),g="",void 0!==i.data("off")&&(g="switch-"+i.data("off")),e=a("<span>").addClass("switch-right").addClass(k).addClass(g).html(""+n),f=a("<label>").html("&nbsp;").addClass(k).attr("for",i.find(c).attr("id")),o&&f.html('<i class="icon '+o+'"></i>'),p&&f.html(""+p),b=i.find(c).wrap(a("<div>")).parent().data("animated",!1),i.data("animated")!==!1&&b.addClass("switch-animate").data("animated",!0),b.append(d).append(f).append(e),i.find(">div").addClass(i.find(c).is(":checked")?"switch-on":"switch-off"),i.find(c).is(":disabled")&&a(this).addClass("deactivate");var q=function(a){i.parent("label").is(".label-change-switch")||a.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};i.on("keydown",function(b){32===b.keyCode&&(b.stopImmediatePropagation(),b.preventDefault(),q(a(b.target).find("span:first")))}),d.on("click",function(b){q(a(this))}),e.on("click",function(b){q(a(this))}),i.find(c).on("change",function(b,c){var d=a(this),e=d.parent(),f=d.is(":checked"),g=e.is(".switch-off");if(b.preventDefault(),e.css("left",""),g===f){if(f?e.removeClass("switch-off").addClass("switch-on"):e.removeClass("switch-on").addClass("switch-off"),e.data("animated")!==!1&&e.addClass("switch-animate"),"boolean"==typeof c&&c)return;e.parent().trigger("switch-change",{el:d,value:f})}}),i.find("label").on("mousedown touchstart",function(b){var c=a(this);h=!1,b.preventDefault(),b.stopImmediatePropagation(),c.closest("div").removeClass("switch-animate"),c.closest(".has-switch").is(".deactivate")?c.unbind("click"):c.closest(".switch-on").parent().is(".radio-no-uncheck")?c.unbind("click"):(c.on("mousemove touchmove",function(b){var c=a(this).closest(".make-switch"),d=(b.pageX||b.originalEvent.targetTouches[0].pageX)-c.offset().left,e=d/c.width()*100,f=25,g=75;h=!0,f>e?e=f:e>g&&(e=g),c.find(">div").css("left",e-g+"%")}),c.on("click touchend",function(b){var c=a(this),d=c.siblings("input");b.stopImmediatePropagation(),b.preventDefault(),c.unbind("mouseleave"),h?d.prop("checked",!(parseInt(c.parent().css("left"))<-25)):d.prop("checked",!d.is(":checked")),h=!1,d.trigger("change")}),c.on("mouseleave",function(b){var c=a(this),d=c.siblings("input");b.preventDefault(),b.stopImmediatePropagation(),c.unbind("mouseleave mousemove"),c.trigger("mouseup"),d.prop("checked",!(parseInt(c.parent().css("left"))<-25)).trigger("change")}),c.on("mouseup",function(b){b.stopImmediatePropagation(),b.preventDefault(),a(this).trigger("mouseleave")}))}),"injected"!==j.data("bootstrapSwitch")&&(j.bind("reset",function(){setTimeout(function(){j.find(".make-switch").each(function(){var b=a(this).find(c);b.prop("checked",b.is(":checked")).trigger("change")})},1)}),j.data("bootstrapSwitch","injected"))})},toggleActivation:function(){var b=a(this);b.toggleClass("deactivate"),b.find(c).prop("disabled",b.is(".deactivate"))},isActive:function(){return!a(this).hasClass("deactivate")},setActive:function(b){var d=a(this);b?(d.removeClass("deactivate"),d.find(c).removeAttr("disabled")):(d.addClass("deactivate"),d.find(c).attr("disabled","disabled"))},toggleState:function(b){var c=a(this).find(":checkbox");c.prop("checked",!c.is(":checked")).trigger("change",b)},toggleRadioState:function(b){var c=a(this).find(":radio");c.not(":checked").prop("checked",!c.is(":checked")).trigger("change",b)},toggleRadioStateAllowUncheck:function(b,c){var d=a(this).find(":radio");b?d.not(":checked").trigger("change",c):d.not(":checked").prop("checked",!d.is(":checked")).trigger("change",c)},setState:function(b,d){a(this).find(c).prop("checked",b).trigger("change",d)},setOnLabel:function(b){var c=a(this).find(".switch-left");c.html(b)},setOffLabel:function(b){var c=a(this).find(".switch-right");c.html(b)},setOnClass:function(b){var c=a(this).find(".switch-left"),d="";void 0!==b&&(void 0!==a(this).attr("data-on")&&(d="switch-"+a(this).attr("data-on")),c.removeClass(d),d="switch-"+b,c.addClass(d))},setOffClass:function(b){var c=a(this).find(".switch-right"),d="";void 0!==b&&(void 0!==a(this).attr("data-off")&&(d="switch-"+a(this).attr("data-off")),c.removeClass(d),d="switch-"+b,c.addClass(d))},setAnimated:function(b){var d=a(this).find(c).parent();void 0===b&&(b=!1),d.data("animated",b),d.attr("data-animated",b),d.data("animated")!==!1?d.addClass("switch-animate"):d.removeClass("switch-animate")},setSizeClass:function(b){var c=a(this),d=c.find(".switch-left"),e=c.find(".switch-right"),f=c.find("label");a.each(["switch-mini","switch-small","switch-large"],function(a,c){c!==b?(d.removeClass(c),e.removeClass(c),f.removeClass(c)):(d.addClass(c),e.addClass(c),f.addClass(c))})},status:function(){return a(this).find(c).is(":checked")},destroy:function(){var b,c=a(this),d=c.find("div"),e=c.closest("form");
return d.find(":not(input)").remove(),b=d.children(),b.unwrap().unwrap(),b.unbind("change"),e&&(e.unbind("reset"),e.removeData("bootstrapSwitch")),b}};return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist!"):d.init.apply(this,arguments)}}(jQuery),function(a){a(function(){a(".make-switch").bootstrapSwitch()})}(jQuery),define("bootstrap-switch",["bootstrap"],function(){}),define("views/filter-label-view",["jquery","underscore","backbone","templates","bootstrap-switch"],function(a,b,c,d){"use strict";var e=c.Marionette.ItemView.extend({tagName:"div",ui:{toggle:".make-switch"},getSwitch:function(){return this.$(".make-switch")},initialize:function(){this.listenTo(this.model,"change:enabled",this.enabled),this.listenTo(this.model,"change:visible",this.visible),this.listenTo(this.model,"change:count",this.updateCount),this.listenTo(this,"render",this.postRender),this.listenTo(this.options.vent,"disable",this.switchDisabled),this.listenTo(this.options.vent,"enable",this.switchEnabled),b.bindAll(this,"switchDisabled","switchEnabled")},updateCount:function(a){var b="-";a&&(b=a.get("count"),0===b&&(b="-")),this.getSwitch().find("label").text(b)},isEnabled:function(a){return a.get("enabled")},isVisible:function(a){return a.get("visible")},enabled:function(){var a=this.isEnabled(this.model);this.getSwitch().bootstrapSwitch("setState",a,!0)},visible:function(){this.isVisible(this.model)?this.$el.show():this.$el.hide()},switchDisabled:function(){this.getSwitch().bootstrapSwitch("setActive",!1)},switchEnabled:function(){this.getSwitch().bootstrapSwitch("setActive",!0)},stateColorMap:{"up/out":["success","warning"],"down/in":["success","warning"],creating:["success","warning"],replaying:["success","warning"],splitting:["success","warning"],scrubbing:["success","warning"],degraded:["success","warning"],repair:["success","warning"],recovering:["success","warning"],backfill:["success","warning"],"wait-backfill":["success","warning"],remapped:["success","warning"],inconsistent:["danger","default"],down:["danger","default"],peering:["danger","default"],incomplete:["danger","default"],stale:["danger","default"]},postRender:function(){var b=this.stateColorMap[this.model.get("label")]||["primary","info"],c=this.getSwitch().attr({"data-on":b[0],"data-off":b[1]}),d=this;c.bootstrapSwitch("destroy"),c.bootstrapSwitch().on("switch-change",function(){var b=a.Deferred();d.options.vent.trigger("disable"),d.model.set("enabled",!d.model.get("enabled")),d.options.vent.trigger("filter",b),b.done(function(){d.options.vent.trigger("enable")})}).on("click",function(a){a.stopPropagation(),a.preventDefault()}),this.visible(),this.enabled(),this.updateCount()},template:d["app/scripts/templates/filter-label.ejs"]});return e}),define("views/filter-view",["jquery","underscore","backbone","templates","collections/filter-collection","models/filter-model","views/filter-label-view","marionette"],function(a,b,c,d,e,f,g){"use strict";function h(a){return function(b){var c=b.get("pg_states");return c?void 0!==c[a]:!0}}return c.Marionette.CollectionView.extend({tagName:"ul",template:d["app/scripts/templates/filter.ejs"],itemView:g,collection:new e,clickHandlerDisabled:!1,state:"osd",events:{"mouseenter .make-switch":"osdPulse","mouseleave .make-switch":"osdStopPulse"},initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.collection.set([{label:"up/in",index:"inup",match:function(a){return a.get("up")&&a.get("in")}},{label:"up/out",index:"outup",labelState:"warn",match:function(a){return a.get("up")&&!a.get("in")}},{label:"down/in",index:"indown",labelState:"warn",match:function(a){return!a.get("up")&&a.get("in")}},{label:"down",index:"down",labelState:"crit",match:function(a){return!a.get("in")&&!a.get("up")}},{category:"pg",label:"active",index:"active",visible:!1,match:h("active")},{category:"pg",label:"clean",index:"clean",visible:!1,match:h("clean")},{category:"pg",labelState:"warn",label:"creating",index:"creating",visible:!1,match:h("creating")},{category:"pg",labelState:"warn",label:"replaying",index:"replay",visible:!1,match:h("replaying")},{category:"pg",labelState:"warn",label:"splitting",index:"splitting",visible:!1,match:h("splitting")},{category:"pg",labelState:"warn",label:"scrubbing",index:"scrubbing",visible:!1,match:h("scrubbing")},{category:"pg",labelState:"warn",label:"degraded",index:"degraded",visible:!1,match:h("degraded")},{category:"pg",labelState:"warn",label:"repair",index:"repair",visible:!1,match:h("repair")},{category:"pg",labelState:"warn",label:"recovering",index:"recovering",visible:!1,match:h("recovering")},{category:"pg",labelState:"warn",label:"backfill",index:"backfill",visible:!1},{category:"pg",labelState:"warn",label:"wait-backfill",index:"wait-backfill",visible:!1,match:h("wait-backfill")},{category:"pg",labelState:"warn",label:"remapped",index:"remapped",visible:!1,match:h("remapped")},{category:"pg",labelState:"crit",label:"inconsistent",index:"inconsistent",visible:!1,match:h("inconsistent")},{category:"pg",labelState:"crit",label:"down",index:"down",visible:!1,match:h("down")},{category:"pg",labelState:"crit",label:"peering",index:"peering",visible:!1,match:h("peering")},{category:"pg",labelState:"crit",label:"incomplete",index:"incomplete",visible:!1,match:h("incomplete")},{category:"pg",labelState:"crit",label:"stale",index:"stale",visible:!1,match:h("stale")}]),b.bindAll(this,"vizUpdate","reset","updateOSDCounts"),this.vent=new c.Wreqr.EventAggregator,this.itemViewOptions={vent:this.vent},this.listenTo(this.vent,"filter",this.vizUpdate),this.listenTo(this.collection,"change:pulse",this.vizPulse),this.listenTo(this.App.vent,"viz:dashboard",this.reset),this.listenTo(this.App.vent,"filter:update",this.updateOSDCounts),this.listenTo(this.App.vent,"switcher:one",this.osdFilter),this.listenTo(this.App.vent,"switcher:two",this.pgFilter)},osdFilter:function(a){this.state="osd",this.collection.each(function(a){a.set({visible:"osd"===a.get("category"),enabled:!0})}),this.vizUpdate(a)},pgFilter:function(a){this.state="pg",this.collection.each(function(a){a.set({visible:"pg"===a.get("category"),enabled:!0})}),this.vizUpdate(a)},reset:function(){this.$(".btn-disabled").removeClass("btn-disabled"),b.each(this.collection.where({visible:!0,enabled:!1}),function(a){a.set("enabled",!0)})},vizUpdate:function(a){this.App&&this.App.vent&&this.App.vent.trigger("viz:filter",this.collection,a)},vizPulse:function(){this.App&&this.App.vent&&this.App.vent.trigger("viz:pulse",this.collection)},updateOSDCounts:function(){var a=this.collection,c=a.where({category:"osd"}),d=this.App.ReqRes.request("get:osdcounts");b.each(c,function(a){var c=b.filter(d,function(b,c){return a.get("index")===c}),e=b.first(c);e?a.set("count",e,{}):a.set("count",0,{})});var e=a.reject(function(a){return"osd"===a.get("category")}),f=this.App.ReqRes.request("get:pgcounts");b.each(e,function(a){var c=b.filter(f,function(b,c){return a.get("index")===c}),d=b.first(c);d?a.set("count",d,{}):a.set("count",0,{})})},serializeModel:function(a){var b=a.toJSON();return b},osdPulse:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target),e=d.closest(".make-switch").attr("data-filter"),f=b.first(this.collection.where({category:this.state,index:e}));f.set("pulse",!0)},osdStopPulse:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target),e=d.closest(".make-switch").attr("data-filter"),f=b.first(this.collection.where({category:this.state,index:e}));f.set("pulse",!1)}})}),define("views/filterBy-view",["jquery","underscore","backbone","templates","marionette"],function(a,b,c,d){"use strict";var e=c.Marionette.ItemView.extend({current:"OSD",initialize:function(){this.App=c.Marionette.getOption(this,"App"),b.bindAll(this,"postRender"),this.listenTo(this,"render",this.postRender)},postRender:function(){var b=this.$el.bootstrapSwitch(),c=this;b.on("switch-change",function(){var d=a.Deferred();b.bootstrapSwitch("setActive",!1),"OSD"===c.current?(c.App.vent.trigger("switcher:two",d),c.current="PG"):(c.App.vent.trigger("switcher:one",d),c.current="OSD"),d.done(function(){b.bootstrapSwitch("setActive",!0)})}).on("click",function(a){a.stopPropagation(),a.preventDefault()})},template:d["app/scripts/templates/filterBy.ejs"]});return e}),define("views/osd-visualization",["jquery","underscore","backbone","helpers/raphael_support","templates","views/osd-detail-view","views/filter-view","models/application-model","helpers/animation","views/filterBy-view","loglevel","raphael","marionette","bootstrap-switch"],function(a,b,c,d,e,f,g,h,i,j,k){var l=c.Marionette.ItemView.extend({template:e["app/scripts/templates/viz.ejs"],serializeData:function(){return{}},step:40,pulseTimer:null,state:"dashboard",curHostGroup:null,hostGroupTimer:null,customSort:!1,timeout:3e3,readyPromise:null,ui:{cardTitle:".card-title",viz:".viz",filter:".filter",filterpanel:".filter-panel",switcher:".switcher",detail:".detail-outer",spinner:".fa-spinner"},events:{"click .viz":"osdClickHandler","mouseenter circle, tspan, rect":"osdHoverHandler","mouseleave circle, tspan, rect":"osdUnhoverHandler"},collectionEvents:{add:"addOSD",remove:"removeOSD",change:"updateOSD",request:"spinnerOn","sync error":"spinnerOff",reset:"resetViews"},appEvents:{"osd:update":"updateCollection","cluster:update":"switchCluster","viz:fullscreen":"fullscreen","viz:dashboard":"dashboard","viz:filter":"filter","viz:pulse":"pulse"},ready:function(){return this.readyPromise},toggleSortOrder:function(a){return this.customSort=!this.customSort,this.filterCol?void this.filter(this.filterCol,a):void this.reset(function(){a&&a.resolve&&a.resolve()})},spinnerOn:function(){this.ui.spinner.css("visibility","visible")},spinnerOff:function(){this.ui.spinner.css("visibility","hidden")},fetchError:function(a,c){k.debug(b.template("osd/error: <%- statusText %>",{statusText:c.statusText})),this.App.vent.trigger("app:neterror","osd",c)},updateCollection:function(){if(this.App.Config["delta-osd-api"]&&this.collection.length>0)this.collection.update.apply(this.collection);else{var a=this.App.vent;this.collection.fetch({timeout:this.timeout,error:this.fetchError}).then(function(){a.trigger("filter:update")})}},switchCluster:function(a){a&&(this.collection.cluster=a.get("id"))},setupAnimations:function(a){a.opacityOutAnimation=i.single("animated toDashboard-enter toDashboard"),a.toWorkBenchAnimation=i.single("animated toWorkBench-enter toWorkBench"),a.fadeInAnimation=i.single("animated fadeIn-enter fadeIn")},getHosts:function(){return b.uniq(this.collection.pluck("host"))},getFQDNs:function(){return b.uniq(this.collection.pluck("fqdn"))},getOSDIdsByHost:function(a){return b.pluck(this.collection.filter(function(b){return b.get("fqdn")===a}),"id")},getOSDCounters:function(){return{down:this.collection.where({up:0,"in":0}).length,inup:this.collection.where({up:1,"in":1}).length,outup:this.collection.where({up:1,"in":0}).length,indown:this.collection.where({up:0,"in":1}).length}},getPGCounters:function(){return this.collection.pg_state_counts||{}},getOSDPGCounts:function(){return this.collection.map(function(a){return{id:a.id,up:a.get("up"),"in":a.get("in"),pg_states:a.get("pg_states")}})},lookupPositionById:[],initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.App.Config&&(this.timeout=c.Marionette.getOption(this.App.Config,"api-request-timeout-ms")||this.timeout);var e=a.Deferred();this.listenToOnce(this.App.vent,"filter:update",function(){e.resolve()}),this.readyPromise=e.promise(),this.legendHeight=75,this.legendOffset=25,this.originX=0,this.originY=this.legendHeight,this.columns=16,this.rows=16,this.width=(this.columns+1)*this.step,this.height=(this.rows+1)*this.step,this.w=(this.columns+2)*this.step,this.h=(this.rows+2)*this.step+this.legendHeight,this.threshx=this.w/2,this.threshy=this.h/2,this.startPosition=[{x:40,y:40},{x:40+this.columns*this.step,y:40},{x:40+this.columns*this.step,y:40+(this.rows-1)*this.step},{x:40,y:40+(this.columns-1)*this.step}],b.bindAll(this),this.setupAnimations(this),c.Marionette.bindEntityEvents(this,this.App.vent,c.Marionette.getOption(this,"appEvents")),this.App.ReqRes.setHandler("get:ready",this.ready),this.App.ReqRes.setHandler("get:hosts",this.getHosts),this.App.ReqRes.setHandler("get:fqdns",this.getFQDNs),this.App.ReqRes.setHandler("get:osdcounts",this.getOSDCounters),this.App.ReqRes.setHandler("get:pgcounts",this.getPGCounters),this.App.ReqRes.setHandler("get:osdids",this.getOSDIdsByHost),this.App.ReqRes.setHandler("get:osdpgcounts",this.getOSDPGCounts),this.render=b.wrap(this.render,this.renderWrapper),this.osdHoverHandler=this.makeSVGEventHandlerFunc(this.isOsdElement,[this.osdHoverHandlerCore,this.hostGroupHoverHandlerCore]),this.osdClickHandler=this.makeSVGEventHandlerFunc(this.isOsdElement,this.osdClickHandlerCore),this.setBelowCornerBits=this.makeNeighborMapAdjuster(4,16),this.setAboveCornerBits=this.makeNeighborMapAdjuster(1,32),this.lookupPositionById=b.map(b.range(this.columns*this.rows),function(a){return this.calcColAndRow(a)}.bind(this)),this.calcPosition=b.memoize(d.calcPosition)},toFullscreenTransitionTwo:function(){var a=this.ui;this.$el.removeClass("viz-hidden"),a.viz.addClass("viz-fullscreen"),a.filterpanel.css("display","block"),this.App.vent.trigger("filter:update");var b=this.reset;return this.fadeInAnimation(a.filterpanel,function(){b()})},fullscreen:function(a){return this.state="fullscreen",this.ui.cardTitle.text("OSD Workbench"),this.$el.addClass("workbench"),this.toWorkBenchAnimation(this.$el,a).then(this.toFullscreenTransitionTwo)},toDashboardTransitionOne:function(){var a=this.ui;a.filterpanel.hide()},dashboard:function(a){this.state="dashboard";var b=this.$el;return this.opacityOutAnimation(this.$el,a).then(function(){b.addClass("viz-hidden").removeClass("workbench")}).then(this.toDashboardTransitionOne)},resetViews:function(a,c){b.each(c.previousModels,this.cleanupModelView)},addOSD:function(a){this.moveCircle(a,this.collection.indexOf(a))},cleanupModelView:function(a){var b=a.views;if(b){var c=b.circle;c.animate({opacity:0,r:0},250,"easeIn",function(){c.remove()}),b.text.remove(),b.square&&(b.square.remove(),a.set("neighborMap",null)),b.pcircle&&b.pcircle.stop().remove(),a.views=null}},removeOSD:function(a){this.collection.remove(a),this.cleanupModelView(a)},updateOSD:function(a){a.set(a.attributes)},drawGrid:function(a){this.drawLegend();var b=d.calcGrid(this.originX,this.originY,this.width,this.height,this.step),c=this.paper.path("M0,0").attr({"stroke-width":1,stroke:"#5e6a71",opacity:.4}),e=Raphael.animation({path:b,callback:a.resolve},250);c.animate(e)},moveCircle:function(a,b){if(null!==a){var c=a.collection.length,d=this.startPosition[Math.floor(4*Math.random())],e=this.calcPosition(b,this.originX,this.originY,this.width,this.height,this.step,c);this.animateCircleTraversal(d.x+this.originX,d.y+this.originY,8,e.nx,e.ny,e.customSortx,a)}},hex:function(a){var b="00"+a.toString(16);return b.substr(b.length-2,b.length)},criteria:function(a){return a.get("host")+this.hex(a.get("osd"))},calcColAndRow:function(a){return[a%this.columns,Math.floor(a/this.columns)]},isAdjacent:function(a,b){var c=this.lookupPositionById[a.id][0],d=this.lookupPositionById[a.id][1],e=this.lookupPositionById[b.id][0],f=this.lookupPositionById[b.id][1];return d+1===f&&c===e?(a.neighborMap=4,b.neighborMap=1,!0):d===f&&e===c+1?(a.neighborMap=2,b.neighborMap=8,!0):d===f&&e===c-1?(a.neighborMap=8,b.neighborMap=2,!0):!1},renderOSDViews:function(c){var d=b.first(this.collection.models,this.columns*this.rows);c&&(d=b.filter(d,c)),k.debug(d.length);var e=a.Deferred(),f=b.last(d);return f?f.deferred=e:e.resolve(),this.customSort&&(d=this.viewByHostGroup(d)),b.each(d,this.moveCircle,this),e.promise()},viewByHostGroup:function(a){a=b.sortBy(a,this.criteria);var c,d=b.map(b.range(this.columns*this.rows),function(a){return{id:a,osd:null,neighborMap:0}}),e=null,f=this,g=1;return b.each(a,function(a){var h=b.find(d,function(a){return null===e&&null===a.osd?!0:null===a.osd&&f.isAdjacent(e,a)});h.osd=a,e&&(e.osd.get("host")!==a.get("host")?g+=2.5:(e.neighborMap&&(c=e.osd.get("neighborMap")||0,e.osd.set("neighborMap",e.neighborMap+c)),h.neighborMap&&(c=a.get("neighborMap")||0,a.set("neighborMap",h.neighborMap+c)))),a.set("group",g),e=h}),b.map(b.pluck(b.filter(d,function(a){return a&&null!==a.osd}),"osd"),function(a,b){var e=a.get("neighborMap");return this.isACornerBasedOn(e)&&(k.debug(a.get("osd")+" check "+c),this.hasBelow(e)&&this.setBelowCornerBits(a,d[b+this.columns].osd),this.hasAbove(e)&&this.setAboveCornerBits(a,d[b-this.columns].osd)),a},this)},makeNeighborMapAdjuster:function(a,b){return function(c,d){if(c&&d){var e=c.get("neighborMap")^a;c.set("neighborMap",e);var f=d.get("neighborMap");f|=b,d.set("neighborMap",f)}}},isACornerBasedOn:function(a){return a&&3===a||9===a||12===a||6===a},hasAbove:function(a){return 1===(1&a)},hasLeft:function(a){return 2===(2&a)},hasBelow:function(a){return 4===(4&a)},hasRight:function(a){return 8===(8&a)},isCornerAbove:function(a){return 16===(16&a)},isCornerBelow:function(a){return 32===(32&a)},legendCircle:function(a,c,d){var e=["down","up/out","down/in","up/in"],f=[{up:0,"in":0},{up:1,"in":0},{up:0,"in":1},{up:1,"in":1}],g=[1,.66,.66,.4],i=new h.OSDModel(b.extend(f[d],{capacity:1024,used:1024*g[d]})),j=this.paper.circle(a,c,16*i.getPercentage()).attr({fill:i.getColor(),stroke:"none",cursor:"default",opacity:0}),k=Raphael.animation({opacity:1},250,"easeOut"),l=e[d];return this.paper.text(a,c+23,l).attr({cursor:"default","font-size":"12px","font-family":"Titillium Web, sans-serif","font-weight":300}),j.animate(k)},drawLegend:function(){var a=this.originY-(this.legendHeight-this.legendOffset),c=50,d=4,e=this.width/2-c*(d-1)/2;k.debug(e),b.each(b.range(d),function(b){this.legendCircle(e,a,b),e+=c},this)},getColor:function(a){var b=this.collection.findWhere({host:a.get("host")}),c=b.get("group")||1;return"hsb("+1/(c/360)+", 0.17, 0.8)"},addBackgroundSquare:function(a,b,c){var d=c.get("neighborMap"),e=18,f=18,g=36,h=36;this.hasAbove(d)&&(g+=2,f+=2),this.hasLeft(d)&&(h+=2),this.hasBelow(d)&&(g+=2),this.hasRight(d)&&(h+=2,e+=2),this.isCornerAbove(d)&&(g+=2,f+=2),k.debug(c.get("osd")+" neighborMap "+d),this.isCornerBelow(d)&&(g+=2);var i=this.paper.rect(a-e,b-f,h,g).attr({fill:this.getColor(c),opacity:"0.6",stroke:this.getColor(c)});return i.data("modelid",c.id),i},animateCircleTraversal:function(a,b,c,d,e,f,g){var h=null;this.customSort&&(d+=f,h=this.addBackgroundSquare(d,e,g));var i=this.paper.circle(a,b,20*g.getPercentage()).attr({fill:g.getColor(g),stroke:"none"});i.data("modelid",g.id);var j,k=Raphael.animation({cx:d,cy:b},250,"easeOut",function(){i.animate({cx:d,cy:e},333,"easeIn",function(){j=this.paper.text(d,e-.5,g.id),j.data("modelid",g.id),g.deferred&&(g.deferred.resolve(),g.deferred=null),g.views={circle:i,text:j,square:h}})});return i.animate(k)},renderWrapper:function(b){b(),this.paper=window.Raphael(this.ui.viz[0],this.w,this.h),this.$detailPanel=new f({App:this.App,el:this.ui.detail}),this.$filter=new g({App:this.App,el:this.ui.filter}).render(),this.$switcher=new j({App:this.App,el:this.ui.switcher}).render();var c=a.Deferred();this.drawGrid(c);var d=c.promise(),e=this.App.vent,h=this.toggleSortOrder,i=this.$(".viz-controls").bootstrapSwitch();return i.on("switch-change",function(){var b=a.Deferred();i.bootstrapSwitch("setActive",!1),h(b),b.done(function(){i.bootstrapSwitch("setActive",!0)})}).on("click",function(a){a.stopPropagation(),a.preventDefault()}),d.then(this.renderOSDViews).then(function(){e.trigger("viz:render")}),d},removePulse:function(){this.pulseCircle&&(this.pulseCircle.stop().hide(),this.pulseCircle=null,this.pulseTimer=null)},pulseAnimation:Raphael.animation({r:30,"stroke-opacity":0},1e3,"linear").repeat(2),addPulse:function(a,b){var c=this.paper.circle(a.cx,a.cy,a.r+1).attr({stroke:"#000"}).data("modelid",b).animate(this.pulseAnimation);return c},osdUnhoverHandler:function(){null===this.pulseTimer&&(this.pulseTimer=setTimeout(this.removePulse,1500)),this.hostGroupUnhoverHandler()},isOsdElement:function(a){var b=a.target.nodeName;return"tspan"===b||"circle"===b||"rect"===b},isHostGroupElement:function(a){return"rect"===a.target.nodeName},osdHoverHandlerCore:function(a,c){if(this.pulseTimer&&(clearTimeout(this.pulseTimer),this.pulseTimer=null),(!this.pulseCircle||this.pulseCircle.data("modelid")!==c)&&(k.debug(c),b.isNumber(c))){var d=this.collection.get(c).views;if(d){var e=d.circle;e&&(this.removePulse(),this.pulseCircle=this.addPulse(e.attrs,c))}}},hostGroupHoverHandlerCore:function(c,d){if(this.customSort&&b.isNumber(d)){var e=this.collection.get(d);if(e.views){this.hostGroupTimer&&(clearTimeout(this.hostGroupTimer),this.hostGroupTimer=null);var f=e.get("host");if(this.curHostGroup===f)return;var g=c.attr("y"),h=c.attr("x");if(0===g&&0===h)return;a(".viz").tooltip("destroy").tooltip({title:f}).tooltip("show"),a(".tooltip").css("top",g-15+"px"),a(".tooltip").css("left",h-10+"px"),this.curHostGroup=f}}},hostGroupUnhoverHandler:function(){var b=this;this.hostGroupTimer=setTimeout(function(){a(".viz").tooltip("destroy"),b.curHostGroup=null},0)},dialogPlacement:["detail-outer-bottom-right","detail-outer-top-left","detail-outer-top-right","detail-outer-bottom-left"],osdClickHandlerCore:function(a,c){if(b.isNumber(c)){var d=this.collection.get(c).attributes;d.clazz=this.dialogPlacement[0];var e=0,f=a.attrs;if(f.x||f.cx){var g=f.x||f.cx,h=f.y||f.cy;g>this.threshx&&h>this.threshy?e=1:g<this.threshx&&h>this.threshy?e=2:g>this.threshx&&h<this.threshy&&(e=3)}d.clazz=this.dialogPlacement[e],this.$detailPanel.set(d)}},makeSVGEventHandlerFunc:function(a,c){return function(d){if("dashboard"!==this.state&&(d.stopPropagation(),d.preventDefault(),a(d))){var e=d.clientX,f=d.clientY;k.debug(e+" / "+f);var g=this.paper.getElementByPoint(e,f);if(k.debug(g),k.debug(g.attrs.x+" / "+g.attrs.y),g){var h=g.data("modelid");k.debug(h),b.isFunction(c)&&(c=[c]),b.each(c,function(a){a.call(this,g,h)},this)}}}},filter:function(a,c){this.filterCol=a;var d=a.where({enabled:!0,visible:!0});this.resetViews(null,{previousModels:this.collection.models});var e=this.App.vent;return this.renderOSDViews(function(a){return b.find(d,function(c){if("osd"!==c.get("category")&&a.isDown())return!0;if(b.isFunction(c.get("match"))){var d=c.get("match")(a);return k.debug("matched "+a.id+" "+d),d}return!1})}).then(function(){c&&c.resolve(),e.trigger("viz:render")})},pulse:function(a){this.removePulse();var c=a.where({pulse:!0,visible:!0});this.collection.each(function(a){var d=a.views;if(d)return d.pcircle&&(d.pcircle.stop().hide(),d.pcircle=null),b.find(c,function(c){if(b.isFunction(c.get("match"))){var e=c.get("match")(a);return e&&d.circle&&(d.pcircle?d.pcircle.show():d.pcircle=d.circle.clone().attr({r:d.circle.attrs.r+1,stroke:"#000",fill:"none"}).animate(this.pulseAnimation)),e}return!1},this)},this)},reset:function(a){this.resetViews(null,{previousModels:this.collection.models});var b=this.App.vent;return this.filterCol=null,this.renderOSDViews().then(function(){a&&a.call(this),b.trigger("viz:render")})}});return l}),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};!function(){var a,b,c,d,e,f,g;for(e=["ms","moz","webkit","o"],f=0,g=e.length;g>f&&(d=e[f],!window.requestAnimationFrame);f++)window.requestAnimationFrame=window[d+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"];return a=null,c=0,b={},requestAnimationFrame?window.cancelAnimationFrame?void 0:(a=window.requestAnimationFrame,window.requestAnimationFrame=function(d,e){var f;return f=++c,a(function(){return b[f]?void 0:d()},e),f},window.cancelAnimationFrame=function(a){return b[a]=!0}):(window.requestAnimationFrame=function(a,b){var c,d,e,f;return c=(new Date).getTime(),f=Math.max(0,16-(c-e)),d=window.setTimeout(function(){return a(c+f)},f),e=c+f,d},window.cancelAnimationFrame=function(a){return clearTimeout(a)})}(),String.prototype.hashCode=function(){var a,b,c,d,e;if(b=0,0===this.length)return b;for(c=d=0,e=this.length;e>=0?e>d:d>e;c=e>=0?++d:--d)a=this.charCodeAt(c),b=(b<<5)-b+a,b&=b;return b},o=function(a){var b,c;for(b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),a-=3600*b+60*c,a+="",c+="";c.length<2;)c="0"+c;for(;a.length<2;)a="0"+a;return b=b?b+":":"",b+c+":"+a},m=function(a){return k(a.toFixed(0))},p=function(a,b){var c,d;for(c in b)q.call(b,c)&&(d=b[c],a[c]=d);return a},n=function(a,b){var c,d,e;d={};for(c in a)q.call(a,c)&&(e=a[c],d[c]=e);for(c in b)q.call(b,c)&&(e=b[c],d[c]=e);return d},k=function(a){var b,c,d,e;for(a+="",c=a.split("."),d=c[0],e="",c.length>1&&(e="."+c[1]),b=/(\d+)(\d{3})/;b.test(d);)d=d.replace(b,"$1,$2");return d+e},l=function(a){return"#"===a.charAt(0)?a.substring(1,7):a},j=function(){function a(a,b){null==a&&(a=!0),this.clear=null!=b?b:!0,a&&AnimationUpdater.add(this)}return a.prototype.animationSpeed=32,a.prototype.update=function(a){var b;return null==a&&(a=!1),a||this.displayedValue!==this.value?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),b=this.value-this.displayedValue,Math.abs(b/this.animationSpeed)<=.001?this.displayedValue=this.value:this.displayedValue=this.displayedValue+b/this.animationSpeed,this.render(),!0):!1},a}(),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.displayScale=1,b.prototype.setTextField=function(a){return this.textField=a instanceof i?a:new i(a)},b.prototype.setMinValue=function(a,b){var c,d,e,f,g;if(this.minValue=a,null==b&&(b=!0),b){for(this.displayedValue=this.minValue,f=this.gp||[],g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.displayedValue=this.minValue);return g}},b.prototype.setOptions=function(a){return null==a&&(a=null),this.options=n(this.options,a),this.textField&&(this.textField.el.style.fontSize=a.fontSize+"px"),this.options.angle>.5&&(this.gauge.options.angle=.5),this.configDisplayScale(),this},b.prototype.configDisplayScale=function(){var a,b,c,d,e;return d=this.displayScale,this.options.highDpiSupport===!1?delete this.displayScale:(b=window.devicePixelRatio||1,a=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.displayScale=b/a),this.displayScale!==d&&(e=this.canvas.G__width||this.canvas.width,c=this.canvas.G__height||this.canvas.height,this.canvas.width=e*this.displayScale,this.canvas.height=c*this.displayScale,this.canvas.style.width=""+e+"px",this.canvas.style.height=""+c+"px",this.canvas.G__width=e,this.canvas.G__height=c),this},b}(j),i=function(){function a(a){this.el=a}return a.prototype.render=function(a){return this.el.innerHTML=m(a.displayedValue)},a}(),a=function(a){function b(a,b){this.elem=a,this.text=null!=b?b:!1,this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}return r(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.setVal=function(a){return this.value=1*a},b.prototype.render=function(){var a;return a=this.text?o(this.displayedValue.toFixed(0)):k(m(this.displayedValue)),this.elem.innerHTML=a},b}(j),b={create:function(b){var c,d,e,f;for(d=[],e=0,f=b.length;f>e;e++)c=b[e],d.push(new a(c));return d}},h=function(a){function b(a){this.gauge=a,this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,b.__super__.constructor.call(this,!1,!1),this.setOptions()}return r(b,a),b.prototype.displayedValue=0,b.prototype.value=0,b.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},b.prototype.setOptions=function(a){return null==a&&(a=null),p(this.options,a),this.length=this.canvas.height*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle},b.prototype.render=function(){var a,b,c,d,e,f,g,h,i;return a=this.gauge.getAngle.call(this,this.displayedValue),b=this.canvas.width/2,c=.9*this.canvas.height,h=Math.round(b+this.length*Math.cos(a)),i=Math.round(c+this.length*Math.sin(a)),f=Math.round(b+this.strokeWidth*Math.cos(a-Math.PI/2)),g=Math.round(c+this.strokeWidth*Math.sin(a-Math.PI/2)),d=Math.round(b+this.strokeWidth*Math.cos(a+Math.PI/2)),e=Math.round(c+this.strokeWidth*Math.sin(a+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(b,c,this.strokeWidth,0,2*Math.PI,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(f,g),this.ctx.lineTo(h,i),this.ctx.lineTo(d,e),this.ctx.fill()},b}(j),c=function(){function a(a){this.elem=a}return a.prototype.updateValues=function(a){return this.value=a[0],this.maxValue=a[1],this.avgValue=a[2],this.render()},a.prototype.render=function(){var a,b;return this.textField&&this.textField.text(m(this.value)),0===this.maxValue&&(this.maxValue=2*this.avgValue),b=this.value/this.maxValue*100,a=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:b+"%"}),$(".typical-value",this.elem).css({width:a+"%"})},a}(),g=function(a){function b(a){this.canvas=a,b.__super__.constructor.call(this),this.percentColors=null,"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.gp=[new h(this)],this.setOptions(),this.render()}return r(b,a),b.prototype.elem=null,b.prototype.value=[20],b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.displayedAngle=0,b.prototype.displayedValue=0,b.prototype.lineWidth=40,b.prototype.paddingBottom=.1,b.prototype.percentColors=null,b.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40,limitMax:!1,percentColors:[[0,"#a9d70b"],[.5,"#f9c802"],[1,"#ff0000"]]},b.prototype.setOptions=function(a){var c,d,e,f;for(null==a&&(a=null),b.__super__.setOptions.call(this,a),this.configPercentColors(),this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth,this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.render(),f=this.gp,d=0,e=f.length;e>d;d++)c=f[d],c.setOptions(this.options.pointer),c.render();return this},b.prototype.configPercentColors=function(){var a,b,c,d,e,f,g;if(this.percentColors=null,void 0!==this.options.percentColors){for(this.percentColors=new Array,g=[],c=e=0,f=this.options.percentColors.length-1;f>=0?f>=e:e>=f;c=f>=0?++e:--e)d=parseInt(l(this.options.percentColors[c][1]).substring(0,2),16),b=parseInt(l(this.options.percentColors[c][1]).substring(2,4),16),a=parseInt(l(this.options.percentColors[c][1]).substring(4,6),16),g.push(this.percentColors[c]={pct:this.options.percentColors[c][0],color:{r:d,g:b,b:a}});return g}},b.prototype.set=function(a){var b,c,d,e,f,g,i;if(a instanceof Array||(a=[a]),a.length>this.gp.length)for(b=e=0,i=a.length-this.gp.length;i>=0?i>e:e>i;b=i>=0?++e:--e)this.gp.push(new h(this));for(b=0,c=!1,f=0,g=a.length;g>f;f++)d=a[f],d>this.maxValue&&(this.maxValue=1.1*this.value,c=!0),this.gp[b].value=d,this.gp[b++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=a[a.length-1],c&&this.options.limitMax?void 0:AnimationUpdater.run()},b.prototype.getAngle=function(a){return(1+this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-this.minValue)*(1-2*this.options.angle)*Math.PI},b.prototype.getColorForPercentage=function(a,b){var c,d,e,f,g,h,i;if(0===a)c=this.percentColors[0].color;else for(c=this.percentColors[this.percentColors.length-1].color,e=h=0,i=this.percentColors.length-1;i>=0?i>=h:h>=i;e=i>=0?++h:--h)if(a<=this.percentColors[e].pct){b===!0?(g=this.percentColors[e-1],d=this.percentColors[e],
f=(a-g.pct)/(d.pct-g.pct),c={r:Math.floor(g.color.r*(1-f)+d.color.r*f),g:Math.floor(g.color.g*(1-f)+d.color.g*f),b:Math.floor(g.color.b*(1-f)+d.color.b*f)}):c=this.percentColors[e].color;break}return"rgb("+[c.r,c.g,c.b].join(",")+")"},b.prototype.getColorForValue=function(a,b){var c;return c=(a-this.minValue)/(this.maxValue-this.minValue),this.getColorForPercentage(c,b)},b.prototype.render=function(){var a,b,c,d,e,f,g,h,i;for(e=this.canvas.width/2,d=this.canvas.height*(1-this.paddingBottom),a=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",void 0!==this.options.customFillStyle?b=this.options.customFillStyle(this):null!==this.percentColors?b=this.getColorForValue(this.displayedValue,!0):void 0!==this.options.colorStop?(b=0===this.options.gradientType?this.ctx.createRadialGradient(e,d,9,e,d,70):this.ctx.createLinearGradient(0,0,e,0),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop)):b=this.options.colorStart,this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(e,d,this.radius,(1+this.options.angle)*Math.PI,a,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(e,d,this.radius,a,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),h=this.gp,i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.update(!0));return i},b}(e),d=function(a){function b(a){this.canvas=a,b.__super__.constructor.call(this),"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}return r(b,a),b.prototype.lineWidth=15,b.prototype.displayedValue=0,b.prototype.value=33,b.prototype.maxValue=80,b.prototype.minValue=0,b.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},b.prototype.getAngle=function(a){return(1-this.options.angle)*Math.PI+(a-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},b.prototype.setOptions=function(a){return null==a&&(a=null),b.__super__.setOptions.call(this,a),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},b.prototype.set=function(a){return this.value=a,this.value>this.maxValue&&(this.maxValue=1.1*this.value),AnimationUpdater.run()},b.prototype.render=function(){var a,b,c,d,e,f;return a=this.getAngle(this.displayedValue),f=this.canvas.width/2,c=this.canvas.height/2,this.textField&&this.textField.render(this),b=this.ctx.createRadialGradient(f,c,39,f,c,70),b.addColorStop(0,this.options.colorStart),b.addColorStop(1,this.options.colorStop),d=this.radius-this.lineWidth/2,e=this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(f,c,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=b,this.ctx.beginPath(),this.ctx.arc(f,c,this.radius,(1-this.options.angle)*Math.PI,a,!1),this.ctx.stroke()},b}(e),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.strokeGradient=function(a,b,c,d){var e;return e=this.ctx.createRadialGradient(a,b,c,a,b,d),e.addColorStop(0,this.options.shadowColor),e.addColorStop(.12,this.options._orgStrokeColor),e.addColorStop(.88,this.options._orgStrokeColor),e.addColorStop(1,this.options.shadowColor),e},b.prototype.setOptions=function(a){var c,d,e,f;return null==a&&(a=null),b.__super__.setOptions.call(this,a),f=this.canvas.width/2,c=this.canvas.height/2,d=this.radius-this.lineWidth/2,e=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(f,c,d,e),this},b}(d),window.AnimationUpdater={elements:[],animId:null,addAll:function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(AnimationUpdater.elements.push(b));return e},add:function(a){return AnimationUpdater.elements.push(a)},run:function(){var a,b,c,d,e;for(a=!0,e=AnimationUpdater.elements,c=0,d=e.length;d>c;c++)b=e[c],b.update()&&(a=!1);return a?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},window.Gauge=g,window.Donut=f,window.BaseDonut=d,window.TextRenderer=i}.call(this),define("gauge",["jquery"],function(a){return function(){var b;return b||a.Gauge}}(this)),define("helpers/gauge-helper",["jquery","underscore","backbone","templates","humanize","helpers/animation","marionette"],function(a,b,c,d,e,f){"use strict";function g(a){this.$el.css("display","block"),a&&a.apply(this)}function h(a){this.$el.css("display","none"),a&&a.apply(this)}function i(a){return this.gaugeState="hidden",this._disappearAnimation(this.$el,function(){this.$el.css("visibility","hidden"),a&&a.apply(this)})}function j(a){return this.gaugeState="visible",this.$el.css("visibility","visible"),this._reappearAnimation(this.$el,a)}function k(a,b){return function(){this.ui&&this.ui.statusIcon&&this.ui.statusIcon.removeClass(m).addClass(a).find(".fa-stack-1x").removeClass(n).addClass(b)}}function l(a,c){a.listenTo&&(a._okEvent=o,a._warningEvent=p,a._failEvent=q,b.bindAll(a,"_okEvent","_warningEvent","_failEvent"),a.listenTo(a,"status:ok",a._okEvent),a.listenTo(a,"status:warn",a._warningEvent),a.listenTo(a,"status:fail",a._failEvent),a.ui&&(a.ui.statusIcon=".card-icon")),a.App&&a.App.vent?(a._expand=g,a._collapse=h,a._disappear=i,a._reappear=j,a._disappearAnimation=f.single("animated fadeOutUp-enter fadeOutUp"),a._reappearAnimation=f.single("animated fadeInDown-enter fadeInDown"),a.gaugeState="visible",b.bindAll(a,"_expand","_collapse","_disappear","_reappear","_disappearAnimation","_reappearAnimation"),a.listenTo(a.App.vent,"gauges:disappear",a._disappear),a.listenTo(a.App.vent,"gauges:reappear",a._reappear),a.listenTo(a.App.vent,"gauges:collapse",a._collapse),a.listenTo(a.App.vent,"gauges:expand",a._expand),a.listenToOnce(a,"render",function(){a.ui&&a.ui.spinner&&(a.listenTo(a.App.vent,c+":request",function(){a.ui.spinner.css("visibility","visible")}),a.listenTo(a.App.vent,c+":sync "+c+":error",function(){setTimeout(function(){a.ui.spinner.css("visibility","hidden")},250)}))})):console.log(a," is missing App or App.vent object")}var m="ok warn fail",n="fa-check fa-warning fa-exclamation-circle",o=k("ok","fa-check"),p=k("warn","fa-warning"),q=k("fail","fa-exclamation-circle");return l}),define("views/usage-view",["jquery","underscore","backbone","templates","gauge","humanize","helpers/animation","helpers/gauge-helper","marionette"],function(a,b,c,d,e,f,g,h){"use strict";return c.Marionette.ItemView.extend({className:"col-lg-3 col-md-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/usage.ejs"],cardTitleTemplate:b.template("<%- used %>% Usage"),timer:null,delay:2e4,ui:{cardtitle:".card-title",number:".number",totalused:".totalused",totalcap:".totalcap",canvas:".usage-canvas",spinner:".fa-spinner"},modelEvents:{change:"updateView"},serializeData:function(){return{title:this.title}},initialize:function(a){b.bindAll(this,"updateView","set"),this.App=c.Marionette.getOption(this,"App"),this.App&&this.listenTo(this.App.vent,"usage:update",this.set),this.opts={},b.extend(this.opts,{lines:10,"font-size":"0px",percentColors:[[0,"#1ae61a"],[.6,"#e6e619"],[1,"#e61919"]],generateGradient:!0,highDpiSupport:!1}),this.title=void 0===a.title?"Untitled":a.title,this.listenToOnce(this,"render",this.postRender),h(this,"usage")},postRender:function(){this.gauge=new e(this.ui.canvas[0]).setOptions(this.opts),this.gauge.set(0),this.gauge.maxValue=100,this.gauge.minValue=0,this.ui.canvas.css({height:"",width:""}),this.triggerMethod("item:postrender",this)},warningThreshold:90,displayWarning:function(){this.model.getPercentageUsed()>this.warningThreshold?this.trigger("status:warn"):this.trigger("status:ok")},updateView:function(a){var b=a.toJSON(),c=b.space,d=f.filesize(c.used_bytes,void 0,1);d=d.replace(" ","");var e=f.filesize(c.capacity_bytes,void 0,1);e=e.replace(" ",""),this.ui.number.text(d),this.ui.totalcap.text(e),this.gauge.set(a.getPercentageUsed()),this.displayWarning()},set:function(a){this.model.set(a.toJSON())}})}),define("views/gauges-layout",["jquery","underscore","backbone","templates","marionette"],function(a,b,c,d){"use strict";return c.Marionette.Layout.extend({className:"row gauges",template:d["app/scripts/templates/gauges.ejs"],regions:{a:{selector:".one"},b:{selector:".two"},c:{selector:".three"},d:{selector:".four"}}})}),define("l20nCtx",["require","module"],function(a,b){"use strict";var c=b.config?b.config():{},d={name:"l20nCtx",extension:"l20n",prefix:"{{",suffix:"}}",locale:"en"},e={};e.version="0.0.3",e.load=function(b,e,g,h){return c=f.extend(c,d,f.getConfig(h)),h.isBuild?g():void a(["l20n"],function(a){var d=f.getFullName(b,c.extension),h=e.toUrl(d),i=a.getContext(h);i.linkResource(f.parseName(h,c)),i.requestLocales();var j=function(){i.addEventListener("ready",l),i.addEventListener("error",m)},k=function(){i.removeEventListener("ready",l),i.removeEventListener("error",m)},l=function(){k(),g(i)},m=function(a){k(),c.debug&&alert(a),g.error(a)};j()})};var f={extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]},getConfig:function(a){var b={},c=d.name;return b=a.config?a.config[c]||b:a[c]||b},getFullName:function(a,b){return a&&!a.match(/\.[0-9a-z]+$/i)?[a,b].join("."):a},parseName:function(a,b){var c=b.prefix+"locale"+b.suffix;return a.replace(c,b.locale)}};return e}),define("views/breadcrumb-view",["jquery","underscore","backbone","templates","l20nCtx!locales/{{locale}}/strings","marionette"],function(a,b,c,d,e){"use strict";var f=c.Marionette.ItemView.extend({template:d["app/scripts/templates/breadcrumb.ejs"],ui:{dashboardIcon:".fa-tachometer",fullscreenIcon:".fa-sitemap",graphIcon:".fa-bar-chart-o"},events:{"click span.bc-entry":"switcher"},initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.AppRouter=c.Marionette.getOption(this,"AppRouter"),this.initial=c.Marionette.getOption(this,"initial")||"dashboard",b.bindAll(this,"dashboardIcon","fullscreenIcon"),this.listenTo(this.AppRouter,"route:dashboard",this.dashboardIcon),this.listenTo(this.AppRouter,"route:workbench",this.fullscreenIcon),this.listenTo(this.AppRouter,"route:graph",this.graphIcon);var a=this;this.listenTo(this,"render",b.once(function(){"vizmode"===a.initial?a.fullscreenIcon():"graphmode"===a.initial&&a.graphIcon()}))},dashboardIcon:function(){this.$(".bc-active").removeClass("bc-active"),this.ui.dashboardIcon.closest("span").addClass("bc-active")},fullscreenIcon:function(){this.$(".bc-active").removeClass("bc-active"),this.ui.fullscreenIcon.closest("span").addClass("bc-active")},graphIcon:function(){this.$(".bc-active").removeClass("bc-active"),this.ui.graphIcon.closest("span").addClass("bc-active")},serializeData:function(){return{title:{dashboard:e.getSync("dashboardTitle"),bench:e.getSync("workbenchTitle"),chart:e.getSync("graphTitle"),manage:e.getSync("manageTitle")},dashboard:e.getSync("dashboard"),workbench:e.getSync("workbench"),graph:e.getSync("graph"),manage:e.getSync("manage")}},switcher:function(b){var c=a(b.target);if(c=c.closest("span"),!c.hasClass("bc-active")){var d=c.attr("data-action");d&&("dashboard"===d&&this.App.vent.trigger("app:dashboard"),"bench"===d&&this.App.vent.trigger("app:fullscreen"),"chart"===d&&this.App.vent.trigger("app:graph"),"manage"===d&&(document.location="/manage/#/"))}}});return f}),define("views/alerts-view",["jquery","underscore","backbone","templates","l20nCtx!locales/{{locale}}/strings","loglevel","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.ItemView.extend({template:d["app/scripts/templates/alerts.ejs"],growlTemplate:d["app/scripts/templates/growl.ejs"],throttleMs:1e4,throttleCount:3,krakenFailThreshold:9e5,timeoutCount:0,initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.listenTo(this.App.vent,"app:neterror",this.neterrorHandler),this.listenTo(this.App.vent,"krakenHeartBeat:update",this.heartBeat),this.listenTo(this.App.vent,"request:success",this.requestSuccess),this.listenTo(this.App.vent,"request:error",this.requestError),b.each(["timeout","serverError","unexpectedError","parserError"],function(a){this[a]=b.throttle(this[a],this.throttleMs)},this),this.sessionExpired=b.once(this.sessionExpired),this.serverUnreachable=b.once(this.serverUnreachable),this.timeout=b.after(this.throttleCount,this.timeout),this.clusterAPITimeout=b.throttle(this.clusterAPITimeout,this.krakenFailThreshold),b.bindAll(this,"neterrorHandler","heartBeat","requestSuccess","requestError")},heartBeat:function(a){if(a){var c=a.attributes;if(c){var d=Date.now(),e=d-c.cluster_update_time_unix;if(e>this.krakenFailThreshold){var f=b.extend({},this.notyDefaults);this.clusterAPITimeout(f)}}}},commonNotyNotification:{layout:"topRight",template:b.template('<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>'),theme:"growlTheme",animation:{open:{opacity:1,height:"toggle"},close:{opacity:0,height:"toggle"},easing:"swing",speed:500}},requestSuccess:function(a){var c={text:this.growlTemplate({text:a.headline}),type:"success",timeout:1e4};noty(b.extend({},this.commonNotyNotification,c))},requestError:function(a){var c={text:this.growlTemplate({text:a.headline}),type:"error"};noty(b.extend({},this.commonNotyNotification,c))},notyDefaults:{layout:"top",type:"error"},error:function(a){noty(a)},warning:function(a){a.type="warning",noty(a)},timeout:function(a){a.text=e.getSync("dashboardUpdateTimeout"),this.timeoutCount++,this.error(a),f.debug("timeout count "+this.timeoutCount)},clusterAPITimeout:function(a){a.text=e.getSync("clusterNotResponding"),this.warning(a)},sessionExpired:function(a){a=b.extend(a,{text:e.getSync("sessionTimeout"),buttons:[{addClass:"btn btn-primary",text:e.getSync("loginButton"),onClick:function(a){a.close(),window.location="/login/"}}]}),this.warning(a)},serverError:function(a,b){a.text=e.getSync("serverErrorMessage",b),this.error(a)},unexpectedError:function(a,b){a.text=e.getSync("unexpectedError",b),this.error(a)},serverUnreachable:function(a,c){a=b.extend(a,{force:!0,modal:!0,text:e.getSync("serverUnreachable",c),closeWith:[]}),this.error(a),this.error=this.warning=b.identity},parserError:function(a,c){a=b.extend(a,{text:e.getSync("JSONParserError",c),timeout:1e4}),this.error(a)},neterrorHandler:function(a,c){var d=c.statusText;if(d){var e=b.extend({},this.notyDefaults);return"timeout"===d?this.timeout(e):"parsererror"===d||200===c.status&&"OK"===d?this.parserError(e,b.extend({source:a},c)):403===c.status?this.sessionExpired(e):c.status>=500?this.serverError(e,c):0===c.status?this.serverUnreachable(e,c):this.unexpectedError(e,c)}}});return g}),define("views/osd-dash-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","marionette"],function(a,b,c,d,e){"use strict";var f=c.Marionette.ItemView.extend({className:"col-lg-3 col-md-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/osd-dash.ejs"],headlineTemplate:b.template("<%- ok %>/<%- total %>"),subtextTemplate:b.template("<%- down %> down"),ui:{headline:".headline",subline:".subline",subtext:".subtext"},modelEvents:{change:"modelChanged"},initialize:function(){b.bindAll(this,"set","modelChanged"),this.App=c.Marionette.getOption(this,"App"),this.App&&this.listenTo(this.App.vent,"status:update",this.set),this.model=new c.Model,e(this)},set:function(a){var b=a.attributes.osd,c=0;b.warn.count&&b.warn.states["down/in"]&&(c+=b.warn.states["down/in"]),b.critical.count&&b.critical.states["down/out"]&&(c+=b.critical.states["down/out"]),this.model.set({ok:b.ok.count,warn:b.warn.count,critical:b.critical.count,down:c})},warningThresholdPercentage:80,displayWarning:function(a){Math.round(a)>this.warningThresholdPercentage?this.trigger("status:warn"):this.trigger("status:ok")},modelChanged:function(a){var c=a.get("ok"),d=a.get("warn"),e=a.get("critical"),f=a.get("down"),g=0;if(b.isNumber(c)&&(g+=c),b.isNumber(d)&&(g+=d),b.isNumber(e)&&(g+=e),this.ui.subline.text("In & Up"),d||e){this.ui.subtext.text(this.subtextTemplate({down:f}));var h=Math.round(f/g*100);this.displayWarning(h)}else this.ui.subtext.text(""),this.displayWarning(0);this.ui.headline.text(this.headlineTemplate({ok:c,total:g}))}});return f}),define("views/mon-dash-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","marionette"],function(a,b,c,d,e){"use strict";var f=c.Marionette.ItemView.extend({className:"col-lg-3 col-md-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/mon-dash.ejs"],headlineTemplate:b.template("<%- up %>/<%- total %>"),modelEvents:{change:"updateModel"},ui:{headline:".headline",subtext:".subtext"},initialize:function(){b.bindAll(this,"set","updateModel","updateView"),this.model=new c.Model,this.App=c.Marionette.getOption(this,"App"),this.App&&this.listenTo(this.App.vent,"status:update",this.set),e(this)},set:function(a){this.model.set(b.extend({cluster_update_time_unix:a.attributes.cluster_update_time_unix},a.attributes.mon))},displayWarning:function(){var a=this.model.get("ok").states["in"];1>a?this.trigger("status:warn"):this.trigger("status:ok")},updateModel:function(a){var b=a.attributes,c=b.ok.count+b.warn.count+b.critical.count;this.model.set("total",c,{silent:!0}),setTimeout(this.updateView,0)},updateView:function(){var a=this.model.get("ok").states["in"],b=this.model.get("total");this.ui.headline.text(this.headlineTemplate({up:a,total:b})),this.displayWarning()}});return f});var Kinetic={};!function(){Kinetic={version:"4.7.3",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,UA:function(){var a=navigator.userAgent.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}}(),Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},Layer:function(a){this.___init(a)},Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){void 0!==b&&(void 0===this.names[b]&&(this.names[b]=[]),this.names[b].push(a))},_removeName:function(a,b){if(void 0!==a){var c=this.names[a];if(void 0!==c){for(var d=0;d<c.length;d++){var e=c[d];e._id===b&&c.splice(d,1)}0===c.length&&delete this.names[a]}}}}}(),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("kinetic",b):a.returnExports=b()}(this,function(){return Kinetic}),function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,c=0;for(this.length=b;b>c;c++)this[c]=a[c];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)},Kinetic.Collection.prototype.toArray=function(){var a,b=[],c=this.length;for(a=0;c>a;a++)b.push(this[a]);return b},Kinetic.Collection.toCollection=function(a){var b,c=new Kinetic.Collection,d=a.length;for(b=0;d>b;b++)c.push(a[b]);return c},Kinetic.Collection.mapMethods=function(a){var b,c=a.length;for(b=0;c>b;b++)!function(b){var c=a[b];Kinetic.Collection.prototype[c]=function(){var a,b=this.length;for(args=[].slice.call(arguments),a=0;b>a;a++)this[a][c].apply(this[a],args)}}(b)},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(a,b){this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b},scale:function(a,b){this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=this.m[0]*-c+this.m[2]*b,g=this.m[1]*-c+this.m[3]*b;this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(a,b){var c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f},multiply:function(a){var b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var c=this.m[0],d=this.m[1],e=this.m[2],f=this.m[3],g=this.m[4],h=this.m[5],i=(c*(b-h)-d*(a-g))/(c*f-d*e),j=(a-g-e*i)/c;this.translate(j,i)}};var a="canvas",b="2d",c="[object Array]",d="[object Number]",e="[object String]",f=Math.PI/180,g=180/Math.PI,h="#",i="",j="0",k="Kinetic warning: ",l="Kinetic error: ",m="rgb(",n={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},o=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return Object.prototype.toString.call(a)==c},_isNumber:function(a){return Object.prototype.toString.call(a)==d},_isString:function(a){return Object.prototype.toString.call(a)==e},_hasMethods:function(a){var b,c=[];for(b in a)this._isFunction(a[b])&&c.push(b);return c.length>0},_isInDocument:function(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},_simplifyArray:function(a){var b,c,d=[],e=a.length,f=Kinetic.Util;for(b=0;e>b;b++)c=a[b],f._isNumber(c)?c=Math.round(1e3*c)/1e3:f._isString(c)||(c=c.toString()),d.push(c);return d},_getXY:function(a){if(this._isNumber(a))return{x:a,y:a};if(this._isArray(a)){if(1===a.length){var b=a[0];if(this._isNumber(b))return{x:b,y:b};if(this._isArray(b))return{x:b[0],y:b[1]};if(this._isObject(b))return b}else if(a.length>=2)return{x:a[0],y:a[1]}}else if(this._isObject(a))return a;return null},_getSize:function(a){if(this._isNumber(a))return{width:a,height:a};if(this._isArray(a))if(1===a.length){var b=a[0];if(this._isNumber(b))return{width:b,height:b};if(this._isArray(b)){if(b.length>=4)return{width:b[2],height:b[3]};if(b.length>=2)return{width:b[0],height:b[1]}}else if(this._isObject(b))return b}else{if(a.length>=4)return{width:a[2],height:a[3]};if(a.length>=2)return{width:a[0],height:a[1]}}else if(this._isObject(a))return a;return null},_getPoints:function(a){var b,c,d=[];if(void 0===a)return[];if(c=a.length,this._isArray(a[0])){for(b=0;c>b;b++)d.push({x:a[b][0],y:a[b][1]});return d}if(this._isObject(a[0]))return a;for(b=0;c>b;b+=2)d.push({x:a[b],y:a[b+1]});return d},_getImage:function(c,d){var e,f;c?this._isElement(c)?d(c):this._isString(c)?(e=new Image,e.onload=function(){d(e)},e.src=c):c.data?(f=document.createElement(a),f.width=c.width,f.height=c.height,_context=f.getContext(b),_context.putImageData(c,0,0),this._getImage(f.toDataURL(),d)):d(null):d(null)},_rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace(h,i);var b=parseInt(a,16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a=j+a;return h+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in n?(b=n[a],{r:b[0],g:b[1],b:b[2]}):a[0]===h?this._hexToRgb(a.substring(1)):a.substr(0,4)===m?(b=o.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var c=this._clone(b);for(var d in a)this._isObject(a[d])?c[d]=this._merge(a[d],c[d]):c[d]=a[d];return c},_clone:function(a){var b={};for(var c in a)this._isObject(a[c])?b[c]=this._clone(a[c]):b[c]=a[c];return b},_degToRad:function(a){return a*f},_radToDeg:function(a){return a*g},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw new Error(l+a)},warn:function(a){window.console&&console.warn&&console.warn(k+a)},extend:function(a,b){for(var c in b.prototype)c in a.prototype||(a.prototype[c]=b.prototype[c])},addMethods:function(a,b){var c;for(c in b)a.prototype[c]=b[c]},_getControlPoints:function(a,b,c,d){var e=a.x,f=a.y,g=b.x,h=b.y,i=c.x,j=c.y,k=Math.sqrt(Math.pow(g-e,2)+Math.pow(h-f,2)),l=Math.sqrt(Math.pow(i-g,2)+Math.pow(j-h,2)),m=d*k/(k+l),n=d*l/(k+l),o=g-m*(i-e),p=h-m*(j-f),q=g+n*(i-e),r=h+n*(j-f);return[{x:o,y:p},{x:q,y:r}]},_expandPoints:function(a,b){var c,d,e=a.length,f=[];for(c=1;e-1>c;c++)d=Kinetic.Util._getControlPoints(a[c-1],a[c],a[c+1],b),f.push(d[0]),f.push(a[c]),f.push(d[1]);return f},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}}(),function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d;Kinetic.Canvas=function(a){this.init(a)},Kinetic.Canvas.prototype={init:function(a){a=a||{};var b=a.pixelRatio||Kinetic.pixelRatio||e;this.pixelRatio=b,this._canvas=document.createElement("canvas"),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px"},setHeight:function(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(c){try{return this._canvas.toDataURL()}catch(d){return Kinetic.Util.warn("Unable to get data URL. "+d.message),""}}}},Kinetic.SceneCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.SceneContext(this),this.setSize(b,c)},Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a),c.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a),c.scale(b,b)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.HitContext(this),this.setSize(b,c)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=",",b="(",c=")",d="([",e="])",f=";",g="()",h="=",i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(a){this.init(a)},Kinetic.Context.prototype={init:function(a){this.canvas=a,this._context=a._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){var b=a.getFillEnabled();b&&this._fill(a),a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(i){var j,k,l,m,n=this.traceArr,o=n.length,p="";for(j=0;o>j;j++)k=n[j],l=k.method,l?(m=k.args,p+=l,p+=i?g:Kinetic.Util._isArray(m[0])?d+m.join(a)+e:b+m.join(a)+c):(p+=k.property,i||(p+=h+k.val)),p+=f;return p},clearTrace:function(){this.traceArr=[]},_trace:function(a){var b,c=this.traceArr;c.push(a),b=c.length,b>=Kinetic.traceArrMax&&c.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(){var a,b,c=[].slice.call(arguments),d=this.getCanvas();c.length?(a=Kinetic.Util._getXY(c),b=Kinetic.Util._getSize(c),this.clearRect(a.x||0,a.y||0,b.width,b.height)):this.clearRect(0,0,d.getWidth(),d.getHeight())},_applyLineCap:function(a){var b=a.getLineCap();b&&this.setAttr("lineCap",b)},_applyOpacity:function(a){var b=a.getAbsoluteOpacity();1!==b&&this.setAttr("globalAlpha",b)},_applyLineJoin:function(a){var b=a.getLineJoin();b&&this.setAttr("lineJoin",b)},_applyAncestorTransforms:function(a){var b=a.getAbsoluteTransform().getMatrix();this.transform(b[0],b[1],b[2],b[3],b[4],b[5])},_clip:function(a){var b=a.getClipX()||0,c=a.getClipY()||0,d=a.getClipWidth(),e=a.getClipHeight();this.save(),this._applyAncestorTransforms(a),this.beginPath(),this.rect(b,c,d,e),this.clip(),this.reset(),a._drawChildren(this.getCanvas()),this.restore()},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){var a=arguments;this._context.rotate(a[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this._context;
this._context.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.mozDash=a[0]:"webkitLineDash"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],a[1])},_enableTrace:function(){var a,b,c=this,d=i.length,e=Kinetic.Util._simplifyArray,f=this.setAttr;for(a=0;d>a;a++)!function(a){var d,f=c[a];c[a]=function(){return b=e(Array.prototype.slice.call(arguments,0)),d=f.apply(c,arguments),c._trace({method:a,args:b}),d}}(i[a]);c.setAttr=function(){f.apply(c,arguments),c._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)},Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.getFill();this.setAttr("fillStyle",b),a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),c=a.getFillPatternX(),d=a.getFillPatternY(),e=a.getFillPatternScale(),f=a.getFillPatternRotation(),g=a.getFillPatternOffset(),h=a.getFillPatternRepeat();(c||d)&&this.translate(c||0,d||0),f&&this.rotate(f),e&&this.scale(e.x,e.y),g&&this.translate(-1*g.x,-1*g.y),this.setAttr("fillStyle",this.createPattern(b,h||"repeat")),this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),c=a.getFillLinearGradientEndPoint(),d=a.getFillLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(var f=0;f<d.length;f+=2)e.addColorStop(d[f],d[f+1]);this.setAttr("fillStyle",e),this.fill()}},_fillRadialGradient:function(a){for(var b=a.getFillRadialGradientStartPoint(),c=a.getFillRadialGradientEndPoint(),d=a.getFillRadialGradientStartRadius(),e=a.getFillRadialGradientEndRadius(),f=a.getFillRadialGradientColorStops(),g=this.createRadialGradient(b.x,b.y,d,c.x,c.y,e),h=0;h<f.length;h+=2)g.addColorStop(f[h],f[h+1]);this.setAttr("fillStyle",g),this.fill()},_fill:function(a){var b=a.getFill(),c=a.getFillPatternImage(),d=a.getFillLinearGradientColorStops(),e=a.getFillRadialGradientColorStops(),f=a.getFillPriority();b&&"color"===f?this._fillColor(a):c&&"pattern"===f?this._fillPattern(a):d&&"linear-gradient"===f?this._fillLinearGradient(a):e&&"radial-gradient"===f?this._fillRadialGradient(a):b?this._fillColor(a):c?this._fillPattern(a):d?this._fillLinearGradient(a):e&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.getStroke(),c=a.getStrokeWidth(),d=a.getDashArray(),e=a.getStrokeScaleEnabled();a.hasStroke()&&(e||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),d&&a.getDashArrayEnabled()&&this.setLineDash(d),this.setAttr("lineWidth",c||2),this.setAttr("strokeStyle",b||"black"),a._strokeFunc(this),e||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,c=a.getAbsoluteOpacity(),d=b.get(a.getShadowColor(),"black"),e=b.get(a.getShadowBlur(),5),f=b.get(a.getShadowOpacity(),0),g=b.get(a.getShadowOffset(),{x:0,y:0});f&&this.setAttr("globalAlpha",f*c),this.setAttr("shadowColor",d),this.setAttr("shadowBlur",e),this.setAttr("shadowOffsetX",g.x),this.setAttr("shadowOffsetY",g.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(a){Kinetic.Context.call(this,a)},Kinetic.HitContext.prototype={_fill:function(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()},_stroke:function(a){var b=a.getStroke(),c=a.getStrokeWidth();(b||c)&&(this._applyLineCap(a),this.setAttr("lineWidth",c||2),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var a="add",b="b",c="Deg",d="g",e="get",f="#",g="r",h="RGB",i="set",j="B",k="G",l="Height",m="R",n="Width",o="X",p="Y";Kinetic.Factory={addGetterSetter:function(a,b,c){this.addGetter(a,b,c),this.addSetter(a,b)},addPointGetterSetter:function(a,b,c){this.addPointGetter(a,b,c),this.addPointSetter(a,b),this.addGetter(a,b+o,c),this.addGetter(a,b+p,c),this.addSetter(a,b+o),this.addSetter(a,b+p)},addBoxGetterSetter:function(a,b,c){this.addBoxGetter(a,b,c),this.addBoxSetter(a,b),this.addGetter(a,b+o,c),this.addGetter(a,b+p,c),this.addGetter(a,b+n,c),this.addGetter(a,b+l,c),this.addSetter(a,b+o),this.addSetter(a,b+p),this.addSetter(a,b+n),this.addSetter(a,b+l)},addPointsGetterSetter:function(a,b){this.addPointsGetter(a,b),this.addPointsSetter(a,b),this.addPointAdder(a,b)},addRotationGetterSetter:function(a,b,c){this.addRotationGetter(a,b,c),this.addRotationSetter(a,b)},addColorGetterSetter:function(a,c){this.addGetter(a,c),this.addSetter(a,c),this.addColorRGBGetter(a,c),this.addColorComponentGetter(a,c,g),this.addColorComponentGetter(a,c,d),this.addColorComponentGetter(a,c,b),this.addColorRGBSetter(a,c),this.addColorComponentSetter(a,c,g),this.addColorComponentSetter(a,c,d),this.addColorComponentSetter(a,c,b)},addColorRGBGetter:function(a,b){var c=e+Kinetic.Util._capitalize(b)+h;a.prototype[c]=function(){return Kinetic.Util.getRGB(this.attrs[b])}},addColorComponentGetter:function(a,b,c){var d=e+Kinetic.Util._capitalize(b),f=d+Kinetic.Util._capitalize(c);a.prototype[f]=function(){return this[d+h]()[c]}},addPointsGetter:function(a,b){var c=e+Kinetic.Util._capitalize(b);a.prototype[c]=function(){var a=this.attrs[b];return void 0===a?[]:a}},addGetter:function(a,b,c){var d=e+Kinetic.Util._capitalize(b);a.prototype[d]=function(){var a=this.attrs[b];return void 0===a?c:a}},addPointGetter:function(a,b){var c=e+Kinetic.Util._capitalize(b);a.prototype[c]=function(){var a=this;return{x:a[c+o](),y:a[c+p]()}}},addBoxGetter:function(a,b){var c=e+Kinetic.Util._capitalize(b);a.prototype[c]=function(){var a=this;return{x:a[c+o](),y:a[c+p](),width:a[c+n](),height:a[c+l]()}}},addRotationGetter:function(a,b,d){var f=e+Kinetic.Util._capitalize(b);a.prototype[f]=function(){var a=this.attrs[b];return void 0===a&&(a=d),a},a.prototype[f+c]=function(){var a=this.attrs[b];return void 0===a&&(a=d),Kinetic.Util._radToDeg(a)}},addColorRGBSetter:function(a,b){var c=i+Kinetic.Util._capitalize(b)+h;a.prototype[c]=function(a){var c=a&&void 0!==a.r?0|a.r:this.getAttr(b+m),d=a&&void 0!==a.g?0|a.g:this.getAttr(b+k),e=a&&void 0!==a.b?0|a.b:this.getAttr(b+j);this._setAttr(b,f+Kinetic.Util._rgbToHex(c,d,e))}},addColorComponentSetter:function(a,b,c){var d=i+Kinetic.Util._capitalize(b),e=d+Kinetic.Util._capitalize(c);a.prototype[e]=function(a){var b={};b[c]=a,this[d+h](b)}},addPointsSetter:function(a,b){var c=i+Kinetic.Util._capitalize(b);a.prototype[c]=function(a){var b=Kinetic.Util._getPoints(a);this._setAttr("points",b)}},addSetter:function(a,b){var c=i+Kinetic.Util._capitalize(b);a.prototype[c]=function(a){this._setAttr(b,a)}},addPointSetter:function(a,b){var c=i+Kinetic.Util._capitalize(b);a.prototype[c]=function(){var a=Kinetic.Util._getXY([].slice.call(arguments)),d=this.attrs[b],e=0,f=0;a&&(e=a.x,f=a.y,this._fireBeforeChangeEvent(b,d,a),void 0!==e&&this[c+o](e),void 0!==f&&this[c+p](f),this._fireChangeEvent(b,d,a))}},addBoxSetter:function(a,b){var c=i+Kinetic.Util._capitalize(b);a.prototype[c]=function(){var a,d,e,f,g=[].slice.call(arguments),h=Kinetic.Util._getXY(g),i=Kinetic.Util._getSize(g),j=Kinetic.Util._merge(h,i),k=this.attrs[b];j&&(a=j.x,d=j.y,e=j.width,f=j.height,this._fireBeforeChangeEvent(b,k,j),void 0!==a&&this[c+o](a),void 0!==d&&this[c+p](d),void 0!==e&&this[c+n](e),void 0!==f&&this[c+l](f),this._fireChangeEvent(b,k,j))}},addRotationSetter:function(a,b){var d=i+Kinetic.Util._capitalize(b);a.prototype[d]=function(a){this._setAttr(b,a)},a.prototype[d+c]=function(a){this._setAttr(b,Kinetic.Util._degToRad(a))}},addPointAdder:function(b,c){var d=a+Kinetic.Util._removeLastLetter(Kinetic.Util._capitalize(c));b.prototype[d]=function(){var a=Kinetic.Util._getXY([].slice.call(arguments)),b=this.attrs[c];a&&(this._fireBeforeChangeEvent(c,b,a),this.attrs[c].push(a),this._fireChangeEvent(c,b,a))}}}}(),function(){var a="absoluteOpacity",b="absoluteTransform",c="before",d="Change",e="children",f=".",g="",h="get",i="id",j="kinetic",k="listening",l="mouseenter",m="mouseleave",n="name",o="set",p="Shape",q=" ",r="stage",s="transform",t="Stage",u="visible",v=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic"].join(q);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(c){var d=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this.cache={},this.setAttrs(c),this.on(v,function(){this._clearCache(s),d._clearSelfAndChildrenCache(b)}),this.on("visibleChange.kinetic",function(){d._clearSelfAndChildrenCache(u)}),this.on("listeningChange.kinetic",function(){d._clearSelfAndChildrenCache(k)}),this.on("opacityChange.kinetic",function(){d._clearSelfAndChildrenCache(a)})},clearCache:function(){this.cache={}},_clearCache:function(a){delete this.cache[a]},_getCache:function(a,b){var c=this.cache[a];return void 0===c&&(this.cache[a]=b.call(this)),this.cache[a]},_clearSelfAndChildrenCache:function(a){this._clearCache(a),this.children&&this.getChildren().each(function(b){b._clearSelfAndChildrenCache(a)})},on:function(a,b){var c,d,e,h,i,j=a.split(q),k=j.length;for(c=0;k>c;c++)d=j[c],e=d.split(f),h=e[0],i=e[1]||g,this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:i,handler:b});return this},off:function(a){var b,c,d,e,g,h,i=a.split(q),j=i.length;for(b=0;j>b;b++)if(d=i[b],e=d.split(f),g=e[0],h=e[1],g)this.eventListeners[g]&&this._off(g,h);else for(c in this.eventListeners)this._off(c,h);return this},remove:function(){var c=this.getParent();return c&&c.children&&(c.children.splice(this.index,1),c._setChildrenIndices(),delete this.parent),this._clearSelfAndChildrenCache(r),this._clearSelfAndChildrenCache(b),this._clearSelfAndChildrenCache(u),this._clearSelfAndChildrenCache(k),this._clearSelfAndChildrenCache(a),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(a){var b=h+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},setAttr:function(){var a=Array.prototype.slice.call(arguments),b=a[0],c=o+Kinetic.Util._capitalize(b),d=this[c];return a.shift(),Kinetic.Util._isFunction(d)?d.apply(this,a):this.attrs[b]=a[0],this},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,c;if(a)for(b in a)b===e||(c=o+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache(k,this._isListening)},_isListening:function(){var a=this.getListening(),b=this.getParent();return a&&b&&!b.isListening()?!1:a},isVisible:function(){return this._getCache(u,this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return a&&b&&!b.isVisible()?!1:a},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(i){for(b=[],c=i.length,d=0;c>d;d++)e=i[d],h++,e.nodeType!==p&&(b=b.concat(e.getChildren().toArray())),e._id===g._id&&(d=c);b.length>0&&b[0].getLevel()<=f&&a(b)}var b,c,d,e,f=this.getLevel(),g=this,h=0;return g.nodeType!==t&&a(g.getStage().getChildren()),h},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(){var a=Kinetic.Util._getXY([].slice.call(arguments));return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,c=this.getOffset();return b.m=a.slice(),b.translate(c.x,c.y),b.getTranslation()},setAbsolutePosition:function(){var a,b=Kinetic.Util._getXY([].slice.call(arguments)),c=this._clearTransform();return this.attrs.x=c.x,this.attrs.y=c.y,delete c.x,delete c.y,a=this.getAbsoluteTransform(),a.invert(),a.translate(b.x,b.y),b={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this.setPosition(b.x,b.y),this._setTransform(c),this},_setTransform:function(a){var c;for(c in a)this.attrs[c]=a[c];this._clearCache(s),this._clearSelfAndChildrenCache(b)},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(s),this._clearSelfAndChildrenCache(b),a},move:function(){var a=Kinetic.Util._getXY([].slice.call(arguments)),b=this.getX(),c=this.getY();return void 0!==a.x&&(b+=a.x),void 0!==a.y&&(c+=a.y),this.setPosition(b,c),this},_eachAncestorReverse:function(a,b){var c,d,e=[],f=this.getParent();for(b&&e.unshift(this);f;)e.unshift(f),f=f.parent;for(c=e.length,d=0;c>d;d++)a(e[d])},rotate:function(a){return this.setRotation(this.getRotation()+a),this},rotateDeg:function(a){return this.setRotation(this.getRotation()+Kinetic.Util._degToRad(a)),this},moveToTop:function(){var a=this.index;return this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var a=this.index,b=this.parent.getChildren().length;return b-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){var b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(a,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return Kinetic.Node.prototype.remove.call(this),a.add(this),this},toObject:function(){var a,b,c=Kinetic.Util,d={},e=this.getAttrs();d.attrs={};for(a in e)b=e[a],c._isFunction(b)||c._isElement(b)||c._isObject(b)&&c._hasMethods(b)||(d.attrs[a]=b);return d.className=this.getClassName(),d},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){return this.getParent().getLayer()},getStage:function(){return this._getCache(r,this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,c){return c?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(){return this._getCache(b,this._getAbsoluteTransform)},_getAbsoluteTransform:function(){var a,b=new Kinetic.Transform;return this._eachAncestorReverse(function(c){a=c.getTransform(),b.multiply(a)},!0),b},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),c=this.getY(),d=this.getRotation(),e=this.getScaleX(),f=this.getScaleY(),g=this.getSkewX(),h=this.getSkewY(),i=this.getOffsetX(),j=this.getOffsetY();return(0!==b||0!==c)&&a.translate(b,c),0!==d&&a.rotate(d),(0!==g||0!==h)&&a.skew(g,h),(1!==e||1!==f)&&a.scale(e,f),(0!==i||0!==j)&&a.translate(-1*i,-1*j),a},clone:function(a){var b,c,d,e,f,g=this.getClassName(),h=new Kinetic[g](this.attrs);for(b in this.eventListeners)for(c=this.eventListeners[b],d=c.length,e=0;d>e;e++)f=c[e],f.name.indexOf(j)<0&&(h.eventListeners[b]||(h.eventListeners[b]=[]),h.eventListeners[b].push(f));return h.setAttrs(a),h},toDataURL:function(a){a=a||{};var b=a.mimeType||null,c=a.quality||null,d=this.getStage(),e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||d.getWidth(),height:a.height||d.getHeight(),pixelRatio:1}),h=g.getContext();return h.save(),(e||f)&&h.translate(-1*e,-1*f),this.drawScene(g),h.restore(),g.toDataURL(b,c)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(){var a=Kinetic.Util._getSize(Array.prototype.slice.call(arguments));return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},_get:function(a){return this.nodeType===a?[this]:[]},_off:function(a,b){var c,d,e=this.eventListeners[a];for(c=0;c<e.length;c++)if(d=e[c].name,!("kinetic"===d&&"kinetic"!==b||b&&d!==b)){if(e.splice(c,1),0===e.length){delete this.eventListeners[a];break}c--}},_fireBeforeChangeEvent:function(a,b,e){this._fire(c+Kinetic.Util._capitalize(a)+d,{oldVal:b,newVal:e})},_fireChangeEvent:function(a,b,c){this._fire(a+d,{oldVal:b,newVal:c})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr(i,a),this},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr(n,a),this},_setAttr:function(a,b){var c;void 0!==b&&(c=this.attrs[a],this._fireBeforeChangeEvent(a,c,b),this.attrs[a]=b,this._fireChangeEvent(a,c,b))},_fireAndBubble:function(a,b,c){var d=!0;b&&this.nodeType===p&&(b.targetNode=this),a===l&&c&&this._id===c._id?d=!1:a===m&&c&&this._id===c._id&&(d=!1),d&&(this._fire(a,b),b&&!b.cancelBubble&&this.parent&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c.parent):this._fireAndBubble.call(this.parent,a,b)))},_fire:function(a,b){var c,d=this.eventListeners[a];if(d)for(c=0;c<d.length;c++)d[c].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this},shouldDrawHit:function(){return this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},isDraggable:function(){return!1},getTransform:function(){return this._getCache(s,this._getTransform)}}),Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)},Kinetic.Node._createNode=function(a,b){var c,d,e,f=Kinetic.Node.prototype.getClassName.call(a),g=a.children;if(b&&(a.attrs.container=b),c=new Kinetic[f](a.attrs),g)for(d=g.length,e=0;d>e;e++)c.add(this._createNode(g[e]));return c},Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addRotationGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"scale",1),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"skew",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Node,"offset",0),Kinetic.Factory.addSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening",!0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible",!0),Kinetic.Collection.mapMethods(["on","off","remove","destroy","show","hide","move","rotate","moveToTop","moveUp","moveDown","moveToBottom","moveTo","fire","draw"])}(),function(){function a(a){window.setTimeout(a,1e3/60)}var b=500;Kinetic.Animation=function(a,b){this.func=a,this.setLayers(b),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}},Kinetic.Animation.prototype={setLayers:function(a){var b=[];b=a?a.length>0?a:[a]:[],this.layers=b},getLayers:function(){return this.layers},addLayer:function(a){var b,c,d=this.layers;if(d){for(b=d.length,c=0;b>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){for(var a=Kinetic.Animation,b=a.animations,c=0;c<b.length;c++)if(b[c].id===this.id)return!0;return!1},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(a){this.animations.push(a),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(a){for(var b=a.id,c=this.animations,d=c.length,e=0;d>e;e++)if(c[e].id===b){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var a,b,c,d,e,f,g,h,i={},j=this.animations;for(d=0;d<j.length;d++){for(a=j[d],b=a.layers,c=a.func,a._updateFrameObject((new Date).getTime()),f=b.length,e=0;f>e;e++)g=b[e],void 0!==g._id&&(i[g._id]=g);c&&c.call(a,a.frame)}for(h in i)i[h].draw()},Kinetic.Animation._animationLoop=function(){var a=this;this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){a._animationLoop()})):this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var a=this;this.animRunning||(this.animRunning=!0,a._animationLoop())};var c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||a}();Kinetic.Animation.requestAnimFrame=function(b){var d=Kinetic.isDragging?a:c;d(b)};var d=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){d.call(this,a)},Kinetic.Layer.prototype.batchDraw=function(){var a=this;this.batchAnim||(this.batchAnim=new Kinetic.Animation(function(){a.lastBatchDrawTime&&(new Date).getTime()-a.lastBatchDrawTime>b&&a.batchAnim.stop()},this)),this.lastBatchDrawTime=(new Date).getTime(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}}(),function(){var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},b=1,c=2,d=3,e=0;Kinetic.Tween=function(b){var c,d=this,g=b.node,h=g._id,i=b.duration||1,j=b.easing||Kinetic.Easings.Linear,k=!!b.yoyo;this.node=g,this._id=e++,this.anim=new Kinetic.Animation(function(){d.tween.onEnterFrame()},g.getLayer()||g.getLayers()),this.tween=new f(c,function(a){d._tweenFunc(a)},j,0,1,1e3*i,k),this._addListeners(),Kinetic.Tween.attrs[h]||(Kinetic.Tween.attrs[h]={}),Kinetic.Tween.attrs[h][this._id]||(Kinetic.Tween.attrs[h][this._id]={}),Kinetic.Tween.tweens[h]||(Kinetic.Tween.tweens[h]={});for(c in b)void 0===a[c]&&this._addAttr(c,b[c]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(a,b){var c,d,e,f,g,h,i,j=this.node,k=j._id;if(e=Kinetic.Tween.tweens[k][a],e&&delete Kinetic.Tween.attrs[k][e][a],c=j.getAttr(a),Kinetic.Util._isArray(b))for(b=Kinetic.Util._getPoints(b),d=[],g=b.length,f=0;g>f;f++)h=c[f],i=b[f],d.push({x:i.x-h.x,y:i.y-h.y});else d=b-c;Kinetic.Tween.attrs[k][this._id][a]={start:c,diff:d},Kinetic.Tween.tweens[k][a]=this._id},_tweenFunc:function(a){var b,c,d,e,f,g,h,i,j,k=this.node,l=Kinetic.Tween.attrs[k._id][this._id];for(b in l){if(c=l[b],d=c.start,e=c.diff,Kinetic.Util._isArray(d))for(f=[],h=d.length,g=0;h>g;g++)i=d[g],j=e[g],f.push({x:i.x+j.x*a,y:i.y+j.y*a});else f=d+e*a;k.setAttr(b,f)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()},this.tween.onReverse=function(){a.anim.start()},this.tween.onPause=function(){a.anim.stop()},this.tween.onFinish=function(){a.onFinish&&a.onFinish()},this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var a=this.node;return this.tween.reset(),(a.getLayer()||a.getLayers()).draw(),this},seek:function(a){var b=this.node;return this.tween.seek(1e3*a),(b.getLayer()||b.getLayers()).draw(),this},pause:function(){return this.tween.pause(),this},finish:function(){var a=this.node;return this.tween.finish(),(a.getLayer()||a.getLayers()).draw(),this},destroy:function(){var a,b=this.node._id,c=this._id,d=Kinetic.Tween.tweens[b];this.pause();for(a in d)delete Kinetic.Tween.tweens[b][a];delete Kinetic.Tween.attrs[b][c]}};var f=function(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()};f.prototype={fire:function(a){var b=this[a];b&&b()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;this.state===c?this.setTime(a):this.state===d&&this.setTime(this.duration-a)},pause:function(){this.state=b,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(a,b,c,d,e,f){var g=1.70158;return c*(a/=d)*a*((g+1)*a-g)+b},BackEaseOut:function(a,b,c,d,e,f){var g=1.70158;return c*((a=a/d-1)*a*((g+1)*a+g)+1)+b},BackEaseInOut:function(a,b,c,d,e,f){var g=1.70158;return(a/=d/2)<1?c/2*(a*a*(((g*=1.525)+1)*a-g))+b:c/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b},ElasticEaseIn:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f))+b)},ElasticEaseOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin((a*d-g)*(2*Math.PI)/f)+c+b)},ElasticEaseInOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=d*(.3*1.5)),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f))+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*(2*Math.PI)/f)*.5+c+b)},BounceEaseOut:function(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,c,d){return c-Kinetic.Easings.BounceEaseOut(d-a,0,c,d)+b},BounceEaseInOut:function(a,b,c,d){return d/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,c,d)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-d,0,c,d)+.5*c+b},EaseIn:function(a,b,c,d){return c*(a/=d)*a+b},EaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},EaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},StrongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,c,d){return c*a/d+b}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,c=b.node;c&&(c._setDragPosition(a),b.isDragging||(b.isDragging=!0,c.fire("dragstart",a,!0)),c.fire("dragmove",a,!0))},_endDragBefore:function(a){var b,c,d=Kinetic.DD,e=d.node;e&&(b=e.nodeType,c=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=e)),delete d.node,(c||e).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire("dragend",a,!0)}},Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),c=this.getLayer(),d=b.getPointerPosition(),e=this.getAbsolutePosition();d&&(a.node&&a.node.stopDrag(),a.node=this,a.offset.x=d.x-e.x,a.offset.y=d.y-e.y,a.anim.setLayers(c||this.getLayers()),a.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,c=this.getStage().getPointerPosition(),d=this.getDragBoundFunc(),e={x:c.x-b.offset.x,y:c.y-b.offset.y};void 0!==d&&(e=d.call(this,e,a)),this.setAbsolutePosition(e)},Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b),a._endDragAfter(b)},Kinetic.Node.prototype.setDraggable=function(a){this._setAttr("draggable",a),this._dragChange()};var a=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var b=Kinetic.DD;b.node&&b.node._id===this._id&&this.stopDrag(),a.call(this)},Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return a.node&&a.node._id===this._id&&a.isDragging},Kinetic.Node.prototype._listenDrag=function(){var a=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on("mousedown.kinetic touchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Node.prototype.isDraggable=Kinetic.Node.prototype.getDraggable;var b=document.documentElement;b.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),b.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),b.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),b.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(a){this.children=new Kinetic.Collection,Kinetic.Node.call(this,a)},getChildren:function(){return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var a,b=this.children;b.length>0;)a=b[0],a.hasChildren()&&a.removeChildren(),a.remove();return this},destroyChildren:function(){for(var a=this.children;a.length>0;)a[0].destroy();return this},add:function(a){var b=this.children;return this._validateAdd(a),a.index=b.length,a.parent=this,b.push(a),this._fire("add",{child:a}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(a){var b,c,d,e,f,g,h,i=[],j=a.replace(/ /g,"").split(","),k=j.length;for(b=0;k>b;b++)if(d=j[b],"#"===d.charAt(0))f=this._getNodeById(d.slice(1)),f&&i.push(f);else if("."===d.charAt(0))e=this._getNodesByName(d.slice(1)),i=i.concat(e);else for(g=this.getChildren(),h=g.length,c=0;h>c;c++)i=i.concat(g[c]._get(d));return Kinetic.Collection.toCollection(i)},_getNodeById:function(a){var b=Kinetic.ids[a];return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(a){var b=Kinetic.names[a]||[];return this._getDescendants(b);
},_get:function(a){for(var b=Kinetic.Node.prototype._get.call(this,a),c=this.getChildren(),d=c.length,e=0;d>e;e++)b=b.concat(c[e]._get(a));return b},toObject:function(){var a=Kinetic.Node.prototype.toObject.call(this);a.children=[];for(var b=this.getChildren(),c=b.length,d=0;c>d;d++){var e=b[d];a.children.push(e.toObject())}return a},_getDescendants:function(a){for(var b=[],c=a.length,d=0;c>d;d++){var e=a[d];this.isAncestorOf(e)&&b.push(e)}return b},isAncestorOf:function(a){for(var b=a.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(a){var b=Kinetic.Node.prototype.clone.call(this,a);return this.getChildren().each(function(a){b.add(a.clone())}),b},getAllIntersections:function(){for(var a=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),b=[],c=this.find("Shape"),d=c.length,e=0;d>e;e++){var f=c[e];f.isVisible()&&f.intersects(a)&&b.push(f)}return b},_setChildrenIndices:function(){this.children.each(function(a,b){a.index=b})},drawScene:function(a){var b=this.getLayer(),c=this.getClipWidth()&&this.getClipHeight();return!a&&b&&(a=b.getCanvas()),this.isVisible()&&(c?a.getContext()._clip(this):this._drawChildren(a)),this},_drawChildren:function(a){this.children.each(function(b){b.drawScene(a)})},drawHit:function(){var a,b=this.getClipWidth()&&this.getClipHeight()&&"Stage"!==this.nodeType,c=0,d=0,e=[];if(this.shouldDrawHit()){for(b&&(a=this.getLayer().hitCanvas,a.getContext()._clip(this)),e=this.children,d=e.length,c=0;d>c;c++)e[c].drawHit();b&&a.getContext()._context.restore()}return this}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addBoxGetterSetter(Kinetic.Container,"clip")}(),function(){function a(a){a.fill()}function b(a){a.stroke()}function c(a){a.fill()}function d(a){a.stroke()}function e(){this._clearCache(f)}var f="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(f){this.nodeType="Shape",this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=c,this._strokeFuncHit=d;for(var g,h=Kinetic.shapes;;)if(g=Kinetic.Util.getRandomColor(),g&&!(g in h))break;this.colorKey=g,h[g]=this,Kinetic.Node.call(this,f),this._setDrawFuncs(),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChanged.kinetic",e)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(f,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!(!this.getStroke()&&!this.getStrokeWidth())},_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},intersects:function(){var a,b=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),c=this.getStage(),d=c.bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),a=d.context.getImageData(0|b.x,0|b.y,1,1).data,a[3]>0},enableFill:function(){return this._setAttr("fillEnabled",!0),this},disableFill:function(){return this._setAttr("fillEnabled",!1),this},enableStroke:function(){return this._setAttr("strokeEnabled",!0),this},disableStroke:function(){return this._setAttr("strokeEnabled",!1),this},enableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!0),this},disableStrokeScale:function(){return this._setAttr("strokeScaleEnabled",!1),this},enableShadow:function(){return this._setAttr("shadowEnabled",!0),this},disableShadow:function(){return this._setAttr("shadowEnabled",!1),this},enableDashArray:function(){return this._setAttr("dashArrayEnabled",!0),this},disableDashArray:function(){return this._setAttr("dashArrayEnabled",!1),this},destroy:function(){return Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey],this},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()},drawScene:function(a){var b,c,d,e=a||this.getLayer().getCanvas(),f=e.getContext(),g=this.getDrawFunc(),h=this.hasShadow();return g&&this.isVisible()&&(this._useBufferCanvas()?(b=this.getStage(),c=b.bufferCanvas,d=c.getContext(),d.clear(),d.save(),d._applyLineJoin(this),d._applyAncestorTransforms(this),g.call(this,d),d.restore(),f.save(),h&&(f.save(),f._applyShadow(this),f.drawImage(c._canvas,0,0),f.restore()),f._applyOpacity(this),f.drawImage(c._canvas,0,0),f.restore()):(f.save(),f._applyLineJoin(this),f._applyAncestorTransforms(this),h&&(f.save(),f._applyShadow(this),g.call(this,f),f.restore()),f._applyOpacity(this),g.call(this,f),f.restore())),this},drawHit:function(){var a=this.getAttrs(),b=a.drawHitFunc||a.drawFunc,c=this.getLayer().hitCanvas,d=c.getContext();return b&&this.shouldDrawHit()&&(d.save(),d._applyLineJoin(this),d._applyAncestorTransforms(this),b.call(this,d),d.restore()),this},_setDrawFuncs:function(){!this.attrs.drawFunc&&this.drawFunc&&this.setDrawFunc(this.drawFunc),!this.attrs.drawHitFunc&&this.drawHitFunc&&this.setDrawHitFunc(this.drawHitFunc)}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"drawFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"drawHitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashArray"),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addColorGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashArrayEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillPatternOffset",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillPatternScale",1),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",0),Kinetic.Factory.addPointGetterSetter(Kinetic.Shape,"shadowOffset",0),Kinetic.Factory.addRotationGetterSetter(Kinetic.Shape,"fillPatternRotation",0)}(),function(){function a(a,b){a.content.addEventListener(b,function(c){a[I+b](c)},!1)}var b="Stage",c="string",d="px",e="mouseout",f="mouseleave",g="mouseover",h="mouseenter",i="mousemove",j="mousedown",k="mouseup",l="click",m="dblclick",n="touchstart",o="touchend",p="tap",q="dbltap",r="touchmove",s="contentMouseout",t="contentMouseover",u="contentMousemove",v="contentMousedown",w="contentMouseup",x="contentClick",y="contentDblclick",z="contentTouchstart",A="contentTouchend",B="contentDbltap",C="contentTouchmove",D="div",E="relative",F="inline-block",G="kineticjs-content",H=" ",I="_",J="container",K="",L=[j,i,k,e,n,r,o,g],M=L.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType=b,Kinetic.Container.call(this,a),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(a){return typeof a===c&&(a=document.getElementById(a)),this._setAttr(J,a),this},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,b=this.children,c=b.length;for(a=0;c>a;a++)b[a].clear();return this},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this),a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(a){function b(e){var f=i[e],j=f.toDataURL(),k=new Image;k.onload=function(){h.drawImage(k,0,0),e<i.length-1?b(e+1):a.callback(g.toDataURL(c,d))},k.src=j}a=a||{};var c=a.mimeType||null,d=a.quality||null,e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),h=g.getContext()._context,i=this.children;(e||f)&&h.translate(-1*e,-1*f),b(0)},toImage:function(a){var b=a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})},this.toDataURL(a)},getIntersection:function(){var a,b,c=Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),d=this.getChildren(),e=d.length,f=e-1;for(a=f;a>=0;a--)if(b=d[a].getIntersection(c))return b;return null},_resizeDOM:function(){if(this.content){var a,b,c=this.getWidth(),e=this.getHeight(),f=this.getChildren(),g=f.length;for(this.content.style.width=c+d,this.content.style.height=e+d,this.bufferCanvas.setSize(c,e),this.bufferHitCanvas.setSize(c,e),a=0;g>a;a++)b=f[a],b.getCanvas().setSize(c,e),b.hitCanvas.setSize(c,e),b.draw()}},add:function(a){return Kinetic.Container.prototype.add.call(this,a),a.canvas.setSize(this.attrs.width,this.attrs.height),a.hitCanvas.setSize(this.attrs.width,this.attrs.height),a.draw(),this.content.appendChild(a.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){var b;for(b=0;M>b;b++)a(this,L[b])},_mouseover:function(a){this._fire(t,a)},_mouseout:function(a){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble(e,a),b._fireAndBubble(f,a),this.targetShape=null),this.pointerPos=void 0,this._fire(s,a)},_mousemove:function(a){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition()),d=c&&c.shape?c.shape:void 0;d?Kinetic.isDragging()||255!==c.pixel[3]||this.targetShape&&this.targetShape._id===d._id?d._fireAndBubble(i,a):(this.targetShape&&(this.targetShape._fireAndBubble(e,a,d),this.targetShape._fireAndBubble(f,a,d)),d._fireAndBubble(g,a,this.targetShape),d._fireAndBubble(h,a,this.targetShape),this.targetShape=d):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(e,a),this.targetShape._fireAndBubble(f,a),this.targetShape=null),this._fire(u,a),b&&b._drag(a),a.preventDefault&&a.preventDefault()},_mousedown:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=b&&b.shape?b.shape:void 0;Kinetic.listenClickTap=!0,c&&(this.clickStartShape=c,c._fireAndBubble(j,a)),this._fire(v,a),a.preventDefault&&a.preventDefault()},_mouseup:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=b&&b.shape?b.shape:void 0,d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),c&&(c._fireAndBubble(k,a),Kinetic.listenClickTap&&c._id===this.clickStartShape._id&&(c._fireAndBubble(l,a),d&&c._fireAndBubble(m,a))),this._fire(w,a),Kinetic.listenClickTap&&(this._fire(x,a),d&&this._fire(y,a)),Kinetic.listenClickTap=!1,a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=b&&b.shape?b.shape:void 0;Kinetic.listenClickTap=!0,c&&(this.tapStartShape=c,c._fireAndBubble(n,a),c.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(z,a)},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=b&&b.shape?b.shape:void 0,d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),c&&(c._fireAndBubble(o,a),Kinetic.listenClickTap&&c._id===this.tapStartShape._id&&(c._fireAndBubble(p,a),d&&c._fireAndBubble(q,a)),c.isListening()&&a.preventDefault&&a.preventDefault()),Kinetic.listenClickTap&&(this._fire(A,a),d&&this._fire(B,a)),Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition()),d=c&&c.shape?c.shape:void 0;d&&(d._fireAndBubble(r,a),d.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(C,a),b&&b._drag(a)},_setPointerPosition:function(a){var b,a=a?a:window.event,c=this._getContentPosition(),d=a.offsetX,e=a.clientX,f=0,g=0;void 0!==a.touches&&1===a.touches.length?(b=a.touches[0],f=b.clientX-c.left,g=b.clientY-c.top):void 0!==d?(f=d,g=a.offsetY):"mozilla"===Kinetic.UA.browser?(f=a.layerX,g=a.layerY):void 0!==e&&c&&(f=e-c.left,g=a.clientY-c.top),this.pointerPos={x:f,y:g}},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();a.innerHTML=K,this.content=document.createElement(D),this.content.style.position=E,this.content.style.display=F,this.content.className=G,this.content.setAttribute("role","presentation"),a.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(a,b){var c,d,e=a.split(H),f=e.length;for(c=0;f>c;c++)d=e[c],this.content.addEventListener(d,b,!1)}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container")}(),function(){var a="#",b="beforeDraw",c="draw";Kinetic.Util.addMethods(Kinetic.Layer,{___init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(){var b,c,d,e=Kinetic.Util._getXY(Array.prototype.slice.call(arguments));if(this.isVisible()&&this.isListening()){if(b=this.hitCanvas.context._context.getImageData(0|e.x,0|e.y,1,1).data,255===b[3])return c=Kinetic.Util._rgbToHex(b[0],b[1],b[2]),d=Kinetic.shapes[a+c],{shape:d,pixel:b};if(b[0]>0||b[1]>0||b[2]>0||b[3]>0)return{pixel:b}}return null},drawScene:function(a){return a=a||this.getCanvas(),this._fire(b,{node:this}),this.getClearBeforeDraw()&&a.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,a),this._fire(c,{node:this}),this},drawHit:function(){var a=this.getLayer();return a&&a.getClearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this),this},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(){var a=this.getContext(),b=this.getHitCanvas().getContext();return a.clear.apply(a,arguments),b.clear.apply(b,arguments),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),a?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},setZIndex:function(a){Kinetic.Node.prototype.setZIndex.call(this,a);var b=this.getStage();return b&&(b.content.removeChild(this.getCanvas()._canvas),a<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[a+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),a.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),this.index<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var a=this.getStage(),b=this.getCanvas(),c=b._canvas;return Kinetic.Node.prototype.remove.call(this),a&&c&&Kinetic.Util._isInDocument(c)&&a.content.removeChild(c),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(a){this.nodeType="Group",Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container)}(),function(){Kinetic.Rect=function(a){this.___init(a)},Kinetic.Rect.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Rect"},drawFunc:function(a){var b=this.getCornerRadius(),c=this.getWidth(),d=this.getHeight();a.beginPath(),b?(a.moveTo(b,0),a.lineTo(c-b,0),a.arc(c-b,b,b,3*Math.PI/2,0,!1),a.lineTo(c,d-b),a.arc(c-b,d-b,b,0,Math.PI/2,!1),a.lineTo(b,d),a.arc(b,d-b,b,Math.PI/2,Math.PI,!1),a.lineTo(0,b),a.arc(b,b,b,Math.PI,3*Math.PI/2,!1)):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0)}(),function(){var a=2*Math.PI-1e-4,b="Circle";Kinetic.Circle=function(a){this.___init(a)},Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b},drawFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,a,!1),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius(a/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0)}(),function(){var a=2*Math.PI-1e-4,b="Ellipse";Kinetic.Ellipse=function(a){this.___init(a)},Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b},drawFunc:function(b){var c=this.getRadius();b.beginPath(),b.save(),c.x!==c.y&&b.scale(1,c.y/c.x),b.arc(0,0,c.x,0,a,!1),b.restore(),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius({y:a/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addPointGetterSetter(Kinetic.Ellipse,"radius",0)}(),function(){Kinetic.Wedge=function(a){this.___init(a)},Kinetic.Wedge.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Wedge"},drawFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,this.getAngle(),this.getClockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addRotationGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1)}(),function(){var a="Image",b="set";Kinetic.Image=function(a){this.___init(a)},Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=a},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},drawFunc:function(a){var b,c,d,e=this.getWidth(),f=this.getHeight();this.getFilter()&&this._applyFilter&&(this.applyFilter(),this._applyFilter=!1),this.filterCanvas?(d=this.filterCanvas._canvas,c=[d,0,0,e,f]):(d=this.getImage(),d&&(b=this.getCrop(),b?(b.x=b.x||0,b.y=b.y||0,b.width=b.width||d.width-b.x,b.height=b.height||d.height-b.y,c=[d,b.x,b.y,b.width,b.height,0,0,e,f]):c=[d,0,0,e,f])),a.beginPath(),a.rect(0,0,e,f),a.closePath(),a.fillStrokeShape(this),d&&a.drawImage.apply(a,c)},drawHitFunc:function(a){var b=this.getWidth(),c=this.getHeight(),d=this.imageHitRegion;d?(a.drawImage(d,0,0),a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.strokeShape(this)):(a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this))},applyFilter:function(){var a,b,c,d=this.getImage(),e=(this.getWidth(),this.getHeight(),this.getFilter()),f=this.getCrop()||{};f.x=f.x||0,f.y=f.y||0,f.width=f.width||d.width-f.x,f.height=f.height||d.height-f.y,this.filterCanvas&&this.filterCanvas.getWidth()===f.width&&this.filterCanvas.getHeight()===f.height?(a=this.filterCanvas,a.getContext().clear()):a=this.filterCanvas=new Kinetic.SceneCanvas({width:f.width,height:f.height,pixelRatio:1}),b=a.getContext();try{b.drawImage(d,f.x,f.y,f.width,f.height,0,0,f.width,f.height),c=b.getImageData(0,0,f.width,f.height),e.call(this,c),b.putImageData(c,0,0)}catch(g){this.clearFilter(),Kinetic.Util.warn("Unable to apply filter. "+g.message)}},clearFilter:function(){this.filterCanvas=null,this._applyFilter=!1},createImageHitRegion:function(a){var b,c,d,e,f,g=this,h=this.getWidth(),i=this.getHeight(),j=new Kinetic.SceneCanvas({width:h,height:i,pixelRatio:1}),k=j.getContext()._context,l=this.getImage();k.drawImage(l,0,0);try{for(b=k.getImageData(0,0,h,i),c=b.data,f=c.length,d=Kinetic.Util._hexToRgb(this.colorKey),e=0;f>e;e+=4)c[e+3]>0&&(c[e]=d.r,c[e+1]=d.g,c[e+2]=d.b);Kinetic.Util._getImage(b,function(b){g.imageHitRegion=b,a&&a()})}catch(m){Kinetic.Util.warn("Unable to create image hit region. "+m.message)}},clearImageHitRegion:function(){delete this.imageHitRegion},getWidth:function(){var a=this.getImage();return this.attrs.width||(a?a.width:0)},getHeight:function(){var a=this.getImage();return this.attrs.height||(a?a.height:0)},destroy:function(){return Kinetic.Shape.prototype.destroy.call(this),delete this.filterCanvas,delete this.attrs,this}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addFilterGetterSetter=function(a,b,c){this.addGetter(a,b,c),this.addFilterSetter(a,b)},Kinetic.Factory.addFilterSetter=function(a,c){var d=b+Kinetic.Util._capitalize(c);a.prototype[d]=function(a){this._setAttr(c,a),this._applyFilter=!0}},Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addBoxGetterSetter(Kinetic.Image,"crop"),Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filter")}(),function(){Kinetic.Polygon=function(a){this.___init(a)},Kinetic.Polygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Polygon"},drawFunc:function(a){var b=this.getPoints(),c=b.length;a.beginPath(),a.moveTo(b[0].x,b[0].y);for(var d=1;c>d;d++)a.lineTo(b[d].x,b[d].y);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Polygon,Kinetic.Shape),Kinetic.Factory.addPointsGetterSetter(Kinetic.Polygon,"points")}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="auto",d="canvas",e="center",f="Change.kinetic",g="2d",h="-",i="",j="left",k="text",l="Text",m="middle",n="normal",o="px ",p=" ",q="right",r="word",s="char",t="none",u=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],v=u.length,w=document.createElement(d).getContext(g);Kinetic.Text=function(a){this.___init(a)},Kinetic.Text.prototype={___init:function(d){var e=this;void 0===d.width&&(d.width=c),void 0===d.height&&(d.height=c),Kinetic.Shape.call(this,d),this._fillFunc=a,this._strokeFunc=b,this.className=l;for(var g=0;v>g;g++)this.on(u[g]+f,e._setTextData);this._setTextData()},drawFunc:function(a){var b=this.getPadding(),c=(this.getFontStyle(),this.getFontSize(),this.getFontFamily(),this.getTextHeight()),d=this.getLineHeight()*c,f=this.textArr,g=f.length,h=this.getWidth();a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",m),a.setAttr("textAlign",j),a.save(),a.translate(b,0),a.translate(0,b+c/2);for(var i=0;g>i;i++){var k=f[i],l=k.text,n=k.width;a.save(),this.getAlign()===q?a.translate(h-n-2*b,0):this.getAlign()===e&&a.translate((h-n-2*b)/2,0),this.partialText=l,a.fillStrokeShape(this),a.restore(),a.translate(0,d)}a.restore()},drawHitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},setText:function(a){var b=Kinetic.Util._isString(a)?a:a.toString();this._setAttr(k,b)},getWidth:function(){return this.attrs.width===c?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===c?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,c=w,d=this.getFontSize();return c.save(),c.font=this._getContextFont(),b=c.measureText(a),c.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+p+this.getFontSize()+o+this.getFontFamily()},_addTextLine:function(a,b,c){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return w.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,f=this.attrs.width,g=this.attrs.height,i=f!==c,j=g!==c,k=this.getPadding(),l=f-2*k,m=g-2*k,n=0,q=this.getWrap(),r=q!==t,u=q!==s&&r;this.textArr=[],w.save(),w.font=this.getFontStyle()+p+b+o+this.getFontFamily();for(var v=0,x=a.length;x>v;++v){var y=a[v],z=this._getTextWidth(y);if(i&&z>l)for(;y.length>0;){for(var A=0,B=y.length,C="",D=0;B>A;){var E=A+B>>>1,F=y.slice(0,E+1),G=this._getTextWidth(F);l>=G?(A=E+1,C=F,D=G):B=E}if(!C)break;if(u){var H=Math.max(C.lastIndexOf(p),C.lastIndexOf(h))+1;H>0&&(A=H,C=C.slice(0,A),D=this._getTextWidth(C))}if(this._addTextLine(C,D),n+=e,!r||j&&n+e>m)break;if(y=y.slice(A),y.length>0&&(z=this._getTextWidth(y),l>=z)){this._addTextLine(y,z),n+=e;break}}else this._addTextLine(y,z),n+=e,d=Math.max(d,z);if(j&&n+e>m)break}w.restore(),this.textHeight=b,this.textWidth=d}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",n),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",j),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",r),Kinetic.Factory.addGetter(Kinetic.Text,k,i),Kinetic.Factory.addSetter(Kinetic.Text,"width"),Kinetic.Factory.addSetter(Kinetic.Text,"height")}(),function(){Kinetic.Line=function(a){this.___init(a)},Kinetic.Line.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Line"},drawFunc:function(a){var b,c,d=this.getPoints(),e=d.length;for(a.beginPath(),a.moveTo(d[0].x,d[0].y),b=1;e>b;b++)c=d[b],a.lineTo(c.x,c.y);a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addPointsGetterSetter(Kinetic.Line,"points")}(),function(){Kinetic.Spline=function(a){this.___init(a)},Kinetic.Spline.prototype={___init:function(a){var b=this;Kinetic.Shape.call(this,a),this.className="Spline",this.on("pointsChange.kinetic tensionChange.kinetic",function(){b._setAllPoints()}),this._setAllPoints()},drawFunc:function(a){var b,c,d,e,f=this.getPoints(),g=f.length,h=this.getTension();if(a.beginPath(),a.moveTo(f[0].x,f[0].y),0!==h&&g>2){for(b=this.allPoints,c=b.length,d=2,a.quadraticCurveTo(b[0].x,b[0].y,b[1].x,b[1].y);c-1>d;)a.bezierCurveTo(b[d].x,b[d++].y,b[d].x,b[d++].y,b[d].x,b[d++].y);a.quadraticCurveTo(b[c-1].x,b[c-1].y,f[g-1].x,f[g-1].y)}else for(d=1;g>d;d++)e=f[d],a.lineTo(e.x,e.y);a.strokeShape(this)},_setAllPoints:function(){this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension())}},Kinetic.Util.extend(Kinetic.Spline,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Spline,"tension",1),Kinetic.Factory.addPointsGetterSetter(Kinetic.Spline,"points")}(),function(){Kinetic.Blob=function(a){this.___init(a)},Kinetic.Blob.prototype={___init:function(a){var b=this;Kinetic.Shape.call(this,a),this.className="Blob",this.on("pointsChange.kinetic tensionChange.kinetic",function(){b._setAllPoints()}),this._setAllPoints()},drawFunc:function(a){var b,c,d,e,f=this.getPoints(),g=f.length,h=this.getTension();if(a.beginPath(),a.moveTo(f[0].x,f[0].y),0!==h&&g>2)for(b=this.allPoints,c=b.length,d=0;c-1>d;)a.bezierCurveTo(b[d].x,b[d++].y,b[d].x,b[d++].y,b[d].x,b[d++].y);else for(d=1;g>d;d++)e=f[d],a.lineTo(e.x,e.y);a.closePath(),a.fillStrokeShape(this)},_setAllPoints:function(){var a=this.getPoints(),b=a.length,c=this.getTension(),d=Kinetic.Util,e=d._getControlPoints(a[b-1],a[0],a[1],c),f=d._getControlPoints(a[b-2],a[b-1],a[0],c);this.allPoints=Kinetic.Util._expandPoints(this.getPoints(),this.getTension()),this.allPoints.unshift(e[1]),this.allPoints.push(f[0]),this.allPoints.push(a[b-1]),this.allPoints.push(f[1]),this.allPoints.push(e[0]),this.allPoints.push(a[0])}},Kinetic.Util.extend(Kinetic.Blob,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Blob,"tension",1),Kinetic.Factory.addPointsGetterSetter(Kinetic.Blob,"points")}(),function(){Kinetic.Sprite=function(a){this.___init(a)},Kinetic.Sprite.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Sprite",this.anim=new Kinetic.Animation;var b=this;this.on("animationChange.kinetic",function(){b.setIndex(0)})},drawFunc:function(a){var b=this.getAnimation(),c=this.getIndex(),d=this.getAnimations()[b][c],e=this.getImage();e&&a.drawImage(e,d.x,d.y,d.width,d.height,0,0,d.width,d.height)},drawHitFunc:function(a){var b=this.getAnimation(),c=this.getIndex(),d=this.getAnimations()[b][c];a.beginPath(),a.rect(0,0,d.width,d.height),a.closePath(),a.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},start:function(){var a=this,b=this.getLayer();this.anim.setLayers(b),this.interval=setInterval(function(){var b=a.getIndex();a._updateIndex(),a.afterFrameFunc&&b===a.afterFrameIndex&&(a.afterFrameFunc(),
delete a.afterFrameFunc,delete a.afterFrameIndex)},1e3/this.getFrameRate()),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},afterFrame:function(a,b){this.afterFrameIndex=a,this.afterFrameFunc=b},_updateIndex:function(){var a=this.getIndex(),b=this.getAnimation(),c=this.getAnimations(),d=c[b],e=d.length;e-1>a?this.setIndex(a+1):this.setIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"index",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17)}(),function(){Kinetic.Path=function(a){this.___init(a)},Kinetic.Path.prototype={___init:function(a){this.dataArray=[];var b=this;Kinetic.Shape.call(this,a),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){b.dataArray=Kinetic.Path.parsePathData(this.getData())})},drawFunc:function(a){var b=this.dataArray,c=!1;a.beginPath();for(var d=0;d<b.length;d++){var e=b[d].command,f=b[d].points;switch(e){case"L":a.lineTo(f[0],f[1]);break;case"M":a.moveTo(f[0],f[1]);break;case"C":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case"z":a.closePath(),c=!0}}c?a.fillStrokeShape(this):a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Kinetic.Path.getPointOnLine=function(a,b,c,d,e,f,g){void 0===f&&(f=b),void 0===g&&(g=c);var h=(e-c)/(d-b+1e-8),i=Math.sqrt(a*a/(1+h*h));b>d&&(i*=-1);var j,k=h*i;if(d===b)j={x:f,y:g+k};else if((g-c)/(f-b+1e-8)===h)j={x:f+i,y:g+k};else{var l,m,n=this.getLineLength(b,c,d,e);if(1e-8>n)return void 0;var o=(f-b)*(d-b)+(g-c)*(e-c);o/=n*n,l=b+o*(d-b),m=c+o*(e-c);var p=this.getLineLength(f,g,l,m),q=Math.sqrt(a*a-p*p);i=Math.sqrt(q*q/(1+h*h)),b>d&&(i*=-1),k=h*i,j={x:l+i,y:m+k}}return j},Kinetic.Path.getPointOnCubicBezier=function(a,b,c,d,e,f,g,h,i){function j(a){return a*a*a}function k(a){return 3*a*a*(1-a)}function l(a){return 3*a*(1-a)*(1-a)}function m(a){return(1-a)*(1-a)*(1-a)}var n=h*j(a)+f*k(a)+d*l(a)+b*m(a),o=i*j(a)+g*k(a)+e*l(a)+c*m(a);return{x:n,y:o}},Kinetic.Path.getPointOnQuadraticBezier=function(a,b,c,d,e,f,g){function h(a){return a*a}function i(a){return 2*a*(1-a)}function j(a){return(1-a)*(1-a)}var k=f*h(a)+d*i(a)+b*j(a),l=g*h(a)+e*i(a)+c*j(a);return{x:k,y:l}},Kinetic.Path.getPointOnEllipticalArc=function(a,b,c,d,e,f){var g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}},Kinetic.Path.parsePathData=function(a){if(!a)return[];var b=a,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];b=b.replace(new RegExp(" ","g"),",");for(var d=0;d<c.length;d++)b=b.replace(new RegExp(c[d],"g"),"|"+c[d]);var e=b.split("|"),f=[],g=0,h=0;for(d=1;d<e.length;d++){var i=e[d],j=i.charAt(0);i=i.slice(1),i=i.replace(new RegExp(",-","g"),"-"),i=i.replace(new RegExp("-","g"),",-"),i=i.replace(new RegExp("e,-","g"),"e-");var k=i.split(",");k.length>0&&""===k[0]&&k.shift();for(var l=0;l<k.length;l++)k[l]=parseFloat(k[l]);for(;k.length>0&&!isNaN(k[0]);){var m,n,o,p,q,r,s,t,u,v,w=null,x=[],y=g,z=h;switch(j){case"l":g+=k.shift(),h+=k.shift(),w="L",x.push(g,h);break;case"L":g=k.shift(),h=k.shift(),x.push(g,h);break;case"m":g+=k.shift(),h+=k.shift(),w="M",x.push(g,h),j="l";break;case"M":g=k.shift(),h=k.shift(),w="M",x.push(g,h),j="L";break;case"h":g+=k.shift(),w="L",x.push(g,h);break;case"H":g=k.shift(),w="L",x.push(g,h);break;case"v":h+=k.shift(),w="L",x.push(g,h);break;case"V":h=k.shift(),w="L",x.push(g,h);break;case"C":x.push(k.shift(),k.shift(),k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"c":x.push(g+k.shift(),h+k.shift(),g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"S":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,k.shift(),k.shift()),g=k.shift(),h=k.shift(),w="C",x.push(g,h);break;case"s":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"Q":x.push(k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"q":x.push(g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="Q",x.push(g,h);break;case"T":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g=k.shift(),h=k.shift(),w="Q",x.push(n,o,g,h);break;case"t":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g+=k.shift(),h+=k.shift(),w="Q",x.push(n,o,g,h);break;case"A":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g=k.shift(),h=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r);break;case"a":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g+=k.shift(),h+=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r)}f.push({command:w||j,points:x,start:{x:y,y:z},pathLength:this.calcLength(y,z,w||j,x)})}("z"===j||"Z"===j)&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f},Kinetic.Path.calcLength=function(a,b,c,d){var e,f,g,h=Kinetic.Path;switch(c){case"L":return h.getLineLength(a,b,d[0],d[1]);case"C":for(e=0,f=h.getPointOnCubicBezier(0,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),t=.01;t<=1;t+=.01)g=h.getPointOnCubicBezier(t,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),e+=h.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"Q":for(e=0,f=h.getPointOnQuadraticBezier(0,a,b,d[0],d[1],d[2],d[3]),t=.01;t<=1;t+=.01)g=h.getPointOnQuadraticBezier(t,a,b,d[0],d[1],d[2],d[3]),e+=h.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"A":e=0;var i=d[4],j=d[5],k=d[4]+j,l=Math.PI/180;if(Math.abs(i-k)<l&&(l=Math.abs(i-k)),f=h.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],i,0),0>j)for(t=i-l;t>k;t-=l)g=h.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],t,0),e+=h.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(t=i+l;t<k;t+=l)g=h.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],t,0),e+=h.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=h.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],k,0),e+=h.getLineLength(f.x,f.y,g.x,g.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(a,b,c,d,e,f,g,h,i){var j=i*(Math.PI/180),k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));var n=Math.sqrt((g*g*(h*h)-g*g*(l*l)-h*h*(k*k))/(g*g*(l*l)+h*h*(k*k)));e==f&&(n*=-1),isNaN(n)&&(n=0);var o=n*g*l/h,p=n*-h*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return t(w,x)<=-1&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1==f&&0>y&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data")}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="",d="Calibri",e="normal";Kinetic.TextPath=function(a){this.___init(a)},Kinetic.TextPath.prototype={___init:function(c){var d=this;this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,c),this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=a,this._strokeFuncHit=b,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d._setTextData),d._setTextData()},drawFunc:function(a){a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline","middle"),a.setAttr("textAlign","left"),a.save();for(var b=this.glyphInfo,c=0;c<b.length;c++){a.save();var d=b[c].p0;a.translate(d.x,d.y),a.rotate(b[c].rotation),this.partialText=b[c].text,a.fillStrokeShape(this),a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas,c=b.getContext("2d");c.save(),c.font=this._getContextFont();var d=c.measureText(a);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width,this.textHeight=b.height,this.glyphInfo=[];for(var c,d,e,f=this.attrs.text.split(""),g=-1,h=0,i=function(){h=0;for(var b=a.dataArray,d=g+1;d<b.length;d++){if(b[d].pathLength>0)return g=d,b[d];"M"==b[d].command&&(c={x:b[d].points[0],y:b[d].points[1]})}return{}},j=function(b,f){var g=a._getTextSize(b).width,j=0,k=0;for(d=void 0;Math.abs(g-j)/g>.01&&25>k;){k++;for(var l=j;void 0===e;)e=i(),e&&l+e.pathLength<g&&(l+=e.pathLength,e=void 0);if(e==={}||void 0===c)return void 0;var m=!1;switch(e.command){case"L":Kinetic.Path.getLineLength(c.x,c.y,e.points[0],e.points[1])>g?d=Kinetic.Path.getPointOnLine(g,c.x,c.y,e.points[0],e.points[1],c.x,c.y):e=void 0;break;case"A":var n=e.points[4],o=e.points[5],p=e.points[4]+o;0===h?h=n+1e-8:g>j?h+=Math.PI/180*o/Math.abs(o):h-=Math.PI/360*o/Math.abs(o),(0>o&&p>h||o>=0&&h>p)&&(h=p,m=!0),d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],h,e.points[6]);break;case"C":0===h?h=g>e.pathLength?1e-8:g/e.pathLength:g>j?h+=(g-j)/e.pathLength:h-=(j-g)/e.pathLength,h>1&&(h=1,m=!0),d=Kinetic.Path.getPointOnCubicBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case"Q":0===h?h=g/e.pathLength:g>j?h+=(g-j)/e.pathLength:h-=(j-g)/e.pathLength,h>1&&(h=1,m=!0),d=Kinetic.Path.getPointOnQuadraticBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(j=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y)),m&&(m=!1,e=void 0)}},k=0;k<f.length&&(j(f[k]),void 0!==c&&void 0!==d);k++){var l=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y),m=0,n=Kinetic.Path.getPointOnLine(m+l/2,c.x,c.y,d.x,d.y),o=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:n.x,transposeY:n.y,text:f[k],rotation:o,p0:c,p1:d}),c=d}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily",d),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",e),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",c)}(),function(){Kinetic.RegularPolygon=function(a){this.___init(a)},Kinetic.RegularPolygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="RegularPolygon"},drawFunc:function(a){var b,c,d,e=this.attrs.sides,f=this.attrs.radius;for(a.beginPath(),a.moveTo(0,0-f),b=1;e>b;b++)c=f*Math.sin(2*b*Math.PI/e),d=-1*f*Math.cos(2*b*Math.PI/e),a.lineTo(c,d);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0)}(),function(){Kinetic.Star=function(a){this.___init(a)},Kinetic.Star.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Star"},drawFunc:function(a){var b=a._context,c=this.attrs.innerRadius,d=this.attrs.outerRadius,e=this.attrs.numPoints;b.beginPath(),b.moveTo(0,0-this.attrs.outerRadius);for(var f=1;2*e>f;f++){var g=f%2===0?d:c,h=g*Math.sin(f*Math.PI/e),i=-1*g*Math.cos(f*Math.PI/e);b.lineTo(h,i)}b.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0)}(),function(){var a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],b="Change.kinetic",c="none",d="up",e="right",f="down",g="left",h="Label",i=a.length;Kinetic.Label=function(a){this.____init(a)},Kinetic.Label.prototype={____init:function(a){var b=this;this.className=h,Kinetic.Group.call(this,a),this.on("add.kinetic",function(a){b._addListeners(a.child),b._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(c){var d,e=this,f=function(){e._sync()};for(d=0;i>d;d++)c.on(a[d]+b,f)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,c,h,i,j,k=this.getText(),l=this.getTag();if(k&&l){switch(a=k.getWidth(),b=k.getHeight(),c=l.getPointerDirection(),h=l.getPointerWidth(),pointerHeight=l.getPointerHeight(),i=0,j=0,c){case d:i=a/2,j=-1*pointerHeight;break;case e:i=a+h,j=b/2;break;case f:i=a/2,j=b+pointerHeight;break;case g:i=-1*h,j=b/2}l.setAttrs({x:-1*i,y:-1*j,width:a,height:b}),k.setAttrs({x:-1*i,y:-1*j})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Tag=function(a){this.___init(a)},Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Tag"},drawFunc:function(a){var b=this.getWidth(),c=this.getHeight(),h=this.getPointerDirection(),i=this.getPointerWidth(),j=this.getPointerHeight();this.getCornerRadius();a.beginPath(),a.moveTo(0,0),h===d&&(a.lineTo((b-i)/2,0),a.lineTo(b/2,-1*j),a.lineTo((b+i)/2,0)),a.lineTo(b,0),h===e&&(a.lineTo(b,(c-j)/2),a.lineTo(b+i,c/2),a.lineTo(b,(c+j)/2)),a.lineTo(b,c),h===f&&(a.lineTo((b+i)/2,c),a.lineTo(b/2,c+j),a.lineTo((b-i)/2,c)),a.lineTo(0,c),h===g&&(a.lineTo(0,(c+j)/2),a.lineTo(-1*i,c/2),a.lineTo(0,(c-j)/2)),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",c),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0)}(),function(){Kinetic.Filters.Grayscale=function(a){for(var b=a.data,c=0;c<b.length;c+=4){var d=.34*b[c]+.5*b[c+1]+.16*b[c+2];b[c]=d,b[c+1]=d,b[c+2]=d}}}(),function(){Kinetic.Filters.Brighten=function(a){for(var b=this.getFilterBrightness(),c=a.data,d=0;d<c.length;d+=4)c[d]+=b,c[d+1]+=b,c[d+2]+=b},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterBrightness",0)}(),function(){Kinetic.Filters.Invert=function(a){for(var b=a.data,c=0;c<b.length;c+=4)b[c]=255-b[c],b[c+1]=255-b[c+1],b[c+2]=255-b[c+2]}}(),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=b.data,E=b.width,F=b.height,G=e+e+1,H=E-1,I=F-1,J=e+1,K=J*(J+1)/2,L=new a,M=null,N=L,O=null,P=null,Q=c[e],R=d[e];for(h=1;G>h;h++)N=N.next=new a,h==J&&(M=N);for(N.next=L,l=k=0,g=0;F>g;g++){for(u=v=w=x=m=n=o=p=0,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(h=1;J>h;h++)i=k+((h>H?H:h)<<2),m+=(N.r=y=D[i])*(C=J-h),n+=(N.g=z=D[i+1])*C,o+=(N.b=A=D[i+2])*C,p+=(N.a=B=D[i+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next;for(O=L,P=M,f=0;E>f;f++)D[k+3]=B=p*Q>>R,0!==B?(B=255/B,D[k]=(m*Q>>R)*B,D[k+1]=(n*Q>>R)*B,D[k+2]=(o*Q>>R)*B):D[k]=D[k+1]=D[k+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=l+((i=f+e+1)<H?i:H)<<2,u+=O.r=D[i],v+=O.g=D[i+1],w+=O.b=D[i+2],x+=O.a=D[i+3],m+=u,n+=v,o+=w,p+=x,O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=4;l+=E}for(f=0;E>f;f++){for(v=w=x=u=n=o=p=m=0,k=f<<2,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(j=E,h=1;e>=h;h++)k=j+f<<2,m+=(N.r=y=D[k])*(C=J-h),n+=(N.g=z=D[k+1])*C,o+=(N.b=A=D[k+2])*C,p+=(N.a=B=D[k+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next,I>h&&(j+=E);for(k=f,O=L,P=M,g=0;F>g;g++)i=k<<2,D[i+3]=B=p*Q>>R,B>0?(B=255/B,D[i]=(m*Q>>R)*B,D[i+1]=(n*Q>>R)*B,D[i+2]=(o*Q>>R)*B):D[i]=D[i+1]=D[i+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=f+((i=g+J)<I?i:I)*E<<2,m+=u+=O.r=D[i],n+=v+=O.g=D[i+1],o+=w+=O.b=D[i+2],p+=x+=O.a=D[i+3],O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=E}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var c=0|this.getFilterRadius();c>0&&b(a,c)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterRadius",0)}(),function(){function a(a,b,c){var d=4*(c*a.width+b),e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function b(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}function c(a){for(var b=[0,0,0],c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}function d(d,e){var f=a(d,0,0),g=a(d,d.width-1,0),h=a(d,0,d.height-1),i=a(d,d.width-1,d.height-1),j=e||10;if(b(f,g)<j&&b(g,i)<j&&b(i,h)<j&&b(h,f)<j){for(var k=c([g,f,i,h]),l=[],m=0;m<d.width*d.height;m++){var n=b(k,[d.data[4*m],d.data[4*m+1],d.data[4*m+2]]);l[m]=j>n?0:255}return l}}function e(a,b){for(var c=0;c<a.width*a.height;c++)a.data[4*c+3]=b[c]}function f(a,b,c){for(var d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=2040===k?255:0}return g}function g(a,b,c){for(var d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k>=1020?255:0}return g}function h(a,b,c){for(var d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k}return g}Kinetic.Filters.Mask=function(a){var b=this.getFilterThreshold(),c=d(a,b);return c&&(c=f(c,a.width,a.height),c=g(c,a.width,a.height),c=h(c,a.width,a.height),e(a,c)),a},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterThreshold",0)}(),function(){var a=function(a,b,c){a/=255,b/=255,c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=f/2,h=f/(1-Math.abs(2*g-1)),i=0;return d==a?i=(b-c)/f%6:d==b?i=(c-a)/f+2:d==c&&(i=(a-b)/f+4),[(60*i+360)%360,h,g]},b=function(a,b,c,d){a/=255,b/=255,c/=255;var e=Math.max(a,b,c),f=Math.min(a,b,c),g=e-f,h=g/2,i=(g/(1-Math.abs(2*h-1)),0);e==a?i=(b-c)/g%6:e==b?i=(c-a)/g+2:e==c&&(i=(a-b)/g+4),i*=60,i%=360,i+=d,i%=360,i/=60;var j=0,k=0,l=0,m=g*(1-Math.abs(i%2-1)),n=h-g/2;return i>=0&&1>i?(j=g,k=m):i>=1&&2>i?(k=g,j=m):i>=2&&3>i?(k=g,l=m):i>=3&&4>i?(l=g,k=m):i>=4&&5>i?(l=g,j=m):i>=5&&6>i&&(j=g,l=m),j+=n,k+=n,l+=n,j=255*j,k=255*k,l=255*l,[j,k,l]},c=function(a,c){for(var d,e=a.data,f=0;f<e.length;f+=4)d=b(e[f+0],e[f+1],e[f+2],c),e[f+0]=d[0],e[f+1]=d[1],e[f+2]=d[2]};Kinetic.Filters.ShiftHue=function(a){c(a,this.getFilterHueShiftDeg()%360)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterHueShiftDeg",0),Kinetic.Filters.Colorize=function(b){for(var d=b.data,e=this.getFilterColorizeColor(),f=a(e[0],e[1],e[2]),g=f[0],h=0;h<d.length;h+=4)d[h+1]=0,d[h+2]=0;c(b,g)},Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterColorizeColor",[255,0,0])}(),function(){var a=function(a,b){var c=a.data,d=a.width,e=a.height,f=d*e,g=[];g.length=d*e*4;var h,i,j,k,l,m,n,o,p,q,r,s=b.length,t=b[0].length,u=Math.floor(b.length/2),v=Math.floor(b[0].length/2);for(m=0;e>m;m+=1)for(l=0;d>l;l+=1){for(h=0,i=0,j=0,k=0,q=0;s>q;q+=1)for(r=0;t>r;r+=1)n=(l+q-u)%d,n=n>0?n:-n,o=(m+q-v)%e,o=o>0?o:-o,p=4*(o*d+n),h+=b[r][q]*c[p+0],i+=b[r][q]*c[p+1],j+=b[r][q]*c[p+2];p=4*(m*d+l),g[p+0]=h,g[p+1]=i,g[p+2]=j}var w=4*f;for(p=0;w>p;p+=4)c[p+0]=g[p+0],c[p+1]=g[p+1],c[p+2]=g[p+2]},b=function(a,b,c){var d=a-b;return Math.pow(Math.E,-d*d/(2*c*c))},c=function(a,c,d){a%2===0&&(a+=1);var e,f,g,h=[];for(e=0;a>e;e+=1){for(g=[],f=0;a>f;f+=1)g.push(c*b(e,a/2,d)*b(f,a/2,d));h.push(g)}return h},d=function(a,b){var d=c(a,b,1),e=Math.floor(a/2);return d[e][e]+=1-b,d},e=function(a,b){var d=c(a,-b,1),e=Math.floor(a/2);return d[e][e]+=1+b,d};Kinetic.Factory.addFilterGetterSetter(Kinetic.Image,"filterAmount",50),Kinetic.Filters.UnsharpMask=function(b){a(b,e(5,this.getFilterAmount()/100))},Kinetic.Filters.SoftBlur=function(b){a(b,d(5,this.getFilterAmount()/100))},Kinetic.Filters.Edge=function(b){var c=this.getFilterAmount()/100;0!==c&&a(b,[[0,-1*c,0],[-1*c,1-c+4*c,-1*c],[0,-1*c,0]])},Kinetic.Filters.Emboss=function(b){var c=this.getFilterAmount()/100;0!==c&&a(b,[[-1*c,-.5*c,0],[-.5*c,1+.5*c,.5*c],[0,.5*c,1*c]])}}(),define("views/pgmap-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","humanize","kinetic","loglevel","marionette"],function(a,b,c,d,e,f,g,h){"use strict";var i=c.Marionette.ItemView.extend({className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 custom-gutter",template:d["app/scripts/templates/pgmap.ejs"],headlineTemplate:b.template("<%- active %>/<%- total %>"),subtextTemplate:b.template("<%- value %> <%- key %>"),ui:{container:".pgcanvas",headline:".headline",subtext:".subtext"},count:15e3,total:0,activeclean:0,initialize:function(){b.bindAll(this),this.App=c.Marionette.getOption(this,"App"),this.listenTo(this,"renderMap",this.renderMap),this.collection=new c.Collection,this.App&&(this.ReqRes=c.Marionette.getOption(this.App,"ReqRes"),this.listenTo(this.App.vent,"filter:update",this.fetchOSDPGCount),this.listenTo(this.App.vent,"dashboard:refresh",this.fetchOSDPGCount),this.listenTo(this.App.vent,"status:update",this.statusUpdate)),e(this)},statusUpdate:function(a){this.total=b.reduce(a.get("pg"),function(a,b){return a+b.count},0),this.ui.headline.text(this.headlineTemplate({active:this.format(a.get("pg").ok.states.clean),total:this.format(this.total)}))},getLayout:function(a){var b=610,c=165,d=0,e=0,f=1;return 15e3>=a?(b=238,c=63,f=2.6):3e4>=a?(b=336,c=90,f=1.8):6e4>=a&&(b=476,c=128,f=1.3),d/=f,e/=f,{x:Math.round(d),y:Math.round(e),width:b,height:c,scale:f}},legendColors:[["#0f0",.305],["#ff0",1],["#f00",1]],legendText:["Clean","Working","Dirty"],makeText:function(a,b,c){var d=new g.Text({fontFamily:"Titillium Web, sans-serif",fontSize:"12",fontWeight:"400",text:this.legendText[a],fill:"#37424a",x:b,y:c+3});return b+=d.getWidth()+10,[d,b]},makeSwatch:function(a,c,d){var e=[],f=16,h=new g.Rect({x:c,y:d,width:f+2,height:f+2,stroke:"#5e6a71"});return e.push(h),e.push(new g.Rect({x:c+1,y:d+1,width:f,height:f,fill:b.first(this.legendColors[a]),opacity:b.last(this.legendColors[a])})),c+=h.getWidth()+4,[e,c]},makeLegend:function(){var a=230,c=160,d=this,e=b.reduce(b.range(0,3),function(e,f){var g=d.makeSwatch(f,a,c);e=e.concat(b.first(g)),a=b.last(g);var h=d.makeText(f,a,c);return a=b.last(h),e.push(b.first(h)),e},[]);return b.flatten(e)},canvasDebugTemplate:b.template("height: <%- height %>, width: <%- width %>, count: <%- this.count %>, layout: <%- layout %>"),initCanvas:function(){var a=this.getLayout(this.count),c=this.ui.container.width(),d=this.ui.container.height();this.stage=new g.Stage({container:this.ui.container[0],height:d,width:c}),h.debug(this.canvasDebugTemplate({height:d,width:c,count:this.count,layout:a})),this.layer=new g.Layer,this.tlayer=new g.Layer,this.background=new g.Rect({x:a.x,y:a.y,width:a.width,height:a.height,fill:"#e6e8e8"}),this.layer.add(this.background);var e=this.makeLegend();!function(a){b.each(e,function(b){a.add(b)})}(this.tlayer),this.stage.add(this.layer),this.stage.add(this.tlayer),this.layer.getContext().scale(a.scale,a.scale),this.layer.drawScene(),this.frag=document.createDocumentFragment(),this.backstage=new g.Stage({container:this.frag,height:d,width:c}),this._background=new g.Rect({x:a.x,y:a.y,width:a.width,height:a.height,fill:"#e6e8e8"}),this._layer=new g.Layer,this._layer.add(this._background),this.backstage.add(this._layer),this._layer.drawScene()},countPGs:function(){return this.collection.reduce(function(a,c){var d=c.get("pg_states");return a+b.reduce(d,function(a,b,c){return"active"===c?a:a+b},0)},0)},fetchOSDPGCount:function(){this.collection.set(this.ReqRes.request("get:osdpgcounts")),this.$el.is(":visible")&&(this.count=this.countPGs(),this.forceUIUpdate())},forceUIUpdate:function(){h.debug("Rendering PG Map"),setTimeout(function(){this.stage&&(this.stage.destroy(),this.backstage.destroy()),this.initCanvas(),this.trigger("renderMap")}.bind(this),0)},setPixel:function(a,b,c,d){var e=4*(b+c*a.width);a.data[e+0]=d.r,a.data[e+1]=d.g,a.data[e+2]=d.b,a.data[e+3]=d.a},formatNumberTemplate:b.template("<%- num %><%- unit %>"),format:function(a){var b=a,c="",d=0;return b>=1e6?(b/=1e6,c="M",d=1):b>=1e3&&(b/=1e3,c="K",d=1),this.formatNumberTemplate({num:f.numberFormat(b,d),unit:c})},priorityOrder:["stale","incomplete","peering","down","inconsistent","remapped","wait-backfill","backfill","recovering","repair","degraded","scrubbing","splitting","replaying","creating"],redStates:{stale:!0,incomplete:!0,peering:!0,down:!0,inconsistent:!0},displayWarnings:function(a){a in this.redStates?this.trigger("status:warn"):this.trigger("status:ok")},green:{r:0,g:255,b:0,a:78},red:{r:255,g:0,b:0,a:255},yellow:{r:255,g:255,b:0,a:255},renderMap:function(){var a=this;this.pgReplicaTotal=0,this.activeclean=0;var c,d=0,e=this.getLayout(this.count),f=this._background.getContext();f.clear();var g=this._background.getContext().getImageData(e.x,e.y,e.width,e.height);this.stats={},this.collection.each(function(e){var f=e.get("pg_states");a.pgReplicaTotal+=b.reduce(f,function(b,e,f){if(void 0===a.stats[f]&&(a.stats[f]=0),a.stats[f]+=e,"active"===f)return b;"clean"===f?(a.activeclean+=e,c=a.green):c=f in a.redStates?a.red:a.yellow;for(var h=b,i=b;i+e>h;h++)a.setPixel(g,h+a.pgReplicaTotal,d,c);return i+e},0)});var h=this.background.getContext();h.clear(),f.putImageData(g,0,0),h.drawImage(this._background.getCanvas()._canvas,e.x,e.y);var i=b.find(this.priorityOrder,function(b){return a.stats[b]>0});i?this.displayWarnings(i):(this.ui.subtext.text(""),this.displayWarnings(""))}});return i}),define("views/status-line-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","humanize","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.ItemView.extend({template:d["app/scripts/templates/status-line.ejs"],updateTemplate:b.template('<i class="fa fa-heart"></i> <%- time %>'),className:"card status-line gauge",timer:null,initialize:function(){b.bindAll(this,"updateUI","timerWrapper"),this.lastUpdateUnix=Date.now(),this.App=c.Marionette.getOption(this,"App"),this.App&&this.listenTo(this.App.vent,"krakenHeartBeat:update",this.updateTimer),this.timerWrapper(this.updateUI),e(this)},timerWrapper:function(a){var b=this;return setTimeout(function(){a.call(b),b.timer=b.timerWrapper(a)},1e3)},updateUI:function(){this.$el.html(this.updateTemplate({time:f.relativeTime(this.lastUpdateUnix/1e3)}))},updateTimer:function(a){this.lastUpdateUnix=a.get("cluster_update_time_unix")}});return g}),define("views/osd-hex-view",["jquery","underscore","backbone","templates","marionette"],function(a,b,c,d){"use strict";var e=c.Marionette.ItemView.extend({className:"hex",template:d["app/scripts/templates/osd-hex.ejs"],initialize:function(){}});return e}),define("collections/server-collection",["underscore","backbone","models/application-model"],function(a,b,c){"use strict";var d=b.Collection.extend({cluster:1,url:function(){return"/api/v1/cluster/"+this.cluster+"/server"},initialize:function(a,b){b&&b.cluster&&(this.cluster=b.cluster)},model:c.ServerModel});return d}),define("views/hosts-dash-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","collections/server-collection","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.ItemView.extend({className:"col-lg-3 col-md-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/hosts-dash.ejs"],headlineTemplate:b.template("<%- count %>"),subtextTemplate:b.template("<%- mon %> MON/<%- osd %> OSD"),collectionEvents:{change:"checkModel",sync:"updateUI"},ui:{headline:".headline",subtext:".subtext"},initialize:function(){b.bindAll(this),this.App=c.Marionette.getOption(this,"App"),this.App&&(this.listenTo(this.App.vent,"host:update",this.fetchHosts),this.listenTo(this.App.vent,"cluster:update",this.switchCluster)),this.collection=new f,e(this)},switchCluster:function(a){a&&(this.collection.cluster=a.get("id"))},checkModel:function(){this.updateUI(this.collection)},fetchHosts:function(){this.collection.fetch()},countServices:function(a,c){var d=c.get("services"),e={};return b.each(d,function(a){e[a.type]=1}),b.each(e,function(b,c){a[c]+=b}),a},updateUI:function(a){this.ui.headline.text(this.headlineTemplate({count:a.length}));var b=a.reduce(this.countServices,{osd:0,mon:0});this.ui.subtext.text(this.subtextTemplate({osd:b.osd,mon:b.mon}))}});return g}),define("collections/pool-collection",["underscore","backbone","models/application-model"],function(a,b,c){"use strict";var d=b.Collection.extend({cluster:1,url:function(){return"/api/v1/cluster/"+this.cluster+"/pool"},initialize:function(a,b){b&&b.cluster&&(this.cluster=b.cluster)},model:c.PoolModel});return d}),define("views/pools-dash-view",["jquery","underscore","backbone","templates","helpers/gauge-helper","collections/pool-collection","marionette"],function(a,b,c,d,e,f){"use strict";var g=c.Marionette.ItemView.extend({className:"col-md-3 col-lg-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/pools-dash.ejs"],headlineTemplate:b.template("<%- count %>"),quotaTemplate:b.template("<%- name %> Check Quotas"),ui:{headline:".headline",
subtext:".subtext"},collectionEvents:{change:"checkModel",sync:"updateUI"},initialize:function(){b.bindAll(this),this.cluster=c.Marionette.getOption(this,"cluster"),void 0===this.cluster&&(this.cluster=1),this.collection=new f({cluster:this.cluster}),this.App=c.Marionette.getOption(this,"App"),this.App&&(this.listenTo(this.App.vent,"pool:update",this.updateCollection),this.listenTo(this.App.vent,"cluster:update",this.switchCluster),this.App.ReqRes.setHandler("get:pools",this.getPoolsHandler)),e(this)},getPoolsHandler:function(){return this.collection.reduce(function(a,b){var c=b.get("pool_id"),d=b.get("name")||"unknown";return a[c]=d,a},{})},switchCluster:function(a){a&&(this.collection.cluster=a.get("id"))},updateCollection:function(){this.collection.fetch()},quotaWarningThreshold:.8,testQuota:function(a){var b=a.attributes;return b.quota_max_bytes>0&&b.used_bytes/b.quota_max_bytes>this.quotaWarningThreshold?!0:b.quota_max_objects>0&&b.used_objects/b.quota_max_objects>this.quotaWarningThreshold?!0:!1},checkModel:function(){this.updateUI(this.collection)},updateUI:function(a){var b="";this.ui.headline.text(this.headlineTemplate({count:a.length}));var c=a.find(this.testQuota),d="status:ok";c&&(b=this.quotaTemplate({name:c.get("name")}),d="status:warn"),this.ui.subtext.text(b),this.trigger(d)}});return g}),define("dygraphs",[],function(){function a(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var c in b)a==c&&(a=b[c]);for(var d=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],e=0;e<d.length;e++){var f=d[e].re,g=d[e].process,h=f.exec(a);if(h){var i=g(h);this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c}}function b(a){a=a||{guess:!0};var c=a.e||null,d=!!a.guess,e=new b.implementation,f=e.run(c);return d?e.guessAnonymousFunctions(f):f}Date.ext={},Date.ext.util={},Date.ext.util.xPad=function(a,b,c){for("undefined"==typeof c&&(c=10);parseInt(a,10)<c&&c>1;c/=10)a=b.toString()+a;return a.toString()},Date.prototype.locale="en-GB",document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang),Date.ext.locales={},Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},Date.ext.locales["en-US"]=Date.ext.locales.en,Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z",Date.ext.locales["en-US"].x="%D",Date.ext.locales["en-US"].X="%r",Date.ext.locales["en-GB"]=Date.ext.locales.en,Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"],Date.ext.formats={a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(a){var b=a.getFullYear(),c=parseInt(Date.ext.formats.V(a),10),d=parseInt(Date.ext.formats.W(a),10);return d>c?b++:0===d&&c>=52&&b--,b},H:["getHours","0"],I:function(a){var b=a.getHours()%12;return Date.ext.util.xPad(0===b?12:b,0)},j:function(a){var b=a-new Date(""+a.getFullYear()+"/1/1 GMT");b+=6e4*a.getTimezoneOffset();var c=parseInt(b/6e4/60/24,10)+1;return Date.ext.util.xPad(c,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){var b=a.getDay();return 0===b?7:b},U:function(a){var b=parseInt(Date.ext.formats.j(a),10),c=6-a.getDay(),d=parseInt((b+c)/7,10);return Date.ext.util.xPad(d,0)},V:function(a){var b=parseInt(Date.ext.formats.W(a),10),c=new Date(""+a.getFullYear()+"/1/1").getDay(),d=b+(c>4||1>=c?0:1);return 53==d&&new Date(""+a.getFullYear()+"/12/31").getDay()<4?d=1:0===d&&(d=Date.ext.formats.V(new Date(""+(a.getFullYear()-1)+"/12/31"))),Date.ext.util.xPad(d,0)},w:"getDay",W:function(a){var b=parseInt(Date.ext.formats.j(a),10),c=7-Date.ext.formats.u(a),d=parseInt((b+c)/7,10);return Date.ext.util.xPad(d,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){var b=a.getTimezoneOffset(),c=Date.ext.util.xPad(parseInt(Math.abs(b/60),10),0),d=Date.ext.util.xPad(b%60,0);return(b>0?"-":"+")+c+d},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}},Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},Date.ext.aggregates.z=Date.ext.formats.z(new Date),Date.ext.aggregates.Z=Date.ext.formats.Z(new Date),Date.ext.unsupported={},Date.prototype.strftime=function(a){this.locale in Date.ext.locales||(this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale=this.locale.replace(/-[a-zA-Z]+$/,""):this.locale="en-GB");for(var b=this;a.match(/%[cDhnrRtTxXzZ]/);)a=a.replace(/%([cDhnrRtTxXzZ])/g,function(a,c){var d=Date.ext.aggregates[c];return"locale"==d?Date.ext.locales[b.locale][c]:d});var c=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(a,c){var d=Date.ext.formats[c];return"string"==typeof d?b[d]():"function"==typeof d?d.call(b,b):"object"==typeof d&&"string"==typeof d[0]?Date.ext.util.xPad(b[d[0]](),d[1]):c});return b=null,c},b.implementation=function(){},b.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":"string"==typeof a.message&&"undefined"!=typeof window&&window.opera?a.stacktrace?a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":a.stack?a.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":"opera10a":"opera9":a.stack?"firefox":"other"},instrumentFunction:function(a,c,d){a=a||window;var e=a[c];a[c]=function(){return d.call(this,b().slice(4)),a[c]._instrumented.apply(this,arguments)},a[c]._instrumented=e},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(a){var b=(a.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");return b.pop(),b},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera11:function(a){for(var b="{anonymous}",c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[4]+":"+h[1]+":"+h[2],j=h[3]||"global code";j=j.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,b),e.push(j+"@"+i+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera10b:function(a){for(var b=/^(.*)@(.+):(\d+)$/,c=a.stacktrace.split("\n"),d=[],e=0,f=c.length;f>e;e++){var g=b.exec(c[e]);if(g){var h=g[1]?g[1]+"()":"global code";d.push(h+"@"+g[2]+":"+g[3])}}return d},opera10a:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=a.stacktrace.split("\n"),e=[],f=0,g=d.length;g>f;f+=2){var h=c.exec(d[f]);if(h){var i=h[3]||b;e.push(i+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}}return e},opera9:function(a){for(var b="{anonymous}",c=/Line (\d+).*script (?:in )?(\S+)/i,d=a.message.split("\n"),e=[],f=2,g=d.length;g>f;f+=2){var h=c.exec(d[f]);h&&e.push(b+"()@"+h[2]+":"+h[1]+" -- "+d[f+1].replace(/^\s+/,""))}return e},other:function(a){for(var b,c,d="{anonymous}",e=/function\s*([\w\-$]+)?\s*\(/i,f=[],g=10;a&&f.length<g;)b=e.test(a.toString())?RegExp.$1||d:d,c=Array.prototype.slice.call(a.arguments||[]),f[f.length]=b+"("+this.stringifyArguments(c)+")",a=a.caller;return f},stringifyArguments:function(a){for(var b=[],c=Array.prototype.slice,d=0;d<a.length;++d){var e=a[d];void 0===e?b[d]="undefined":null===e?b[d]="null":e.constructor&&(e.constructor===Array?e.length<3?b[d]="["+this.stringifyArguments(e)+"]":b[d]="["+this.stringifyArguments(c.call(e,0,1))+"..."+this.stringifyArguments(c.call(e,-1))+"]":e.constructor===Object?b[d]="#object":e.constructor===Function?b[d]="#function":e.constructor===String?b[d]='"'+e+'"':e.constructor===Number&&(b[d]=e))}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var b=0;b<a.length;++b){var c=/\{anonymous\}\(.*\)@(.*)/,d=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,e=a[b],f=c.exec(e);if(f){var g=d.exec(f[1]),h=g[1],i=g[2],j=g[3]||0;if(h&&this.isSameDomain(h)&&i){var k=this.guessAnonymousFunction(h,i,j);a[b]=e.replace("{anonymous}",k)}}}return a},guessAnonymousFunction:function(a,b,c){var d;try{d=this.findFunctionName(this.getSource(a),b)}catch(e){d="getSource failed with url: "+a+", exception: "+e.toString()}return d},findFunctionName:function(a,b){for(var c,d,e,f=/function\s+([^(]*?)\s*\(([^)]*)\)/,g=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*function\b/,h=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(?:eval|new Function)\b/,i="",j=Math.min(b,20),k=0;j>k;++k)if(c=a[b-k-1],e=c.indexOf("//"),e>=0&&(c=c.substr(0,e)),c){if(i=c+i,d=g.exec(i),d&&d[1])return d[1];if(d=f.exec(i),d&&d[1])return d[1];if(d=h.exec(i),d&&d[1])return d[1]}return"(?)"}},CanvasRenderingContext2D.prototype.installPattern=function(a){if("undefined"!=typeof this.isPatternInstalled)throw"Must un-install old line pattern before installing a new one.";this.isPatternInstalled=!0;var b=[0,0],c=[],d=this.beginPath,e=this.lineTo,f=this.moveTo,g=this.stroke;this.uninstallPattern=function(){this.beginPath=d,this.lineTo=e,this.moveTo=f,this.stroke=g,this.uninstallPattern=void 0,this.isPatternInstalled=void 0},this.beginPath=function(){c=[],d.call(this)},this.moveTo=function(a,b){c.push([[a,b]]),f.call(this,a,b)},this.lineTo=function(a,b){var d=c[c.length-1];d.push([a,b])},this.stroke=function(){if(0===c.length)return void g.call(this);for(var d=0;d<c.length;d++)for(var h=c[d],i=h[0][0],j=h[0][1],k=1;k<h.length;k++){var l=h[k][0],m=h[k][1];this.save();var n=l-i,o=m-j,p=Math.sqrt(n*n+o*o),q=Math.atan2(o,n);this.translate(i,j),f.call(this,0,0),this.rotate(q);for(var r=b[0],s=0;p>s;){var t=a[r];s+=b[1]?b[1]:t,s>p?(b=[r,s-p],s=p):b=[(r+1)%a.length,0],r%2===0?e.call(this,s,0):f.call(this,s,0),r=(r+1)%a.length}this.restore(),i=l,j=m}g.call(this),c=[]}},CanvasRenderingContext2D.prototype.uninstallPattern=function(){throw"Must install a line pattern before uninstalling it."};var c=function(){var a=function(a){this.dygraph_=a,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};return a.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},a.axisToIndex_=function(b){if("string"==typeof b){if(a.AXIS_STRING_MAPPINGS_.hasOwnProperty(b))return a.AXIS_STRING_MAPPINGS_[b];throw"Unknown axis : "+b}if("number"==typeof b){if(0===b||1===b)return b;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(b)throw"Unknown axis : "+b;return 0},a.prototype.reparseSeries=function(){var b=this.get("labels");if(b){this.labels_=b.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};var c=!this.user_.series;if(c){for(var d=0,e=0;e<this.labels_.length;e++){var g=this.labels_[e],h=this.user_[g]||{},i=0,j=h.axis;"object"==typeof j&&(i=++d,this.yAxes_[i]={series:[g],options:j}),j||this.yAxes_[0].series.push(g),this.series_[g]={idx:e,yAxis:i,options:h}}for(var e=0;e<this.labels_.length;e++){var g=this.labels_[e],h=this.series_[g].options,j=h.axis;if("string"==typeof j){if(!this.series_.hasOwnProperty(j))return void f.error("Series "+g+" wants to share a y-axis with series "+j+", which does not define its own axis.");var i=this.series_[j].yAxis;this.series_[g].yAxis=i,this.yAxes_[i].series.push(g)}}}else for(var e=0;e<this.labels_.length;e++){var g=this.labels_[e],h=this.user_.series[g]||{},i=a.axisToIndex_(h.axis);this.series_[g]={idx:e,yAxis:i,options:h},this.yAxes_[i]?this.yAxes_[i].series.push(g):this.yAxes_[i]={series:[g],options:{}}}var k=this.user_.axes||{};f.update(this.yAxes_[0].options,k.y||{}),this.yAxes_.length>1&&f.update(this.yAxes_[1].options,k.y2||{}),f.update(this.xAxis_.options,k.x||{})}},a.prototype.get=function(a){var b=this.getGlobalUser_(a);return null!==b?b:this.getGlobalDefault_(a)},a.prototype.getGlobalUser_=function(a){return this.user_.hasOwnProperty(a)?this.user_[a]:null},a.prototype.getGlobalDefault_=function(a){return this.global_.hasOwnProperty(a)?this.global_[a]:f.DEFAULT_ATTRS.hasOwnProperty(a)?f.DEFAULT_ATTRS[a]:null},a.prototype.getForAxis=function(a,b){var c,d;if("number"==typeof b)c=b,d=0===c?"y":"y2";else{if("y1"==b&&(b="y"),"y"==b)c=0;else if("y2"==b)c=1;else{if("x"!=b)throw"Unknown axis "+b;c=-1}d=b}var e=-1==c?this.xAxis_:this.yAxes_[c];if(e){var g=e.options;if(g.hasOwnProperty(a))return g[a]}var h=this.getGlobalUser_(a);if(null!==h)return h;var i=f.DEFAULT_ATTRS.axes[d];return i.hasOwnProperty(a)?i[a]:this.getGlobalDefault_(a)},a.prototype.getForSeries=function(a,b){if(b===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(a))return this.highlightSeries_[a];if(!this.series_.hasOwnProperty(b))throw"Unknown series: "+b;var c=this.series_[b],d=c.options;return d.hasOwnProperty(a)?d[a]:this.getForAxis(a,c.yAxis)},a.prototype.numAxes=function(){return this.yAxes_.length},a.prototype.axisForSeries=function(a){return this.series_[a].yAxis},a.prototype.axisOptions=function(a){return this.yAxes_[a].options},a.prototype.seriesForAxis=function(a){return this.yAxes_[a].series},a.prototype.seriesNames=function(){return this.labels_},a}(),d=function(a){this.dygraph_=a,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};d.prototype.attr_=function(a){return this.dygraph_.attr_(a)},d.prototype.addDataset=function(a,b){this.points.push(b),this.setNames.push(a)},d.prototype.getPlotArea=function(){return this.area_},d.prototype.computePlotArea=function(){var a={x:0,y:0};a.w=this.dygraph_.width_-a.x-this.attr_("rightGap"),a.h=this.dygraph_.height_;var b={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(b){var c={x:a.x,y:a.y,w:b,h:a.h};return a.x+=b,a.w-=b,c},reserveSpaceRight:function(b){var c={x:a.x+a.w-b,y:a.y,w:b,h:a.h};return a.w-=b,c},reserveSpaceTop:function(b){var c={x:a.x,y:a.y,w:a.w,h:b};return a.y+=b,a.h-=b,c},reserveSpaceBottom:function(b){var c={x:a.x,y:a.y+a.h-b,w:a.w,h:b};return a.h-=b,c},chartRect:function(){return{x:a.x,y:a.y,w:a.w,h:a.h}}};this.dygraph_.cascadeEvents_("layout",b),this.area_=a},d.prototype.setAnnotations=function(a){this.annotations=[];for(var b=this.attr_("xValueParser")||function(a){return a},c=0;c<a.length;c++){var d={};if(!a[c].xval&&void 0===a[c].x)return void this.dygraph_.error("Annotations must have an 'x' property");if(a[c].icon&&(!a[c].hasOwnProperty("width")||!a[c].hasOwnProperty("height")))return void this.dygraph_.error("Must set width and height when setting annotation.icon property");f.update(d,a[c]),d.xval||(d.xval=b(d.x)),this.annotations.push(d)}},d.prototype.setXTicks=function(a){this.xTicks_=a},d.prototype.setYAxes=function(a){this.yAxes_=a},d.prototype.evaluate=function(){this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},d.prototype._evaluateLimits=function(){var a=this.dygraph_.xAxisRange();this.minxval=a[0],this.maxxval=a[1];var b=a[1]-a[0];this.xscale=0!==b?1/b:1;for(var c=0;c<this.yAxes_.length;c++){var d=this.yAxes_[c];d.minyval=d.computedValueRange[0],d.maxyval=d.computedValueRange[1],d.yrange=d.maxyval-d.minyval,d.yscale=0!==d.yrange?1/d.yrange:1,d.g.attr_("logscale")&&(d.ylogrange=f.log10(d.maxyval)-f.log10(d.minyval),d.ylogscale=0!==d.ylogrange?1/d.ylogrange:1,(!isFinite(d.ylogrange)||isNaN(d.ylogrange))&&d.g.error("axis "+c+" of graph at "+d.g+" can't be displayed in log scale for range ["+d.minyval+" - "+d.maxyval+"]"))}},d._calcYNormal=function(a,b,c){return c?1-(f.log10(b)-f.log10(a.minyval))*a.ylogscale:1-(b-a.minyval)*a.yscale},d.prototype._evaluateLineCharts=function(){for(var a=this.attr_("connectSeparatedPoints"),b=this.attr_("stackedGraph"),c=this.attr_("errorBars")||this.attr_("customBars"),e=0;e<this.points.length;e++)for(var f=this.points[e],g=this.setNames[e],h=this.dygraph_.axisPropertiesForSeries(g),i=this.dygraph_.attributes_.getForSeries("logscale",g),j=0;j<f.length;j++){var k=f[j];k.x=(k.xval-this.minxval)*this.xscale;var l=k.yval;b&&(k.y_stacked=d._calcYNormal(h,k.yval_stacked,i),null===l||isNaN(l)||(l=k.yval_stacked)),null===l&&(l=NaN,a||(k.yval=NaN)),k.y=d._calcYNormal(h,l,i),c&&(k.y_top=d._calcYNormal(h,l-k.yval_minus,i),k.y_bottom=d._calcYNormal(h,l+k.yval_plus,i))}},d.parseFloat_=function(a){return null===a?NaN:a},d.prototype._evaluateLineTicks=function(){var a,b,c,d;for(this.xticks=[],a=0;a<this.xTicks_.length;a++)b=this.xTicks_[a],c=b.label,d=this.xscale*(b.v-this.minxval),d>=0&&1>=d&&this.xticks.push([d,c]);for(this.yticks=[],a=0;a<this.yAxes_.length;a++)for(var e=this.yAxes_[a],f=0;f<e.ticks.length;f++)b=e.ticks[f],c=b.label,d=this.dygraph_.toPercentYCoord(b.v,a),d>=0&&1>=d&&this.yticks.push([a,d,c])},d.prototype._evaluateAnnotations=function(){var a,b={};for(a=0;a<this.annotations.length;a++){var c=this.annotations[a];b[c.xval+","+c.series]=c}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var d=0;d<this.points.length;d++){var e=this.points[d];for(a=0;a<e.length;a++){var f=e[a],g=f.xval+","+f.name;g in b&&(f.annotation=b[g],this.annotated_points.push(f))}}},d.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]};var e=function(a,b,c,d){if(this.dygraph_=a,this.layout=d,this.element=b,this.elementContext=c,this.container=this.element.parentNode,this.height=this.element.height,this.width=this.element.width,!this.isIE&&!e.isSupported(this.element))throw"Canvas is not supported.";if(this.area=d.getPlotArea(),this.container.style.position="relative",this.container.style.width=this.width+"px",this.dygraph_.isUsingExcanvas_)this._createIEClipArea();else if(!f.isAndroid()){var g=this.dygraph_.canvas_ctx_;g.beginPath(),g.rect(this.area.x,this.area.y,this.area.w,this.area.h),g.clip(),g=this.dygraph_.hidden_ctx_,g.beginPath(),g.rect(this.area.x,this.area.y,this.area.w,this.area.h),g.clip()}};e.prototype.attr_=function(a,b){return this.dygraph_.attr_(a,b)},e.prototype.clear=function(){var a;if(this.isIE)try{this.clearDelay&&(this.clearDelay.cancel(),this.clearDelay=null),a=this.elementContext}catch(b){return}a=this.elementContext,a.clearRect(0,0,this.width,this.height)},e.isSupported=function(a){var b=null;try{b="undefined"==typeof a||null===a?document.createElement("canvas"):a,b.getContext("2d")}catch(c){var d=navigator.appVersion.match(/MSIE (\d\.\d)/),e=-1!=navigator.userAgent.toLowerCase().indexOf("opera");return!d||d[1]<6||e?!1:!0}return!0},e.prototype.render=function(){this._updatePoints(),this._renderLineChart()},e.prototype._createIEClipArea=function(){function a(a){if(0!==a.w&&0!==a.h){var d=document.createElement("div");d.className=b,d.style.backgroundColor=e,d.style.position="absolute",d.style.left=a.x+"px",d.style.top=a.y+"px",d.style.width=a.w+"px",d.style.height=a.h+"px",c.appendChild(d)}}for(var b="dygraph-clip-div",c=this.dygraph_.graphDiv,d=c.childNodes.length-1;d>=0;d--)c.childNodes[d].className==b&&c.removeChild(c.childNodes[d]);for(var e=document.bgColor,f=this.dygraph_.graphDiv;f!=document;){var g=f.currentStyle.backgroundColor;if(g&&"transparent"!=g){e=g;break}f=f.parentNode}var h=this.area;a({x:0,y:0,w:h.x,h:this.height}),a({x:h.x,y:0,w:this.width-h.x,h:h.y}),a({x:h.x+h.w,y:0,w:this.width-h.x-h.w,h:this.height}),a({x:h.x,y:h.y+h.h,w:this.width-h.x,h:this.height-h.h-h.y})},e._getIteratorPredicate=function(a){return a?e._predicateThatSkipsEmptyPoints:null},e._predicateThatSkipsEmptyPoints=function(a,b){return null!==a[b].yval},e._drawStyledLine=function(a,b,c,d,g,h,i){var j=a.dygraph,k=j.getOption("stepPlot",a.setName);f.isArrayLike(d)||(d=null);var l=j.getOption("drawGapEdgePoints",a.setName),m=a.points,n=f.createIterator(m,0,m.length,e._getIteratorPredicate(j.getOption("connectSeparatedPoints"))),o=d&&d.length>=2,p=a.drawingContext;p.save(),o&&p.installPattern(d);var q=e._drawSeries(a,n,c,i,g,l,k,b);e._drawPointsOnLine(a,q,h,b,i),o&&p.uninstallPattern(),p.restore()},e._drawSeries=function(a,b,c,d,e,f,g,h){var i,j,k=null,l=null,m=null,n=[],o=!0,p=a.drawingContext;p.beginPath(),p.strokeStyle=h,p.lineWidth=c;for(var q=b.array_,r=b.end_,s=b.predicate_,t=b.start_;r>t;t++){if(j=q[t],s){for(;r>t&&!s(q,t);)t++;if(t==r)break;j=q[t]}if(null===j.canvasy||j.canvasy!=j.canvasy)g&&null!==k&&(p.moveTo(k,l),p.lineTo(j.canvasx,l)),k=l=null;else{if(i=!1,f||!k){b.nextIdx_=t,b.next(),m=b.hasNext?b.peek.canvasy:null;var u=null===m||m!=m;i=!k&&u,f&&(!o&&!k||b.hasNext&&u)&&(i=!0)}null!==k?c&&(g&&(p.moveTo(k,l),p.lineTo(j.canvasx,l)),p.lineTo(j.canvasx,j.canvasy)):p.moveTo(j.canvasx,j.canvasy),(e||i)&&n.push([j.canvasx,j.canvasy,j.idx]),k=j.canvasx,l=j.canvasy}o=!1}return p.stroke(),n},e._drawPointsOnLine=function(a,b,c,d,e){for(var f=a.drawingContext,g=0;g<b.length;g++){var h=b[g];f.save(),c(a.dygraph,a.setName,f,h[0],h[1],d,e,h[2]),f.restore()}},e.prototype._updatePoints=function(){for(var a=this.layout.points,b=a.length;b--;)for(var c=a[b],d=c.length;d--;){var e=c[d];e.canvasx=this.area.w*e.x+this.area.x,e.canvasy=this.area.h*e.y+this.area.y}},e.prototype._renderLineChart=function(a,b){var c,d,e=b||this.elementContext,g=this.layout.points,h=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var i=this.attr_("plotter"),j=i;f.isArrayLike(j)||(j=[j]);var k={};for(c=0;c<h.length;c++){d=h[c];var l=this.attr_("plotter",d);l!=i&&(k[d]=l)}for(c=0;c<j.length;c++)for(var m=j[c],n=c==j.length-1,o=0;o<g.length;o++)if(d=h[o],!a||d==a){var p=g[o],q=m;if(d in k){if(!n)continue;q=k[d]}var r=this.colors[d],s=this.dygraph_.getOption("strokeWidth",d);e.save(),e.strokeStyle=r,e.lineWidth=s,q({points:p,setName:d,drawingContext:e,color:r,strokeWidth:s,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(d),plotArea:this.area,seriesIndex:o,seriesCount:g.length,singleSeriesName:a,allSeriesPoints:g}),e.restore()}},e._Plotters={linePlotter:function(a){e._linePlotter(a)},fillPlotter:function(a){e._fillPlotter(a)},errorPlotter:function(a){e._errorPlotter(a)}},e._linePlotter=function(a){var b=a.dygraph,c=a.setName,d=a.strokeWidth,g=b.getOption("strokeBorderWidth",c),h=b.getOption("drawPointCallback",c)||f.Circles.DEFAULT,i=b.getOption("strokePattern",c),j=b.getOption("drawPoints",c),k=b.getOption("pointSize",c);g&&d&&e._drawStyledLine(a,b.getOption("strokeBorderColor",c),d+2*g,i,j,h,k),e._drawStyledLine(a,a.color,d,i,j,h,k)},e._errorPlotter=function(b){var c=b.dygraph,d=b.setName,g=c.getOption("errorBars")||c.getOption("customBars");if(g){var h=c.getOption("fillGraph",d);h&&c.warn("Can't use fillGraph option with error bars");var i,j=b.drawingContext,k=b.color,l=c.getOption("fillAlpha",d),m=c.getOption("stepPlot",d),n=b.points,o=f.createIterator(n,0,n.length,e._getIteratorPredicate(c.getOption("connectSeparatedPoints"))),p=NaN,q=NaN,r=[-1,-1],s=new a(k),t="rgba("+s.r+","+s.g+","+s.b+","+l+")";j.fillStyle=t,j.beginPath();for(var u=function(a){return null===a||void 0===a||isNaN(a)};o.hasNext;){var v=o.next();!m&&u(v.y)||m&&!isNaN(q)&&u(q)?p=NaN:(m?(i=[v.y_bottom,v.y_top],q=v.y):i=[v.y_bottom,v.y_top],i[0]=b.plotArea.h*i[0]+b.plotArea.y,i[1]=b.plotArea.h*i[1]+b.plotArea.y,isNaN(p)||(m?(j.moveTo(p,r[0]),j.lineTo(v.canvasx,r[0]),j.lineTo(v.canvasx,r[1])):(j.moveTo(p,r[0]),j.lineTo(v.canvasx,i[0]),j.lineTo(v.canvasx,i[1])),j.lineTo(p,r[1]),j.closePath()),r=i,p=v.canvasx)}j.fill()}},e._fillPlotter=function(b){if(!b.singleSeriesName&&0===b.seriesIndex){for(var c=b.dygraph,d=c.getLabels().slice(1),g=d.length;g>=0;g--)c.visibility()[g]||d.splice(g,1);var h=function(){for(var a=0;a<d.length;a++)if(c.getOption("fillGraph",d[a]))return!0;return!1}();if(h)for(var i,j,k=b.drawingContext,l=b.plotArea,m=b.allSeriesPoints,n=m.length,o=c.getOption("fillAlpha"),p=c.getOption("stackedGraph"),q=c.getColors(),r={},s=n-1;s>=0;s--){var t=d[s];if(c.getOption("fillGraph",t)){var u=c.getOption("stepPlot",t),v=q[s],w=c.axisPropertiesForSeries(t),x=1+w.minyval*w.yscale;0>x?x=0:x>1&&(x=1),x=l.h*x+l.y;var y,z=m[s],A=f.createIterator(z,0,z.length,e._getIteratorPredicate(c.getOption("connectSeparatedPoints"))),B=NaN,C=[-1,-1],D=new a(v),E="rgba("+D.r+","+D.g+","+D.b+","+o+")";k.fillStyle=E,k.beginPath();for(var F,G=!0;A.hasNext;){var H=A.next();if(f.isOK(H.y)){if(p){if(!G&&F==H.xval)continue;G=!1,F=H.xval,i=r[H.canvasx];var I;I=void 0===i?x:j?i[0]:i,y=[H.canvasy,I],u?-1===C[0]?r[H.canvasx]=[H.canvasy,x]:r[H.canvasx]=[H.canvasy,C[0]]:r[H.canvasx]=H.canvasy}else y=[H.canvasy,x];isNaN(B)||(k.moveTo(B,C[0]),u?k.lineTo(H.canvasx,C[0]):k.lineTo(H.canvasx,y[0]),j&&i?k.lineTo(H.canvasx,i[1]):k.lineTo(H.canvasx,y[1]),k.lineTo(B,C[1]),k.closePath()),C=y,B=H.canvasx}else B=NaN,null===H.y_stacked||isNaN(H.y_stacked)||(r[H.canvasx]=l.h*H.y_stacked+l.y)}j=u,k.fill()}}}};var f=function(a,b,c,d){this.is_initial_draw_=!0,this.readyFns_=[],void 0!==d?(this.warn("Using deprecated four-argument dygraph constructor"),this.__old_init__(a,b,c,d)):this.__init__(a,b,c)};f.NAME="Dygraph",f.VERSION="1.0.1",f.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},f.toString=function(){return this.__repr__()},f.DEFAULT_ROLL_PERIOD=1,f.DEFAULT_WIDTH=480,f.DEFAULT_HEIGHT=320,f.ANIMATION_STEPS=12,f.ANIMATION_DURATION=200,f.KMB_LABELS=["K","M","B","T","Q"],f.KMG2_BIG_LABELS=["k","M","G","T","P","E","Z","Y"],f.KMG2_SMALL_LABELS=["m","u","n","p","f","a","z","y"],f.numberValueFormatter=function(a,b,c,d){var e=b("sigFigs");if(null!==e)return f.floatFormat(a,e);var g,h=b("digitsAfterDecimal"),i=b("maxNumberWidth"),j=b("labelsKMB"),k=b("labelsKMG2");if(g=0!==a&&(Math.abs(a)>=Math.pow(10,i)||Math.abs(a)<Math.pow(10,-h))?a.toExponential(h):""+f.round_(a,h),j||k){var l,m=[],n=[];j&&(l=1e3,m=f.KMB_LABELS),k&&(j&&f.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),l=1024,m=f.KMG2_BIG_LABELS,n=f.KMG2_SMALL_LABELS);for(var o=Math.abs(a),p=f.pow(l,m.length),q=m.length-1;q>=0;q--,p/=l)if(o>=p){g=f.round_(a/p,h)+m[q];break}if(k){var r=String(a.toExponential()).split("e-");2===r.length&&r[1]>=3&&r[1]<=24&&(g=r[1]%3>0?f.round_(r[0]/f.pow(10,r[1]%3),h):Number(r[0]).toFixed(2),g+=n[Math.floor(r[1]/3)-1])}}return g},f.numberAxisLabelFormatter=function(a,b,c,d){return f.numberValueFormatter(a,c,d)},f.dateString_=function(a){var b=f.zeropad,c=new Date(a),d=""+c.getFullYear(),e=b(c.getMonth()+1),g=b(c.getDate()),h="",i=3600*c.getHours()+60*c.getMinutes()+c.getSeconds();return i&&(h=" "+f.hmsString_(a)),d+"/"+e+"/"+g+h},f.dateAxisFormatter=function(a,b){if(b>=f.DECADAL)return a.strftime("%Y");if(b>=f.MONTHLY)return a.strftime("%b %y");var c=3600*a.getHours()+60*a.getMinutes()+a.getSeconds()+a.getMilliseconds();return 0===c||b>=f.DAILY?new Date(a.getTime()+36e5).strftime("%d%b"):f.hmsString_(a.getTime());
},f.Plotters=e._Plotters,f.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,rightGap:5,showRoller:!1,xValueParser:f.dateParser,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,avoidMinZero:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:!0,drawYAxis:!0,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelWidth:50,drawYGrid:!0,drawXGrid:!0,gridLineColor:"rgb(128,128,128)",interactionModel:null,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillColor:"#A7B1C4",plotter:[f.Plotters.fillPlotter,f.Plotters.errorPlotter,f.Plotters.linePlotter],plugins:[],axes:{x:{pixelsPerLabel:60,axisLabelFormatter:f.dateAxisFormatter,valueFormatter:f.dateString_,drawGrid:!0,independentTicks:!0,ticker:null},y:{pixelsPerLabel:30,valueFormatter:f.numberValueFormatter,axisLabelFormatter:f.numberAxisLabelFormatter,drawGrid:!0,independentTicks:!0,ticker:null},y2:{pixelsPerLabel:30,valueFormatter:f.numberValueFormatter,axisLabelFormatter:f.numberAxisLabelFormatter,drawGrid:!1,independentTicks:!1,ticker:null}}},f.HORIZONTAL=1,f.VERTICAL=2,f.PLUGINS=[],f.addedAnnotationCSS=!1,f.prototype.__old_init__=function(a,b,c,d){if(null!==c){for(var e=["Date"],g=0;g<c.length;g++)e.push(c[g]);f.update(d,{labels:e})}this.__init__(a,b,d)},f.prototype.__init__=function(a,b,d){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&"undefined"!=typeof G_vmlCanvasManager&&"complete"!=document.readyState){var e=this;return void setTimeout(function(){e.__init__(a,b,d)},100)}if((null===d||void 0===d)&&(d={}),d=f.mapLegacyOptions_(d),"string"==typeof a&&(a=document.getElementById(a)),!a)return void f.error("Constructing dygraph with a non-existent div!");this.isUsingExcanvas_="undefined"!=typeof G_vmlCanvasManager,this.maindiv_=a,this.file_=b,this.rollPeriod_=d.rollPeriod||f.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=d.fractions||!1,this.dateWindow_=d.dateWindow||null,this.annotations_=[],this.zoomed_x_=!1,this.zoomed_y_=!1,a.innerHTML="",""===a.style.width&&d.width&&(a.style.width=d.width+"px"),""===a.style.height&&d.height&&(a.style.height=d.height+"px"),""===a.style.height&&0===a.clientHeight&&(a.style.height=f.DEFAULT_HEIGHT+"px",""===a.style.width&&(a.style.width=f.DEFAULT_WIDTH+"px")),this.width_=a.clientWidth||d.width||0,this.height_=a.clientHeight||d.height||0,d.stackedGraph&&(d.fillGraph=!0),this.user_attrs_={},f.update(this.user_attrs_,d),this.attrs_={},f.updateDeep(this.attrs_,f.DEFAULT_ATTRS),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new c(this),this.createInterface_(),this.plugins_=[];for(var g=f.PLUGINS.concat(this.getOption("plugins")),h=0;h<g.length;h++){var i=g[h],j=new i,k={plugin:j,events:{},options:{},pluginOptions:{}},l=j.activate(this);for(var m in l)k.events[m]=l[m];this.plugins_.push(k)}for(var h=0;h<this.plugins_.length;h++){var n=this.plugins_[h];for(var m in n.events)if(n.events.hasOwnProperty(m)){var o=n.events[m],p=[n.plugin,o];m in this.eventListeners_?this.eventListeners_[m].push(p):this.eventListeners_[m]=[p]}}this.createDragInterface_(),this.start_()},f.prototype.cascadeEvents_=function(a,b){if(!(a in this.eventListeners_))return!0;var c={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!c.cancelable)throw"Cannot call preventDefault on non-cancelable event.";c.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){c.propagationStopped=!0}};f.update(c,b);var d=this.eventListeners_[a];if(d)for(var e=d.length-1;e>=0;e--){var g=d[e][0],h=d[e][1];if(h.call(g,c),c.propagationStopped)break}return c.defaultPrevented},f.prototype.isZoomed=function(a){if(null===a||void 0===a)return this.zoomed_x_||this.zoomed_y_;if("x"===a)return this.zoomed_x_;if("y"===a)return this.zoomed_y_;throw"axis parameter is ["+a+"] must be null, 'x' or 'y'."},f.prototype.toString=function(){var a=this.maindiv_,b=a&&a.id?a.id:a;return"[Dygraph "+b+"]"},f.prototype.attr_=function(a,b){return b?this.attributes_.getForSeries(a,b):this.attributes_.get(a)},f.prototype.getOption=function(a,b){return this.attr_(a,b)},f.prototype.getOptionForAxis=function(a,b){return this.attributes_.getForAxis(a,b)},f.prototype.optionsViewForAxis_=function(a){var b=this;return function(c){var d=b.user_attrs_.axes;return d&&d[a]&&d[a].hasOwnProperty(c)?d[a][c]:"undefined"!=typeof b.user_attrs_[c]?b.user_attrs_[c]:(d=b.attrs_.axes,d&&d[a]&&d[a].hasOwnProperty(c)?d[a][c]:"y"==a&&b.axes_[0].hasOwnProperty(c)?b.axes_[0][c]:"y2"==a&&b.axes_[1].hasOwnProperty(c)?b.axes_[1][c]:b.attr_(c))}},f.prototype.rollPeriod=function(){return this.rollPeriod_},f.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},f.prototype.xAxisExtremes=function(){var a=this.attr_("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-a,1+a];var b=this.rawData_[0][0],c=this.rawData_[this.rawData_.length-1][0];if(a){var d=c-b;b-=d*a,c+=d*a}return[b,c]},f.prototype.yAxisRange=function(a){if("undefined"==typeof a&&(a=0),0>a||a>=this.axes_.length)return null;var b=this.axes_[a];return[b.computedValueRange[0],b.computedValueRange[1]]},f.prototype.yAxisRanges=function(){for(var a=[],b=0;b<this.axes_.length;b++)a.push(this.yAxisRange(b));return a},f.prototype.toDomCoords=function(a,b,c){return[this.toDomXCoord(a),this.toDomYCoord(b,c)]},f.prototype.toDomXCoord=function(a){if(null===a)return null;var b=this.plotter_.area,c=this.xAxisRange();return b.x+(a-c[0])/(c[1]-c[0])*b.w},f.prototype.toDomYCoord=function(a,b){var c=this.toPercentYCoord(a,b);if(null===c)return null;var d=this.plotter_.area;return d.y+c*d.h},f.prototype.toDataCoords=function(a,b,c){return[this.toDataXCoord(a),this.toDataYCoord(b,c)]},f.prototype.toDataXCoord=function(a){if(null===a)return null;var b=this.plotter_.area,c=this.xAxisRange();return c[0]+(a-b.x)/b.w*(c[1]-c[0])},f.prototype.toDataYCoord=function(a,b){if(null===a)return null;var c=this.plotter_.area,d=this.yAxisRange(b);if("undefined"==typeof b&&(b=0),this.attributes_.getForAxis("logscale",b)){var e=(a-c.y)/c.h,g=f.log10(d[1]),h=g-e*(g-f.log10(d[0])),i=Math.pow(f.LOG_SCALE,h);return i}return d[0]+(c.y+c.h-a)/c.h*(d[1]-d[0])},f.prototype.toPercentYCoord=function(a,b){if(null===a)return null;"undefined"==typeof b&&(b=0);var c,d=this.yAxisRange(b),e=this.attributes_.getForAxis("logscale",b);if(e){var g=f.log10(d[1]);c=(g-f.log10(a))/(g-f.log10(d[0]))}else c=(d[1]-a)/(d[1]-d[0]);return c},f.prototype.toPercentXCoord=function(a){if(null===a)return null;var b=this.xAxisRange();return(a-b[0])/(b[1]-b[0])},f.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},f.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},f.prototype.getValue=function(a,b){return 0>a||a>this.rawData_.length?null:0>b||b>this.rawData_[a].length?null:this.rawData_[a][b]},f.prototype.createInterface_=function(){var a=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",a.appendChild(this.graphDiv),this.canvas_=f.createCanvas(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.resizeElements_(),this.canvas_ctx_=f.getContext(this.canvas_),this.hidden_ctx_=f.getContext(this.hidden_),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new d(this);var b=this;this.mouseMoveHandler_=function(a){b.mouseMove_(a)},this.mouseOutHandler_=function(a){var c=a.target||a.fromElement,d=a.relatedTarget||a.toElement;f.isNodeContainedBy(c,b.graphDiv)&&!f.isNodeContainedBy(d,b.graphDiv)&&b.mouseOut_(a)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(a){b.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},f.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px",this.canvas_.width=this.width_,this.canvas_.height=this.height_,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",this.hidden_.width=this.width_,this.hidden_.height=this.height_,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px"},f.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();var a=function(b){for(;b.hasChildNodes();)a(b.firstChild),b.removeChild(b.firstChild)};this.removeTrackedEvents_(),f.removeEvent(window,"mouseout",this.mouseOutHandler_),f.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),f.removeEvent(window,"resize",this.resizeHandler_),this.resizeHandler_=null,a(this.maindiv_);var b=function(a){for(var b in a)"object"==typeof a[b]&&(a[b]=null)};b(this.layout_),b(this.plotter_),b(this)},f.prototype.createPlotKitCanvas_=function(a){var b=f.createCanvas();return b.style.position="absolute",b.style.top=a.style.top,b.style.left=a.style.left,b.width=this.width_,b.height=this.height_,b.style.width=this.width_+"px",b.style.height=this.height_+"px",b},f.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var a=document.createElement("div");return a.style.position="absolute",a.style.backgroundColor="white",a.style.filter="alpha(opacity=0)",a.style.width=this.width_+"px",a.style.height=this.height_+"px",this.graphDiv.appendChild(a),a}return this.canvas_},f.prototype.setColors_=function(){var a=this.getLabels(),b=a.length-1;this.colors_=[],this.colorsMap_={};var c,d=this.attr_("colors");if(d){for(c=0;b>c;c++)if(this.visibility()[c]){var e=d[c%d.length];this.colors_.push(e),this.colorsMap_[a[1+c]]=e}}else{var g=this.attr_("colorSaturation")||1,h=this.attr_("colorValue")||.5,i=Math.ceil(b/2);for(c=1;b>=c;c++)if(this.visibility()[c-1]){var j=c%2?Math.ceil(c/2):i+c/2,k=1*j/(1+b),e=f.hsvToRGB(k,g,h);this.colors_.push(e),this.colorsMap_[a[c]]=e}}},f.prototype.getColors=function(){return this.colors_},f.prototype.getPropertiesForSeries=function(a){for(var b=-1,c=this.getLabels(),d=1;d<c.length;d++)if(c[d]==a){b=d;break}return-1==b?null:{name:a,column:b,visible:this.visibility()[b-1],color:this.colorsMap_[a],axis:1+this.attributes_.axisForSeries(a)}},f.prototype.createRollInterface_=function(){this.roller_||(this.roller_=document.createElement("input"),this.roller_.type="text",this.roller_.style.display="none",this.graphDiv.appendChild(this.roller_));var a=this.attr_("showRoller")?"block":"none",b=this.plotter_.area,c={position:"absolute",zIndex:10,top:b.y+b.h-25+"px",left:b.x+1+"px",display:a};this.roller_.size="2",this.roller_.value=this.rollPeriod_;for(var d in c)c.hasOwnProperty(d)&&(this.roller_.style[d]=c[d]);var e=this;this.roller_.onchange=function(){e.adjustRoll(e.roller_.value)}},f.prototype.dragGetX_=function(a,b){return f.pageX(a)-b.px},f.prototype.dragGetY_=function(a,b){return f.pageY(a)-b.py},f.prototype.createDragInterface_=function(){var a={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new f.IFrameTarp,initializeMouseDown:function(a,b,c){a.preventDefault?a.preventDefault():(a.returnValue=!1,a.cancelBubble=!0),c.px=f.findPosX(b.canvas_),c.py=f.findPosY(b.canvas_),c.dragStartX=b.dragGetX_(a,c),c.dragStartY=b.dragGetY_(a,c),c.cancelNextDblclick=!1,c.tarp.cover()}},b=this.attr_("interactionModel"),c=this,d=function(b){return function(d){b(d,c,a)}};for(var e in b)b.hasOwnProperty(e)&&this.addAndTrackEvent(this.mouseEventElement_,e,d(b[e]));var g=function(b){if((a.isZooming||a.isPanning)&&(a.isZooming=!1,a.dragStartX=null,a.dragStartY=null),a.isPanning){a.isPanning=!1,a.draggingDate=null,a.dateRange=null;for(var d=0;d<c.axes_.length;d++)delete c.axes_[d].draggingValue,delete c.axes_[d].dragValueRange}a.tarp.uncover()};this.addAndTrackEvent(document,"mouseup",g)},f.prototype.drawZoomRect_=function(a,b,c,d,e,g,h,i){var j=this.canvas_ctx_;g==f.HORIZONTAL?j.clearRect(Math.min(b,h),this.layout_.getPlotArea().y,Math.abs(b-h),this.layout_.getPlotArea().h):g==f.VERTICAL&&j.clearRect(this.layout_.getPlotArea().x,Math.min(d,i),this.layout_.getPlotArea().w,Math.abs(d-i)),a==f.HORIZONTAL?c&&b&&(j.fillStyle="rgba(128,128,128,0.33)",j.fillRect(Math.min(b,c),this.layout_.getPlotArea().y,Math.abs(c-b),this.layout_.getPlotArea().h)):a==f.VERTICAL&&e&&d&&(j.fillStyle="rgba(128,128,128,0.33)",j.fillRect(this.layout_.getPlotArea().x,Math.min(d,e),this.layout_.getPlotArea().w,Math.abs(e-d))),this.isUsingExcanvas_&&(this.currentZoomRectArgs_=[a,b,c,d,e,0,0,0])},f.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height)},f.prototype.doZoomX_=function(a,b){this.currentZoomRectArgs_=null;var c=this.toDataXCoord(a),d=this.toDataXCoord(b);this.doZoomXDates_(c,d)},f.zoomAnimationFunction=function(a,b){var c=1.5;return(1-Math.pow(c,-a))/(1-Math.pow(c,-b))},f.prototype.doZoomXDates_=function(a,b){var c=this.xAxisRange(),d=[a,b];this.zoomed_x_=!0;var e=this;this.doAnimatedZoom(c,d,null,null,function(){e.attr_("zoomCallback")&&e.attr_("zoomCallback")(a,b,e.yAxisRanges())})},f.prototype.doZoomY_=function(a,b){this.currentZoomRectArgs_=null;for(var c=this.yAxisRanges(),d=[],e=0;e<this.axes_.length;e++){var f=this.toDataYCoord(a,e),g=this.toDataYCoord(b,e);d.push([g,f])}this.zoomed_y_=!0;var h=this;this.doAnimatedZoom(null,null,c,d,function(){if(h.attr_("zoomCallback")){var a=h.xAxisRange();h.attr_("zoomCallback")(a[0],a[1],h.yAxisRanges())}})},f.prototype.resetZoom=function(){var a=!1,b=!1,c=!1;null!==this.dateWindow_&&(a=!0,b=!0);for(var d=0;d<this.axes_.length;d++)"undefined"!=typeof this.axes_[d].valueWindow&&null!==this.axes_[d].valueWindow&&(a=!0,c=!0);if(this.clearSelection(),a){this.zoomed_x_=!1,this.zoomed_y_=!1;var e=this.rawData_[0][0],f=this.rawData_[this.rawData_.length-1][0];if(!this.attr_("animatedZooms")){for(this.dateWindow_=null,d=0;d<this.axes_.length;d++)null!==this.axes_[d].valueWindow&&delete this.axes_[d].valueWindow;return this.drawGraph_(),void(this.attr_("zoomCallback")&&this.attr_("zoomCallback")(e,f,this.yAxisRanges()))}var g=null,h=null,i=null,j=null;if(b&&(g=this.xAxisRange(),h=[e,f]),c){i=this.yAxisRanges();var k=this.gatherDatasets_(this.rolledSeries_,null),l=k.extremes;for(this.computeYAxisRanges_(l),j=[],d=0;d<this.axes_.length;d++){var m=this.axes_[d];j.push(null!==m.valueRange&&void 0!==m.valueRange?m.valueRange:m.extremeRange)}}var n=this;this.doAnimatedZoom(g,h,i,j,function(){n.dateWindow_=null;for(var a=0;a<n.axes_.length;a++)null!==n.axes_[a].valueWindow&&delete n.axes_[a].valueWindow;n.attr_("zoomCallback")&&n.attr_("zoomCallback")(e,f,n.yAxisRanges())})}},f.prototype.doAnimatedZoom=function(a,b,c,d,e){var g,h,i=this.attr_("animatedZooms")?f.ANIMATION_STEPS:1,j=[],k=[];if(null!==a&&null!==b)for(g=1;i>=g;g++)h=f.zoomAnimationFunction(g,i),j[g-1]=[a[0]*(1-h)+h*b[0],a[1]*(1-h)+h*b[1]];if(null!==c&&null!==d)for(g=1;i>=g;g++){h=f.zoomAnimationFunction(g,i);for(var l=[],m=0;m<this.axes_.length;m++)l.push([c[m][0]*(1-h)+h*d[m][0],c[m][1]*(1-h)+h*d[m][1]]);k[g-1]=l}var n=this;f.repeatAndCleanup(function(a){if(k.length)for(var b=0;b<n.axes_.length;b++){var c=k[a][b];n.axes_[b].valueWindow=[c[0],c[1]]}j.length&&(n.dateWindow_=j[a]),n.drawGraph_()},i,f.ANIMATION_DURATION/i,e)},f.prototype.getArea=function(){return this.plotter_.area},f.prototype.eventToDomCoords=function(a){if(a.offsetX&&a.offsetY)return[a.offsetX,a.offsetY];var b=f.pageX(a)-f.findPosX(this.mouseEventElement_),c=f.pageY(a)-f.findPosY(this.mouseEventElement_);return[b,c]},f.prototype.findClosestRow=function(a){for(var b=1/0,c=-1,d=this.layout_.points,e=0;e<d.length;e++)for(var g=d[e],h=g.length,i=0;h>i;i++){var j=g[i];if(f.isValidPoint(j,!0)){var k=Math.abs(j.canvasx-a);b>k&&(b=k,c=j.idx)}}return c},f.prototype.findClosestPoint=function(a,b){for(var c,d,e,g,h,i,j,k=1/0,l=this.layout_.points.length-1;l>=0;--l)for(var m=this.layout_.points[l],n=0;n<m.length;++n)g=m[n],f.isValidPoint(g)&&(d=g.canvasx-a,e=g.canvasy-b,c=d*d+e*e,k>c&&(k=c,h=g,i=l,j=g.idx));var o=this.layout_.setNames[i];return{row:j,seriesName:o,point:h}},f.prototype.findStackedPoint=function(a,b){for(var c,d,e=this.findClosestRow(a),g=0;g<this.layout_.points.length;++g){var h=this.getLeftBoundary_(g),i=e-h,j=this.layout_.points[g];if(!(i>=j.length)){var k=j[i];if(f.isValidPoint(k)){var l=k.canvasy;if(a>k.canvasx&&i+1<j.length){var m=j[i+1];if(f.isValidPoint(m)){var n=m.canvasx-k.canvasx;if(n>0){var o=(a-k.canvasx)/n;l+=o*(m.canvasy-k.canvasy)}}}else if(a<k.canvasx&&i>0){var p=j[i-1];if(f.isValidPoint(p)){var n=k.canvasx-p.canvasx;if(n>0){var o=(k.canvasx-a)/n;l+=o*(p.canvasy-k.canvasy)}}}(0===g||b>l)&&(c=k,d=g)}}}var q=this.layout_.setNames[d];return{row:e,seriesName:q,point:c}},f.prototype.mouseMove_=function(a){var b=this.layout_.points;if(void 0!==b&&null!==b){var c=this.eventToDomCoords(a),d=c[0],e=c[1],f=this.attr_("highlightSeriesOpts"),g=!1;if(f&&!this.isSeriesLocked()){var h;h=this.attr_("stackedGraph")?this.findStackedPoint(d,e):this.findClosestPoint(d,e),g=this.setSelection(h.row,h.seriesName)}else{var i=this.findClosestRow(d);g=this.setSelection(i)}var j=this.attr_("highlightCallback");j&&g&&j(a,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},f.prototype.getLeftBoundary_=function(a){if(this.boundaryIds_[a])return this.boundaryIds_[a][0];for(var b=0;b<this.boundaryIds_.length;b++)if(void 0!==this.boundaryIds_[b])return this.boundaryIds_[b][0];return 0},f.prototype.animateSelection_=function(a){var b=10,c=30;void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var d=this.fadeLevel,e=0>a?d:b-d;if(0>=e)return void(this.fadeLevel&&this.updateSelection_(1));var g=++this.animateId,h=this;f.repeatAndCleanup(function(c){h.animateId==g&&(h.fadeLevel+=a,0===h.fadeLevel?h.clearSelection():h.updateSelection_(h.fadeLevel/b))},e,c,function(){})},f.prototype.updateSelection_=function(a){this.cascadeEvents_("select",{selectedX:this.lastx_,selectedPoints:this.selPoints_});var b,c=this.canvas_ctx_;if(this.attr_("highlightSeriesOpts")){c.clearRect(0,0,this.width_,this.height_);var d=1-this.attr_("highlightSeriesBackgroundAlpha");if(d){var e=!0;if(e){if(void 0===a)return void this.animateSelection_(1);d*=a}c.fillStyle="rgba(255,255,255,"+d+")",c.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,c)}else if(this.previousVerticalX_>=0){var g=0,h=this.attr_("labels");for(b=1;b<h.length;b++){var i=this.attr_("highlightCircleSize",h[b]);i>g&&(g=i)}var j=this.previousVerticalX_;c.clearRect(j-g-1,0,2*g+2,this.height_)}if(this.isUsingExcanvas_&&this.currentZoomRectArgs_&&f.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_),this.selPoints_.length>0){var k=this.selPoints_[0].canvasx;for(c.save(),b=0;b<this.selPoints_.length;b++){var l=this.selPoints_[b];if(f.isOK(l.canvasy)){var m=this.attr_("highlightCircleSize",l.name),n=this.attr_("drawHighlightPointCallback",l.name),o=this.plotter_.colors[l.name];n||(n=f.Circles.DEFAULT),c.lineWidth=this.attr_("strokeWidth",l.name),c.strokeStyle=o,c.fillStyle=o,n(this.g,l.name,c,k,l.canvasy,o,m,l.idx)}}c.restore(),this.previousVerticalX_=k}},f.prototype.setSelection=function(a,b,c){this.selPoints_=[];var d=!1;if(a!==!1&&a>=0){a!=this.lastRow_&&(d=!0),this.lastRow_=a;for(var e=0;e<this.layout_.points.length;++e){var f=this.layout_.points[e],g=a-this.getLeftBoundary_(e);if(g<f.length){var h=f[g];null!==h.yval&&this.selPoints_.push(h)}}}else this.lastRow_>=0&&(d=!0),this.lastRow_=-1;return this.selPoints_.length?this.lastx_=this.selPoints_[0].xval:this.lastx_=-1,void 0!==b&&(this.highlightSet_!==b&&(d=!0),this.highlightSet_=b),void 0!==c&&(this.lockedSet_=c),d&&this.updateSelection_(void 0),d},f.prototype.mouseOut_=function(a){this.attr_("unhighlightCallback")&&this.attr_("unhighlightCallback")(a),this.attr_("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},f.prototype.clearSelection=function(){return this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?void this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,void(this.highlightSet_=null))},f.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var a=0;a<this.layout_.points.length;a++)for(var b=this.layout_.points[a],c=0;c<b.length;c++)if(b[c].x==this.selPoints_[0].x)return b[c].idx;return-1},f.prototype.getHighlightSeries=function(){return this.highlightSet_},f.prototype.isSeriesLocked=function(){return this.lockedSet_},f.prototype.loadedEvent_=function(a){this.rawData_=this.parseCSV_(a),this.predraw_()},f.prototype.addXTicks_=function(){var a;a=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var b=this.optionsViewForAxis_("x"),c=b("ticker")(a[0],a[1],this.width_,b,this);this.layout_.setXTicks(c)},f.prototype.extremeValues_=function(a){var b,c,d=null,e=null,f=this.attr_("errorBars")||this.attr_("customBars");if(f){for(b=0;b<a.length;b++)if(c=a[b][1][0],null!==c&&!isNaN(c)){var g=c-a[b][1][1],h=c+a[b][1][2];g>c&&(g=c),c>h&&(h=c),(null===e||h>e)&&(e=h),(null===d||d>g)&&(d=g)}}else for(b=0;b<a.length;b++)c=a[b][1],null===c||isNaN(c)||((null===e||c>e)&&(e=c),(null===d||d>c)&&(d=c));return[d,e]},f.prototype.predraw_=function(){var a=new Date;this.layout_.computePlotArea(),this.computeYAxes_(),this.plotter_&&(this.cascadeEvents_("clearChart"),this.plotter_.clear()),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new e(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var b=1;b<this.numColumns();b++){var c=this.attr_("logscale"),d=this.extractSeries_(this.rawData_,b,c);d=this.rollingAverage(d,this.rollPeriod_),this.rolledSeries_.push(d)}this.drawGraph_();var f=new Date;this.drawingTimeMs_=f-a},f.PointType=void 0,f.seriesToPoints_=function(a,b,c,e){for(var f=[],g=0;g<a.length;++g){var h=a[g],i=b?h[1][0]:h[1],j=null===i?null:d.parseFloat_(i),k={x:NaN,y:NaN,xval:d.parseFloat_(h[0]),yval:j,name:c,idx:g+e};b&&(k.y_top=NaN,k.y_bottom=NaN,k.yval_minus=d.parseFloat_(h[1][1]),k.yval_plus=d.parseFloat_(h[1][2])),f.push(k)}return f},f.stackPoints_=function(a,b,c,d){for(var e=null,f=null,g=null,h=-1,i=function(b){if(!(h>=b))for(var c=b;c<a.length;++c)if(g=null,!isNaN(a[c].yval)&&null!==a[c].yval){h=c,g=a[c];break}},j=0;j<a.length;++j){var k=a[j],l=k.xval;void 0===b[l]&&(b[l]=0);var m=k.yval;isNaN(m)||null===m?(i(j),m=f&&g&&"none"!=d?f.yval+(g.yval-f.yval)*((l-f.xval)/(g.xval-f.xval)):f&&"all"==d?f.yval:g&&"all"==d?g.yval:0):f=k;var n=b[l];e!=l&&(n+=m,b[l]=n),e=l,k.yval_stacked=n,n>c[1]&&(c[1]=n),n<c[0]&&(c[0]=n)}},f.prototype.gatherDatasets_=function(a,b){var c,d,e,g=[],h=[],i=[],j={},k=this.attr_("errorBars"),l=this.attr_("customBars"),m=k||l,n=function(a){return m?l?null===a[1][1]:k?null===a[1][0]:!1:null===a[1]},o=a.length-1;for(c=o;c>=1;c--)if(this.visibility()[c-1]){if(b){e=a[c];var p=b[0],q=b[1],r=null,s=null;for(d=0;d<e.length;d++)e[d][0]>=p&&null===r&&(r=d),e[d][0]<=q&&(s=d);null===r&&(r=0);for(var t=r,u=!0;u&&t>0;)t--,u=n(e[t]);null===s&&(s=e.length-1);var v=s;for(u=!0;u&&v<e.length-1;)v++,u=n(e[v]);t!==r&&(r=t),v!==s&&(s=v),g[c-1]=[r,s],e=e.slice(r,s+1)}else e=a[c],g[c-1]=[0,e.length-1];var w=this.attr_("labels")[c],x=this.extremeValues_(e),y=f.seriesToPoints_(e,m,w,g[c-1][0]);this.attr_("stackedGraph")&&f.stackPoints_(y,i,x,this.attr_("stackedGraphNaNFill")),j[w]=x,h[c]=y}return{points:h,extremes:j,boundaryIds:g}},f.prototype.drawGraph_=function(){var a=new Date,b=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.attr_("highlightCircleSize");var c=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),d=c.points,e=c.extremes;this.boundaryIds_=c.boundaryIds,this.setIndexByName_={};var g=this.attr_("labels");g.length>0&&(this.setIndexByName_[g[0]]=0);for(var h=0,i=1;i<d.length;i++)this.setIndexByName_[g[i]]=i,this.visibility()[i-1]&&(this.layout_.addDataset(g[i],d[i]),this.datasetIndex_[i]=h++);this.computeYAxisRanges_(e),this.layout_.setYAxes(this.axes_),this.addXTicks_();var j=this.zoomed_x_;if(this.zoomed_x_=j,this.layout_.evaluate(),this.renderGraph_(b),this.attr_("timingName")){var k=new Date;f.info(this.attr_("timingName")+" - drawGraph: "+(k-a)+"ms")}},f.prototype.renderGraph_=function(a){this.cascadeEvents_("clearChart"),this.plotter_.clear(),this.attr_("underlayCallback")&&this.attr_("underlayCallback")(this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var b={canvas:this.hidden_,drawingContext:this.hidden_ctx_};if(this.cascadeEvents_("willDrawChart",b),this.plotter_.render(),this.cascadeEvents_("didDrawChart",b),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height),null!==this.attr_("drawCallback")&&this.attr_("drawCallback")(this,a),a)for(this.readyFired_=!0;this.readyFns_.length>0;){var c=this.readyFns_.pop();c(this)}},f.prototype.computeYAxes_=function(){var a,b,c,d,e;if(void 0!==this.axes_&&this.user_attrs_.hasOwnProperty("valueRange")===!1)for(a=[],c=0;c<this.axes_.length;c++)a.push(this.axes_[c].valueWindow);for(this.axes_=[],b=0;b<this.attributes_.numAxes();b++)d={g:this},f.update(d,this.attributes_.axisOptions(b)),this.axes_[b]=d;if(e=this.attr_("valueRange"),e&&(this.axes_[0].valueRange=e),void 0!==a){var g=Math.min(a.length,this.axes_.length);for(c=0;g>c;c++)this.axes_[c].valueWindow=a[c]}for(b=0;b<this.axes_.length;b++)if(0===b)d=this.optionsViewForAxis_("y"+(b?"2":"")),e=d("valueRange"),e&&(this.axes_[b].valueRange=e);else{var h=this.user_attrs_.axes;h&&h.y2&&(e=h.y2.valueRange,e&&(this.axes_[b].valueRange=e))}},f.prototype.numAxes=function(){return this.attributes_.numAxes()},f.prototype.axisPropertiesForSeries=function(a){return this.axes_[this.attributes_.axisForSeries(a)]},f.prototype.computeYAxisRanges_=function(a){for(var b,c,d,e,f,g=function(a){return isNaN(parseFloat(a))},h=this.attributes_.numAxes(),i=0;h>i;i++){var j=this.axes_[i],k=this.attributes_.getForAxis("logscale",i),l=this.attributes_.getForAxis("includeZero",i),m=this.attributes_.getForAxis("independentTicks",i);if(d=this.attributes_.seriesForAxis(i),b=!0,e=.1,null!==this.attr_("yRangePad")&&(b=!1,e=this.attr_("yRangePad")/this.plotter_.area.h),0===d.length)j.extremeRange=[0,1];else{for(var n,o,p=1/0,q=-(1/0),r=0;r<d.length;r++)a.hasOwnProperty(d[r])&&(n=a[d[r]][0],null!==n&&(p=Math.min(n,p)),o=a[d[r]][1],null!==o&&(q=Math.max(o,q)));l&&!k&&(p>0&&(p=0),0>q&&(q=0)),p==1/0&&(p=0),q==-(1/0)&&(q=1),c=q-p,0===c&&(0!==q?c=Math.abs(q):(q=1,c=1));var s,t;if(k)if(b)s=q+e*c,t=p;else{var u=Math.exp(Math.log(c)*e);s=q*u,t=p/u}else s=q+e*c,t=p-e*c,b&&!this.attr_("avoidMinZero")&&(0>t&&p>=0&&(t=0),s>0&&0>=q&&(s=0));j.extremeRange=[t,s]}if(j.valueWindow)j.computedValueRange=[j.valueWindow[0],j.valueWindow[1]];else if(j.valueRange){var v=g(j.valueRange[0])?j.extremeRange[0]:j.valueRange[0],w=g(j.valueRange[1])?j.extremeRange[1]:j.valueRange[1];if(!b)if(j.logscale){var u=Math.exp(Math.log(c)*e);v*=u,w/=u}else c=w-v,v-=c*e,w+=c*e;j.computedValueRange=[v,w]}else j.computedValueRange=j.extremeRange;if(m){j.independentTicks=m;var x=this.optionsViewForAxis_("y"+(i?"2":"")),y=x("ticker");j.ticks=y(j.computedValueRange[0],j.computedValueRange[1],this.height_,x,this),f||(f=j)}}if(void 0===f)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(var i=0;h>i;i++){var j=this.axes_[i];if(!j.independentTicks){for(var x=this.optionsViewForAxis_("y"+(i?"2":"")),y=x("ticker"),z=f.ticks,A=f.computedValueRange[1]-f.computedValueRange[0],B=j.computedValueRange[1]-j.computedValueRange[0],C=[],D=0;D<z.length;D++){var E=(z[D].v-f.computedValueRange[0])/A,F=j.computedValueRange[0]+E*B;C.push(F)}j.ticks=y(j.computedValueRange[0],j.computedValueRange[1],this.height_,x,this,C)}}},f.prototype.extractSeries_=function(a,b,c){for(var d=[],e=this.attr_("errorBars"),f=this.attr_("customBars"),g=0;g<a.length;g++){var h=a[g][0],i=a[g][b];if(c)if(e||f){for(var j=0;j<i.length;j++)if(i[j]<=0){i=null;break}}else 0>=i&&(i=null);null!==i?d.push([h,i]):d.push([h,e?[null,null]:f?[null,null,null]:i])}return d},f.prototype.rollingAverage=function(a,b){b=Math.min(b,a.length);var c,d,e,f,g,h,i,j,k=[],l=this.attr_("sigma");if(this.fractions_){var m=0,n=0,o=100;for(e=0;e<a.length;e++){m+=a[e][1][0],n+=a[e][1][1],e-b>=0&&(m-=a[e-b][1][0],n-=a[e-b][1][1]);var p=a[e][0],q=n?m/n:0;if(this.attr_("errorBars"))if(this.attr_("wilsonInterval"))if(n){var r=0>q?0:q,s=n,t=l*Math.sqrt(r*(1-r)/s+l*l/(4*s*s)),u=1+l*l/n;c=(r+l*l/(2*n)-t)/u,d=(r+l*l/(2*n)+t)/u,k[e]=[p,[r*o,(r-c)*o,(d-r)*o]]}else k[e]=[p,[0,0,0]];else j=n?l*Math.sqrt(q*(1-q)/n):1,k[e]=[p,[o*q,o*j,o*j]];else k[e]=[p,o*q]}}else if(this.attr_("customBars")){c=0;var v=0;d=0;var w=0;for(e=0;e<a.length;e++){var x=a[e][1];if(g=x[1],k[e]=[a[e][0],[g,g-x[0],x[2]-g]],null===g||isNaN(g)||(c+=x[0],v+=g,d+=x[2],w+=1),e-b>=0){var y=a[e-b];null===y[1][1]||isNaN(y[1][1])||(c-=y[1][0],v-=y[1][1],d-=y[1][2],w-=1)}w?k[e]=[a[e][0],[1*v/w,1*(v-c)/w,1*(d-v)/w]]:k[e]=[a[e][0],[null,null,null]]}}else if(this.attr_("errorBars"))for(e=0;e<a.length;e++){h=0;var z=0;for(i=0,f=Math.max(0,e-b+1);e+1>f;f++)g=a[f][1][0],null===g||isNaN(g)||(i++,h+=a[f][1][0],z+=Math.pow(a[f][1][1],2));if(i)j=Math.sqrt(z)/i,k[e]=[a[e][0],[h/i,l*j,l*j]];else{var A=1==b?a[e][1][0]:null;k[e]=[a[e][0],[A,A,A]]}}else{if(1==b)return a;for(e=0;e<a.length;e++){for(h=0,i=0,f=Math.max(0,e-b+1);e+1>f;f++)g=a[f][1],null===g||isNaN(g)||(i++,h+=a[f][1]);i?k[e]=[a[e][0],h/i]:k[e]=[a[e][0],null]}}return k},f.prototype.detectTypeFromString_=function(a){var b=!1,c=a.indexOf("-");c>0&&"e"!=a[c-1]&&"E"!=a[c-1]||a.indexOf("/")>=0||isNaN(parseFloat(a))?b=!0:8==a.length&&a>"19700101"&&"20371231">a&&(b=!0),this.setXAxisOptions_(b)},f.prototype.setXAxisOptions_=function(a){a?(this.attrs_.xValueParser=f.dateParser,this.attrs_.axes.x.valueFormatter=f.dateString_,this.attrs_.axes.x.ticker=f.dateTicker,this.attrs_.axes.x.axisLabelFormatter=f.dateAxisFormatter):(this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=f.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},f.prototype.parseFloat_=function(a,b,c){var d=parseFloat(a);if(!isNaN(d))return d;if(/^ *$/.test(a))return null;if(/^ *nan *$/i.test(a))return NaN;var e="Unable to parse '"+a+"' as a number";return null!==c&&null!==b&&(e+=" on line "+(1+b)+" ('"+c+"') of CSV."),this.error(e),null},f.prototype.parseCSV_=function(a){var b,c,d=[],e=f.detectLineDelimiter(a),g=a.split(e||"\n"),h=this.attr_("delimiter");-1==g[0].indexOf(h)&&g[0].indexOf("	")>=0&&(h="	");var i=0;"labels"in this.user_attrs_||(i=1,this.attrs_.labels=g[0].split(h),this.attributes_.reparseSeries());
for(var j,k=0,l=!1,m=this.attr_("labels").length,n=!1,o=i;o<g.length;o++){var p=g[o];if(k=o,0!==p.length&&"#"!=p[0]){var q=p.split(h);if(!(q.length<2)){var r=[];if(l||(this.detectTypeFromString_(q[0]),j=this.attr_("xValueParser"),l=!0),r[0]=j(q[0],this),this.fractions_)for(c=1;c<q.length;c++)b=q[c].split("/"),2!=b.length?(this.error('Expected fractional "num/den" values in CSV data but found a value \''+q[c]+"' on line "+(1+o)+" ('"+p+"') which is not of this form."),r[c]=[0,0]):r[c]=[this.parseFloat_(b[0],o,p),this.parseFloat_(b[1],o,p)];else if(this.attr_("errorBars"))for(q.length%2!=1&&this.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+o)+" has an odd number of values ("+(q.length-1)+"): '"+p+"'"),c=1;c<q.length;c+=2)r[(c+1)/2]=[this.parseFloat_(q[c],o,p),this.parseFloat_(q[c+1],o,p)];else if(this.attr_("customBars"))for(c=1;c<q.length;c++){var s=q[c];/^ *$/.test(s)?r[c]=[null,null,null]:(b=s.split(";"),3==b.length?r[c]=[this.parseFloat_(b[0],o,p),this.parseFloat_(b[1],o,p),this.parseFloat_(b[2],o,p)]:this.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+s+'" on line '+(1+o)))}else for(c=1;c<q.length;c++)r[c]=this.parseFloat_(q[c],o,p);if(d.length>0&&r[0]<d[d.length-1][0]&&(n=!0),r.length!=m&&this.error("Number of columns in line "+o+" ("+r.length+") does not agree with number of labels ("+m+") "+p),0===o&&this.attr_("labels")){var t=!0;for(c=0;t&&c<r.length;c++)r[c]&&(t=!1);if(t){this.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+p+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}d.push(r)}}}return n&&(this.warn("CSV is out of order; order it correctly to speed loading."),d.sort(function(a,b){return a[0]-b[0]})),d},f.prototype.parseArray_=function(a){if(0===a.length)return this.error("Can't plot empty data set"),null;if(0===a[0].length)return this.error("Data set cannot contain an empty row"),null;var b;if(null===this.attr_("labels")){for(this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],b=1;b<a[0].length;b++)this.attrs_.labels.push("Y"+b);this.attributes_.reparseSeries()}else{var c=this.attr_("labels");if(c.length!=a[0].length)return this.error("Mismatch between number of labels ("+c+") and number of columns in array ("+a[0].length+")"),null}if(f.isDateLike(a[0][0])){this.attrs_.axes.x.valueFormatter=f.dateString_,this.attrs_.axes.x.ticker=f.dateTicker,this.attrs_.axes.x.axisLabelFormatter=f.dateAxisFormatter;var d=f.clone(a);for(b=0;b<a.length;b++){if(0===d[b].length)return this.error("Row "+(1+b)+" of data is empty"),null;if(null===d[b][0]||"function"!=typeof d[b][0].getTime||isNaN(d[b][0].getTime()))return this.error("x value in row "+(1+b)+" is not a Date"),null;d[b][0]=d[b][0].getTime()}return d}return this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=f.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=f.numberAxisLabelFormatter,a},f.prototype.parseDataTable_=function(a){var b=function(a){var b=String.fromCharCode(65+a%26);for(a=Math.floor(a/26);a>0;)b=String.fromCharCode(65+(a-1)%26)+b.toLowerCase(),a=Math.floor((a-1)/26);return b},c=a.getNumberOfColumns(),d=a.getNumberOfRows(),e=a.getColumnType(0);if("date"==e||"datetime"==e)this.attrs_.xValueParser=f.dateParser,this.attrs_.axes.x.valueFormatter=f.dateString_,this.attrs_.axes.x.ticker=f.dateTicker,this.attrs_.axes.x.axisLabelFormatter=f.dateAxisFormatter;else{if("number"!=e)return this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+e+"')"),null;this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=f.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var g,h,i=[],j={},k=!1;for(g=1;c>g;g++){var l=a.getColumnType(g);if("number"==l)i.push(g);else if("string"==l&&this.attr_("displayAnnotations")){var m=i[i.length-1];j.hasOwnProperty(m)?j[m].push(g):j[m]=[g],k=!0}else this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}var n=[a.getColumnLabel(0)];for(g=0;g<i.length;g++)n.push(a.getColumnLabel(i[g])),this.attr_("errorBars")&&(g+=1);this.attrs_.labels=n,c=n.length;var o=[],p=!1,q=[];for(g=0;d>g;g++){var r=[];if("undefined"!=typeof a.getValue(g,0)&&null!==a.getValue(g,0)){if("date"==e||"datetime"==e?r.push(a.getValue(g,0).getTime()):r.push(a.getValue(g,0)),this.attr_("errorBars"))for(h=0;c-1>h;h++)r.push([a.getValue(g,1+2*h),a.getValue(g,2+2*h)]);else{for(h=0;h<i.length;h++){var s=i[h];if(r.push(a.getValue(g,s)),k&&j.hasOwnProperty(s)&&null!==a.getValue(g,j[s][0])){var t={};t.series=a.getColumnLabel(s),t.xval=r[0],t.shortText=b(q.length),t.text="";for(var u=0;u<j[s].length;u++)u&&(t.text+="\n"),t.text+=a.getValue(g,j[s][u]);q.push(t)}}for(h=0;h<r.length;h++)isFinite(r[h])||(r[h]=null)}o.length>0&&r[0]<o[o.length-1][0]&&(p=!0),o.push(r)}else this.warn("Ignoring row "+g+" of DataTable because of undefined or null first column.")}p&&(this.warn("DataTable is out of order; order it correctly to speed loading."),o.sort(function(a,b){return a[0]-b[0]})),this.rawData_=o,q.length>0&&this.setAnnotations(q,!0),this.attributes_.reparseSeries()},f.prototype.start_=function(){var a=this.file_;if("function"==typeof a&&(a=a()),f.isArrayLike(a))this.rawData_=this.parseArray_(a),this.predraw_();else if("object"==typeof a&&"function"==typeof a.getColumnRange)this.parseDataTable_(a),this.predraw_();else if("string"==typeof a){var b=f.detectLineDelimiter(a);if(b)this.loadedEvent_(a);else{var c;c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var d=this;c.onreadystatechange=function(){4==c.readyState&&(200===c.status||0===c.status)&&d.loadedEvent_(c.responseText)},c.open("GET",a,!0),c.send(null)}}else this.error("Unknown data format: "+typeof a)},f.prototype.updateOptions=function(a,b){"undefined"==typeof b&&(b=!1);var c=a.file,d=f.mapLegacyOptions_(a);"rollPeriod"in d&&(this.rollPeriod_=d.rollPeriod),"dateWindow"in d&&(this.dateWindow_=d.dateWindow,"isZoomedIgnoreProgrammaticZoom"in d||(this.zoomed_x_=null!==d.dateWindow)),"valueRange"in d&&!("isZoomedIgnoreProgrammaticZoom"in d)&&(this.zoomed_y_=null!==d.valueRange);var e=f.isPixelChangingOptionList(this.attr_("labels"),d);f.updateDeep(this.user_attrs_,d),this.attributes_.reparseSeries(),c?(this.file_=c,b||this.start_()):b||(e?this.predraw_():this.renderGraph_(!1))},f.mapLegacyOptions_=function(a){var b={};for(var c in a)"file"!=c&&a.hasOwnProperty(c)&&(b[c]=a[c]);var d=function(a,c,d){b.axes||(b.axes={}),b.axes[a]||(b.axes[a]={}),b.axes[a][c]=d},e=function(c,e,g){"undefined"!=typeof a[c]&&(f.warn("Option "+c+" is deprecated. Use the "+g+" option for the "+e+" axis instead. (e.g. { axes : { "+e+" : { "+g+" : ... } } } (see http://dygraphs.com/per-axis.html for more information."),d(e,g,a[c]),delete b[c])};return e("xValueFormatter","x","valueFormatter"),e("pixelsPerXLabel","x","pixelsPerLabel"),e("xAxisLabelFormatter","x","axisLabelFormatter"),e("xTicker","x","ticker"),e("yValueFormatter","y","valueFormatter"),e("pixelsPerYLabel","y","pixelsPerLabel"),e("yAxisLabelFormatter","y","axisLabelFormatter"),e("yTicker","y","ticker"),b},f.prototype.resize=function(a,b){if(!this.resize_lock){this.resize_lock=!0,null===a!=(null===b)&&(this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),a=b=null);var c=this.width_,d=this.height_;a?(this.maindiv_.style.width=a+"px",this.maindiv_.style.height=b+"px",this.width_=a,this.height_=b):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),(c!=this.width_||d!=this.height_)&&(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},f.prototype.adjustRoll=function(a){this.rollPeriod_=a,this.predraw_()},f.prototype.visibility=function(){for(this.attr_("visibility")||(this.attrs_.visibility=[]);this.attr_("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.attr_("visibility")},f.prototype.setVisibility=function(a,b){var c=this.visibility();0>a||a>=c.length?this.warn("invalid series number in setVisibility: "+a):(c[a]=b,this.predraw_())},f.prototype.size=function(){return{width:this.width_,height:this.height_}},f.prototype.setAnnotations=function(a,b){return f.addAnnotationRule(),this.annotations_=a,this.layout_?(this.layout_.setAnnotations(this.annotations_),void(b||this.predraw_())):void this.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html")},f.prototype.annotations=function(){return this.annotations_},f.prototype.getLabels=function(){var a=this.attr_("labels");return a?a.slice():null},f.prototype.indexFromSetName=function(a){return this.setIndexByName_[a]},f.prototype.ready=function(a){this.is_initial_draw_?this.readyFns_.push(a):a(this)},f.addAnnotationRule=function(){if(!f.addedAnnotationCSS){var a="border: 1px solid black; background-color: white; text-align: center;",b=document.createElement("style");b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b);for(var c=0;c<document.styleSheets.length;c++)if(!document.styleSheets[c].disabled){var d=document.styleSheets[c];try{if(d.insertRule){var e=d.cssRules?d.cssRules.length:0;d.insertRule(".dygraphDefaultAnnotation { "+a+" }",e)}else d.addRule&&d.addRule(".dygraphDefaultAnnotation",a);return void(f.addedAnnotationCSS=!0)}catch(g){}}this.warn("Unable to add default annotation CSS rule; display may be off.")}};return f.LOG_SCALE=10,f.LN_TEN=Math.log(f.LOG_SCALE),f.log10=function(a){return Math.log(a)/f.LN_TEN},f.DEBUG=1,f.INFO=2,f.WARNING=3,f.ERROR=3,f.LOG_STACK_TRACES=!1,f.DOTTED_LINE=[2,2],f.DASHED_LINE=[7,3],f.DOT_DASH_LINE=[7,2,2,2],f.log=function(a,c){var d;if("undefined"!=typeof b)try{for(d=b({guess:!1});-1!=d[0].indexOf("stacktrace");)d.splice(0,1);d.splice(0,2);for(var e=0;e<d.length;e++)d[e]=d[e].replace(/\([^)]*\/(.*)\)/,"@$1").replace(/\@.*\/([^\/]*)/,"@$1").replace("[object Object].","");var g=d.splice(0,1)[0];c+=" ("+g.replace(/^.*@ ?/,"")+")"}catch(h){}if("undefined"!=typeof window.console){var i=window.console,j=function(a,b,c){b&&"function"==typeof b?b.call(a,c):a.log(c)};switch(a){case f.DEBUG:j(i,i.debug,"dygraphs: "+c);break;case f.INFO:j(i,i.info,"dygraphs: "+c);break;case f.WARNING:j(i,i.warn,"dygraphs: "+c);break;case f.ERROR:j(i,i.error,"dygraphs: "+c)}}f.LOG_STACK_TRACES&&window.console.log(d.join("\n"))},f.info=function(a){f.log(f.INFO,a)},f.prototype.info=f.info,f.warn=function(a){f.log(f.WARNING,a)},f.prototype.warn=f.warn,f.error=function(a){f.log(f.ERROR,a)},f.prototype.error=f.error,f.getContext=function(a){return a.getContext("2d")},f.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):(a[b+c]=function(){c(window.event)},a.attachEvent("on"+b,a[b+c]))},f.prototype.addAndTrackEvent=function(a,b,c){f.addEvent(a,b,c),this.registeredEvents_.push({elem:a,type:b,fn:c})},f.removeEvent=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else{try{a.detachEvent("on"+b,a[b+c])}catch(d){}a[b+c]=null}},f.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var a=0;a<this.registeredEvents_.length;a++){var b=this.registeredEvents_[a];f.removeEvent(b.elem,b.type,b.fn)}this.registeredEvents_=[]},f.cancelEvent=function(a){return a=a?a:window.event,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1},f.hsvToRGB=function(a,b,c){var d,e,f;if(0===b)d=c,e=c,f=c;else{var g=Math.floor(6*a),h=6*a-g,i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h));switch(g){case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;case 5:d=c,e=i,f=j;break;case 6:case 0:d=c,e=k,f=i}}return d=Math.floor(255*d+.5),e=Math.floor(255*e+.5),f=Math.floor(255*f+.5),"rgb("+d+","+e+","+f+")"},f.findPosX=function(a){var b=0;if(a.offsetParent)for(var c=a;;){var d="0";if(window.getComputedStyle&&(d=window.getComputedStyle(c,null).borderLeft||"0"),b+=parseInt(d,10),b+=c.offsetLeft,!c.offsetParent)break;c=c.offsetParent}else a.x&&(b+=a.x);for(;a&&a!=document.body;)b-=a.scrollLeft,a=a.parentNode;return b},f.findPosY=function(a){var b=0;if(a.offsetParent)for(var c=a;;){var d="0";if(window.getComputedStyle&&(d=window.getComputedStyle(c,null).borderTop||"0"),b+=parseInt(d,10),b+=c.offsetTop,!c.offsetParent)break;c=c.offsetParent}else a.y&&(b+=a.y);for(;a&&a!=document.body;)b-=a.scrollTop,a=a.parentNode;return b},f.pageX=function(a){if(a.pageX)return!a.pageX||a.pageX<0?0:a.pageX;var b=document.documentElement,c=document.body;return a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)},f.pageY=function(a){if(a.pageY)return!a.pageY||a.pageY<0?0:a.pageY;var b=document.documentElement,c=document.body;return a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)},f.isOK=function(a){return!!a&&!isNaN(a)},f.isValidPoint=function(a,b){return a?null===a.yval?!1:null===a.x||void 0===a.x?!1:null===a.y||void 0===a.y?!1:isNaN(a.x)||!b&&isNaN(a.y)?!1:!0:!1},f.floatFormat=function(a,b){var c=Math.min(Math.max(1,b||2),21);return Math.abs(a)<.001&&0!==a?a.toExponential(c-1):a.toPrecision(c)},f.zeropad=function(a){return 10>a?"0"+a:""+a},f.hmsString_=function(a){var b=f.zeropad,c=new Date(a);return c.getSeconds()?b(c.getHours())+":"+b(c.getMinutes())+":"+b(c.getSeconds()):b(c.getHours())+":"+b(c.getMinutes())},f.round_=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},f.binarySearch=function(a,b,c,d,e){if((null===d||void 0===d||null===e||void 0===e)&&(d=0,e=b.length-1),d>e)return-1;(null===c||void 0===c)&&(c=0);var g,h=function(a){return a>=0&&a<b.length},i=parseInt((d+e)/2,10),j=b[i];return j==a?i:j>a?c>0&&(g=i-1,h(g)&&b[g]<a)?i:f.binarySearch(a,b,c,d,i-1):a>j?0>c&&(g=i+1,h(g)&&b[g]>a)?i:f.binarySearch(a,b,c,i+1,e):-1},f.dateParser=function(a){var b,c;if((-1==a.search("-")||-1!=a.search("T")||-1!=a.search("Z"))&&(c=f.dateStrToMillis(a),c&&!isNaN(c)))return c;if(-1!=a.search("-")){for(b=a.replace("-","/","g");-1!=b.search("-");)b=b.replace("-","/");c=f.dateStrToMillis(b)}else 8==a.length?(b=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),c=f.dateStrToMillis(b)):c=f.dateStrToMillis(a);return(!c||isNaN(c))&&f.error("Couldn't parse "+a+" as a date"),c},f.dateStrToMillis=function(a){return new Date(a).getTime()},f.update=function(a,b){if("undefined"!=typeof b&&null!==b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f.updateDeep=function(a,b){function c(a){return"object"==typeof Node?a instanceof Node:"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName}if("undefined"!=typeof b&&null!==b)for(var d in b)b.hasOwnProperty(d)&&(null===b[d]?a[d]=null:f.isArrayLike(b[d])?a[d]=b[d].slice():c(b[d])?a[d]=b[d]:"object"==typeof b[d]?(("object"!=typeof a[d]||null===a[d])&&(a[d]={}),f.updateDeep(a[d],b[d])):a[d]=b[d]);return a},f.isArrayLike=function(a){var b=typeof a;return"object"!=b&&("function"!=b||"function"!=typeof a.item)||null===a||"number"!=typeof a.length||3===a.nodeType?!1:!0},f.isDateLike=function(a){return"object"!=typeof a||null===a||"function"!=typeof a.getTime?!1:!0},f.clone=function(a){for(var b=[],c=0;c<a.length;c++)f.isArrayLike(a[c])?b.push(f.clone(a[c])):b.push(a[c]);return b},f.createCanvas=function(){var a=document.createElement("canvas"),b=/MSIE/.test(navigator.userAgent)&&!window.opera;return b&&"undefined"!=typeof G_vmlCanvasManager&&(a=G_vmlCanvasManager.initElement(a)),a},f.isAndroid=function(){return/Android/.test(navigator.userAgent)},f.Iterator=function(a,b,c,d){b=b||0,c=c||a.length,this.hasNext=!0,this.peek=null,this.start_=b,this.array_=a,this.predicate_=d,this.end_=Math.min(a.length,b+c),this.nextIdx_=b-1,this.next()},f.Iterator.prototype.next=function(){if(!this.hasNext)return null;for(var a=this.peek,b=this.nextIdx_+1,c=!1;b<this.end_;){if(!this.predicate_||this.predicate_(this.array_,b)){this.peek=this.array_[b],c=!0;break}b++}return this.nextIdx_=b,c||(this.hasNext=!1,this.peek=null),a},f.createIterator=function(a,b,c,d){return new f.Iterator(a,b,c,d)},f.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),f.repeatAndCleanup=function(a,b,c,d){var e,g=0,h=(new Date).getTime();if(a(g),1==b)return void d();var i=b-1;!function j(){g>=b||f.requestAnimFrame.call(window,function(){var b=(new Date).getTime(),f=b-h;e=g,g=Math.floor(f/c);var k=g-e,l=g+k>i;l||g>=i?(a(i),d()):(0!==k&&a(g),j())})}()},f.isPixelChangingOptionList=function(a,b){var c={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLabelColor:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,digitsAfterDecimal:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawXGrid:!0,drawYGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,isZoomedIgnoreProgrammaticZoom:!0,labelsDiv:!0,labelsDivStyles:!0,labelsDivWidth:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,maxNumberWidth:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotStrokeColor:!0,showLabelsOnHighlight:!0,showRoller:!0,sigFigs:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,xAxisLabelFormatter:!0,xTicker:!0,xValueFormatter:!0,yAxisLabelFormatter:!0,yValueFormatter:!0,zoomCallback:!0},d=!1,e={};if(a)for(var f=1;f<a.length;f++)e[a[f]]=!0;for(var g in b){if(d)break;if(b.hasOwnProperty(g))if(e[g])for(var h in b[g]){if(d)break;b[g].hasOwnProperty(h)&&!c[h]&&(d=!0)}else c[g]||(d=!0)}return d},f.compareArrays=function(a,b){if(!f.isArrayLike(a)||!f.isArrayLike(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},f.regularShape_=function(a,b,c,d,e,f,g){f=f||0,g=g||2*Math.PI/b,a.beginPath();var h=f,i=h,j=function(){var a=d+Math.sin(i)*c,b=e+-Math.cos(i)*c;return[a,b]},k=j(),l=k[0],m=k[1];a.moveTo(l,m);for(var n=0;b>n;n++){i=n==b-1?h:i+g;var o=j();a.lineTo(o[0],o[1])}a.fill(),a.stroke()},f.shapeFunction_=function(a,b,c){return function(d,e,g,h,i,j,k){g.strokeStyle=j,g.fillStyle="white",f.regularShape_(g,a,k,h,i,b,c)}},f.Circles={DEFAULT:function(a,b,c,d,e,f,g){c.beginPath(),c.fillStyle=f,c.arc(d,e,g,0,2*Math.PI,!1),c.fill()},TRIANGLE:f.shapeFunction_(3),SQUARE:f.shapeFunction_(4,Math.PI/4),DIAMOND:f.shapeFunction_(4),PENTAGON:f.shapeFunction_(5),HEXAGON:f.shapeFunction_(6),CIRCLE:function(a,b,c,d,e,f,g){c.beginPath(),c.strokeStyle=f,c.fillStyle="white",c.arc(d,e,g,0,2*Math.PI,!1),c.fill(),c.stroke()},STAR:f.shapeFunction_(5,0,4*Math.PI/5),PLUS:function(a,b,c,d,e,f,g){c.strokeStyle=f,c.beginPath(),c.moveTo(d+g,e),c.lineTo(d-g,e),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(d,e+g),c.lineTo(d,e-g),c.closePath(),c.stroke()},EX:function(a,b,c,d,e,f,g){c.strokeStyle=f,c.beginPath(),c.moveTo(d+g,e+g),c.lineTo(d-g,e-g),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(d+g,e-g),c.lineTo(d-g,e+g),c.closePath(),c.stroke()}},f.IFrameTarp=function(){this.tarps=[]},f.IFrameTarp.prototype.cover=function(){for(var a=document.getElementsByTagName("iframe"),b=0;b<a.length;b++){var c=a[b],d=f.findPosX(c),e=f.findPosY(c),g=c.offsetWidth,h=c.offsetHeight,i=document.createElement("div");i.style.position="absolute",i.style.left=d+"px",i.style.top=e+"px",i.style.width=g+"px",i.style.height=h+"px",i.style.zIndex=999,document.body.appendChild(i),this.tarps.push(i)}},f.IFrameTarp.prototype.uncover=function(){for(var a=0;a<this.tarps.length;a++)this.tarps[a].parentNode.removeChild(this.tarps[a]);this.tarps=[]},f.detectLineDelimiter=function(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);if("\r"===c)return b+1<a.length&&"\n"===a.charAt(b+1)?"\r\n":c;if("\n"===c)return b+1<a.length&&"\r"===a.charAt(b+1)?"\n\r":c}return null},f.isNodeContainedBy=function(a,b){if(null===b||null===a)return!1;for(var c=a;c&&c!==b;)c=c.parentNode;return c===b},f.pow=function(a,b){return 0>b?1/Math.pow(a,-b):Math.pow(a,b)},f.dateSetters={ms:Date.prototype.setMilliseconds,s:Date.prototype.setSeconds,m:Date.prototype.setMinutes,h:Date.prototype.setHours},f.setDateSameTZ=function(a,b){var c=a.getTimezoneOffset();for(var d in b)if(b.hasOwnProperty(d)){var e=f.dateSetters[d];if(!e)throw"Invalid setter: "+d;e.call(a,b[d]),a.getTimezoneOffset()!=c&&a.setTime(a.getTime()+60*(c-a.getTimezoneOffset())*1e3)}},f.GVizChart=function(a){this.container=a},f.GVizChart.prototype.draw=function(a,b){this.container.innerHTML="","undefined"!=typeof this.date_graph&&this.date_graph.destroy(),this.date_graph=new f(this.container,a,b)},f.GVizChart.prototype.setSelection=function(a){var b=!1;a.length&&(b=a[0].row),this.date_graph.setSelection(b)},f.GVizChart.prototype.getSelection=function(){var a=[],b=this.date_graph.getSelection();if(0>b)return a;for(var c=this.date_graph.layout_.points,d=0;d<c.length;++d)a.push({row:b,column:d+1});return a},f.Interaction={},f.Interaction.startPan=function(a,b,c){var d,e;c.isPanning=!0;var g=b.xAxisRange();if(c.dateRange=g[1]-g[0],c.initialLeftmostDate=g[0],c.xUnitsPerPixel=c.dateRange/(b.plotter_.area.w-1),b.attr_("panEdgeFraction")){var h=b.width_*b.attr_("panEdgeFraction"),i=b.xAxisExtremes(),j=b.toDomXCoord(i[0])-h,k=b.toDomXCoord(i[1])+h,l=b.toDataXCoord(j),m=b.toDataXCoord(k);c.boundedDates=[l,m];var n=[],o=b.height_*b.attr_("panEdgeFraction");for(d=0;d<b.axes_.length;d++){e=b.axes_[d];var p=e.extremeRange,q=b.toDomYCoord(p[0],d)+o,r=b.toDomYCoord(p[1],d)-o,s=b.toDataYCoord(q,d),t=b.toDataYCoord(r,d);n[d]=[s,t]}c.boundedValues=n}for(c.is2DPan=!1,c.axes=[],d=0;d<b.axes_.length;d++){e=b.axes_[d];var u={},v=b.yAxisRange(d),w=b.attributes_.getForAxis("logscale",d);w?(u.initialTopValue=f.log10(v[1]),u.dragValueRange=f.log10(v[1])-f.log10(v[0])):(u.initialTopValue=v[1],u.dragValueRange=v[1]-v[0]),u.unitsPerPixel=u.dragValueRange/(b.plotter_.area.h-1),c.axes.push(u),(e.valueWindow||e.valueRange)&&(c.is2DPan=!0)}},f.Interaction.movePan=function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=c.initialLeftmostDate-(c.dragEndX-c.dragStartX)*c.xUnitsPerPixel;c.boundedDates&&(d=Math.max(d,c.boundedDates[0]));var e=d+c.dateRange;if(c.boundedDates&&e>c.boundedDates[1]&&(d-=e-c.boundedDates[1],e=d+c.dateRange),b.dateWindow_=[d,e],c.is2DPan)for(var g=c.dragEndY-c.dragStartY,h=0;h<b.axes_.length;h++){var i=b.axes_[h],j=c.axes[h],k=g*j.unitsPerPixel,l=c.boundedValues?c.boundedValues[h]:null,m=j.initialTopValue+k;l&&(m=Math.min(m,l[1]));var n=m-j.dragValueRange;l&&n<l[0]&&(m-=n-l[0],n=m-j.dragValueRange);var o=b.attributes_.getForAxis("logscale",h);o?i.valueWindow=[Math.pow(f.LOG_SCALE,n),Math.pow(f.LOG_SCALE,m)]:i.valueWindow=[n,m]}b.drawGraph_(!1)},f.Interaction.endPan=function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);2>d&&2>e&&void 0!==b.lastx_&&-1!=b.lastx_&&f.Interaction.treatMouseOpAsClick(b,a,c),c.isPanning=!1,c.is2DPan=!1,c.initialLeftmostDate=null,c.dateRange=null,c.valueRange=null,c.boundedDates=null,c.boundedValues=null,c.axes=null},f.Interaction.startZoom=function(a,b,c){c.isZooming=!0,c.zoomMoved=!1},f.Interaction.moveZoom=function(a,b,c){c.zoomMoved=!0,c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragStartX-c.dragEndX),e=Math.abs(c.dragStartY-c.dragEndY);c.dragDirection=e/2>d?f.VERTICAL:f.HORIZONTAL,b.drawZoomRect_(c.dragDirection,c.dragStartX,c.dragEndX,c.dragStartY,c.dragEndY,c.prevDragDirection,c.prevEndX,c.prevEndY),c.prevEndX=c.dragEndX,c.prevEndY=c.dragEndY,c.prevDragDirection=c.dragDirection},f.Interaction.treatMouseOpAsClick=function(a,b,c){var d=a.attr_("clickCallback"),e=a.attr_("pointClickCallback"),f=null;if(e){for(var g=-1,h=Number.MAX_VALUE,i=0;i<a.selPoints_.length;i++){var j=a.selPoints_[i],k=Math.pow(j.canvasx-c.dragEndX,2)+Math.pow(j.canvasy-c.dragEndY,2);!isNaN(k)&&(-1==g||h>k)&&(h=k,g=i)}var l=a.attr_("highlightCircleSize")+2;l*l>=h&&(f=a.selPoints_[g])}f&&e(b,f),d&&d(b,a.lastx_,a.selPoints_)},f.Interaction.endZoom=function(a,b,c){c.isZooming=!1,c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);2>d&&2>e&&void 0!==b.lastx_&&-1!=b.lastx_&&f.Interaction.treatMouseOpAsClick(b,a,c);var g=b.getArea();if(d>=10&&c.dragDirection==f.HORIZONTAL){var h=Math.min(c.dragStartX,c.dragEndX),i=Math.max(c.dragStartX,c.dragEndX);h=Math.max(h,g.x),i=Math.min(i,g.x+g.w),i>h&&b.doZoomX_(h,i),c.cancelNextDblclick=!0}else if(e>=10&&c.dragDirection==f.VERTICAL){var j=Math.min(c.dragStartY,c.dragEndY),k=Math.max(c.dragStartY,c.dragEndY);j=Math.max(j,g.y),k=Math.min(k,g.y+g.h),k>j&&b.doZoomY_(j,k),c.cancelNextDblclick=!0}else c.zoomMoved&&b.clearZoomRect_();c.dragStartX=null,c.dragStartY=null},f.Interaction.startTouch=function(a,b,c){a.preventDefault(),a.touches.length>1&&(c.startTimeForDoubleTapMs=null);for(var d=[],e=0;e<a.touches.length;e++){var f=a.touches[e];d.push({pageX:f.pageX,pageY:f.pageY,dataX:b.toDataXCoord(f.pageX),dataY:b.toDataYCoord(f.pageY)})}if(c.initialTouches=d,1==d.length)c.initialPinchCenter=d[0],c.touchDirections={x:!0,y:!0};else if(d.length>=2){c.initialPinchCenter={pageX:.5*(d[0].pageX+d[1].pageX),pageY:.5*(d[0].pageY+d[1].pageY),dataX:.5*(d[0].dataX+d[1].dataX),dataY:.5*(d[0].dataY+d[1].dataY)};var g=180/Math.PI*Math.atan2(c.initialPinchCenter.pageY-d[0].pageY,d[0].pageX-c.initialPinchCenter.pageX);g=Math.abs(g),g>90&&(g=90-g),c.touchDirections={x:67.5>g,y:g>22.5}}c.initialRange={x:b.xAxisRange(),y:b.yAxisRange()}},f.Interaction.moveTouch=function(a,b,c){c.startTimeForDoubleTapMs=null;var d,e=[];for(d=0;d<a.touches.length;d++){var f=a.touches[d];e.push({pageX:f.pageX,pageY:f.pageY})}var g,h=c.initialTouches,i=c.initialPinchCenter;g=1==e.length?e[0]:{pageX:.5*(e[0].pageX+e[1].pageX),pageY:.5*(e[0].pageY+e[1].pageY)};var j={pageX:g.pageX-i.pageX,pageY:g.pageY-i.pageY},k=c.initialRange.x[1]-c.initialRange.x[0],l=c.initialRange.y[0]-c.initialRange.y[1];j.dataX=j.pageX/b.plotter_.area.w*k,j.dataY=j.pageY/b.plotter_.area.h*l;var m,n;if(1==e.length)m=1,n=1;else if(e.length>=2){var o=h[1].pageX-i.pageX;m=(e[1].pageX-g.pageX)/o;var p=h[1].pageY-i.pageY;n=(e[1].pageY-g.pageY)/p}m=Math.min(8,Math.max(.125,m)),n=Math.min(8,Math.max(.125,n));var q=!1;if(c.touchDirections.x&&(b.dateWindow_=[i.dataX-j.dataX+(c.initialRange.x[0]-i.dataX)/m,i.dataX-j.dataX+(c.initialRange.x[1]-i.dataX)/m],q=!0),c.touchDirections.y)for(d=0;1>d;d++){var r=b.axes_[d],s=b.attributes_.getForAxis("logscale",d);s||(r.valueWindow=[i.dataY-j.dataY+(c.initialRange.y[0]-i.dataY)/n,i.dataY-j.dataY+(c.initialRange.y[1]-i.dataY)/n],q=!0)}if(b.drawGraph_(!1),q&&e.length>1&&b.attr_("zoomCallback")){var t=b.xAxisRange();b.attr_("zoomCallback")(t[0],t[1],b.yAxisRanges())}},f.Interaction.endTouch=function(a,b,c){if(0!==a.touches.length)f.Interaction.startTouch(a,b,c);else if(1==a.changedTouches.length){var d=(new Date).getTime(),e=a.changedTouches[0];c.startTimeForDoubleTapMs&&d-c.startTimeForDoubleTapMs<500&&c.doubleTapX&&Math.abs(c.doubleTapX-e.screenX)<50&&c.doubleTapY&&Math.abs(c.doubleTapY-e.screenY)<50?b.resetZoom():(c.startTimeForDoubleTapMs=d,c.doubleTapX=e.screenX,c.doubleTapY=e.screenY)}},f.Interaction.defaultModel={mousedown:function(a,b,c){a.button&&2==a.button||(c.initializeMouseDown(a,b,c),a.altKey||a.shiftKey?f.startPan(a,b,c):f.startZoom(a,b,c))},mousemove:function(a,b,c){c.isZooming?f.moveZoom(a,b,c):c.isPanning&&f.movePan(a,b,c)},mouseup:function(a,b,c){c.isZooming?f.endZoom(a,b,c):c.isPanning&&f.endPan(a,b,c)},touchstart:function(a,b,c){f.Interaction.startTouch(a,b,c)},touchmove:function(a,b,c){f.Interaction.moveTouch(a,b,c)},touchend:function(a,b,c){f.Interaction.endTouch(a,b,c)},mouseout:function(a,b,c){c.isZooming&&(c.dragEndX=null,c.dragEndY=null,b.clearZoomRect_())},dblclick:function(a,b,c){return c.cancelNextDblclick?void(c.cancelNextDblclick=!1):void(a.altKey||a.shiftKey||b.resetZoom())}},f.DEFAULT_ATTRS.interactionModel=f.Interaction.defaultModel,f.defaultInteractionModel=f.Interaction.defaultModel,f.endZoom=f.Interaction.endZoom,f.moveZoom=f.Interaction.moveZoom,f.startZoom=f.Interaction.startZoom,f.endPan=f.Interaction.endPan,f.movePan=f.Interaction.movePan,f.startPan=f.Interaction.startPan,f.Interaction.nonInteractiveModel_={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c)},mouseup:function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);2>d&&2>e&&void 0!==b.lastx_&&-1!=b.lastx_&&f.Interaction.treatMouseOpAsClick(b,a,c)}},f.Interaction.dragIsPanInteractionModel={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c),f.startPan(a,b,c)},mousemove:function(a,b,c){c.isPanning&&f.movePan(a,b,c)},mouseup:function(a,b,c){c.isPanning&&f.endPan(a,b,c)}},f.TickList=void 0,f.Ticker=void 0,f.numericLinearTicks=function(a,b,c,d,e,g){var h=function(a){return"logscale"===a?!1:d(a)};return f.numericTicks(a,b,c,h,e,g)},f.numericTicks=function(a,b,c,d,e,g){var h,i,j,k,l=d("pixelsPerLabel"),m=[];if(g)for(h=0;h<g.length;h++)m.push({v:g[h]});else{if(d("logscale")){k=Math.floor(c/l);var n=f.binarySearch(a,f.PREFERRED_LOG_TICK_VALUES,1),o=f.binarySearch(b,f.PREFERRED_LOG_TICK_VALUES,-1);-1==n&&(n=0),-1==o&&(o=f.PREFERRED_LOG_TICK_VALUES.length-1);var p=null;if(o-n>=k/4){for(var q=o;q>=n;q--){var r=f.PREFERRED_LOG_TICK_VALUES[q],s=Math.log(r/a)/Math.log(b/a)*c,t={v:r};null===p?p={tickValue:r,pixel_coord:s}:Math.abs(s-p.pixel_coord)>=l?p={tickValue:r,pixel_coord:s}:t.label="",m.push(t)}m.reverse()}}if(0===m.length){var u,v,w=d("labelsKMG2");w?(u=[1,2,4,8,16,32,64,128,256],v=16):(u=[1,2,5,10,20,50,100],v=10);var x,y,z,A,B=Math.ceil(c/l),C=Math.abs(b-a)/B,D=Math.floor(Math.log(C)/Math.log(v)),E=Math.pow(v,D);for(i=0;i<u.length&&(x=E*u[i],y=Math.floor(a/x)*x,z=Math.ceil(b/x)*x,k=Math.abs(z-y)/x,A=c/k,!(A>l));i++);for(y>z&&(x*=-1),h=0;k>h;h++)j=y+h*x,m.push({v:j})}}var F=d("axisLabelFormatter");for(h=0;h<m.length;h++)void 0===m[h].label&&(m[h].label=F(m[h].v,0,d,e));return m},f.dateTicker=function(a,b,c,d,e,g){var h=f.pickDateTickGranularity(a,b,c,d);return h>=0?f.getDateAxis(a,b,h,d,e):[]},f.SECONDLY=0,f.TWO_SECONDLY=1,f.FIVE_SECONDLY=2,f.TEN_SECONDLY=3,f.THIRTY_SECONDLY=4,f.MINUTELY=5,f.TWO_MINUTELY=6,f.FIVE_MINUTELY=7,f.TEN_MINUTELY=8,f.THIRTY_MINUTELY=9,f.HOURLY=10,f.TWO_HOURLY=11,f.SIX_HOURLY=12,f.DAILY=13,f.WEEKLY=14,f.MONTHLY=15,f.QUARTERLY=16,f.BIANNUAL=17,f.ANNUAL=18,f.DECADAL=19,f.CENTENNIAL=20,f.NUM_GRANULARITIES=21,f.SHORT_SPACINGS=[],f.SHORT_SPACINGS[f.SECONDLY]=1e3,f.SHORT_SPACINGS[f.TWO_SECONDLY]=2e3,f.SHORT_SPACINGS[f.FIVE_SECONDLY]=5e3,f.SHORT_SPACINGS[f.TEN_SECONDLY]=1e4,f.SHORT_SPACINGS[f.THIRTY_SECONDLY]=3e4,f.SHORT_SPACINGS[f.MINUTELY]=6e4,f.SHORT_SPACINGS[f.TWO_MINUTELY]=12e4,f.SHORT_SPACINGS[f.FIVE_MINUTELY]=3e5,f.SHORT_SPACINGS[f.TEN_MINUTELY]=6e5,f.SHORT_SPACINGS[f.THIRTY_MINUTELY]=18e5,f.SHORT_SPACINGS[f.HOURLY]=36e5,f.SHORT_SPACINGS[f.TWO_HOURLY]=72e5,f.SHORT_SPACINGS[f.SIX_HOURLY]=216e5,f.SHORT_SPACINGS[f.DAILY]=864e5,f.SHORT_SPACINGS[f.WEEKLY]=6048e5,f.LONG_TICK_PLACEMENTS=[],f.LONG_TICK_PLACEMENTS[f.MONTHLY]={months:[0,1,2,3,4,5,6,7,8,9,10,11],year_mod:1},f.LONG_TICK_PLACEMENTS[f.QUARTERLY]={months:[0,3,6,9],year_mod:1},f.LONG_TICK_PLACEMENTS[f.BIANNUAL]={months:[0,6],year_mod:1},f.LONG_TICK_PLACEMENTS[f.ANNUAL]={months:[0],year_mod:1},f.LONG_TICK_PLACEMENTS[f.DECADAL]={months:[0],year_mod:10},f.LONG_TICK_PLACEMENTS[f.CENTENNIAL]={months:[0],year_mod:100},f.PREFERRED_LOG_TICK_VALUES=function(){for(var a=[],b=-39;39>=b;b++)for(var c=Math.pow(10,b),d=1;9>=d;d++){
var e=c*d;a.push(e)}return a}(),f.pickDateTickGranularity=function(a,b,c,d){for(var e=d("pixelsPerLabel"),g=0;g<f.NUM_GRANULARITIES;g++){var h=f.numDateTicks(a,b,g);if(c/h>=e)return g}return-1},f.numDateTicks=function(a,b,c){if(c<f.MONTHLY){var d=f.SHORT_SPACINGS[c];return Math.floor(.5+1*(b-a)/d)}var e=f.LONG_TICK_PLACEMENTS[c],g=31557807360,h=1*(b-a)/g;return Math.floor(.5+1*h*e.months.length/e.year_mod)},f.getDateAxis=function(a,b,c,d,e){var g,h=d("axisLabelFormatter"),i=[];if(c<f.MONTHLY){var j=f.SHORT_SPACINGS[c],k=j/1e3,l=new Date(a);f.setDateSameTZ(l,{ms:0});var m;60>=k?(m=l.getSeconds(),f.setDateSameTZ(l,{s:m-m%k})):(f.setDateSameTZ(l,{s:0}),k/=60,60>=k?(m=l.getMinutes(),f.setDateSameTZ(l,{m:m-m%k})):(f.setDateSameTZ(l,{m:0}),k/=60,24>=k?(m=l.getHours(),l.setHours(m-m%k)):(l.setHours(0),k/=24,7==k&&l.setDate(l.getDate()-l.getDay())))),a=l.getTime();var n=new Date(a).getTimezoneOffset(),o=j>=f.SHORT_SPACINGS[f.TWO_HOURLY];for(g=a;b>=g;g+=j){if(l=new Date(g),o&&l.getTimezoneOffset()!=n){var p=l.getTimezoneOffset()-n;g+=60*p*1e3,l=new Date(g),n=l.getTimezoneOffset(),new Date(g+j).getTimezoneOffset()!=n&&(g+=j,l=new Date(g),n=l.getTimezoneOffset())}i.push({v:g,label:h(l,c,d,e)})}}else{var q,r=1;c<f.NUM_GRANULARITIES?(q=f.LONG_TICK_PLACEMENTS[c].months,r=f.LONG_TICK_PLACEMENTS[c].year_mod):f.warn("Span of dates is too long");for(var s=new Date(a).getFullYear(),t=new Date(b).getFullYear(),u=f.zeropad,v=s;t>=v;v++)if(v%r===0)for(var w=0;w<q.length;w++){var x=v+"/"+u(1+q[w])+"/01";g=f.dateStrToMillis(x),a>g||g>b||i.push({v:g,label:h(new Date(g),c,d,e)})}}return i},f&&f.DEFAULT_ATTRS&&f.DEFAULT_ATTRS.axes&&f.DEFAULT_ATTRS.axes.x&&f.DEFAULT_ATTRS.axes.y&&f.DEFAULT_ATTRS.axes.y2&&(f.DEFAULT_ATTRS.axes.x.ticker=f.dateTicker,f.DEFAULT_ATTRS.axes.y.ticker=f.numericTicks,f.DEFAULT_ATTRS.axes.y2.ticker=f.numericTicks),f.Plugins={},f.Plugins.Annotations=function(){var a=function(){this.annotations_=[]};return a.prototype.toString=function(){return"Annotations Plugin"},a.prototype.activate=function(a){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},a.prototype.detachLabels=function(){for(var a=0;a<this.annotations_.length;a++){var b=this.annotations_[a];b.parentNode&&b.parentNode.removeChild(b),this.annotations_[a]=null}this.annotations_=[]},a.prototype.clearChart=function(a){this.detachLabels()},a.prototype.didDrawChart=function(a){var b=a.dygraph,c=b.layout_.annotated_points;if(c&&0!==c.length)for(var d=a.canvas.parentNode,e={position:"absolute",fontSize:b.getOption("axisLabelFontSize")+"px",zIndex:10,overflow:"hidden"},f=function(a,c,d){return function(e){var f=d.annotation;f.hasOwnProperty(a)?f[a](f,d,b,e):b.getOption(c)&&b.getOption(c)(f,d,b,e)}},g=a.dygraph.plotter_.area,h={},i=0;i<c.length;i++){var j=c[i];if(!(j.canvasx<g.x||j.canvasx>g.x+g.w||j.canvasy<g.y||j.canvasy>g.y+g.h)){var k=j.annotation,l=6;k.hasOwnProperty("tickHeight")&&(l=k.tickHeight);var m=document.createElement("div");for(var n in e)e.hasOwnProperty(n)&&(m.style[n]=e[n]);k.hasOwnProperty("icon")||(m.className="dygraphDefaultAnnotation"),k.hasOwnProperty("cssClass")&&(m.className+=" "+k.cssClass);var o=k.hasOwnProperty("width")?k.width:16,p=k.hasOwnProperty("height")?k.height:16;if(k.hasOwnProperty("icon")){var q=document.createElement("img");q.src=k.icon,q.width=o,q.height=p,m.appendChild(q)}else j.annotation.hasOwnProperty("shortText")&&m.appendChild(document.createTextNode(j.annotation.shortText));var r=j.canvasx-o/2;m.style.left=r+"px";var s=0;if(k.attachAtBottom){var t=g.y+g.h-p-l;h[r]?t-=h[r]:h[r]=0,h[r]+=l+p,s=t}else s=j.canvasy-p-l;m.style.top=s+"px",m.style.width=o+"px",m.style.height=p+"px",m.title=j.annotation.text,m.style.color=b.colorsMap_[j.name],m.style.borderColor=b.colorsMap_[j.name],k.div=m,b.addAndTrackEvent(m,"click",f("clickHandler","annotationClickHandler",j,this)),b.addAndTrackEvent(m,"mouseover",f("mouseOverHandler","annotationMouseOverHandler",j,this)),b.addAndTrackEvent(m,"mouseout",f("mouseOutHandler","annotationMouseOutHandler",j,this)),b.addAndTrackEvent(m,"dblclick",f("dblClickHandler","annotationDblClickHandler",j,this)),d.appendChild(m),this.annotations_.push(m);var u=a.drawingContext;if(u.save(),u.strokeStyle=b.colorsMap_[j.name],u.beginPath(),k.attachAtBottom){var t=s+p;u.moveTo(j.canvasx,t),u.lineTo(j.canvasx,t+l)}else u.moveTo(j.canvasx,j.canvasy),u.lineTo(j.canvasx,j.canvasy-2-l);u.closePath(),u.stroke(),u.restore()}}},a.prototype.destroy=function(){this.detachLabels()},a}(),f.Plugins.Axes=function(){var a=function(){this.xlabels_=[],this.ylabels_=[]};return a.prototype.toString=function(){return"Axes Plugin"},a.prototype.activate=function(a){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},a.prototype.layout=function(a){var b=a.dygraph;if(b.getOption("drawYAxis")){var c=b.getOption("yAxisLabelWidth")+2*b.getOption("axisTickSize");a.reserveSpaceLeft(c)}if(b.getOption("drawXAxis")){var d;d=b.getOption("xAxisHeight")?b.getOption("xAxisHeight"):b.getOptionForAxis("axisLabelFontSize","x")+2*b.getOption("axisTickSize"),a.reserveSpaceBottom(d)}if(2==b.numAxes()){if(b.getOption("drawYAxis")){var c=b.getOption("yAxisLabelWidth")+2*b.getOption("axisTickSize");a.reserveSpaceRight(c)}}else b.numAxes()>2&&b.error("Only two y-axes are supported at this time. (Trying to use "+b.numAxes()+")")},a.prototype.detachLabels=function(){function a(a){for(var b=0;b<a.length;b++){var c=a[b];c.parentNode&&c.parentNode.removeChild(c)}}a(this.xlabels_),a(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},a.prototype.clearChart=function(a){this.detachLabels()},a.prototype.willDrawChart=function(a){function b(a){return Math.round(a)+.5}function c(a){return Math.round(a)-.5}var d=a.dygraph;if(d.getOption("drawXAxis")||d.getOption("drawYAxis")){var e,f,g,h,i,j=a.drawingContext,k=a.canvas.parentNode,l=a.canvas.width,m=a.canvas.height,n=function(a){return{position:"absolute",fontSize:d.getOptionForAxis("axisLabelFontSize",a)+"px",zIndex:10,color:d.getOptionForAxis("axisLabelColor",a),width:d.getOption("axisLabelWidth")+"px",lineHeight:"normal",overflow:"hidden"}},o={x:n("x"),y:n("y"),y2:n("y2")},p=function(a,b,c){var d=document.createElement("div"),e=o["y2"==c?"y2":b];for(var f in e)e.hasOwnProperty(f)&&(d.style[f]=e[f]);var g=document.createElement("div");return g.className="dygraph-axis-label dygraph-axis-label-"+b+(c?" dygraph-axis-label-"+c:""),g.innerHTML=a,d.appendChild(g),d};j.save();var q=d.layout_,r=a.dygraph.plotter_.area;if(d.getOption("drawYAxis")){if(q.yticks&&q.yticks.length>0){var s=d.numAxes();for(i=0;i<q.yticks.length;i++){if(h=q.yticks[i],"function"==typeof h)return;f=r.x;var t=1,u="y1";1==h[0]&&(f=r.x+r.w,t=-1,u="y2");var v=d.getOptionForAxis("axisLabelFontSize",u);g=r.y+h[1]*r.h,e=p(h[2],"y",2==s?u:null);var w=g-v/2;0>w&&(w=0),w+v+3>m?e.style.bottom="0px":e.style.top=w+"px",0===h[0]?(e.style.left=r.x-d.getOption("yAxisLabelWidth")-d.getOption("axisTickSize")+"px",e.style.textAlign="right"):1==h[0]&&(e.style.left=r.x+r.w+d.getOption("axisTickSize")+"px",e.style.textAlign="left"),e.style.width=d.getOption("yAxisLabelWidth")+"px",k.appendChild(e),this.ylabels_.push(e)}var x=this.ylabels_[0],v=d.getOptionForAxis("axisLabelFontSize","y"),y=parseInt(x.style.top,10)+v;y>m-v&&(x.style.top=parseInt(x.style.top,10)-v/2+"px")}var z;if(d.getOption("drawAxesAtZero")){var A=d.toPercentXCoord(0);(A>1||0>A||isNaN(A))&&(A=0),z=b(r.x+A*r.w)}else z=b(r.x);j.strokeStyle=d.getOptionForAxis("axisLineColor","y"),j.lineWidth=d.getOptionForAxis("axisLineWidth","y"),j.beginPath(),j.moveTo(z,c(r.y)),j.lineTo(z,c(r.y+r.h)),j.closePath(),j.stroke(),2==d.numAxes()&&(j.strokeStyle=d.getOptionForAxis("axisLineColor","y2"),j.lineWidth=d.getOptionForAxis("axisLineWidth","y2"),j.beginPath(),j.moveTo(c(r.x+r.w),c(r.y)),j.lineTo(c(r.x+r.w),c(r.y+r.h)),j.closePath(),j.stroke())}if(d.getOption("drawXAxis")){if(q.xticks)for(i=0;i<q.xticks.length;i++){h=q.xticks[i],f=r.x+h[0]*r.w,g=r.y+r.h,e=p(h[1],"x"),e.style.textAlign="center",e.style.top=g+d.getOption("axisTickSize")+"px";var B=f-d.getOption("axisLabelWidth")/2;B+d.getOption("axisLabelWidth")>l&&(B=l-d.getOption("xAxisLabelWidth"),e.style.textAlign="right"),0>B&&(B=0,e.style.textAlign="left"),e.style.left=B+"px",e.style.width=d.getOption("xAxisLabelWidth")+"px",k.appendChild(e),this.xlabels_.push(e)}j.strokeStyle=d.getOptionForAxis("axisLineColor","x"),j.lineWidth=d.getOptionForAxis("axisLineWidth","x"),j.beginPath();var C;if(d.getOption("drawAxesAtZero")){var A=d.toPercentYCoord(0,0);(A>1||0>A)&&(A=1),C=c(r.y+A*r.h)}else C=c(r.y+r.h);j.moveTo(b(r.x),C),j.lineTo(b(r.x+r.w),C),j.closePath(),j.stroke()}j.restore()}},a}(),f.Plugins.ChartLabels=function(){var a=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};a.prototype.toString=function(){return"ChartLabels Plugin"},a.prototype.activate=function(a){return{layout:this.layout,didDrawChart:this.didDrawChart}};var b=function(a){var b=document.createElement("div");return b.style.position="absolute",b.style.left=a.x+"px",b.style.top=a.y+"px",b.style.width=a.w+"px",b.style.height=a.h+"px",b};a.prototype.detachLabels_=function(){for(var a=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],b=0;b<a.length;b++){var c=a[b];c&&c.parentNode&&c.parentNode.removeChild(c)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var c=function(a,b,c,d,e){var f=document.createElement("div");f.style.position="absolute",1==c?f.style.left="0px":f.style.left=b.x+"px",f.style.top=b.y+"px",f.style.width=b.w+"px",f.style.height=b.h+"px",f.style.fontSize=a.getOption("yLabelWidth")-2+"px";var g=document.createElement("div");g.style.position="absolute",g.style.width=b.h+"px",g.style.height=b.w+"px",g.style.top=b.h/2-b.w/2+"px",g.style.left=b.w/2-b.h/2+"px",g.style.textAlign="center";var h="rotate("+(1==c?"-":"")+"90deg)";g.style.transform=h,g.style.WebkitTransform=h,g.style.MozTransform=h,g.style.OTransform=h,g.style.msTransform=h,"undefined"!=typeof document.documentMode&&document.documentMode<9&&(g.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+(1==c?"3":"1")+")",g.style.left="0px",g.style.top="0px");var i=document.createElement("div");return i.className=d,i.innerHTML=e,g.appendChild(i),f.appendChild(g),f};return a.prototype.layout=function(a){this.detachLabels_();var d=a.dygraph,e=a.chart_div;if(d.getOption("title")){var f=a.reserveSpaceTop(d.getOption("titleHeight"));this.title_div_=b(f),this.title_div_.style.textAlign="center",this.title_div_.style.fontSize=d.getOption("titleHeight")-8+"px",this.title_div_.style.fontWeight="bold",this.title_div_.style.zIndex=10;var g=document.createElement("div");g.className="dygraph-label dygraph-title",g.innerHTML=d.getOption("title"),this.title_div_.appendChild(g),e.appendChild(this.title_div_)}if(d.getOption("xlabel")){var h=a.reserveSpaceBottom(d.getOption("xLabelHeight"));this.xlabel_div_=b(h),this.xlabel_div_.style.textAlign="center",this.xlabel_div_.style.fontSize=d.getOption("xLabelHeight")-2+"px";var g=document.createElement("div");g.className="dygraph-label dygraph-xlabel",g.innerHTML=d.getOption("xlabel"),this.xlabel_div_.appendChild(g),e.appendChild(this.xlabel_div_)}if(d.getOption("ylabel")){var i=a.reserveSpaceLeft(0);this.ylabel_div_=c(d,i,1,"dygraph-label dygraph-ylabel",d.getOption("ylabel")),e.appendChild(this.ylabel_div_)}if(d.getOption("y2label")&&2==d.numAxes()){var j=a.reserveSpaceRight(0);this.y2label_div_=c(d,j,2,"dygraph-label dygraph-y2label",d.getOption("y2label")),e.appendChild(this.y2label_div_)}},a.prototype.didDrawChart=function(a){var b=a.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=b.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=b.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=b.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=b.getOption("y2label"))},a.prototype.clearChart=function(){},a.prototype.destroy=function(){this.detachLabels_()},a}(),f.Plugins.Grid=function(){var a=function(){};return a.prototype.toString=function(){return"Gridline Plugin"},a.prototype.activate=function(a){return{willDrawChart:this.willDrawChart}},a.prototype.willDrawChart=function(a){function b(a){return Math.round(a)+.5}function c(a){return Math.round(a)-.5}var d,e,f,g,h=a.dygraph,i=a.drawingContext,j=h.layout_,k=a.dygraph.plotter_.area;if(h.getOption("drawYGrid")){for(var l=["y","y2"],m=[],n=[],o=[],p=[],q=[],f=0;f<l.length;f++)o[f]=h.getOptionForAxis("drawGrid",l[f]),o[f]&&(m[f]=h.getOptionForAxis("gridLineColor",l[f]),n[f]=h.getOptionForAxis("gridLineWidth",l[f]),q[f]=h.getOptionForAxis("gridLinePattern",l[f]),p[f]=q[f]&&q[f].length>=2);for(g=j.yticks,i.save(),f=0;f<g.length;f++){var r=g[f][0];o[r]&&(p[r]&&i.installPattern(q[r]),i.strokeStyle=m[r],i.lineWidth=n[r],d=b(k.x),e=c(k.y+g[f][1]*k.h),i.beginPath(),i.moveTo(d,e),i.lineTo(d+k.w,e),i.closePath(),i.stroke(),p[r]&&i.uninstallPattern())}i.restore()}if(h.getOption("drawXGrid")&&h.getOptionForAxis("drawGrid","x")){g=j.xticks,i.save();var q=h.getOptionForAxis("gridLinePattern","x"),p=q&&q.length>=2;for(p&&i.installPattern(q),i.strokeStyle=h.getOptionForAxis("gridLineColor","x"),i.lineWidth=h.getOptionForAxis("gridLineWidth","x"),f=0;f<g.length;f++)d=b(k.x+g[f][0]*k.w),e=c(k.y+k.h),i.beginPath(),i.moveTo(d,e),i.lineTo(d,k.y),i.closePath(),i.stroke();p&&i.uninstallPattern(),i.restore()}},a.prototype.destroy=function(){},a}(),f.Plugins.Legend=function(){var a=function(){this.legend_div_=null,this.is_generated_div_=!1};a.prototype.toString=function(){return"Legend Plugin"};var b,c;a.prototype.activate=function(a){var b,c=a.getOption("labelsDivWidth"),d=a.getOption("labelsDiv");if(d&&null!==d)b="string"==typeof d||d instanceof String?document.getElementById(d):d;else{var e={position:"absolute",fontSize:"14px",zIndex:10,width:c+"px",top:"0px",left:a.size().width-c-2+"px",background:"white",lineHeight:"normal",textAlign:"left",overflow:"hidden"};f.update(e,a.getOption("labelsDivStyles")),b=document.createElement("div"),b.className="dygraph-legend";for(var g in e)if(e.hasOwnProperty(g))try{b.style[g]=e[g]}catch(h){this.warn("You are using unsupported css properties for your browser in labelsDivStyles")}a.graphDiv.appendChild(b),this.is_generated_div_=!0}return this.legend_div_=b,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var d=function(a){var b=document.createElement("span");b.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),a.appendChild(b);var c=b.offsetWidth;return a.removeChild(b),c};return a.prototype.select=function(a){var c=a.selectedX,d=a.selectedPoints,e=b(a.dygraph,c,d,this.one_em_width_);this.legend_div_.innerHTML=e},a.prototype.deselect=function(a){var c=d(this.legend_div_);this.one_em_width_=c;var e=b(a.dygraph,void 0,void 0,c);this.legend_div_.innerHTML=e},a.prototype.didDrawChart=function(a){this.deselect(a)},a.prototype.predraw=function(a){if(this.is_generated_div_){a.dygraph.graphDiv.appendChild(this.legend_div_);var b=a.dygraph.plotter_.area,c=a.dygraph.getOption("labelsDivWidth");this.legend_div_.style.left=b.x+b.w-c-1+"px",this.legend_div_.style.top=b.y+"px",this.legend_div_.style.width=c+"px"}},a.prototype.destroy=function(){this.legend_div_=null},b=function(a,b,d,e){if(a.getOption("showLabelsOnHighlight")!==!0)return"";var g,h,i,j,k,l=a.getLabels();if("undefined"==typeof b){if("always"!=a.getOption("legend"))return"";for(h=a.getOption("labelsSeparateLines"),g="",i=1;i<l.length;i++){var m=a.getPropertiesForSeries(l[i]);m.visible&&(""!==g&&(g+=h?"<br/>":" "),k=a.getOption("strokePattern",l[i]),j=c(k,m.color,e),g+="<span style='font-weight: bold; color: "+m.color+";'>"+j+" "+l[i]+"</span>")}return g}var n=a.optionsViewForAxis_("x"),o=n("valueFormatter");g=o(b,n,l[0],a),""!==g&&(g+=":");var p=[],q=a.numAxes();for(i=0;q>i;i++)p[i]=a.optionsViewForAxis_("y"+(i?1+i:""));var r=a.getOption("labelsShowZeroValues");h=a.getOption("labelsSeparateLines");var s=a.getHighlightSeries();for(i=0;i<d.length;i++){var t=d[i];if((0!==t.yval||r)&&f.isOK(t.canvasy)){h&&(g+="<br/>");var m=a.getPropertiesForSeries(t.name),u=p[m.axis-1],v=u("valueFormatter"),w=v(t.yval,u,t.name,a),x=t.name==s?" class='highlight'":"";g+="<span"+x+"> <b><span style='color: "+m.color+";'>"+t.name+"</span></b>:&nbsp;"+w+"</span>"}}return g},c=function(a,b,c){var d=/MSIE/.test(navigator.userAgent)&&!window.opera;if(d)return"&mdash;";if(!a||a.length<=1)return'<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+b+';"></div>';var e,f,g,h,i,j=0,k=0,l=[];for(e=0;e<=a.length;e++)j+=a[e%a.length];if(i=Math.floor(c/(j-a[0])),i>1){for(e=0;e<a.length;e++)l[e]=a[e]/c;k=l.length}else{for(i=1,e=0;e<a.length;e++)l[e]=a[e]/j;k=l.length+1}var m="";for(f=0;i>f;f++)for(e=0;k>e;e+=2)g=l[e%l.length],h=e<a.length?l[(e+1)%l.length]:0,m+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+h+"em; padding-left: "+g+"em; height: 1px; border-bottom: 2px solid "+b+';"></div>';return m},a}(),f.Plugins.RangeSelector=function(){var a=function(){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera,this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};return a.prototype.toString=function(){return"RangeSelector Plugin"},a.prototype.activate=function(a){return this.dygraph_=a,this.isUsingExcanvas_=a.isUsingExcanvas_,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},a.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null,this.iePanOverlay_=null},a.prototype.getOption_=function(a){return this.dygraph_.getOption(a)},a.prototype.setDefaultOption_=function(a,b){return this.dygraph_.attrs_[a]=b},a.prototype.createInterface_=function(){this.createCanvases_(),this.isUsingExcanvas_&&this.createIEPanOverlay_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(this.dygraph_.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},a.prototype.addToGraph_=function(){var a=this.graphDiv_=this.dygraph_.graphDiv;a.appendChild(this.bgcanvas_),a.appendChild(this.fgcanvas_),a.appendChild(this.leftZoomHandle_),a.appendChild(this.rightZoomHandle_)},a.prototype.removeFromGraph_=function(){var a=this.graphDiv_;a.removeChild(this.bgcanvas_),a.removeChild(this.fgcanvas_),a.removeChild(this.leftZoomHandle_),a.removeChild(this.rightZoomHandle_),this.graphDiv_=null},a.prototype.reserveSpace_=function(a){this.getOption_("showRangeSelector")&&a.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},a.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},a.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},a.prototype.updateVisibility_=function(){var a=this.getOption_("showRangeSelector");if(a)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var b=this.dygraph_;setTimeout(function(){b.width_=0,b.resize()},1)}return a},a.prototype.resize_=function(){function a(a,b){a.style.top=b.y+"px",a.style.left=b.x+"px",a.width=b.w,a.height=b.h,a.style.width=a.width+"px",a.style.height=a.height+"px"}var b=this.dygraph_.layout_.getPlotArea(),c=0;this.getOption_("drawXAxis")&&(c=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:b.x,y:b.y+b.h+c+4,w:b.w,h:this.getOption_("rangeSelectorHeight")},a(this.bgcanvas_,this.canvasRect_),a(this.fgcanvas_,this.canvasRect_)},a.prototype.createCanvases_=function(){this.bgcanvas_=f.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=f.getContext(this.bgcanvas_),this.fgcanvas_=f.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=f.getContext(this.fgcanvas_)},a.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement("div"),this.iePanOverlay_.style.position="absolute",this.iePanOverlay_.style.backgroundColor="white",this.iePanOverlay_.style.filter="alpha(opacity=0)",this.iePanOverlay_.style.display="none",this.iePanOverlay_.style.cursor="move",this.fgcanvas_.appendChild(this.iePanOverlay_)},a.prototype.createZoomHandles_=function(){var a=new Image;a.className="dygraph-rangesel-zoomhandle",a.style.position="absolute",a.style.zIndex=10,a.style.visibility="hidden",a.style.cursor="col-resize",/MSIE 7/.test(navigator.userAgent)?(a.width=7,a.height=14,a.style.backgroundColor="white",a.style.border="1px solid #333333"):(a.width=9,a.height=16,a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="),this.isMobileDevice_&&(a.width*=2,a.height*=2),this.leftZoomHandle_=a,this.rightZoomHandle_=a.cloneNode(!1)},a.prototype.initInteraction_=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o,p=this,q=this.isIE_?document:window,r=0,s=null,t=!1,u=!1,v=!this.isMobileDevice_&&!this.isUsingExcanvas_,w=new f.IFrameTarp;a=function(a){var b=p.dygraph_.xAxisExtremes(),c=(b[1]-b[0])/p.canvasRect_.w,d=b[0]+(a.leftHandlePos-p.canvasRect_.x)*c,e=b[0]+(a.rightHandlePos-p.canvasRect_.x)*c;return[d,e]},b=function(a){return f.cancelEvent(a),t=!0,r=a.clientX,s=a.target?a.target:a.srcElement,("mousedown"===a.type||"dragstart"===a.type)&&(f.addEvent(q,"mousemove",c),f.addEvent(q,"mouseup",d)),p.fgcanvas_.style.cursor="col-resize",w.cover(),!0},c=function(a){if(!t)return!1;f.cancelEvent(a);var b=a.clientX-r;if(Math.abs(b)<4)return!0;r=a.clientX;var c,d=p.getZoomHandleStatus_();s==p.leftZoomHandle_?(c=d.leftHandlePos+b,c=Math.min(c,d.rightHandlePos-s.width-3),c=Math.max(c,p.canvasRect_.x)):(c=d.rightHandlePos+b,c=Math.min(c,p.canvasRect_.x+p.canvasRect_.w),c=Math.max(c,d.leftHandlePos+s.width+3));var g=s.width/2;return s.style.left=c-g+"px",p.drawInteractiveLayer_(),v&&e(),!0},d=function(a){return t?(t=!1,w.uncover(),f.removeEvent(q,"mousemove",c),f.removeEvent(q,"mouseup",d),p.fgcanvas_.style.cursor="default",v||e(),!0):!1},e=function(){try{var b=p.getZoomHandleStatus_();if(p.isChangingRange_=!0,b.isZoomed){var c=a(b);p.dygraph_.doZoomXDates_(c[0],c[1])}else p.dygraph_.resetZoom()}finally{p.isChangingRange_=!1}},g=function(a){if(p.isUsingExcanvas_)return a.srcElement==p.iePanOverlay_;var b=p.leftZoomHandle_.getBoundingClientRect(),c=b.left+b.width/2;b=p.rightZoomHandle_.getBoundingClientRect();var d=b.left+b.width/2;return a.clientX>c&&a.clientX<d},h=function(a){return!u&&g(a)&&p.getZoomHandleStatus_().isZoomed?(f.cancelEvent(a),u=!0,r=a.clientX,"mousedown"===a.type&&(f.addEvent(q,"mousemove",i),f.addEvent(q,"mouseup",j)),!0):!1},i=function(a){if(!u)return!1;f.cancelEvent(a);var b=a.clientX-r;if(Math.abs(b)<4)return!0;r=a.clientX;var c=p.getZoomHandleStatus_(),d=c.leftHandlePos,e=c.rightHandlePos,g=e-d;d+b<=p.canvasRect_.x?(d=p.canvasRect_.x,e=d+g):e+b>=p.canvasRect_.x+p.canvasRect_.w?(e=p.canvasRect_.x+p.canvasRect_.w,d=e-g):(d+=b,e+=b);var h=p.leftZoomHandle_.width/2;return p.leftZoomHandle_.style.left=d-h+"px",p.rightZoomHandle_.style.left=e-h+"px",p.drawInteractiveLayer_(),v&&k(),!0},j=function(a){return u?(u=!1,f.removeEvent(q,"mousemove",i),f.removeEvent(q,"mouseup",j),v||k(),!0):!1},k=function(){try{p.isChangingRange_=!0,p.dygraph_.dateWindow_=a(p.getZoomHandleStatus_()),p.dygraph_.drawGraph_(!1)}finally{p.isChangingRange_=!1}},l=function(a){if(!t&&!u){var b=g(a)?"move":"default";b!=p.fgcanvas_.style.cursor&&(p.fgcanvas_.style.cursor=b)}},m=function(a){"touchstart"==a.type&&1==a.targetTouches.length?b(a.targetTouches[0])&&f.cancelEvent(a):"touchmove"==a.type&&1==a.targetTouches.length?c(a.targetTouches[0])&&f.cancelEvent(a):d(a)},n=function(a){"touchstart"==a.type&&1==a.targetTouches.length?h(a.targetTouches[0])&&f.cancelEvent(a):"touchmove"==a.type&&1==a.targetTouches.length?i(a.targetTouches[0])&&f.cancelEvent(a):j(a)},o=function(a,b){for(var c=["touchstart","touchend","touchmove","touchcancel"],d=0;d<c.length;d++)p.dygraph_.addAndTrackEvent(a,c[d],b)},this.setDefaultOption_("interactionModel",f.Interaction.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var x=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,x,b),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,x,b),this.isUsingExcanvas_?this.dygraph_.addAndTrackEvent(this.iePanOverlay_,"mousedown",h):(this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",h),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",l)),this.hasTouchInterface_&&(o(this.leftZoomHandle_,m),o(this.rightZoomHandle_,m),o(this.fgcanvas_,n))},a.prototype.drawStaticLayer_=function(){var a=this.bgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(b){f.warn(b)}var c=.5;this.bgcanvas_ctx_.lineWidth=1,a.strokeStyle="gray",a.beginPath(),a.moveTo(c,c),a.lineTo(c,this.canvasRect_.h-c),a.lineTo(this.canvasRect_.w-c,this.canvasRect_.h-c),a.lineTo(this.canvasRect_.w-c,c),a.stroke()},a.prototype.drawMiniPlot_=function(){var a=this.getOption_("rangeSelectorPlotFillColor"),b=this.getOption_("rangeSelectorPlotStrokeColor");if(a||b){var c=this.getOption_("stepPlot"),d=this.computeCombinedSeriesAndLimits_(),e=d.yMax-d.yMin,f=this.bgcanvas_ctx_,g=.5,h=this.dygraph_.xAxisExtremes(),i=Math.max(h[1]-h[0],1e-30),j=(this.canvasRect_.w-g)/i,k=(this.canvasRect_.h-g)/e,l=this.canvasRect_.w-g,m=this.canvasRect_.h-g,n=null,o=null;f.beginPath(),f.moveTo(g,m);for(var p=0;p<d.data.length;p++){var q=d.data[p],r=null!==q[0]?(q[0]-h[0])*j:NaN,s=null!==q[1]?m-(q[1]-d.yMin)*k:NaN;isFinite(r)&&isFinite(s)?(null===n?f.lineTo(r,m):c&&f.lineTo(r,o),f.lineTo(r,s),n=r,o=s):(null!==n&&(c?(f.lineTo(r,o),f.lineTo(r,m)):f.lineTo(n,m)),n=o=null)}if(f.lineTo(l,m),f.closePath(),a){var t=this.bgcanvas_ctx_.createLinearGradient(0,0,0,m);t.addColorStop(0,"white"),t.addColorStop(1,a),this.bgcanvas_ctx_.fillStyle=t,f.fill()}b&&(this.bgcanvas_ctx_.strokeStyle=b,this.bgcanvas_ctx_.lineWidth=1.5,f.stroke())}},a.prototype.computeCombinedSeriesAndLimits_=function(){var a,b,c,d,e,g,h,i,j=this.dygraph_.rawData_,k=this.getOption_("logscale"),l=[];for(d=0;d<j.length;d++)if(j[d].length>1&&null!==j[d][1]){if(c="number"!=typeof j[d][1])for(a=[],b=[],g=0;g<j[d][1].length;g++)a.push(0),b.push(0);break}for(d=0;d<j.length;d++){var m=j[d];if(h=m[0],c)for(g=0;g<a.length;g++)a[g]=b[g]=0;else a=b=0;for(e=1;e<m.length;e++)if(this.dygraph_.visibility()[e-1]){var n;if(c)for(g=0;g<a.length;g++)n=m[e][g],null===n||isNaN(n)||(a[g]+=n,b[g]++);else{if(n=m[e],null===n||isNaN(n))continue;a+=n,b++}}if(c){for(g=0;g<a.length;g++)a[g]/=b[g];i=a.slice(0)}else i=a/b;l.push([h,i])}if(l=this.dygraph_.rollingAverage(l,this.dygraph_.rollPeriod_),"number"!=typeof l[0][1])for(d=0;d<l.length;d++)i=l[d][1],l[d][1]=i[0];var o=Number.MAX_VALUE,p=-Number.MAX_VALUE;for(d=0;d<l.length;d++)i=l[d][1],null!==i&&isFinite(i)&&(!k||i>0)&&(o=Math.min(o,i),p=Math.max(p,i));var q=.25;if(k)for(p=f.log10(p),p+=p*q,o=f.log10(o),d=0;d<l.length;d++)l[d][1]=f.log10(l[d][1]);else{var r,s=p-o;r=s<=Number.MIN_VALUE?p*q:s*q,p+=r,o-=r}return{data:l,yMin:o,yMax:p}},a.prototype.placeZoomHandles_=function(){var a=this.dygraph_.xAxisExtremes(),b=this.dygraph_.xAxisRange(),c=a[1]-a[0],d=Math.max(0,(b[0]-a[0])/c),e=Math.max(0,(a[1]-b[1])/c),f=this.canvasRect_.x+this.canvasRect_.w*d,g=this.canvasRect_.x+this.canvasRect_.w*(1-e),h=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),i=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=f-i+"px",this.leftZoomHandle_.style.top=h+"px",this.rightZoomHandle_.style.left=g-i+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},a.prototype.drawInteractiveLayer_=function(){var a=this.fgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var b=1,c=this.canvasRect_.w-b,d=this.canvasRect_.h-b,e=this.getZoomHandleStatus_();if(a.strokeStyle="black",e.isZoomed){var f=Math.max(b,e.leftHandlePos-this.canvasRect_.x),g=Math.min(c,e.rightHandlePos-this.canvasRect_.x);a.fillStyle="rgba(240, 240, 240, 0.6)",a.fillRect(0,0,f,this.canvasRect_.h),a.fillRect(g,0,this.canvasRect_.w-g,this.canvasRect_.h),a.beginPath(),a.moveTo(b,b),a.lineTo(f,b),a.lineTo(f,d),a.lineTo(g,d),a.lineTo(g,b),a.lineTo(c,b),a.stroke(),this.isUsingExcanvas_&&(this.iePanOverlay_.style.width=g-f+"px",this.iePanOverlay_.style.left=f+"px",this.iePanOverlay_.style.height=d+"px",this.iePanOverlay_.style.display="inline")}else a.beginPath(),a.moveTo(b,b),a.lineTo(b,d),a.lineTo(c,d),a.lineTo(c,b),a.stroke(),this.iePanOverlay_&&(this.iePanOverlay_.style.display="none")},a.prototype.getZoomHandleStatus_=function(){var a=this.leftZoomHandle_.width/2,b=parseFloat(this.leftZoomHandle_.style.left)+a,c=parseFloat(this.rightZoomHandle_.style.left)+a;return{leftHandlePos:b,rightHandlePos:c,isZoomed:b-1>this.canvasRect_.x||c+1<this.canvasRect_.x+this.canvasRect_.w}},a}(),f.PLUGINS.push(f.Plugins.Legend,f.Plugins.Axes,f.Plugins.RangeSelector,f.Plugins.ChartLabels,f.Plugins.Annotations,f.Plugins.Grid),f}),define("helpers/graph-utils",["jquery","underscore","backbone","templates"],function(a,b,c,d){"use strict";function e(a){return a.replace(/\./g,"_")}function f(c){var f=d[c];return function(c){return function(d,g,h){return b.map(c,function(b){return a.trim(f({metric:b,hostname:e(d),id:g,clusterName:h}))})}}}return{makeCPUTargets:f("app/scripts/templates/graphite/CPUTargets.ejs"),makeCPUDetailedTargets:f("app/scripts/templates/graphite/CPUDetailedTargets.ejs"),makeDiskSpaceTargets:f("app/scripts/templates/graphite/DiskSpaceTargets.ejs"),makeOpLatencyTargets:f("app/scripts/templates/graphite/OSDOpLatencyTarget.ejs"),makeFilestoreTargets:f("app/scripts/templates/graphite/OSDFilestoreTarget.ejs"),makeLoadAvgTargets:f("app/scripts/templates/graphite/LoadAvgTarget.ejs"),makeMemoryTargets:f("app/scripts/templates/graphite/MemoryTarget.ejs"),makeIOStatIOPSTargets:f("app/scripts/templates/graphite/IOStatIOPSTargets.ejs"),makeNetworkTargets:f("app/scripts/templates/graphite/NetworkTargets.ejs"),makePoolIOPSTargets:f("app/scripts/templates/graphite/PoolIOPSTarget.ejs"),makePoolDiskFreeTargets:f("app/scripts/templates/graphite/PoolDiskFreeTarget.ejs"),makeHeightWidthParams:function(a,c){var d=b.template("width=<%- args.width %>&height=<%- args.height %>",void 0,{variable:"args"});return function(){return d({width:a,height:c})}},makeColorListParams:function(a){var c=b.template("colorList=<%- args.list %>",void 0,{variable:"args"}),d=a.join(","),e=c({list:d});return function(){return b.identity(e)}},makeBaseUrl:function(a){var c=b.template("<%= args.host %>/render/?",void 0,{variable:"args"});return function(){return c({host:a})}},makeTargets:function(a){var c=b.template("target=<%- args.target %>",void 0,{variable:"args"});return function(){return"target="+b.reduce(a.apply(this,arguments),function(a,b){return a+"&"+c({target:b
})})}},makeParam:function(a,c){var d=b.template("<%- key %>=<%- value %>",{key:a,value:c});return function(){return d}},makeGraphURL:function(a,c){var d=a()+b.first(c)(),e=b.rest(c);return function(){var a=arguments;return b.reduce(e,function(b,c){return b+"&"+c.apply(this,a)},d)}},graphiteJsonArrayToDygraph:function(a){var c=b.map(a.datapoints,function(a){return b.map(a,function(a,b){return 0===b?new Date(1e3*a):a})});return{labels:a.targets,data:c}},sumSeries:function(a){return function(){var c=arguments;return["sumSeries("+b.reduce(a.apply(this,c),function(a,b){return a+","+b})+")"]}}}}),define("views/iops-dash-view",["jquery","underscore","backbone","templates","dygraphs","helpers/graph-utils","helpers/gauge-helper","marionette"],function(a,b,c,d,e,f,g){"use strict";var h=c.Marionette.ItemView.extend({className:"custom-gutter col-sm-12 col-xs-12 col-lg-6 col-md-6",template:d["app/scripts/templates/iops-dash.ejs"],ui:{canvas:".iopscanvas",headline:".headline",legend:".legend"},initialize:function(){this.Dygraph=e,this.App=c.Marionette.getOption(this,"App"),g(this),this.graphiteHost=c.Marionette.getOption(this,"graphiteHost"),this.baseUrl=f.makeBaseUrl(this.graphiteHost);var a=["num_read","num_write"],d=f.makePoolIOPSTargets(a),h=f.makeTargets(f.sumSeries(d)),i=[f.makeParam("format","json-array"),f.makeParam("from","-1d"),h];this.getUrl=f.makeGraphURL(this.baseUrl,i),b.bindAll(this,"postRender","updateGraph","forceUpdate"),this.listenToOnce(this,"render",this.postRender),this.listenTo(this.App.vent,"iops:update",this.updateGraph),this.listenTo(this.App.vent,"dashboard:refresh",this.forceUpdate)},forceUpdate:function(){this.dygraph&&(this.dygraph.destroy(),this.dygraph=null),this.postRender()},data:[[1,10,120],[2,20,80],[3,50,60],[4,70,80]],getData:function(){var b=this.App.ReqRes.request("get:cluster").get("id");return a.ajax({url:this.getUrl("","all",b),dataType:"json"})},updateGraph:function(){var a=this.dygraph;this.getData().done(function(b){var c=f.graphiteJsonArrayToDygraph(b);a.updateOptions({file:c.data}),this.updateIOPS(c)}.bind(this))},updateIOPS:function(a){var c=0,d=0;a.data&&a.data.length&&(c=b.last(a.data,3),d=b.find(c.reverse(),function(a){return null!==a[1]}),d=void 0===d?0:d[1]),this.ui.headline.text(d)},postRender:function(){var a=this.getData(),b=this.ui.canvas[0],c=this.ui.legend[0];a.done(function(a){var d=f.graphiteJsonArrayToDygraph(a);this.dygraph=new e(b,d.data,{axisLabelFontSize:10,labels:["Date","IOPS"],labelsKMB:!0,labelsDiv:c,interactionModel:{}}),this.updateIOPS(d)}.bind(this))}});return h}),function(){define("Backbone.Modal",["backbone"],function(a){var b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};if("undefined"==typeof a||null===a)throw new Error("Backbone is not defined. Please include the latest version from http://documentcloud.github.com/backbone/backbone.js");return a.Modal=function(c){function f(){this.triggerCancel=b(this.triggerCancel,this),this.triggerSubmit=b(this.triggerSubmit,this),this.triggerView=b(this.triggerView,this),this.clickOutside=b(this.clickOutside,this),this.checkKey=b(this.checkKey,this),this.args=Array.prototype.slice.apply(arguments),a.View.prototype.constructor.apply(this,this.args),this.setUIElements(),this.delegateModalEvents()}return d(f,c),f.prototype.prefix="bbm",f.prototype.render=function(b){var c,d,e=this;return null==b&&(b={}),c=this.serializeData(),this.$el.addClass(""+this.prefix+"-wrapper"),this.modalEl=a.$("<div />").addClass(""+this.prefix+"-modal"),this.template&&this.modalEl.html(this.template(c)),this.$el.html(this.modalEl),a.$("body").on("keyup",this.checkKey),a.$("body").on("click",this.clickOutside),this.viewContainer?(this.viewContainerEl=this.modalEl.find(this.viewContainer),this.viewContainerEl.addClass(""+this.prefix+"-modal__views")):this.viewContainerEl=this.modalEl,this.$el.show(),(null!=(d=this.views)?d.length:void 0)>0&&this.openAt(0),"function"==typeof this.onRender&&this.onRender(),this.modalEl.css({opacity:0}),this.$el.fadeIn({duration:100,complete:function(){return e.modalEl.css({opacity:1}).addClass(""+e.prefix+"-modal--open")}}),this},f.prototype.setUIElements=function(){var a;if(this.template=this.getOption("template"),this.views=this.getOption("views"),null!=(a=this.views)&&(a.length=_.size(this.views)),this.viewContainer=this.getOption("viewContainer"),this.$el.hide(),_.isUndefined(this.template)&&_.isUndefined(this.views))throw new Error("No template or views defined for Backbone.Modal");if(this.template&&this.views&&_.isUndefined(this.viewContainer))throw new Error("No viewContainer defined for Backbone.Modal")},f.prototype.getOption=function(a){return a?this.options&&e.call(this.options,a)>=0&&null!=this.options[a]?this.options[a]:this[a]:void 0},f.prototype.serializeData=function(){var a;return a={},this.model&&(a=_.extend(a,this.model.toJSON())),this.collection&&(a=_.extend(a,{items:this.collection.toJSON()})),a},f.prototype.delegateModalEvents=function(){var a,b,c,d,e,f,g;this.active=!0,a=this.getOption("cancelEl"),e=this.getOption("submitEl"),e&&this.$el.on("click",e,this.triggerSubmit),a&&this.$el.on("click",a,this.triggerCancel),g=[];for(b in this.views)"length"!==b?(c=b.match(/^(\S+)\s*(.*)$/),f=c[1],d=c[2],g.push(this.$el.on(f,d,this.views[b],this.triggerView))):g.push(void 0);return g},f.prototype.undelegateModalEvents=function(){var a,b,c,d,e,f,g;this.active=!1,a=this.getOption("cancelEl"),e=this.getOption("submitEl"),e&&this.$el.off("click",e,this.triggerSubmit),a&&this.$el.off("click",a,this.triggerCancel),g=[];for(b in this.views)"length"!==b?(c=b.match(/^(\S+)\s*(.*)$/),f=c[1],d=c[2],g.push(this.$el.off(f,d,this.views[b],this.triggerView))):g.push(void 0);return g},f.prototype.checkKey=function(a){if(this.active)switch(a.keyCode){case 27:return this.triggerCancel();case 13:return this.triggerSubmit()}},f.prototype.clickOutside=function(b){return a.$(b.target).hasClass(""+this.prefix+"-wrapper")&&this.active?this.triggerCancel(null,!0):void 0},f.prototype.buildView=function(b){var c;if(b)return _.isFunction(b)?(c=new b(this.args[0]),c instanceof a.View?{el:c.render().$el,view:c}:{el:b(this.args[0])}):{view:b,el:b.$el}},f.prototype.triggerView=function(a){var b,c,d,e;null!=a&&"function"==typeof a.preventDefault&&a.preventDefault(),e=a.data,c=this.buildView(e.view),this.currentView&&(this.previousView=this.currentView),this.currentView=c.view||c.el,b=0;for(d in this.views)e.view===this.views[d].view&&(this.currentIndex=b),b++;return e.onActive&&(_.isFunction(e.onActive)?e.onActive(this):_.isString(e.onActive)&&this[e.onActive].call(this,e)),this.shouldAnimate?this.animateToView(c.el):(this.shouldAnimate=!0,this.$(this.viewContainerEl).html(c.el))},f.prototype.animateToView=function(b){var c,d,e,f,g,h,i=this;return f={position:"relative",top:-9999,left:-9999},g=a.$("<tester/>").css(f),g.html(this.$el.clone().css(f)),0!==a.$("tester").length?a.$("tester").replaceWith(g):a.$("body").append(g),c=this.viewContainer?g.find(this.viewContainer):g.find("."+this.prefix+"-modal"),c.removeAttr("style"),e=c.outerHeight(),c.html(b),d=c.outerHeight(),e===d?(this.$(this.viewContainerEl).html(b),null!=(h=this.previousView)&&"function"==typeof h.close?h.close():void 0):(this.$(this.viewContainerEl).css({opacity:0}),this.$(this.viewContainerEl).animate({height:d},100,function(){var a;return i.$(i.viewContainerEl).css({opacity:1}).removeAttr("style"),i.$(i.viewContainerEl).html(b),null!=(a=i.previousView)&&"function"==typeof a.close?a.close():void 0}))},f.prototype.triggerSubmit=function(a){return null!=a&&a.preventDefault(),this.beforeSubmit&&this.beforeSubmit()===!1?void 0:("function"==typeof this.submit&&this.submit(),this.regionEnabled?this.trigger("modal:close"):this.close())},f.prototype.triggerCancel=function(a){return null!=a&&a.preventDefault(),this.beforeCancel&&this.beforeCancel()===!1?void 0:("function"==typeof this.cancel&&this.cancel(),this.regionEnabled?this.trigger("modal:close"):this.close())},f.prototype.close=function(){var b=this;return a.$("body").off("keyup",this.checkKey),a.$("body").off("click",this.clickOutside),"function"==typeof this.onClose&&this.onClose(),this.shouldAnimate=!1,this.modalEl.addClass("{@prefix}-modal--close"),this.$el.fadeOut({duration:200}),_.delay(function(){var a;return null!=(a=b.currentView)&&"function"==typeof a.remove&&a.remove(),b.remove()},200)},f.prototype.openAt=function(a){var b,c,d;b=0;for(c in this.views)"length"!==c&&(b===a&&(d=this.views[c]),b++);return d&&(this.currentIndex=a,this.triggerView({data:d})),this},f.prototype.next=function(){return this.currentIndex+1<this.views.length?this.openAt(this.currentIndex+1):void 0},f.prototype.previous=function(){return this.currentIndex-1<this.views.length-1?this.openAt(this.currentIndex-1):void 0},f}(a.View),a.Modal})}.call(this),define("views/health-view",["jquery","underscore","backbone","templates","humanize","helpers/gauge-helper","l20nCtx!locales/{{locale}}/strings","Backbone.Modal","marionette"],function(a,b,c,d,e,f,g){"use strict";return c.Marionette.ItemView.extend({className:"col-lg-3 col-md-3 col-sm-6 col-xs-6 custom-gutter",template:d["app/scripts/templates/health.ejs"],updateTemplate:b.template("<%- time %>"),badgeTemplate:b.template('<span class="badge <%- clazz %>"><%- count %></span> <%- description %>'),rowTemplate:b.template('<tr><td><span class="<%- clazz %>"><%- severity %></span></td><td><%- details %></td></tr>'),healthTemplate:b.template('<i class="fa <%- clazz %>"></i>'),timer:null,events:{"click .badge":"badgeHandler"},ui:{headline:".headline",subline:".subline",subtext:".subtext"},modelEvents:{change:"updateView"},initialize:function(){b.bindAll(this,"updateView","set","updateTimer"),this.App=c.Marionette.getOption(this,"App"),this.App&&(f(this),this.listenTo(this.App.vent,"health:update",this.set),this.listenTo(this.App.vent,"krakenHeartBeat:update",this.updateTimer)),this.lastUpdateUnix=Date.now(),this.timerWrapper(this.updateUI)},badgeHandler:function(){var e=b.reduce(this.model.toJSON().report.summary,function(a,b){var c="HEALTH_WARN"===b.severity?"WARN":"ERROR",d=b.summary;return a.push(this.rowTemplate({severity:c,clazz:"WARN"===c?"text-warning":"text-danger",details:d})),a}.bind(this),[]),f=c.Modal.extend({template:function(){return d["app/scripts/templates/health-modal.ejs"]({content:e.join("")})},cancelEl:".bbm-button"}),g=new f;a("body").append(g.render().el)},updateUI:function(){this.ui.subline.text(this.updateTemplate({time:e.relativeTime(this.lastUpdateUnix/1e3)}))},set:function(a){this.model.set(a.toJSON())},serializeData:function(){var a=this.model.toJSON(),c="",d="status:ok",e="ok fa-check";if(a.report.overall_status&&a.report.summary.length){var f=b.reduce(a.report.summary,function(a,b){return"HEALTH_WARN"===b.severity?a.warn+=1:a.error+=1,a},{warn:0,error:0});f.warn>0&&(c+=this.badgeTemplate({count:f.warn,clazz:"alert-warning",description:"warnings"})),f.error>0&&(c+=this.badgeTemplate({count:f.error,clazz:"alert-danger",description:"errors"}))}switch(a.report.overall_status){case"HEALTH_WARN":d="status:warn",e="fa-warning warn";break;case"HEALTH_ERR":e="fail fa-exclamation-circle",d="status:fail"}return{evt:d,healthText:this.healthTemplate({clazz:e}),relTimeStr:c,title:g.getSync("healthOSDTitle")}},timerWrapper:function(a){var b=this;return setTimeout(function(){a.call(b),b.timer=b.timerWrapper(a)},1e3)},updateView:function(){var a=this.serializeData();this.ui.headline.html(a.healthText),this.ui.subtext.html(a.relTimeStr),this.trigger(a.evt)},updateTimer:function(a){this.lastUpdateUnix=a.get("cluster_update_time_unix")}})}),!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define("react",a):"undefined"!=typeof window?window.React=a():"undefined"!=typeof global?global.React=a():"undefined"!=typeof self&&(self.React=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){var b=e(a);if(!b)throw new Error(f('Tried to get element with id of "%s" but it is not present on the page.',a));return b}var e=a("./ge"),f=a("./ex");b.exports=d},{"./ex":96,"./ge":100}],2:[function(a,b,c){function d(a,b){return a.classList?!!b&&a.classList.contains(b):(" "+a.className+" ").indexOf(" "+b+" ")>-1}var e=a("./invariant"),f={addClass:function(a,b){return e(!/\s/.test(b),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',b),b&&(a.classList?a.classList.add(b):d(a,b)||(a.className=a.className+" "+b)),a},removeClass:function(a,b){return e(!/\s/.test(b),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',b),b&&(a.classList?a.classList.remove(b):d(a,b)&&(a.className=a.className.replace(new RegExp("(^|\\s)"+b+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),a},conditionClass:function(a,b,c){return(c?f.addClass:f.removeClass)(a,b)}};b.exports=f},{"./invariant":109}],3:[function(a,b,c){"use strict";var d={fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,zIndex:!0,zoom:!0},e={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},f={isUnitlessNumber:d,shorthandPropertyExpansions:e};b.exports=f},{}],4:[function(a,b,c){"use strict";var d=a("./CSSProperty"),e=a("./dangerousStyleValue"),f=a("./escapeTextForBrowser"),g=a("./hyphenate"),h=a("./memoizeStringOnly"),i=h(function(a){return f(g(a))}),j={createMarkupForStyles:function(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];null!=d&&(b+=i(c)+":",b+=e(c,d)+";")}return b||null},setValueForStyles:function(a,b){var c=a.style;for(var f in b)if(b.hasOwnProperty(f)){var g=e(f,b[f]);if(g)c[f]=g;else{var h=d.shorthandPropertyExpansions[f];if(h)for(var i in h)c[i]="";else c[f]=""}}}};b.exports=j},{"./CSSProperty":3,"./dangerousStyleValue":93,"./escapeTextForBrowser":95,"./hyphenate":108,"./memoizeStringOnly":117}],5:[function(a,b,c){"use strict";var d={},e={putListener:function(a,b,c){var e=d[b]||(d[b]={});e[a]=c},getListener:function(a,b){var c=d[b];return c&&c[a]},deleteListener:function(a,b){var c=d[b];c&&delete c[a]},deleteAllListeners:function(a){for(var b in d)delete d[b][a]},__purge:function(){d={}}};b.exports=e},{}],6:[function(a,b,c){"use strict";function d(a){return"SELECT"===a.nodeName||"INPUT"===a.nodeName&&"file"===a.type}function e(a){var b=v.getPooled(A.change,C,a);t.accumulateTwoPhaseDispatches(b),s.enqueueEvents(b),s.processEventQueue()}function f(a,b){B=a,C=b,B.attachEvent("onchange",e)}function g(){B&&(B.detachEvent("onchange",e),B=null,C=null)}function h(a,b,c){return a===z.topChange?c:void 0}function i(a,b,c){a===z.topFocus?(g(),f(b,c)):a===z.topBlur&&g()}function j(a,b){B=a,C=b,D=a.value,E=Object.getOwnPropertyDescriptor(a.constructor.prototype,"value"),Object.defineProperty(B,"value",H),B.attachEvent("onpropertychange",l)}function k(){B&&(delete B.value,B.detachEvent("onpropertychange",l),B=null,C=null,D=null,E=null)}function l(a){if("value"===a.propertyName){var b=a.srcElement.value;b!==D&&(D=b,e(a))}}function m(a,b,c){return a===z.topInput?c:void 0}function n(a,b,c){a===z.topFocus?(k(),j(b,c)):a===z.topBlur&&k()}function o(a,b,c){return a!==z.topSelectionChange&&a!==z.topKeyUp&&a!==z.topKeyDown||!B||B.value===D?void 0:(D=B.value,C)}function p(a){return"INPUT"===a.nodeName&&("checkbox"===a.type||"radio"===a.type)}function q(a,b,c){return a===z.topClick?c:void 0}var r=a("./EventConstants"),s=a("./EventPluginHub"),t=a("./EventPropagators"),u=a("./ExecutionEnvironment"),v=a("./SyntheticEvent"),w=a("./isEventSupported"),x=a("./isTextInputElement"),y=a("./keyOf"),z=r.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:y({onChange:null}),captured:y({onChangeCapture:null})}}},B=null,C=null,D=null,E=null,F=!1;u.canUseDOM&&(F=w("change")&&(!("documentMode"in document)||document.documentMode>8));var G=!1;u.canUseDOM&&(G=w("input")&&(!("documentMode"in document)||document.documentMode>9));var H={get:function(){return E.get.call(this)},set:function(a){D=""+a,E.set.call(this,a)}},I={eventTypes:A,extractEvents:function(a,b,c,e){var f,g;if(d(b)?F?f=h:g=i:x(b)?G?f=m:(f=o,g=n):p(b)&&(f=q),f){var j=f(a,b,c);if(j){var k=v.getPooled(A.change,j,e);return t.accumulateTwoPhaseDispatches(k),k}}g&&g(a,b,c)}};b.exports=I},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./SyntheticEvent":76,"./isEventSupported":110,"./isTextInputElement":112,"./keyOf":116}],7:[function(a,b,c){"use strict";function d(a){switch(a){case r.topCompositionStart:return t.compositionStart;case r.topCompositionEnd:return t.compositionEnd;case r.topCompositionUpdate:return t.compositionUpdate}}function e(a,b){return a===r.topKeyDown&&b.keyCode===p}function f(a,b){switch(a){case r.topKeyUp:return-1!==o.indexOf(b.keyCode);case r.topKeyDown:return b.keyCode!==p;case r.topKeyPress:case r.topMouseDown:case r.topBlur:return!0;default:return!1}}function g(a){this.root=a,this.startSelection=k.getSelection(a),this.startValue=this.getText()}var h=a("./EventConstants"),i=a("./EventPropagators"),j=a("./ExecutionEnvironment"),k=a("./ReactInputSelection"),l=a("./SyntheticCompositionEvent"),m=a("./getTextContentAccessor"),n=a("./keyOf"),o=[9,13,27,32],p=229,q=j.canUseDOM&&"CompositionEvent"in window,r=h.topLevelTypes,s=null,t={compositionEnd:{phasedRegistrationNames:{bubbled:n({onCompositionEnd:null}),captured:n({onCompositionEndCapture:null})}},compositionStart:{phasedRegistrationNames:{bubbled:n({onCompositionStart:null}),captured:n({onCompositionStartCapture:null})}},compositionUpdate:{phasedRegistrationNames:{bubbled:n({onCompositionUpdate:null}),captured:n({onCompositionUpdateCapture:null})}}};g.prototype.getText=function(){return this.root.value||this.root[m()]},g.prototype.getData=function(){var a=this.getText(),b=this.startSelection.start,c=this.startValue.length-this.startSelection.end;return a.substr(b,a.length-c-b)};var u={eventTypes:t,extractEvents:function(a,b,c,h){var j,k;if(q?j=d(a):s?f(a,h)&&(j=t.compositionEnd,k=s.getData(),s=null):e(a,h)&&(j=t.start,s=new g(b)),j){var m=l.getPooled(j,c,h);return k&&(m.data=k),i.accumulateTwoPhaseDispatches(m),m}}};b.exports=u},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":50,"./SyntheticCompositionEvent":75,"./getTextContentAccessor":106,"./keyOf":116}],8:[function(a,b,c){"use strict";function d(a,b,c){var d=a.childNodes;d[c]!==b&&(b.parentNode===a&&a.removeChild(b),c>=d.length?a.appendChild(b):a.insertBefore(b,d[c]))}var e=a("./Danger"),f=a("./ReactMultiChildUpdateTypes"),g=a("./getTextContentAccessor"),h=g()||"NA",i={dangerouslyReplaceNodeWithMarkup:e.dangerouslyReplaceNodeWithMarkup,processUpdates:function(a,b){for(var c,g=null,i=null,j=0;c=a[j];j++)if(c.type===f.MOVE_EXISTING||c.type===f.REMOVE_NODE){var k=c.fromIndex,l=c.parentNode.childNodes[k],m=c.parentID;g=g||{},g[m]=g[m]||[],g[m][k]=l,i=i||[],i.push(l)}var n=e.dangerouslyRenderMarkup(b);if(i)for(var o=0;o<i.length;o++)i[o].parentNode.removeChild(i[o]);for(var p=0;c=a[p];p++)switch(c.type){case f.INSERT_MARKUP:d(c.parentNode,n[c.markupIndex],c.toIndex);break;case f.MOVE_EXISTING:d(c.parentNode,g[c.parentID][c.fromIndex],c.toIndex);break;case f.TEXT_CONTENT:c.parentNode[h]=c.textContent;break;case f.REMOVE_NODE:}}};b.exports=i},{"./Danger":11,"./ReactMultiChildUpdateTypes":57,"./getTextContentAccessor":106}],9:[function(a,b,c){"use strict";var d=a("./invariant"),e={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16,injectDOMPropertyConfig:function(a){var b=a.Properties||{},c=a.DOMAttributeNames||{},f=a.DOMPropertyNames||{},h=a.DOMMutationMethods||{};a.isCustomAttribute&&g._isCustomAttributeFunctions.push(a.isCustomAttribute);for(var i in b){d(!g.isStandardName[i],"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",i),g.isStandardName[i]=!0;var j=i.toLowerCase();g.getPossibleStandardName[j]=i;var k=c[i];k&&(g.getPossibleStandardName[k]=i),g.getAttributeName[i]=k||j,g.getPropertyName[i]=f[i]||i;var l=h[i];l&&(g.getMutationMethod[i]=l);var m=b[i];g.mustUseAttribute[i]=m&e.MUST_USE_ATTRIBUTE,g.mustUseProperty[i]=m&e.MUST_USE_PROPERTY,g.hasSideEffects[i]=m&e.HAS_SIDE_EFFECTS,g.hasBooleanValue[i]=m&e.HAS_BOOLEAN_VALUE,g.hasPositiveNumericValue[i]=m&e.HAS_POSITIVE_NUMERIC_VALUE,d(!g.mustUseAttribute[i]||!g.mustUseProperty[i],"DOMProperty: Cannot require using both attribute and property: %s",i),d(g.mustUseProperty[i]||!g.hasSideEffects[i],"DOMProperty: Properties that have side effects must use property: %s",i),d(!g.hasBooleanValue[i]||!g.hasPositiveNumericValue[i],"DOMProperty: Cannot have both boolean and positive numeric value: %s",i)}}},f={},g={isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasPositiveNumericValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(a){return g._isCustomAttributeFunctions.some(function(b){return b.call(null,a)})},getDefaultValueForProperty:function(a,b){var c,d=f[a];return d||(f[a]=d={}),b in d||(c=document.createElement(a),d[b]=c[b]),d[b]},injection:e};b.exports=g},{"./invariant":109}],10:[function(a,b,c){"use strict";function d(a,b){return null==b||e.hasBooleanValue[a]&&!b||e.hasPositiveNumericValue[a]&&(isNaN(b)||1>b)}var e=a("./DOMProperty"),f=a("./escapeTextForBrowser"),g=a("./memoizeStringOnly"),h=g(function(a){return f(a)+'="'}),i={__owner__:!0,children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},j={},k=function(a){if(!i[a]&&!j[a]){j[a]=!0;var b=a.toLowerCase(),c=e.isCustomAttribute(b)?b:e.getPossibleStandardName[b];null!=c&&console.warn("Unknown DOM property "+a+". Did you mean "+c+"?")}},l={createMarkupForProperty:function(a,b){if(e.isStandardName[a]){if(d(a,b))return"";var c=e.getAttributeName[a];return h(c)+f(b)+'"'}return e.isCustomAttribute(a)?null==b?"":h(a)+f(b)+'"':(k(a),null)},setValueForProperty:function(a,b,c){if(e.isStandardName[b]){var f=e.getMutationMethod[b];if(f)f(a,c);else if(d(b,c))this.deleteValueForProperty(a,b);else if(e.mustUseAttribute[b])a.setAttribute(e.getAttributeName[b],""+c);else{var g=e.getPropertyName[b];e.hasSideEffects[b]&&a[g]===c||(a[g]=c)}}else e.isCustomAttribute(b)?null==c?a.removeAttribute(e.getAttributeName[b]):a.setAttribute(b,""+c):k(b)},deleteValueForProperty:function(a,b){if(e.isStandardName[b]){var c=e.getMutationMethod[b];if(c)c(a,void 0);else if(e.mustUseAttribute[b])a.removeAttribute(e.getAttributeName[b]);else{var d=e.getPropertyName[b],f=e.getDefaultValueForProperty(a.nodeName,b);e.hasSideEffects[b]&&a[d]===f||(a[d]=f)}}else e.isCustomAttribute(b)?a.removeAttribute(b):k(b)}};b.exports=l},{"./DOMProperty":9,"./escapeTextForBrowser":95,"./memoizeStringOnly":117}],11:[function(a,b,c){"use strict";function d(a){return a.substring(1,a.indexOf(" "))}var e=a("./ExecutionEnvironment"),f=a("./createNodesFromMarkup"),g=a("./emptyFunction"),h=a("./getMarkupWrap"),i=a("./invariant"),j=a("./mutateHTMLNodeWithMarkup"),k=/^(<[^ \/>]+)/,l="data-danger-index",m={dangerouslyRenderMarkup:function(a){i(e.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a Worker thread. This is likely a bug in the framework. Please report immediately.");for(var b,c={},j=0;j<a.length;j++)i(a[j],"dangerouslyRenderMarkup(...): Missing markup."),b=d(a[j]),b=h(b)?b:"*",c[b]=c[b]||[],c[b][j]=a[j];var m=[],n=0;for(b in c)if(c.hasOwnProperty(b)){var o=c[b];for(var p in o)if(o.hasOwnProperty(p)){var q=o[p];o[p]=q.replace(k,"$1 "+l+'="'+p+'" ')}var r=f(o.join(""),g);for(j=0;j<r.length;++j){var s=r[j];s.hasAttribute&&s.hasAttribute(l)?(p=+s.getAttribute(l),s.removeAttribute(l),i(!m.hasOwnProperty(p),"Danger: Assigning to an already-occupied result index."),m[p]=s,n+=1):console.error("Danger: Discarding unexpected node:",s)}}return i(n===m.length,"Danger: Did not assign to every index of resultList."),i(m.length===a.length,"Danger: Expected markup to render %s nodes, but rendered %s.",a.length,m.length),m},dangerouslyReplaceNodeWithMarkup:function(a,b){if(i(e.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. This is likely a bug in the framework. Please report immediately."),i(b,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),"html"===a.tagName.toLowerCase())return void j(a,b);var c=f(b,g)[0];a.parentNode.replaceChild(c,a)}};b.exports=m},{"./ExecutionEnvironment":21,"./createNodesFromMarkup":90,"./emptyFunction":94,"./getMarkupWrap":103,"./invariant":109,"./mutateHTMLNodeWithMarkup":122}],12:[function(a,b,c){"use strict";var d=a("./DOMProperty"),e=d.injection.MUST_USE_ATTRIBUTE,f=d.injection.MUST_USE_PROPERTY,g=d.injection.HAS_BOOLEAN_VALUE,h=d.injection.HAS_SIDE_EFFECTS,i=d.injection.HAS_POSITIVE_NUMERIC_VALUE,j={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:e|g,allowTransparency:e,alt:null,async:g,autoComplete:null,autoFocus:g,autoPlay:g,cellPadding:null,cellSpacing:null,charSet:e,checked:f|g,className:f,cols:e|i,colSpan:null,content:null,contentEditable:null,contextMenu:e,controls:f|g,data:null,dateTime:e,defer:g,dir:null,disabled:e|g,draggable:null,encType:null,form:e,frameBorder:e,height:e,hidden:e|g,href:null,htmlFor:null,httpEquiv:null,icon:null,id:f,label:null,lang:null,list:null,loop:f|g,max:null,maxLength:e,method:null,min:null,multiple:f|g,name:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:f|g,rel:null,required:g,role:e,rows:e|i,rowSpan:null,scrollLeft:f,scrollTop:f,selected:f|g,size:e|i,spellCheck:null,src:null,step:null,style:null,tabIndex:null,target:null,title:null,type:null,value:f|h,width:e,wmode:e,autoCapitalize:null,autoCorrect:null,cx:e,cy:e,d:e,fill:e,fx:e,fy:e,gradientTransform:e,gradientUnits:e,offset:e,points:e,r:e,rx:e,ry:e,spreadMethod:e,stopColor:e,stopOpacity:e,stroke:e,strokeLinecap:e,strokeWidth:e,transform:e,version:e,viewBox:e,x1:e,x2:e,x:e,y1:e,y2:e,y:e},DOMAttributeNames:{className:"class",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",htmlFor:"for",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeLinecap:"stroke-linecap",strokeWidth:"stroke-width",viewBox:"viewBox"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",radioGroup:"radiogroup",spellCheck:"spellcheck"},DOMMutationMethods:{className:function(a,b){a.className=b||""}}};b.exports=j},{"./DOMProperty":9}],13:[function(a,b,c){"use strict";var d=a("./keyOf"),e=[d({ResponderEventPlugin:null}),d({SimpleEventPlugin:null}),d({TapEventPlugin:null}),d({EnterLeaveEventPlugin:null}),d({ChangeEventPlugin:null}),d({SelectEventPlugin:null}),d({CompositionEventPlugin:null}),d({AnalyticsEventPlugin:null}),d({MobileSafariClickEventPlugin:null})];b.exports=e},{"./keyOf":116}],14:[function(a,b,c){"use strict";var d=a("./EventConstants"),e=a("./EventPropagators"),f=a("./SyntheticMouseEvent"),g=a("./ReactMount"),h=a("./keyOf"),i=d.topLevelTypes,j=g.getFirstReactDOM,k={mouseEnter:{registrationName:h({onMouseEnter:null})},mouseLeave:{registrationName:h({onMouseLeave:null})}},l=[null,null],m={eventTypes:k,extractEvents:function(a,b,c,d){if(a===i.topMouseOver&&(d.relatedTarget||d.fromElement))return null;if(a!==i.topMouseOut&&a!==i.topMouseOver)return null;var h,m;if(a===i.topMouseOut?(h=b,m=j(d.relatedTarget||d.toElement)||window):(h=window,m=b),h===m)return null;var n=h?g.getID(h):"",o=m?g.getID(m):"",p=f.getPooled(k.mouseLeave,n,d),q=f.getPooled(k.mouseEnter,o,d);return e.accumulateEnterLeaveDispatches(p,q,n,o),l[0]=p,l[1]=q,l}};b.exports=m},{"./EventConstants":15,"./EventPropagators":20,"./ReactMount":54,"./SyntheticMouseEvent":79,"./keyOf":116}],15:[function(a,b,c){"use strict";var d=a("./keyMirror"),e=d({bubbled:null,captured:null}),f=d({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),g={topLevelTypes:f,PropagationPhases:e};b.exports=g},{"./keyMirror":115}],16:[function(a,b,c){var d={listen:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},capture:function(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!0):void console.error("You are attempting to use addEventListener in a browser that does not support it.This likely means that you will not receive events that your application relies on (such as scroll).")}};b.exports=d},{}],17:[function(a,b,c){"use strict";var d=a("./CallbackRegistry"),e=a("./EventPluginRegistry"),f=a("./EventPluginUtils"),g=a("./EventPropagators"),h=a("./ExecutionEnvironment"),i=a("./accumulate"),j=a("./forEachAccumulated"),k=a("./invariant"),l=null,m=function(a){if(a){var b=f.executeDispatch,c=e.getPluginModuleForEvent(a);c&&c.executeDispatch&&(b=c.executeDispatch),f.executeDispatchesInOrder(a,b),a.isPersistent()||a.constructor.release(a)}},n={injection:{injectInstanceHandle:g.injection.injectInstanceHandle,injectEventPluginOrder:e.injectEventPluginOrder,injectEventPluginsByName:e.injectEventPluginsByName},registrationNames:e.registrationNames,putListener:d.putListener,getListener:d.getListener,deleteListener:d.deleteListener,deleteAllListeners:d.deleteAllListeners,extractEvents:function(a,b,c,d){for(var f,g=e.plugins,h=0,j=g.length;j>h;h++){var k=g[h];if(k){var l=k.extractEvents(a,b,c,d);l&&(f=i(f,l))}}return f},enqueueEvents:function(a){a&&(l=i(l,a))},processEventQueue:function(){var a=l;l=null,j(a,m),k(!l,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")}};h.canUseDOM&&(window.EventPluginHub=n),b.exports=n},{"./CallbackRegistry":5,"./EventPluginRegistry":18,"./EventPluginUtils":19,"./EventPropagators":20,"./ExecutionEnvironment":21,"./accumulate":85,"./forEachAccumulated":99,"./invariant":109}],18:[function(a,b,c){"use strict";function d(){if(h)for(var a in i){var b=i[a],c=h.indexOf(a);if(g(c>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",a),!j.plugins[c]){g(b.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",a),
j.plugins[c]=b;var d=b.eventTypes;for(var f in d)g(e(d[f],b),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",f,a)}}}function e(a,b){var c=a.phasedRegistrationNames;if(c){for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];f(e,b)}return!0}return a.registrationName?(f(a.registrationName,b),!0):!1}function f(a,b){g(!j.registrationNames[a],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",a),j.registrationNames[a]=b}var g=a("./invariant"),h=null,i={},j={plugins:[],registrationNames:{},injectEventPluginOrder:function(a){g(!h,"EventPluginRegistry: Cannot inject event plugin ordering more than once."),h=Array.prototype.slice.call(a),d()},injectEventPluginsByName:function(a){var b=!1;for(var c in a)if(a.hasOwnProperty(c)){var e=a[c];i[c]!==e&&(g(!i[c],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",c),i[c]=e,b=!0)}b&&d()},getPluginModuleForEvent:function(a){var b=a.dispatchConfig;if(b.registrationName)return j.registrationNames[b.registrationName]||null;for(var c in b.phasedRegistrationNames)if(b.phasedRegistrationNames.hasOwnProperty(c)){var d=j.registrationNames[b.phasedRegistrationNames[c]];if(d)return d}return null},_resetEventPlugins:function(){h=null;for(var a in i)i.hasOwnProperty(a)&&delete i[a];j.plugins.length=0;var b=j.registrationNames;for(var c in b)b.hasOwnProperty(c)&&delete b[c]}};b.exports=j},{"./invariant":109}],19:[function(a,b,c){"use strict";function d(a){return a===p.topMouseUp||a===p.topTouchEnd||a===p.topTouchCancel}function e(a){return a===p.topMouseMove||a===p.topTouchMove}function f(a){return a===p.topMouseDown||a===p.topTouchStart}function g(a,b){var c=a._dispatchListeners,d=a._dispatchIDs;if(m(a),Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)b(a,c[e],d[e]);else c&&b(a,c,d)}function h(a,b,c){b(a,c)}function i(a,b){g(a,b),a._dispatchListeners=null,a._dispatchIDs=null}function j(a){var b=a._dispatchListeners,c=a._dispatchIDs;if(m(a),Array.isArray(b)){for(var d=0;d<b.length&&!a.isPropagationStopped();d++)if(b[d](a,c[d]))return c[d]}else if(b&&b(a,c))return c;return null}function k(a){m(a);var b=a._dispatchListeners,c=a._dispatchIDs;o(!Array.isArray(b),"executeDirectDispatch(...): Invalid `event`.");var d=b?b(a,c):null;return a._dispatchListeners=null,a._dispatchIDs=null,d}function l(a){return!!a._dispatchListeners}var m,n=a("./EventConstants"),o=a("./invariant"),p=n.topLevelTypes;m=function(a){var b=a._dispatchListeners,c=a._dispatchIDs,d=Array.isArray(b),e=Array.isArray(c),f=e?c.length:c?1:0,g=d?b.length:b?1:0;o(e===d&&f===g,"EventPluginUtils: Invalid `event`.")};var q={isEndish:d,isMoveish:e,isStartish:f,executeDispatchesInOrder:i,executeDispatchesInOrderStopAtTrue:j,executeDirectDispatch:k,hasDispatches:l,executeDispatch:h};b.exports=q},{"./EventConstants":15,"./invariant":109}],20:[function(a,b,c){"use strict";function d(a,b,c){var d=b.dispatchConfig.phasedRegistrationNames[c];return p(a,d)}function e(a,b,c){if(!a)throw new Error("Dispatching id must not be null");r.validate();var e=b?q.bubbled:q.captured,f=d(a,c,e);f&&(c._dispatchListeners=n(c._dispatchListeners,f),c._dispatchIDs=n(c._dispatchIDs,a))}function f(a){a&&a.dispatchConfig.phasedRegistrationNames&&r.InstanceHandle.traverseTwoPhase(a.dispatchMarker,e,a)}function g(a,b,c){if(c&&c.dispatchConfig.registrationName){var d=c.dispatchConfig.registrationName,e=p(a,d);e&&(c._dispatchListeners=n(c._dispatchListeners,e),c._dispatchIDs=n(c._dispatchIDs,a))}}function h(a){a&&a.dispatchConfig.registrationName&&g(a.dispatchMarker,null,a)}function i(a){r.validate(),o(a,f)}function j(a,b,c,d){r.validate(),r.InstanceHandle.traverseEnterLeave(c,d,g,a,b)}function k(a){r.validate(),o(a,h)}var l=a("./CallbackRegistry"),m=a("./EventConstants"),n=a("./accumulate"),o=a("./forEachAccumulated"),p=l.getListener,q=m.PropagationPhases,r={InstanceHandle:null,injectInstanceHandle:function(a){r.InstanceHandle=a,r.validate()},validate:function(){var a=!r.InstanceHandle||!r.InstanceHandle.traverseTwoPhase||!r.InstanceHandle.traverseEnterLeave;if(a)throw new Error("InstanceHandle not injected before use!")}},s={accumulateTwoPhaseDispatches:i,accumulateDirectDispatches:k,accumulateEnterLeaveDispatches:j,injection:r};b.exports=s},{"./CallbackRegistry":5,"./EventConstants":15,"./accumulate":85,"./forEachAccumulated":99}],21:[function(a,b,c){"use strict";var d="undefined"!=typeof window,e={canUseDOM:d,canUseWorkers:"undefined"!=typeof Worker,isInWorker:!d};b.exports=e},{}],22:[function(a,b,c){"use strict";var d=a("./ReactLink"),e=a("./ReactStateSetters"),f={linkState:function(a){return new d(this.state[a],e.createStateKeySetter(this,a))}};b.exports=f},{"./ReactLink":52,"./ReactStateSetters":64}],23:[function(a,b,c){"use strict";var d=a("./invariant"),e={_assertLink:function(){d(null==this.props.value&&null==this.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink")},getValue:function(){return this.props.valueLink?(this._assertLink(),this.props.valueLink.value):this.props.value},getOnChange:function(){return this.props.valueLink?(this._assertLink(),this._handleLinkedValueChange):this.props.onChange},_handleLinkedValueChange:function(a){this.props.valueLink.requestChange(a.target.value)}};b.exports=e},{"./invariant":109}],24:[function(a,b,c){"use strict";var d=a("./EventConstants"),e=a("./emptyFunction"),f=d.topLevelTypes,g={eventTypes:null,extractEvents:function(a,b,c,d){if(a===f.topTouchStart){var g=d.target;g&&!g.onclick&&(g.onclick=e)}}};b.exports=g},{"./EventConstants":15,"./emptyFunction":94}],25:[function(a,b,c){"use strict";var d=function(a){var b=this;if(b.instancePool.length){var c=b.instancePool.pop();return b.call(c,a),c}return new b(a)},e=function(a,b){var c=this;if(c.instancePool.length){var d=c.instancePool.pop();return c.call(d,a,b),d}return new c(a,b)},f=function(a,b,c){var d=this;if(d.instancePool.length){var e=d.instancePool.pop();return d.call(e,a,b,c),e}return new d(a,b,c)},g=function(a,b,c,d,e){var f=this;if(f.instancePool.length){var g=f.instancePool.pop();return f.call(g,a,b,c,d,e),g}return new f(a,b,c,d,e)},h=function(a){var b=this;a.destructor&&a.destructor(),b.instancePool.length<b.poolSize&&b.instancePool.push(a)},i=10,j=d,k=function(a,b){var c=a;return c.instancePool=[],c.getPooled=b||j,c.poolSize||(c.poolSize=i),c.release=h,c},l={addPoolingTo:k,oneArgumentPooler:d,twoArgumentPooler:e,threeArgumentPooler:f,fiveArgumentPooler:g};b.exports=l},{}],26:[function(a,b,c){"use strict";var d=a("./ReactComponent"),e=a("./ReactCompositeComponent"),f=a("./ReactCurrentOwner"),g=a("./ReactDOM"),h=a("./ReactDOMComponent"),i=a("./ReactDefaultInjection"),j=a("./ReactInstanceHandles"),k=a("./ReactMount"),l=a("./ReactMultiChild"),m=a("./ReactPerf"),n=a("./ReactPropTypes"),o=a("./ReactServerRendering"),p=a("./ReactTextComponent");i.inject();var q={DOM:g,PropTypes:n,initializeTouchEvents:function(a){k.useTouchEvents=a},createClass:e.createClass,constructAndRenderComponent:k.constructAndRenderComponent,constructAndRenderComponentByID:k.constructAndRenderComponentByID,renderComponent:m.measure("React","renderComponent",k.renderComponent),renderComponentToString:o.renderComponentToString,unmountComponentAtNode:k.unmountComponentAtNode,unmountAndReleaseReactRootNode:k.unmountAndReleaseReactRootNode,isValidClass:e.isValidClass,isValidComponent:d.isValidComponent,__internals:{Component:d,CurrentOwner:f,DOMComponent:h,InstanceHandles:j,Mount:k,MultiChild:l,TextComponent:p}};q.version="0.8.0",b.exports=q},{"./ReactComponent":28,"./ReactCompositeComponent":31,"./ReactCurrentOwner":32,"./ReactDOM":33,"./ReactDOMComponent":35,"./ReactDefaultInjection":44,"./ReactInstanceHandles":51,"./ReactMount":54,"./ReactMultiChild":56,"./ReactPerf":59,"./ReactPropTypes":61,"./ReactServerRendering":63,"./ReactTextComponent":65}],27:[function(a,b,c){"use strict";function d(a,b){this.forEachFunction=a,this.forEachContext=b}function e(a,b,c,d){var e=a;e.forEachFunction.call(e.forEachContext,b,d)}function f(a,b,c){if(null==a)return a;var f=d.getPooled(b,c);l(a,e,f),d.release(f)}function g(a,b,c){this.mapResult=a,this.mapFunction=b,this.mapContext=c}function h(a,b,c,d){var e=a,f=e.mapResult,g=e.mapFunction.call(e.mapContext,b,d);k(!f.hasOwnProperty(c),"ReactChildren.map(...): Encountered two children with the same key, `%s`. Children keys must be unique.",c),f[c]=g}function i(a,b,c){if(null==a)return a;var d={},e=g.getPooled(d,b,c);return l(a,h,e),g.release(e),d}var j=a("./PooledClass"),k=a("./invariant"),l=a("./traverseAllChildren"),m=j.twoArgumentPooler,n=j.threeArgumentPooler;j.addPoolingTo(d,m),j.addPoolingTo(g,n);var o={forEach:f,map:i};b.exports=o},{"./PooledClass":25,"./invariant":109,"./traverseAllChildren":127}],28:[function(a,b,c){"use strict";function d(a){if(!a.__keyValidated__&&null==a.props.key&&(a.__keyValidated__=!0,g.current)){var b=g.current.constructor.displayName;if(!n.hasOwnProperty(b)){n[b]=!0;var c='Each child in an array should have a unique "key" prop. Check the render method of '+b+".";if(!a.isOwnedBy(g.current)){var d=a.props.__owner__&&a.props.__owner__.constructor.displayName;c+=" It was passed a child from "+d+"."}console.warn(c)}}}function e(a){if(Array.isArray(a))for(var b=0;b<a.length;b++){var c=a[b];o.isValidComponent(c)&&d(c)}else o.isValidComponent(a)&&(a.__keyValidated__=!0)}var f=a("./ReactComponentEnvironment"),g=a("./ReactCurrentOwner"),h=a("./ReactOwner"),i=a("./ReactUpdates"),j=a("./invariant"),k=a("./keyMirror"),l=a("./merge"),m=k({MOUNTED:null,UNMOUNTED:null}),n={},o={isValidComponent:function(a){return!(!a||"function"!=typeof a.mountComponentIntoNode||"function"!=typeof a.receiveComponent)},getKey:function(a,b){return a&&a.props&&null!=a.props.key?"{"+a.props.key+"}":"["+b+"]"},LifeCycle:m,DOMIDOperations:f.DOMIDOperations,unmountIDFromEnvironment:f.unmountIDFromEnvironment,mountImageIntoNode:f.mountImageIntoNode,ReactReconcileTransaction:f.ReactReconcileTransaction,Mixin:l(f.Mixin,{isMounted:function(){return this._lifeCycleState===m.MOUNTED},setProps:function(a,b){this.replaceProps(l(this._pendingProps||this.props,a),b)},replaceProps:function(a,b){j(!this.props.__owner__,"replaceProps(...): You called `setProps` or `replaceProps` on a component with an owner. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),j(this.isMounted(),"replaceProps(...): Can only update a mounted component."),this._pendingProps=a,i.enqueueUpdate(this,b)},construct:function(a,b){this.props=a||{},this.props.__owner__=g.current,this._lifeCycleState=m.UNMOUNTED,this._pendingProps=null,this._pendingCallbacks=null;var c=arguments.length-1;if(1===c)e(b),this.props.children=b;else if(c>1){for(var d=Array(c),f=0;c>f;f++)e(arguments[f+1]),d[f]=arguments[f+1];this.props.children=d}},mountComponent:function(a,b,c){j(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component.",a);var d=this.props;null!=d.ref&&h.addComponentAsRefTo(this,d.ref,d.__owner__),this._rootNodeID=a,this._lifeCycleState=m.MOUNTED,this._mountDepth=c},unmountComponent:function(){j(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var a=this.props;null!=a.ref&&h.removeComponentAsRefFrom(this,a.ref,a.__owner__),o.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=m.UNMOUNTED},receiveComponent:function(a,b){j(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingProps=a.props,this._performUpdateIfNecessary(b)},performUpdateIfNecessary:function(){var a=o.ReactReconcileTransaction.getPooled();a.perform(this._performUpdateIfNecessary,this,a),o.ReactReconcileTransaction.release(a)},_performUpdateIfNecessary:function(a){if(null!=this._pendingProps){var b=this.props;this.props=this._pendingProps,this._pendingProps=null,this.updateComponent(a,b)}},updateComponent:function(a,b){var c=this.props;(c.__owner__!==b.__owner__||c.ref!==b.ref)&&(null!=b.ref&&h.removeComponentAsRefFrom(this,b.ref,b.__owner__),null!=c.ref&&h.addComponentAsRefTo(this,c.ref,c.__owner__))},mountComponentIntoNode:function(a,b,c){var d=o.ReactReconcileTransaction.getPooled();d.perform(this._mountComponentIntoNode,this,a,b,d,c),o.ReactReconcileTransaction.release(d)},_mountComponentIntoNode:function(a,b,c,d){var e=this.mountComponent(a,c,0);o.mountImageIntoNode(e,b,d)},isOwnedBy:function(a){return this.props.__owner__===a},getSiblingByRef:function(a){var b=this.props.__owner__;return b&&b.refs?b.refs[a]:null}})};b.exports=o},{"./ReactComponentEnvironment":30,"./ReactCurrentOwner":32,"./ReactOwner":58,"./ReactUpdates":70,"./invariant":109,"./keyMirror":115,"./merge":118}],29:[function(a,b,c){"use strict";var d=a("./ReactDOMIDOperations"),e=a("./ReactMarkupChecksum"),f=a("./ReactMount"),g=a("./ReactReconcileTransaction"),h=a("./getReactRootElementInContainer"),i=a("./invariant"),j=a("./mutateHTMLNodeWithMarkup"),k=1,l=9,m={Mixin:{getDOMNode:function(){return i(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),f.getNode(this._rootNodeID)}},ReactReconcileTransaction:g,DOMIDOperations:d,unmountIDFromEnvironment:function(a){f.purgeID(a)},mountImageIntoNode:function(a,b,c){if(i(b&&(b.nodeType===k||b.nodeType===l&&f.allowFullPageRender),"mountComponentIntoNode(...): Target container is not valid."),c){if(e.canReuseMarkup(a,h(b)))return;console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}if(b.nodeType===l)return void j(b.documentElement,a);var d=b.parentNode;if(d){var g=b.nextSibling;d.removeChild(b),b.innerHTML=a,g?d.insertBefore(b,g):d.appendChild(b)}else b.innerHTML=a}};b.exports=m},{"./ReactDOMIDOperations":37,"./ReactMarkupChecksum":53,"./ReactMount":54,"./ReactReconcileTransaction":62,"./getReactRootElementInContainer":105,"./invariant":109,"./mutateHTMLNodeWithMarkup":122}],30:[function(a,b,c){var d=a("./ReactComponentBrowserEnvironment"),e=d;b.exports=e},{"./ReactComponentBrowserEnvironment":29}],31:[function(a,b,c){"use strict";function d(a,b){var c=w[b];z.hasOwnProperty(b)&&q(c===v.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",b),a.hasOwnProperty(b)&&q(c===v.DEFINE_MANY||c===v.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",b)}function e(a){var b=a._compositeLifeCycleState;q(a.isMounted()||b===y.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),q(b!==y.RECEIVING_STATE,"replaceState(...): Cannot update during an existing state transition (such as within `render`). This could potentially cause an infinite loop so it is forbidden."),q(b!==y.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function f(a,b){var c=a.prototype;for(var e in b){var f=b[e];if(b.hasOwnProperty(e)&&f)if(d(c,e),x.hasOwnProperty(e))x[e](a,f);else{var g=e in w,j=e in c,k=f.__reactDontBind,l="function"==typeof f,m=l&&!g&&!j&&!k;m?(c.__reactAutoBindMap||(c.__reactAutoBindMap={}),c.__reactAutoBindMap[e]=f,c[e]=f):j?w[e]===v.DEFINE_MANY_MERGED?c[e]=h(c[e],f):c[e]=i(c[e],f):c[e]=f}}}function g(a,b){return q(a&&b&&"object"==typeof a&&"object"==typeof b,"mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),u(b,function(b,c){q(void 0===a[c],"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: %s",c),a[c]=b}),a}function h(a,b){return function(){return g(a.apply(this,arguments),b.apply(this,arguments))}}function i(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}var j=a("./ReactComponent"),k=a("./ReactCurrentOwner"),l=a("./ReactErrorUtils"),m=a("./ReactOwner"),n=a("./ReactPerf"),o=a("./ReactPropTransferer"),p=a("./ReactUpdates"),q=a("./invariant"),r=a("./keyMirror"),s=a("./merge"),t=a("./mixInto"),u=a("./objMap"),v=r({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w={mixins:v.DEFINE_MANY,propTypes:v.DEFINE_ONCE,getDefaultProps:v.DEFINE_MANY_MERGED,getInitialState:v.DEFINE_MANY_MERGED,render:v.DEFINE_ONCE,componentWillMount:v.DEFINE_MANY,componentDidMount:v.DEFINE_MANY,componentWillReceiveProps:v.DEFINE_MANY,shouldComponentUpdate:v.DEFINE_ONCE,componentWillUpdate:v.DEFINE_MANY,componentDidUpdate:v.DEFINE_MANY,componentWillUnmount:v.DEFINE_MANY,updateComponent:v.OVERRIDE_BASE},x={displayName:function(a,b){a.displayName=b},mixins:function(a,b){if(b)for(var c=0;c<b.length;c++)f(a,b[c])},propTypes:function(a,b){a.propTypes=b}},y=r({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),z={construct:function(a,b){j.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this._compositeLifeCycleState=null},isMounted:function(){return j.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==y.MOUNTING},mountComponent:n.measure("ReactCompositeComponent","mountComponent",function(a,b,c){j.Mixin.mountComponent.call(this,a,b,c),this._compositeLifeCycleState=y.MOUNTING,this._defaultProps=this.getDefaultProps?this.getDefaultProps():null,this._processProps(this.props),this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.state=this.getInitialState?this.getInitialState():null,this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=this._renderValidatedComponent(),this._compositeLifeCycleState=null;var d=this._renderedComponent.mountComponent(a,b,c+1);return this.componentDidMount&&b.getReactMountReady().enqueue(this,this.componentDidMount),d}),unmountComponent:function(){this._compositeLifeCycleState=y.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._defaultProps=null,j.Mixin.unmountComponent.call(this),this._renderedComponent.unmountComponent(),this._renderedComponent=null,this.refs&&(this.refs=null)},setState:function(a,b){this.replaceState(s(this._pendingState||this.state,a),b)},replaceState:function(a,b){e(this),this._pendingState=a,p.enqueueUpdate(this,b)},_processProps:function(a){var b,c=this._defaultProps;for(b in c)b in a||(a[b]=c[b]);var d=this.constructor.propTypes;if(d){var e=this.constructor.displayName;for(b in d){var f=d[b];f&&f(a,b,e)}}},performUpdateIfNecessary:function(){var a=this._compositeLifeCycleState;a!==y.MOUNTING&&a!==y.RECEIVING_PROPS&&j.Mixin.performUpdateIfNecessary.call(this)},_performUpdateIfNecessary:function(a){if(null!=this._pendingProps||null!=this._pendingState||this._pendingForceUpdate){var b=this.props;null!=this._pendingProps&&(b=this._pendingProps,this._processProps(b),this._pendingProps=null,this._compositeLifeCycleState=y.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(b,a)),this._compositeLifeCycleState=y.RECEIVING_STATE;var c=this._pendingState||this.state;this._pendingState=null,this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(b,c)?(this._pendingForceUpdate=!1,this._performComponentUpdate(b,c,a)):(this.props=b,this.state=c),this._compositeLifeCycleState=null}},_performComponentUpdate:function(a,b,c){var d=this.props,e=this.state;this.componentWillUpdate&&this.componentWillUpdate(a,b,c),this.props=a,this.state=b,this.updateComponent(c,d,e),this.componentDidUpdate&&c.getReactMountReady().enqueue(this,this.componentDidUpdate.bind(this,d,e))},updateComponent:n.measure("ReactCompositeComponent","updateComponent",function(a,b,c){j.Mixin.updateComponent.call(this,a,b);var d=this._renderedComponent,e=this._renderValidatedComponent();if(d.constructor===e.constructor)d.receiveComponent(e,a);else{var f=this._rootNodeID,g=d._rootNodeID;d.unmountComponent(),this._renderedComponent=e;var h=e.mountComponent(f,a,this._mountDepth+1);j.DOMIDOperations.dangerouslyReplaceNodeWithMarkupByID(g,h)}}),forceUpdate:function(a){var b=this._compositeLifeCycleState;q(this.isMounted()||b===y.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),q(b!==y.RECEIVING_STATE&&b!==y.UNMOUNTING,"forceUpdate(...): Cannot force an update while unmounting component or during an existing state transition (such as within `render`)."),this._pendingForceUpdate=!0,p.enqueueUpdate(this,a)},_renderValidatedComponent:function(){var a;k.current=this;try{a=this.render()}catch(b){throw b}finally{k.current=null}return q(j.isValidComponent(a),"%s.render(): A valid ReactComponent must be returned. You may have returned null, undefined, an array, or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),a},_bindAutoBindMethods:function(){for(var a in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(a)){var b=this.__reactAutoBindMap[a];this[a]=this._bindAutoBindMethod(l.guard(b,this.constructor.displayName+"."+a))}},_bindAutoBindMethod:function(a){var b=this,c=function(){return a.apply(b,arguments)};c.__reactBoundContext=b,c.__reactBoundMethod=a,c.__reactBoundArguments=null;var d=b.constructor.displayName,e=c.bind;return c.bind=function(f){if(f!==b&&null!==f)console.warn("bind(): React component methods may only be bound to the component instance. See "+d);else if(1===arguments.length)return console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+d),c;var g=e.apply(c,arguments);return g.__reactBoundContext=b,g.__reactBoundMethod=a,g.__reactBoundArguments=Array.prototype.slice.call(arguments,1),g},c}},A=function(){};t(A,j.Mixin),t(A,m.Mixin),t(A,o.Mixin),t(A,z);var B={LifeCycle:y,Base:A,createClass:function(a){var b=function(){};b.prototype=new A,b.prototype.constructor=b,f(b,a),q(b.prototype.render,"createClass(...): Class specification must implement a `render` method."),b.prototype.componentShouldUpdate&&console.warn((a.displayName||"A component")+" has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.");for(var c in w)b.prototype[c]||(b.prototype[c]=null);var d=function(a,c){var d=new b;return d.construct.apply(d,arguments),d};return d.componentConstructor=b,d.originalSpec=a,d},isValidClass:function(a){return a instanceof Function&&"componentConstructor"in a&&a.componentConstructor instanceof Function}};b.exports=B},{"./ReactComponent":28,"./ReactCurrentOwner":32,"./ReactErrorUtils":46,"./ReactOwner":58,"./ReactPerf":59,"./ReactPropTransferer":60,"./ReactUpdates":70,"./invariant":109,"./keyMirror":115,"./merge":118,"./mixInto":121,"./objMap":123}],32:[function(a,b,c){"use strict";var d={current:null};b.exports=d},{}],33:[function(a,b,c){"use strict";function d(a,b){var c=function(){};c.prototype=new e(a,b),c.prototype.constructor=c,c.displayName=a;var d=function(a,b){var d=new c;return d.construct.apply(d,arguments),d};return d.componentConstructor=c,d}var e=a("./ReactDOMComponent"),f=a("./mergeInto"),g=a("./objMapKeyVal"),h=g({a:!1,abbr:!1,address:!1,area:!1,article:!1,aside:!1,audio:!1,b:!1,base:!1,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!1,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!1,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!1,circle:!1,g:!1,line:!1,path:!1,polyline:!1,rect:!1,svg:!1,text:!1},d),i={injectComponentClasses:function(a){f(h,a)}};h.injection=i,b.exports=h},{"./ReactDOMComponent":35,"./mergeInto":120,"./objMapKeyVal":124}],34:[function(a,b,c){"use strict";var d=a("./ReactCompositeComponent"),e=a("./ReactDOM"),f=a("./keyMirror"),g=e.button,h=f({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),i=d.createClass({render:function(){var a={};for(var b in this.props)!this.props.hasOwnProperty(b)||this.props.disabled&&h[b]||(a[b]=this.props[b]);return g(a,this.props.children)}});b.exports=i},{"./ReactCompositeComponent":31,"./ReactDOM":33,"./keyMirror":115}],35:[function(a,b,c){"use strict";function d(a){a&&(o(null==a.children||null==a.dangerouslySetInnerHTML,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),o(null==a.style||"object"==typeof a.style,"The `style` prop expects a mapping from style properties to values, not a string."))}function e(a,b){this._tagOpen="<"+a,this._tagClose=b?"":"</"+a+">",this.tagName=a.toUpperCase()}var f=a("./CSSPropertyOperations"),g=a("./DOMProperty"),h=a("./DOMPropertyOperations"),i=a("./ReactComponent"),j=a("./ReactEventEmitter"),k=a("./ReactMultiChild"),l=a("./ReactMount"),m=a("./ReactPerf"),n=a("./escapeTextForBrowser"),o=a("./invariant"),p=a("./keyOf"),q=a("./merge"),r=a("./mixInto"),s=j.putListener,t=j.deleteListener,u=j.registrationNames,v={string:!0,number:!0},w=p({style:null});e.Mixin={mountComponent:m.measure("ReactDOMComponent","mountComponent",function(a,b,c){return i.Mixin.mountComponent.call(this,a,b,c),d(this.props),this._createOpenTagMarkup()+this._createContentMarkup(b)+this._tagClose}),_createOpenTagMarkup:function(){var a=this.props,b=this._tagOpen;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(null!=d)if(u[c])s(this._rootNodeID,c,d);else{c===w&&(d&&(d=a.style=q(a.style)),d=f.createMarkupForStyles(d));var e=h.createMarkupForProperty(c,d);e&&(b+=" "+e)}}var g=n(this._rootNodeID);return b+" "+l.ATTR_NAME+'="'+g+'">'},_createContentMarkup:function(a){var b=this.props.dangerouslySetInnerHTML;if(null!=b){if(null!=b.__html)return b.__html}else{var c=v[typeof this.props.children]?this.props.children:null,d=null!=c?null:this.props.children;if(null!=c)return n(c);if(null!=d){var e=this.mountChildren(d,a);return e.join("")}}return""},receiveComponent:function(a,b){d(a.props),i.Mixin.receiveComponent.call(this,a,b)},updateComponent:m.measure("ReactDOMComponent","updateComponent",function(a,b){i.Mixin.updateComponent.call(this,a,b),this._updateDOMProperties(b),this._updateDOMChildren(b,a)}),_updateDOMProperties:function(a){var b,c,d,e=this.props;for(b in a)if(!e.hasOwnProperty(b)&&a.hasOwnProperty(b))if(b===w){var f=a[b];for(c in f)f.hasOwnProperty(c)&&(d=d||{},d[c]="")}else u[b]?t(this._rootNodeID,b):(g.isStandardName[b]||g.isCustomAttribute(b))&&i.DOMIDOperations.deletePropertyByID(this._rootNodeID,b);for(b in e){var h=e[b],j=a[b];if(e.hasOwnProperty(b)&&h!==j)if(b===w)if(h&&(h=e.style=q(h)),j){for(c in j)j.hasOwnProperty(c)&&!h.hasOwnProperty(c)&&(d=d||{},d[c]="");for(c in h)h.hasOwnProperty(c)&&j[c]!==h[c]&&(d=d||{},d[c]=h[c])}else d=h;else u[b]?s(this._rootNodeID,b,h):(g.isStandardName[b]||g.isCustomAttribute(b))&&i.DOMIDOperations.updatePropertyByID(this._rootNodeID,b,h)}d&&i.DOMIDOperations.updateStylesByID(this._rootNodeID,d)},_updateDOMChildren:function(a,b){var c=this.props,d=v[typeof a.children]?a.children:null,e=v[typeof c.children]?c.children:null,f=a.dangerouslySetInnerHTML&&a.dangerouslySetInnerHTML.__html,g=c.dangerouslySetInnerHTML&&c.dangerouslySetInnerHTML.__html,h=null!=d?null:a.children,j=null!=e?null:c.children,k=null!=d||null!=f,l=null!=e||null!=g;null!=h&&null==j?this.updateChildren(null,b):k&&!l&&this.updateTextContent(""),null!=e?d!==e&&this.updateTextContent(""+e):null!=g?f!==g&&i.DOMIDOperations.updateInnerHTMLByID(this._rootNodeID,g):null!=j&&this.updateChildren(j,b)},unmountComponent:function(){j.deleteAllListeners(this._rootNodeID),i.Mixin.unmountComponent.call(this),this.unmountChildren()}},r(e,i.Mixin),r(e,e.Mixin),r(e,k.Mixin),b.exports=e},{"./CSSPropertyOperations":4,"./DOMProperty":9,"./DOMPropertyOperations":10,"./ReactComponent":28,"./ReactEventEmitter":47,"./ReactMount":54,"./ReactMultiChild":56,"./ReactPerf":59,"./escapeTextForBrowser":95,"./invariant":109,"./keyOf":116,"./merge":118,"./mixInto":121}],36:[function(a,b,c){"use strict";var d=a("./ReactCompositeComponent"),e=a("./ReactDOM"),f=a("./ReactEventEmitter"),g=a("./EventConstants"),h=e.form,i=d.createClass({render:function(){return this.transferPropsTo(h(null,this.props.children))},componentDidMount:function(a){f.trapBubbledEvent(g.topLevelTypes.topSubmit,"submit",a)}});b.exports=i},{"./EventConstants":15,"./ReactCompositeComponent":31,"./ReactDOM":33,"./ReactEventEmitter":47}],37:[function(a,b,c){"use strict";var d=a("./CSSPropertyOperations"),e=a("./DOMChildrenOperations"),f=a("./DOMPropertyOperations"),g=a("./ReactMount"),h=a("./getTextContentAccessor"),i=a("./invariant"),j={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},k=h()||"NA",l=/^ /,m={updatePropertyByID:function(a,b,c){var d=g.getNode(a);i(!j.hasOwnProperty(b),"updatePropertyByID(...): %s",j[b]),null!=c?f.setValueForProperty(d,b,c):f.deleteValueForProperty(d,b)},deletePropertyByID:function(a,b,c){var d=g.getNode(a);i(!j.hasOwnProperty(b),"updatePropertyByID(...): %s",j[b]),f.deleteValueForProperty(d,b,c)},updateStylesByID:function(a,b){var c=g.getNode(a);d.setValueForStyles(c,b)},updateInnerHTMLByID:function(a,b){var c=g.getNode(a);c.innerHTML=b.replace(l,"&nbsp;")},updateTextContentByID:function(a,b){var c=g.getNode(a);c[k]=b},dangerouslyReplaceNodeWithMarkupByID:function(a,b){var c=g.getNode(a);e.dangerouslyReplaceNodeWithMarkup(c,b)},dangerouslyProcessChildrenUpdates:function(a,b){for(var c=0;c<a.length;c++)a[c].parentNode=g.getNode(a[c].parentID);e.processUpdates(a,b)}};b.exports=m},{"./CSSPropertyOperations":4,"./DOMChildrenOperations":8,"./DOMPropertyOperations":10,"./ReactMount":54,"./getTextContentAccessor":106,"./invariant":109}],38:[function(a,b,c){"use strict";var d=a("./DOMPropertyOperations"),e=a("./LinkedValueMixin"),f=a("./ReactCompositeComponent"),g=a("./ReactDOM"),h=a("./ReactMount"),i=a("./invariant"),j=a("./merge"),k=g.input,l={},m=f.createClass({mixins:[e],getInitialState:function(){var a=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=a?a:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var a=j(this.props);a.defaultChecked=null,a.defaultValue=null,a.checked=null!=this.props.checked?this.props.checked:this.state.checked;var b=this.getValue();return a.value=null!=b?b:this.state.value,a.onChange=this._handleChange,k(a,this.props.children)},componentDidMount:function(a){var b=h.getID(a);l[b]=this},componentWillUnmount:function(){var a=this.getDOMNode(),b=h.getID(a);delete l[b]},componentDidUpdate:function(a,b,c){null!=this.props.checked&&d.setValueForProperty(c,"checked",this.props.checked||!1);var e=this.getValue();null!=e&&d.setValueForProperty(c,"value",""+e)},_handleChange:function(a){
var b,c=this.getOnChange();c&&(this._isChanging=!0,b=c(a),this._isChanging=!1),this.setState({checked:a.target.checked,value:a.target.value});var d=this.props.name;if("radio"===this.props.type&&null!=d)for(var e=this.getDOMNode(),f=document.getElementsByName(d),g=0,j=f.length;j>g;g++){var k=f[g];if(k!==e&&"INPUT"===k.nodeName&&"radio"===k.type&&k.form===e.form){var m=h.getID(k);i(m,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var n=l[m];i(n,"ReactDOMInput: Unknown radio button ID %s.",m),n.setState({checked:!1})}}return b}});b.exports=m},{"./DOMPropertyOperations":10,"./LinkedValueMixin":23,"./ReactCompositeComponent":31,"./ReactDOM":33,"./ReactMount":54,"./invariant":109,"./merge":118}],39:[function(a,b,c){"use strict";var d=a("./ReactCompositeComponent"),e=a("./ReactDOM"),f=e.option,g=d.createClass({componentWillMount:function(){null!=this.props.selected&&console.warn("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return f(this.props,this.props.children)}});b.exports=g},{"./ReactCompositeComponent":31,"./ReactDOM":33}],40:[function(a,b,c){"use strict";function d(a,b,c){null!=a[b]&&(a.multiple?i(Array.isArray(a[b]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.",b):i(!Array.isArray(a[b]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.",b))}function e(){for(var a=this.getValue(),b=null!=a?a:this.state.value,c=this.getDOMNode().options,d=""+b,e=0,f=c.length;f>e;e++){var g=this.props.multiple?d.indexOf(c[e].value)>=0:g=c[e].value===d;g!==c[e].selected&&(c[e].selected=g)}}var f=a("./LinkedValueMixin"),g=a("./ReactCompositeComponent"),h=a("./ReactDOM"),i=a("./invariant"),j=a("./merge"),k=h.select,l=g.createClass({mixins:[f],propTypes:{defaultValue:d,value:d},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(a){!this.props.multiple&&a.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!a.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var a=j(this.props);return a.onChange=this._handleChange,a.value=null,k(a,this.props.children)},componentDidMount:e,componentDidUpdate:e,_handleChange:function(a){var b,c=this.getOnChange();c&&(this._isChanging=!0,b=c(a),this._isChanging=!1);var d;if(this.props.multiple){d=[];for(var e=a.target.options,f=0,g=e.length;g>f;f++)e[f].selected&&d.push(e[f].value)}else d=a.target.value;return this.setState({value:d}),b}});b.exports=l},{"./LinkedValueMixin":23,"./ReactCompositeComponent":31,"./ReactDOM":33,"./invariant":109,"./merge":118}],41:[function(a,b,c){"use strict";function d(a){var b=document.selection,c=b.createRange(),d=c.text.length,e=c.duplicate();e.moveToElementText(a),e.setEndPoint("EndToStart",c);var f=e.text.length,g=f+d;return{start:f,end:g}}function e(a){var b=window.getSelection();if(0===b.rangeCount)return null;var c=b.anchorNode,d=b.anchorOffset,e=b.focusNode,f=b.focusOffset,g=b.getRangeAt(0),h=g.toString().length,i=g.cloneRange();i.selectNodeContents(a),i.setEnd(g.startContainer,g.startOffset);var j=i.toString().length,k=j+h,l=document.createRange();l.setStart(c,d),l.setEnd(e,f);var m=l.collapsed;return l.detach(),{start:m?k:j,end:m?j:k}}function f(a,b){var c,d,e=document.selection.createRange().duplicate();"undefined"==typeof b.end?(c=b.start,d=c):b.start>b.end?(c=b.end,d=b.start):(c=b.start,d=b.end),e.moveToElementText(a),e.moveStart("character",c),e.setEndPoint("EndToStart",e),e.moveEnd("character",d-c),e.select()}function g(a,b){var c=window.getSelection(),d=a[i()].length,e=Math.min(b.start,d),f="undefined"==typeof b.end?e:Math.min(b.end,d);if(!c.extend&&e>f){var g=f;f=e,e=g}var j=h(a,e),k=h(a,f);if(j&&k){var l=document.createRange();l.setStart(j.node,j.offset),c.removeAllRanges(),e>f?(c.addRange(l),c.extend(k.node,k.offset)):(l.setEnd(k.node,k.offset),c.addRange(l)),l.detach()}}var h=a("./getNodeForCharacterOffset"),i=a("./getTextContentAccessor"),j={getOffsets:function(a){var b=document.selection?d:e;return b(a)},setOffsets:function(a,b){var c=document.selection?f:g;c(a,b)}};b.exports=j},{"./getNodeForCharacterOffset":104,"./getTextContentAccessor":106}],42:[function(a,b,c){"use strict";var d=a("./DOMPropertyOperations"),e=a("./LinkedValueMixin"),f=a("./ReactCompositeComponent"),g=a("./ReactDOM"),h=a("./invariant"),i=a("./merge"),j=g.textarea,k=f.createClass({mixins:[e],getInitialState:function(){var a=this.props.defaultValue,b=this.props.children;null!=b&&(console.warn("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),h(null==a,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(b)&&(h(b.length<=1,"<textarea> can only have at most one child."),b=b[0]),a=""+b),null==a&&(a="");var c=this.getValue();return{initialValue:""+(null!=c?c:a),value:a}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var a=i(this.props),b=this.getValue();return h(null==a.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),a.defaultValue=null,a.value=null!=b?b:this.state.value,a.onChange=this._handleChange,j(a,this.state.initialValue)},componentDidUpdate:function(a,b,c){var e=this.getValue();null!=e&&d.setValueForProperty(c,"value",""+e)},_handleChange:function(a){var b,c=this.getOnChange();return c&&(this._isChanging=!0,b=c(a),this._isChanging=!1),this.setState({value:a.target.value}),b}});b.exports=k},{"./DOMPropertyOperations":10,"./LinkedValueMixin":23,"./ReactCompositeComponent":31,"./ReactDOM":33,"./invariant":109,"./merge":118}],43:[function(a,b,c){"use strict";function d(){this.reinitializeTransaction()}var e=a("./ReactUpdates"),f=a("./Transaction"),g=a("./emptyFunction"),h=a("./mixInto"),i={initialize:g,close:function(){m.isBatchingUpdates=!1}},j={initialize:g,close:e.flushBatchedUpdates.bind(e)},k=[j,i];h(d,f.Mixin),h(d,{getTransactionWrappers:function(){return k}});var l=new d,m={isBatchingUpdates:!1,batchedUpdates:function(a,b){var c=m.isBatchingUpdates;m.isBatchingUpdates=!0,c?a(b):l.perform(a,null,b)}};b.exports=m},{"./ReactUpdates":70,"./Transaction":83,"./emptyFunction":94,"./mixInto":121}],44:[function(a,b,c){"use strict";function d(){l.TopLevelCallbackCreator=m,u.injection.injectEventPluginOrder(s),u.injection.injectInstanceHandle(w),u.injection.injectEventPluginsByName({SimpleEventPlugin:y,EnterLeaveEventPlugin:t,ChangeEventPlugin:q,CompositionEventPlugin:r,MobileSafariClickEventPlugin:v,SelectEventPlugin:x}),e.injection.injectComponentClasses({button:f,form:g,input:h,option:i,select:j,textarea:k}),p.injection.injectDOMPropertyConfig(o),n.injection.injectMeasure(a("./ReactDefaultPerf").measure),A.injection.injectBatchingStrategy(z)}var e=a("./ReactDOM"),f=a("./ReactDOMButton"),g=a("./ReactDOMForm"),h=a("./ReactDOMInput"),i=a("./ReactDOMOption"),j=a("./ReactDOMSelect"),k=a("./ReactDOMTextarea"),l=a("./ReactEventEmitter"),m=a("./ReactEventTopLevelCallback"),n=a("./ReactPerf"),o=a("./DefaultDOMPropertyConfig"),p=a("./DOMProperty"),q=a("./ChangeEventPlugin"),r=a("./CompositionEventPlugin"),s=a("./DefaultEventPluginOrder"),t=a("./EnterLeaveEventPlugin"),u=a("./EventPluginHub"),v=a("./MobileSafariClickEventPlugin"),w=a("./ReactInstanceHandles"),x=a("./SelectEventPlugin"),y=a("./SimpleEventPlugin"),z=a("./ReactDefaultBatchingStrategy"),A=a("./ReactUpdates");b.exports={inject:d}},{"./ChangeEventPlugin":6,"./CompositionEventPlugin":7,"./DOMProperty":9,"./DefaultDOMPropertyConfig":12,"./DefaultEventPluginOrder":13,"./EnterLeaveEventPlugin":14,"./EventPluginHub":17,"./MobileSafariClickEventPlugin":24,"./ReactDOM":33,"./ReactDOMButton":34,"./ReactDOMForm":36,"./ReactDOMInput":38,"./ReactDOMOption":39,"./ReactDOMSelect":40,"./ReactDOMTextarea":42,"./ReactDefaultBatchingStrategy":43,"./ReactDefaultPerf":45,"./ReactEventEmitter":47,"./ReactEventTopLevelCallback":49,"./ReactInstanceHandles":51,"./ReactPerf":59,"./ReactUpdates":70,"./SelectEventPlugin":72,"./SimpleEventPlugin":73}],45:[function(a,b,c){"use strict";var d=a("./performanceNow"),e={};e={getInfo:function(a,b){return this.info[a]&&this.info[a][b]?this.info[a][b]:null},getLogs:function(a,b){return this.getInfo(a,b)?this.logs.filter(function(c){return c.objName===a&&c.fnName===b}):null},getRawRenderHistory:function(a){var b=[],c=this.logs.filter(function(b){return 0===b.reactID.indexOf(a)}).reverse(),d=[];return c.forEach(function(e,f){f&&e.reactID===a&&c[f-1].reactID!==a&&(d.length&&b.push(d),d=[]),d.push(e)}),d.length&&b.push(d),b.reverse()},getRenderHistory:function(a){var b=this.getRawRenderHistory(a);return b.map(function(a){var b="log# Component (execution time) [bloat from logging]\n================================================================\n";return b+a.map(function(a){var b="	"+Array(a.reactID.split(".[").length).join("  "),c=m(a.timing.delta),d=m(a.timing.timeToLog);return a.index+b+a.name+" ("+c+"ms) ["+d+"ms]"}).join("\n")})},printRenderHistory:function(a,b){var c=this.getRenderHistory(a);return c[b]?void console.log("Loading render history #"+(b+1)+" of "+c.length+":\n"+c[b]):void console.warn("Index",b,"isn't available! The render history is",c.length,"long.")},printHeatmapLegend:function(){if(this.options.heatmap.enabled){var a=this.info.React&&this.info.React.renderComponent&&this.info.React.renderComponent.max;if(a){for(var b="Heatmap: ",c=0;10*a>=c;c+=a)b+="%c "+Math.round(c)/10+"ms ";console.log(b,"background-color: hsla(100, 100%, 50%, 0.6);","background-color: hsla( 90, 100%, 50%, 0.6);","background-color: hsla( 80, 100%, 50%, 0.6);","background-color: hsla( 70, 100%, 50%, 0.6);","background-color: hsla( 60, 100%, 50%, 0.6);","background-color: hsla( 50, 100%, 50%, 0.6);","background-color: hsla( 40, 100%, 50%, 0.6);","background-color: hsla( 30, 100%, 50%, 0.6);","background-color: hsla( 20, 100%, 50%, 0.6);","background-color: hsla( 10, 100%, 50%, 0.6);","background-color: hsla(  0, 100%, 50%, 0.6);")}}},measure:function(a,b,c){var i=f(a,b),j=g(c);return function(){for(var f=d(),g=c.apply(this,arguments),k=d(),l={},m=0;m<arguments.length;m++)l[j[m]]=arguments[m];var n={index:e.logs.length,fnName:b,objName:a,timing:{before:f,after:k,delta:k-f}};e.logs.push(n);var o=h(a,b);return o&&o(this,l,g,n,i),n.timing.timeToLog=d()-k,g}},info:{},logs:[],options:{heatmap:{enabled:!0}}};var f=function(a,b){var c=e.getInfo(a,b);return c?c:(e.info[a]=e.info[a]||{},e.info[a][b]={getLogs:function(){return e.getLogs(a,b)}})},g=function(a){var b=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,c=a.toString().replace(b,"");return c=c.slice(c.indexOf("(")+1,c.indexOf(")")),c.match(/([^\s,]+)/g)},h=function(a,b){switch(a+"."+b){case"React.renderComponent":return i;case"ReactDOMComponent.mountComponent":case"ReactDOMComponent.updateComponent":return j;case"ReactCompositeComponent.mountComponent":case"ReactCompositeComponent.updateComponent":return k;default:return null}},i=function(a,b,c,d,f){if(d.name=b.nextComponent.constructor.displayName||"[unknown]",d.reactID=c._rootNodeID||null,e.options.heatmap.enabled){var g=b.container;g.loggedByReactDefaultPerf||(g.loggedByReactDefaultPerf=!0,f.components=f.components||[],f.components.push(g)),g.count=g.count||0,g.count+=d.timing.delta,f.max=f.max||0,g.count>f.max?(f.max=g.count,f.components.forEach(function(a){l(a,100-100*a.count/f.max)})):l(g,100-100*g.count/f.max)}},j=function(a,b,c,d,e){d.name=a.tagName||"[unknown]",d.reactID=a._rootNodeID},k=function(a,b,c,d,e){d.name=a.constructor.displayName||"[unknown]",d.reactID=a._rootNodeID},l=function(a,b){a.style.backgroundColor="hsla("+b+", 100%, 50%, 0.6)"},m=function(a){return Math.round(1e3*a)/1e3};b.exports=e},{"./performanceNow":125}],46:[function(a,b,c){var d={guard:function(a,b){return function(){try{return a.apply(this,arguments)}catch(c){throw console.error(b+": "+c.message),c}}}};b.exports=d},{}],47:[function(a,b,c){"use strict";function d(a,b,c){h.listen(c,b,p.TopLevelCallbackCreator.createTopLevelCallback(a))}function e(a,b,c){h.capture(c,b,p.TopLevelCallbackCreator.createTopLevelCallback(a))}function f(){var a=l.refreshScrollValues;h.listen(window,"scroll",a),h.listen(window,"resize",a)}var g=a("./EventConstants"),h=a("./EventListener"),i=a("./EventPluginHub"),j=a("./ExecutionEnvironment"),k=a("./ReactEventEmitterMixin"),l=a("./ViewportMetrics"),m=a("./invariant"),n=a("./isEventSupported"),o=a("./merge"),p=o(k,{TopLevelCallbackCreator:null,ensureListening:function(a,b){m(j.canUseDOM,"ensureListening(...): Cannot toggle event listening in a Worker thread. This is likely a bug in the framework. Please report immediately."),m(p.TopLevelCallbackCreator,"ensureListening(...): Cannot be called without a top level callback creator being injected."),k.ensureListening.call(p,{touchNotMouse:a,contentDocument:b})},setEnabled:function(a){m(j.canUseDOM,"setEnabled(...): Cannot toggle event listening in a Worker thread. This is likely a bug in the framework. Please report immediately."),p.TopLevelCallbackCreator&&p.TopLevelCallbackCreator.setEnabled(a)},isEnabled:function(){return!(!p.TopLevelCallbackCreator||!p.TopLevelCallbackCreator.isEnabled())},listenAtTopLevel:function(a,b){m(!b._isListening,"listenAtTopLevel(...): Cannot setup top-level listener more than once.");var c=g.topLevelTypes,h=b;f(),d(c.topMouseOver,"mouseover",h),d(c.topMouseDown,"mousedown",h),d(c.topMouseUp,"mouseup",h),d(c.topMouseMove,"mousemove",h),d(c.topMouseOut,"mouseout",h),d(c.topClick,"click",h),d(c.topDoubleClick,"dblclick",h),d(c.topContextMenu,"contextmenu",h),a&&(d(c.topTouchStart,"touchstart",h),d(c.topTouchEnd,"touchend",h),d(c.topTouchMove,"touchmove",h),d(c.topTouchCancel,"touchcancel",h)),d(c.topKeyUp,"keyup",h),d(c.topKeyPress,"keypress",h),d(c.topKeyDown,"keydown",h),d(c.topInput,"input",h),d(c.topChange,"change",h),d(c.topSelectionChange,"selectionchange",h),d(c.topCompositionEnd,"compositionend",h),d(c.topCompositionStart,"compositionstart",h),d(c.topCompositionUpdate,"compositionupdate",h),n("drag")&&(d(c.topDrag,"drag",h),d(c.topDragEnd,"dragend",h),d(c.topDragEnter,"dragenter",h),d(c.topDragExit,"dragexit",h),d(c.topDragLeave,"dragleave",h),d(c.topDragOver,"dragover",h),d(c.topDragStart,"dragstart",h),d(c.topDrop,"drop",h)),n("wheel")?d(c.topWheel,"wheel",h):n("mousewheel")?d(c.topWheel,"mousewheel",h):d(c.topWheel,"DOMMouseScroll",h),n("scroll",!0)?e(c.topScroll,"scroll",h):d(c.topScroll,"scroll",window),n("focus",!0)?(e(c.topFocus,"focus",h),e(c.topBlur,"blur",h)):n("focusin")&&(d(c.topFocus,"focusin",h),d(c.topBlur,"focusout",h)),n("copy")&&(d(c.topCopy,"copy",h),d(c.topCut,"cut",h),d(c.topPaste,"paste",h))},registrationNames:i.registrationNames,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners,trapBubbledEvent:d,trapCapturedEvent:e});b.exports=p},{"./EventConstants":15,"./EventListener":16,"./EventPluginHub":17,"./ExecutionEnvironment":21,"./ReactEventEmitterMixin":48,"./ViewportMetrics":84,"./invariant":109,"./isEventSupported":110,"./merge":118}],48:[function(a,b,c){"use strict";function d(a){e.enqueueEvents(a),e.processEventQueue()}var e=a("./EventPluginHub"),f=a("./ReactUpdates"),g={_isListening:!1,ensureListening:function(a){a.contentDocument._reactIsListening||(this.listenAtTopLevel(a.touchNotMouse,a.contentDocument),a.contentDocument._reactIsListening=!0)},handleTopLevel:function(a,b,c,g){var h=e.extractEvents(a,b,c,g);f.batchedUpdates(d,h)}};b.exports=g},{"./EventPluginHub":17,"./ReactUpdates":70}],49:[function(a,b,c){"use strict";var d=a("./ReactEventEmitter"),e=a("./ReactMount"),f=a("./getEventTarget"),g=!0,h={setEnabled:function(a){g=!!a},isEnabled:function(){return g},createTopLevelCallback:function(a){return function(b){if(g){b.srcElement&&b.srcElement!==b.target&&(b.target=b.srcElement);var c=e.getFirstReactDOM(f(b))||window,h=e.getID(c)||"";d.handleTopLevel(a,c,h,b)}}}};b.exports=h},{"./ReactEventEmitter":47,"./ReactMount":54,"./getEventTarget":102}],50:[function(a,b,c){"use strict";function d(a){return f(document.documentElement,a)}var e=a("./ReactDOMSelection"),f=a("./containsNode"),g=a("./getActiveElement"),h={hasSelectionCapabilities:function(a){return a&&("INPUT"===a.nodeName&&"text"===a.type||"TEXTAREA"===a.nodeName||"true"===a.contentEditable)},getSelectionInformation:function(){var a=g();return{focusedElem:a,selectionRange:h.hasSelectionCapabilities(a)?h.getSelection(a):null}},restoreSelection:function(a){var b=g(),c=a.focusedElem,e=a.selectionRange;b!==c&&d(c)&&(h.hasSelectionCapabilities(c)&&h.setSelection(c,e),c.focus())},getSelection:function(a){var b;if("selectionStart"in a)b={start:a.selectionStart,end:a.selectionEnd};else if(document.selection&&"INPUT"===a.nodeName){var c=document.selection.createRange();c.parentElement()===a&&(b={start:-c.moveStart("character",-a.value.length),end:-c.moveEnd("character",-a.value.length)})}else b=e.getOffsets(a);return b||{start:0,end:0}},setSelection:function(a,b){var c=b.start,d=b.end;if("undefined"==typeof d&&(d=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(d,a.value.length);else if(document.selection&&"INPUT"===a.nodeName){var f=a.createTextRange();f.collapse(!0),f.moveStart("character",c),f.moveEnd("character",d-c),f.select()}else e.setOffsets(a,b)}};b.exports=h},{"./ReactDOMSelection":41,"./containsNode":87,"./getActiveElement":101}],51:[function(a,b,c){"use strict";function d(a){return m+"r["+a.toString(36)+"]"}function e(a,b){return a.charAt(b)===m||b===a.length}function f(a){return""===a||a.charAt(0)===m&&a.charAt(a.length-1)!==m}function g(a,b){return 0===b.indexOf(a)&&e(b,a.length)}function h(a){return a?a.substr(0,a.lastIndexOf(m)):""}function i(a,b){if(l(f(a)&&f(b),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",a,b),l(g(a,b),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",a,b),a===b)return a;for(var c=a.length+n,d=c;d<b.length&&!e(b,d);d++);return b.substr(0,d)}function j(a,b){var c=Math.min(a.length,b.length);if(0===c)return"";for(var d=0,g=0;c>=g;g++)if(e(a,g)&&e(b,g))d=g;else if(a.charAt(g)!==b.charAt(g))break;var h=a.substr(0,d);return l(f(h),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",a,b,h),h}function k(a,b,c,d,e,f){a=a||"",b=b||"",l(a!==b,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",a);var j=g(b,a);l(j||g(a,b),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",a,b);for(var k=0,m=j?h:i,n=a;e&&n===a||f&&n===b||c(n,j,d),n!==b;n=m(n,b))l(k++<o,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",a,b)}var l=a("./invariant"),m=".",n=m.length,o=100,p=9999999,q={createReactRootID:function(){return d(Math.ceil(Math.random()*p))},createReactID:function(a,b){return a+m+b},getReactRootIDFromNodeID:function(a){var b=/\.r\[[^\]]+\]/.exec(a);return b&&b[0]},traverseEnterLeave:function(a,b,c,d,e){var f=j(a,b);f!==a&&k(a,f,c,d,!1,!0),f!==b&&k(f,b,c,e,!0,!1)},traverseTwoPhase:function(a,b,c){a&&(k("",a,b,c,!0,!1),k(a,"",b,c,!1,!0))},_getFirstCommonAncestorID:j,_getNextDescendantID:i,isAncestorIDOf:g,SEPARATOR:m};b.exports=q},{"./invariant":109}],52:[function(a,b,c){"use strict";function d(a,b){this.value=a,this.requestChange=b}b.exports=d},{}],53:[function(a,b,c){"use strict";var d=a("./adler32"),e={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(a){var b=d(a);return a.replace(">"," "+e.CHECKSUM_ATTR_NAME+'="'+b+'">')},canReuseMarkup:function(a,b){var c=b.getAttribute(e.CHECKSUM_ATTR_NAME);c=c&&parseInt(c,10);var f=d(a);return f===c}};b.exports=e},{"./adler32":86}],54:[function(a,b,c){"use strict";function d(a){var b=o(a);return b&&y.getID(b)}function e(a){var b=f(a);if(b)if(s.hasOwnProperty(b)){var c=s[b];c!==a&&(p(!i(c,b),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",r,b),s[b]=a)}else s[b]=a;return b}function f(a){return a&&a.getAttribute&&a.getAttribute(r)||""}function g(a,b){var c=f(a);c!==b&&delete s[c],a.setAttribute(r,b),s[b]=a}function h(a){return s.hasOwnProperty(a)&&i(s[a],a)||(s[a]=y.findReactNodeByID(a)),s[a]}function i(a,b){if(a){p(f(a)===b,"ReactMount: Unexpected modification of `%s`",r);var c=y.findReactContainerForID(b);if(c&&n(c,a))return!0}return!1}function j(a){delete s[a]}var k=a("./ReactEventEmitter"),l=a("./ReactInstanceHandles"),m=a("./$"),n=a("./containsNode"),o=a("./getReactRootElementInContainer"),p=a("./invariant"),q=l.SEPARATOR,r="data-reactid",s={},t=1,u=9,v={},w={},x={},y={allowFullPageRender:!1,totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:!1,_instancesByReactRootID:v,scrollMonitor:function(a,b){b()},prepareEnvironmentForDOM:function(a){p(a&&(a.nodeType===t||a.nodeType===u),"prepareEnvironmentForDOM(...): Target container is not a DOM element.");var b=a.nodeType===t?a.ownerDocument:a;k.ensureListening(y.useTouchEvents,b)},_updateRootComponent:function(a,b,c,e){var f=b.props;return y.scrollMonitor(c,function(){a.replaceProps(f,e)}),x[d(c)]=o(c),a},_registerComponent:function(a,b){y.prepareEnvironmentForDOM(b);var c=y.registerContainer(b);return v[c]=a,c},_renderNewRootComponent:function(a,b,c){var d=y._registerComponent(a,b);return a.mountComponentIntoNode(d,b,c),x[d]=o(b),a},renderComponent:function(a,b,c){var e=v[d(b)];if(e){if(e.constructor===a.constructor)return y._updateRootComponent(e,a,b,c);y.unmountComponentAtNode(b)}var f=o(b),g=f&&y.isRenderedByReact(f),h=g&&!e,i=y._renderNewRootComponent(a,b,h);return c&&c(),i},constructAndRenderComponent:function(a,b,c){return y.renderComponent(a(b),c)},constructAndRenderComponentByID:function(a,b,c){return y.constructAndRenderComponent(a,b,m(c))},registerContainer:function(a){var b=d(a);return b&&(b=l.getReactRootIDFromNodeID(b)),b||(b=l.createReactRootID()),w[b]=a,b},unmountComponentAtNode:function(a){var b=d(a),c=v[b];return c?(y.unmountComponentFromNode(c,a),delete v[b],delete w[b],delete x[b],!0):!1},unmountAndReleaseReactRootNode:function(){return console.warn("unmountAndReleaseReactRootNode() has been renamed to unmountComponentAtNode() and will be removed in the next version of React."),y.unmountComponentAtNode.apply(this,arguments)},unmountComponentFromNode:function(a,b){for(a.unmountComponent(),b.nodeType===u&&(b=b.documentElement);b.lastChild;)b.removeChild(b.lastChild)},findReactContainerForID:function(a){var b=l.getReactRootIDFromNodeID(a),c=w[b],d=x[b];if(d&&d.parentNode!==c){p(f(d)===b,"ReactMount: Root element ID differed from reactRootID.");var e=c.firstChild;e&&b===f(e)?x[b]=e:console.warn("ReactMount: Root element has been removed from its original container. New container:",d.parentNode)}return c},findReactNodeByID:function(a){var b=y.findReactContainerForID(a);return y.findComponentRoot(b,a)},isRenderedByReact:function(a){if(1!==a.nodeType)return!1;var b=y.getID(a);return b?b.charAt(0)===q:!1},getFirstReactDOM:function(a){for(var b=a;b&&b.parentNode!==b;){if(y.isRenderedByReact(b))return b;b=b.parentNode}return null},findComponentRoot:function(a,b){for(var c=[a.firstChild],d=0;d<c.length;)for(var e=c[d++];e;){var f=y.getID(e);if(f){if(b===f)return e;if(l.isAncestorIDOf(f,b)){c.length=d=0,c.push(e.firstChild);break}c.push(e.firstChild)}else c.push(e.firstChild);e=e.nextSibling}console.error("Error while invoking `findComponentRoot` with the following ancestor node:",a),p(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g. by the browser).",b,y.getID(a))},ATTR_NAME:r,getReactRootID:d,getID:e,setID:g,getNode:h,purgeID:j,injection:{}};b.exports=y},{"./$":1,"./ReactEventEmitter":47,"./ReactInstanceHandles":51,"./containsNode":87,"./getReactRootElementInContainer":105,"./invariant":109}],55:[function(a,b,c){"use strict";function d(a){this._queue=a||null}var e=a("./PooledClass"),f=a("./mixInto");f(d,{enqueue:function(a,b){this._queue=this._queue||[],this._queue.push({component:a,callback:b})},notifyAll:function(){var a=this._queue;if(a){this._queue=null;for(var b=0,c=a.length;c>b;b++){var d=a[b].component,e=a[b].callback;e.call(d,d.getDOMNode())}a.length=0}},reset:function(){this._queue=null},destructor:function(){this.reset()}}),e.addPoolingTo(d),b.exports=d},{"./PooledClass":25,"./mixInto":121}],56:[function(a,b,c){"use strict";function d(a,b){return a&&b&&a.constructor===b.constructor}function e(a,b,c){o.push({parentID:a,parentNode:null,type:l.INSERT_MARKUP,markupIndex:p.push(b)-1,textContent:null,fromIndex:null,toIndex:c})}function f(a,b,c){o.push({parentID:a,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:b,toIndex:c})}function g(a,b){o.push({parentID:a,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:b,toIndex:null})}function h(a,b){o.push({parentID:a,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:b,fromIndex:null,toIndex:null})}function i(){o.length&&(k.DOMIDOperations.dangerouslyProcessChildrenUpdates(o,p),j())}function j(){o.length=0,p.length=0}var k=a("./ReactComponent"),l=a("./ReactMultiChildUpdateTypes"),m=a("./flattenChildren"),n=0,o=[],p=[],q={Mixin:{mountChildren:function(a,b){var c=m(a),d=[],e=0;this._renderedChildren=c;for(var f in c){var g=c[f];if(c.hasOwnProperty(f)&&g){var h=this._rootNodeID+"."+f,i=g.mountComponent(h,b,this._mountDepth+1);g._mountImage=i,g._mountIndex=e,d.push(i),e++}}return d},updateTextContent:function(a){n++;try{var b=this._renderedChildren;for(var c in b)b.hasOwnProperty(c)&&b[c]&&this._unmountChildByName(b[c],c);this.setTextContent(a)}catch(d){throw n--,n||j(),d}n--,n||i()},updateChildren:function(a,b){n++;try{this._updateChildren(a,b)}catch(c){throw n--,n||j(),c}n--,n||i()},_updateChildren:function(a,b){var c=m(a),e=this._renderedChildren;if(c||e){var f,g=0,h=0;for(f in c)if(c.hasOwnProperty(f)){var i=e&&e[f],j=c[f];d(i,j)?(this.moveChild(i,h,g),g=Math.max(i._mountIndex,g),i.receiveComponent(j,b),i._mountIndex=h):(i&&(g=Math.max(i._mountIndex,g),this._unmountChildByName(i,f)),j&&this._mountChildByNameAtIndex(j,f,h,b)),j&&h++}for(f in e)!e.hasOwnProperty(f)||!e[f]||c&&c[f]||this._unmountChildByName(e[f],f)}},unmountChildren:function(){var a=this._renderedChildren;for(var b in a){var c=a[b];c&&c.unmountComponent&&c.unmountComponent()}this._renderedChildren=null},moveChild:function(a,b,c){a._mountIndex<c&&f(this._rootNodeID,a._mountIndex,b)},createChild:function(a){e(this._rootNodeID,a._mountImage,a._mountIndex)},removeChild:function(a){g(this._rootNodeID,a._mountIndex)},setTextContent:function(a){h(this._rootNodeID,a)},_mountChildByNameAtIndex:function(a,b,c,d){var e=this._rootNodeID+"."+b,f=a.mountComponent(e,d,this._mountDepth+1);a._mountImage=f,a._mountIndex=c,this.createChild(a),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[b]=a},_unmountChildByName:function(a,b){k.isValidComponent(a)&&(this.removeChild(a),a._mountImage=null,a._mountIndex=null,a.unmountComponent(),delete this._renderedChildren[b])}}};b.exports=q},{"./ReactComponent":28,"./ReactMultiChildUpdateTypes":57,"./flattenChildren":98}],57:[function(a,b,c){var d=a("./keyMirror"),e=d({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});b.exports=e},{"./keyMirror":115}],58:[function(a,b,c){"use strict";var d=a("./invariant"),e={isValidOwner:function(a){return!(!a||"function"!=typeof a.attachRef||"function"!=typeof a.detachRef)},addComponentAsRefTo:function(a,b,c){d(e.isValidOwner(c),"addComponentAsRefTo(...): Only a ReactOwner can have refs."),c.attachRef(b,a)},removeComponentAsRefFrom:function(a,b,c){d(e.isValidOwner(c),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs."),c.refs[b]===a&&c.detachRef(b)},Mixin:{attachRef:function(a,b){d(b.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",a);var c=this.refs||(this.refs={});c[a]=b},detachRef:function(a){delete this.refs[a]}}};b.exports=e},{"./invariant":109}],59:[function(a,b,c){"use strict";function d(a,b,c){return c}var e={enableMeasure:!1,storedMeasure:d,measure:function(a,b,c){var d=null;return function(){return e.enableMeasure?(d||(d=e.storedMeasure(a,b,c)),d.apply(this,arguments)):c.apply(this,arguments)}},injection:{injectMeasure:function(a){e.storedMeasure=a}}},f=a("./ExecutionEnvironment"),g=f.canUseDOM&&window.location.href||"";e.enableMeasure=e.enableMeasure||/[?&]react_perf\b/.test(g),b.exports=e},{"./ExecutionEnvironment":21}],60:[function(a,b,c){"use strict";function d(a){return function(b,c,d){b.hasOwnProperty(c)?b[c]=a(b[c],d):b[c]=d}}var e=a("./emptyFunction"),f=a("./invariant"),g=a("./joinClasses"),h=a("./merge"),i={children:e,className:d(g),ref:e,style:d(h)},j={TransferStrategies:i,Mixin:{transferPropsTo:function(a){f(a.props.__owner__===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,a.constructor.displayName);var b={};for(var c in a.props)a.props.hasOwnProperty(c)&&(b[c]=a.props[c]);for(var d in this.props)if(this.props.hasOwnProperty(d)){var e=i[d];e?e(b,d,this.props[d]):b.hasOwnProperty(d)||(b[d]=this.props[d])}return a.props=b,a}}};b.exports=j},{"./emptyFunction":94,"./invariant":109,"./joinClasses":114,"./merge":118}],61:[function(a,b,c){"use strict";function d(a){function b(b,c,d){var e=typeof b;"object"===e&&Array.isArray(b)&&(e="array"),i(e===a,"Invalid prop `%s` of type `%s` supplied to `%s`, expected `%s`.",c,e,d,a)}return g(b)}function e(a){function b(a,b,d){i(c[a],"Invalid prop `%s` supplied to `%s`, expected one of %s.",b,d,JSON.stringify(Object.keys(c)))}var c=h(a);return g(b)}function f(a){function b(b,c,d){i(b instanceof a,"Invalid prop `%s` supplied to `%s`, expected instance of `%s`.",c,d,a.name||k)}return g(b)}function g(a){function b(c){function d(b,d,e){var f=b[d];null!=f?a(f,d,e||k):i(!c,"Required prop `%s` was not specified in `%s`.",d,e||k)}return c||(d.isRequired=b(!0)),d}return b(!1)}var h=a("./createObjectFrom"),i=a("./invariant"),j={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),oneOf:e,instanceOf:f},k="<<anonymous>>";b.exports=j},{"./createObjectFrom":91,"./invariant":109}],62:[function(a,b,c){"use strict";function d(){this.reinitializeTransaction(),this.reactMountReady=i.getPooled(null)}var e=a("./ExecutionEnvironment"),f=a("./PooledClass"),g=a("./ReactEventEmitter"),h=a("./ReactInputSelection"),i=a("./ReactMountReady"),j=a("./Transaction"),k=a("./mixInto"),l={initialize:h.getSelectionInformation,close:h.restoreSelection},m={initialize:function(){var a=g.isEnabled();return g.setEnabled(!1),a},close:function(a){g.setEnabled(a)}},n={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},o=[l,m,n],p={getTransactionWrappers:function(){return e.canUseDOM?o:[]},getReactMountReady:function(){return this.reactMountReady},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};k(d,j.Mixin),k(d,p),f.addPoolingTo(d),b.exports=d},{"./ExecutionEnvironment":21,"./PooledClass":25,"./ReactEventEmitter":47,"./ReactInputSelection":50,"./ReactMountReady":55,"./Transaction":83,"./mixInto":121}],63:[function(a,b,c){"use strict";function d(a,b){i(e.isValidComponent(a),"renderComponentToString(): You must pass a valid ReactComponent."),i("function"==typeof b,"renderComponentToString(): You must pass a function as a callback.");var c=f.createReactRootID(),d=h.getPooled();d.reinitializeTransaction();try{d.perform(function(){var e=a.mountComponent(c,d,0);e=g.addChecksumToMarkup(e),b(e)},null)}finally{h.release(d)}}var e=a("./ReactComponent"),f=a("./ReactInstanceHandles"),g=a("./ReactMarkupChecksum"),h=a("./ReactReconcileTransaction"),i=a("./invariant");
b.exports={renderComponentToString:d}},{"./ReactComponent":28,"./ReactInstanceHandles":51,"./ReactMarkupChecksum":53,"./ReactReconcileTransaction":62,"./invariant":109}],64:[function(a,b,c){"use strict";function d(a,b){var c={};return function(d){c[b]=d,a.setState(c)}}var e={createStateSetter:function(a,b){return function(c,d,e,f,g,h){var i=b.call(a,c,d,e,f,g,h);i&&a.setState(i)}},createStateKeySetter:function(a,b){var c=a.__keySetters||(a.__keySetters={});return c[b]||(c[b]=d(a,b))}};e.Mixin={createStateSetter:function(a){return e.createStateSetter(this,a)},createStateKeySetter:function(a){return e.createStateKeySetter(this,a)}},b.exports=e},{}],65:[function(a,b,c){"use strict";var d=a("./ReactComponent"),e=a("./ReactMount"),f=a("./escapeTextForBrowser"),g=a("./mixInto"),h=function(a){this.construct({text:a})};g(h,d.Mixin),g(h,{mountComponent:function(a,b,c){return d.Mixin.mountComponent.call(this,a,b,c),"<span "+e.ATTR_NAME+'="'+f(a)+'">'+f(this.props.text)+"</span>"},receiveComponent:function(a,b){var c=a.props;c.text!==this.props.text&&(this.props.text=c.text,d.DOMIDOperations.updateTextContentByID(this._rootNodeID,c.text))}}),b.exports=h},{"./ReactComponent":28,"./ReactMount":54,"./escapeTextForBrowser":95,"./mixInto":121}],66:[function(a,b,c){"use strict";function d(){var a=document.createElement("div"),b=a.style;for(var c in h){var d=h[c];for(var e in d)if(e in b){i.push(d[e]);break}}}function e(a,b,c){a.addEventListener(b,c,!1)}function f(a,b,c){a.removeEventListener(b,c,!1)}var g=a("./ExecutionEnvironment"),h={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},i=[];g.canUseDOM&&d();var j={addEndEventListener:function(a,b){return 0===i.length?void window.setTimeout(b,0):void i.forEach(function(c){e(a,c,b)})},removeEndEventListener:function(a,b){0!==i.length&&i.forEach(function(c){f(a,c,b)})}};b.exports=j},{"./ExecutionEnvironment":21}],67:[function(a,b,c){"use strict";var d=a("./React"),e=a("./ReactTransitionableChild"),f=a("./ReactTransitionKeySet"),g=d.createClass({propTypes:{transitionName:d.PropTypes.string.isRequired,transitionEnter:d.PropTypes.bool,transitionLeave:d.PropTypes.bool,onTransition:d.PropTypes.func,component:d.PropTypes.func},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0,component:d.DOM.span}},componentWillMount:function(){this._transitionGroupCurrentKeys={}},componentDidUpdate:function(){this.props.onTransition&&this.props.onTransition()},renderTransitionableChildren:function(a){var b={},c=f.getChildMapping(a),d=f.mergeKeySets(this._transitionGroupCurrentKeys,f.getKeySet(a));for(var g in d)(c[g]||this.props.transitionLeave)&&(b[g]=e({name:this.props.transitionName,enter:this.props.transitionEnter,onDoneLeaving:this._handleDoneLeaving.bind(this,g)},c[g]));return this._transitionGroupCurrentKeys=d,b},_handleDoneLeaving:function(a){delete this._transitionGroupCurrentKeys[a],this.forceUpdate()},render:function(){return this.transferPropsTo(this.props.component({transitionName:null,transitionEnter:null,transitionLeave:null,component:null},this.renderTransitionableChildren(this.props.children)))}});b.exports=g},{"./React":26,"./ReactTransitionKeySet":68,"./ReactTransitionableChild":69}],68:[function(a,b,c){"use strict";var d=a("./ReactChildren"),e={},f={getChildMapping:function(a){return d.map(a,function(a){return a})},getKeySet:function(a){return d.map(a,function(){return!0})},mergeKeySets:function(a,b){a=a||{},b=b||{};var c,d={},f=Object.keys(a).concat([e]),g=Object.keys(b).concat([e]);for(c=0;c<f.length-1;c++){var h=f[c];if(!b[h]){for(var i=-1,j=c+1;j<f.length&&(i=g.indexOf(f[j]),!(i>=0));j++);g.splice(i,0,h)}}for(c=0;c<g.length-1;c++)d[g[c]]=!0;return d}};b.exports=f},{"./ReactChildren":27}],69:[function(a,b,c){"use strict";var d=a("./React"),e=a("./CSSCore"),f=a("./ReactTransitionEvents"),g=17,h=5e3,i=null;i=function(){console.warn("transition(): tried to perform an animation without an animationend or transitionend event after timeout ("+h+"ms). You should either disable this transition in JS or add a CSS animation/transition.")};var j=d.createClass({transition:function(a,b,c){var d=this.getDOMNode(),g=this.props.name+"-"+a,j=g+"-active",k=null,l=function(){clearTimeout(k),b||(e.removeClass(d,g),e.removeClass(d,j)),f.removeEndEventListener(d,l),c&&c()};f.addEndEventListener(d,l),e.addClass(d,g),this.queueClass(j),k=setTimeout(i,h)},queueClass:function(a){return this.classNameQueue.push(a),this.props.runNextTick?void this.props.runNextTick(this.flushClassNameQueue):void(this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,g)))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(e.addClass.bind(e,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillReceiveProps:function(a){!a.children&&this.props.children&&(this.savedChildren=this.props.children)},componentDidMount:function(a){this.props.enter&&this.transition("enter")},componentDidUpdate:function(a,b,c){a.children&&!this.props.children&&this.transition("leave",!0,this.props.onDoneLeaving)},render:function(){return this.props.children||this.savedChildren}});b.exports=j},{"./CSSCore":2,"./React":26,"./ReactTransitionEvents":66}],70:[function(a,b,c){"use strict";function d(){k(m,"ReactUpdates: must inject a batching strategy")}function e(a,b){d(),m.batchedUpdates(a,b)}function f(a,b){return a._mountDepth-b._mountDepth}function g(){l.sort(f);for(var a=0;a<l.length;a++){var b=l[a];if(b.isMounted()){var c=b._pendingCallbacks;if(b._pendingCallbacks=null,b.performUpdateIfNecessary(),c)for(var d=0;d<c.length;d++)c[d].call(b)}}}function h(){l.length=0}function i(){try{g()}catch(a){throw a}finally{h()}}function j(a,b){return k(!b||"function"==typeof b,"enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),d(),m.isBatchingUpdates?(l.push(a),void(b&&(a._pendingCallbacks?a._pendingCallbacks.push(b):a._pendingCallbacks=[b]))):(a.performUpdateIfNecessary(),void(b&&b()))}var k=a("./invariant"),l=[],m=null,n={injectBatchingStrategy:function(a){k(a,"ReactUpdates: must provide a batching strategy"),k("function"==typeof a.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),k("boolean"==typeof a.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),m=a}},o={batchedUpdates:e,enqueueUpdate:j,flushBatchedUpdates:i,injection:n};b.exports=o},{"./invariant":109}],71:[function(a,b,c){"use strict";var d=a("./LinkedStateMixin"),e=a("./React"),f=a("./ReactTransitionGroup"),g=a("./cx");e.addons={classSet:g,LinkedStateMixin:d,TransitionGroup:f},b.exports=e},{"./LinkedStateMixin":22,"./React":26,"./ReactTransitionGroup":67,"./cx":92}],72:[function(a,b,c){"use strict";function d(a){if("selectionStart"in a&&k.hasSelectionCapabilities(a))return{start:a.selectionStart,end:a.selectionEnd};if(document.selection){var b=document.selection.createRange();return{parentElement:b.parentElement(),text:b.text,top:b.boundingTop,left:b.boundingLeft}}var c=window.getSelection();return{anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}}function e(a){if(!x&&t==m()){var b=d(t);if(!w||!p(w,b)){w=b;var c=l.getPooled(r.select,u,a);return c.type="select",c.target=t,i.accumulateTwoPhaseDispatches(c),c}}}function f(){if(v){var a=e(v);v=null,a&&(h.enqueueEvents(a),h.processEventQueue())}}var g=a("./EventConstants"),h=a("./EventPluginHub"),i=a("./EventPropagators"),j=a("./ExecutionEnvironment"),k=a("./ReactInputSelection"),l=a("./SyntheticEvent"),m=a("./getActiveElement"),n=a("./isTextInputElement"),o=a("./keyOf"),p=a("./shallowEqual"),q=g.topLevelTypes,r={select:{phasedRegistrationNames:{bubbled:o({onSelect:null}),captured:o({onSelectCapture:null})}}},s=!1;j.canUseDOM&&(s="onselectionchange"in document);var t=null,u=null,v=null,w=null,x=!1,y={eventTypes:r,extractEvents:function(a,b,c,d){switch(a){case q.topFocus:(n(b)||"true"===b.contentEditable)&&(t=b,u=c,w=null);break;case q.topBlur:t=null,u=null,w=null;break;case q.topMouseDown:x=!0;break;case q.topContextMenu:case q.topMouseUp:return x=!1,e(d);case q.topSelectionChange:return e(d);case q.topKeyDown:s||(v=d,setTimeout(f,0))}}};b.exports=y},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":50,"./SyntheticEvent":76,"./getActiveElement":101,"./isTextInputElement":112,"./keyOf":116,"./shallowEqual":126}],73:[function(a,b,c){"use strict";var d=a("./EventConstants"),e=a("./EventPropagators"),f=a("./SyntheticClipboardEvent"),g=a("./SyntheticEvent"),h=a("./SyntheticFocusEvent"),i=a("./SyntheticKeyboardEvent"),j=a("./SyntheticMouseEvent"),k=a("./SyntheticTouchEvent"),l=a("./SyntheticUIEvent"),m=a("./SyntheticWheelEvent"),n=a("./invariant"),o=a("./keyOf"),p=d.topLevelTypes,q={blur:{phasedRegistrationNames:{bubbled:o({onBlur:!0}),captured:o({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:o({onClick:!0}),captured:o({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:o({onContextMenu:!0}),captured:o({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:o({onCopy:!0}),captured:o({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:o({onCut:!0}),captured:o({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:o({onDoubleClick:!0}),captured:o({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:o({onDrag:!0}),captured:o({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:o({onDragEnd:!0}),captured:o({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:o({onDragEnter:!0}),captured:o({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:o({onDragExit:!0}),captured:o({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:o({onDragLeave:!0}),captured:o({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:o({onDragOver:!0}),captured:o({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:o({onDragStart:!0}),captured:o({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:o({onDrop:!0}),captured:o({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:o({onFocus:!0}),captured:o({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:o({onInput:!0}),captured:o({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:o({onKeyDown:!0}),captured:o({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:o({onKeyPress:!0}),captured:o({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:o({onKeyUp:!0}),captured:o({onKeyUpCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:o({onMouseDown:!0}),captured:o({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:o({onMouseMove:!0}),captured:o({onMouseMoveCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:o({onMouseUp:!0}),captured:o({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:o({onPaste:!0}),captured:o({onPasteCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:o({onScroll:!0}),captured:o({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:o({onSubmit:!0}),captured:o({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:o({onTouchCancel:!0}),captured:o({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:o({onTouchEnd:!0}),captured:o({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:o({onTouchMove:!0}),captured:o({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:o({onTouchStart:!0}),captured:o({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:o({onWheel:!0}),captured:o({onWheelCapture:!0})}}},r={topBlur:q.blur,topClick:q.click,topContextMenu:q.contextMenu,topCopy:q.copy,topCut:q.cut,topDoubleClick:q.doubleClick,topDrag:q.drag,topDragEnd:q.dragEnd,topDragEnter:q.dragEnter,topDragExit:q.dragExit,topDragLeave:q.dragLeave,topDragOver:q.dragOver,topDragStart:q.dragStart,topDrop:q.drop,topFocus:q.focus,topInput:q.input,topKeyDown:q.keyDown,topKeyPress:q.keyPress,topKeyUp:q.keyUp,topMouseDown:q.mouseDown,topMouseMove:q.mouseMove,topMouseUp:q.mouseUp,topPaste:q.paste,topScroll:q.scroll,topSubmit:q.submit,topTouchCancel:q.touchCancel,topTouchEnd:q.touchEnd,topTouchMove:q.touchMove,topTouchStart:q.touchStart,topWheel:q.wheel},s={eventTypes:q,executeDispatch:function(a,b,c){var d=b(a,c);d===!1&&(a.stopPropagation(),a.preventDefault())},extractEvents:function(a,b,c,d){var o=r[a];if(!o)return null;var q;switch(a){case p.topInput:case p.topSubmit:q=g;break;case p.topKeyDown:case p.topKeyPress:case p.topKeyUp:q=i;break;case p.topBlur:case p.topFocus:q=h;break;case p.topClick:if(2===d.button)return null;case p.topContextMenu:case p.topDoubleClick:case p.topDrag:case p.topDragEnd:case p.topDragEnter:case p.topDragExit:case p.topDragLeave:case p.topDragOver:case p.topDragStart:case p.topDrop:case p.topMouseDown:case p.topMouseMove:case p.topMouseUp:q=j;break;case p.topTouchCancel:case p.topTouchEnd:case p.topTouchMove:case p.topTouchStart:q=k;break;case p.topScroll:q=l;break;case p.topWheel:q=m;break;case p.topCopy:case p.topCut:case p.topPaste:q=f}n(q,"SimpleEventPlugin: Unhandled event type, `%s`.",a);var s=q.getPooled(o,c,d);return e.accumulateTwoPhaseDispatches(s),s}};b.exports=s},{"./EventConstants":15,"./EventPropagators":20,"./SyntheticClipboardEvent":74,"./SyntheticEvent":76,"./SyntheticFocusEvent":77,"./SyntheticKeyboardEvent":78,"./SyntheticMouseEvent":79,"./SyntheticTouchEvent":80,"./SyntheticUIEvent":81,"./SyntheticWheelEvent":82,"./invariant":109,"./keyOf":116}],74:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticEvent"),f={clipboardData:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticEvent":76}],75:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticEvent"),f={data:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticEvent":76}],76:[function(a,b,c){"use strict";function d(a,b,c){this.dispatchConfig=a,this.dispatchMarker=b,this.nativeEvent=c;var d=this.constructor.Interface;for(var e in d)if(d.hasOwnProperty(e)){var g=d[e];g?this[e]=g(c):this[e]=c[e]}var h=null!=c.defaultPrevented?c.defaultPrevented:c.returnValue===!1;h?this.isDefaultPrevented=f.thatReturnsTrue:this.isDefaultPrevented=f.thatReturnsFalse,this.isPropagationStopped=f.thatReturnsFalse}var e=a("./PooledClass"),f=a("./emptyFunction"),g=a("./getEventTarget"),h=a("./merge"),i=a("./mergeInto"),j={type:null,target:g,currentTarget:null,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a.preventDefault?a.preventDefault():a.returnValue=!1,this.isDefaultPrevented=f.thatReturnsTrue},stopPropagation:function(){var a=this.nativeEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this.isPropagationStopped=f.thatReturnsTrue},persist:function(){this.isPersistent=f.thatReturnsTrue},isPersistent:f.thatReturnsFalse,destructor:function(){var a=this.constructor.Interface;for(var b in a)this[b]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),d.Interface=j,d.augmentClass=function(a,b){var c=this,d=Object.create(c.prototype);i(d,a.prototype),a.prototype=d,a.prototype.constructor=a,a.Interface=h(c.Interface,b),a.augmentClass=c.augmentClass,e.addPoolingTo(a,e.threeArgumentPooler)},e.addPoolingTo(d,e.threeArgumentPooler),b.exports=d},{"./PooledClass":25,"./emptyFunction":94,"./getEventTarget":102,"./merge":118,"./mergeInto":120}],77:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticUIEvent"),f={relatedTarget:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticUIEvent":81}],78:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticUIEvent"),f={"char":null,key:null,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,charCode:null,keyCode:null,which:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticUIEvent":81}],79:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticUIEvent"),f=a("./ViewportMetrics"),g={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,button:function(a){var b=a.button;return"which"in a?b:2===b?2:4===b?1:0},buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},pageX:function(a){return"pageX"in a?a.pageX:a.clientX+f.currentScrollLeft},pageY:function(a){return"pageY"in a?a.pageY:a.clientY+f.currentScrollTop}};e.augmentClass(d,g),b.exports=d},{"./SyntheticUIEvent":81,"./ViewportMetrics":84}],80:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticUIEvent"),f={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticUIEvent":81}],81:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticEvent"),f={view:null,detail:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticEvent":76}],82:[function(a,b,c){"use strict";function d(a,b,c){e.call(this,a,b,c)}var e=a("./SyntheticMouseEvent"),f={deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?-a.deltaY:"wheelDeltaY"in a?a.wheelDeltaY:"wheelDelta"in a?a.wheelDelta:0},deltaZ:null,deltaMode:null};e.augmentClass(d,f),b.exports=d},{"./SyntheticMouseEvent":79}],83:[function(a,b,c){"use strict";var d=a("./invariant"),e={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this.timingMetrics||(this.timingMetrics={}),this.timingMetrics.methodInvocationTime=0,this.timingMetrics.wrapperInitTimes?this.timingMetrics.wrapperInitTimes.length=0:this.timingMetrics.wrapperInitTimes=[],this.timingMetrics.wrapperCloseTimes?this.timingMetrics.wrapperCloseTimes.length=0:this.timingMetrics.wrapperCloseTimes=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(a,b,c,e,f,g,h,i){d(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var j,k=Date.now(),l=null;try{this.initializeAll(),j=a.call(b,c,e,f,g,h,i)}catch(m){l=m}finally{var n=Date.now();this.methodInvocationTime+=n-k;try{this.closeAll()}catch(o){l=l||o}}if(l)throw l;return j},initializeAll:function(){this._isInTransaction=!0;for(var a=this.transactionWrappers,b=this.timingMetrics.wrapperInitTimes,c=null,d=0;d<a.length;d++){var e=Date.now(),g=a[d];try{this.wrapperInitData[d]=g.initialize?g.initialize.call(this):null}catch(h){c=c||h,this.wrapperInitData[d]=f.OBSERVED_ERROR}finally{var i=b[d],j=Date.now();b[d]=(i||0)+(j-e)}}if(c)throw c},closeAll:function(){d(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var a=this.transactionWrappers,b=this.timingMetrics.wrapperCloseTimes,c=null,e=0;e<a.length;e++){var g=a[e],h=Date.now(),i=this.wrapperInitData[e];try{i!==f.OBSERVED_ERROR&&g.close&&g.close.call(this,i)}catch(j){c=c||j}finally{var k=Date.now(),l=b[e];b[e]=(l||0)+(k-h)}}if(this.wrapperInitData.length=0,this._isInTransaction=!1,c)throw c}},f={Mixin:e,OBSERVED_ERROR:{}};b.exports=f},{"./invariant":109}],84:[function(a,b,c){"use strict";var d=a("./getUnboundedScrollPosition"),e={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var a=d(window);e.currentScrollLeft=a.x,e.currentScrollTop=a.y}};b.exports=e},{"./getUnboundedScrollPosition":107}],85:[function(a,b,c){"use strict";function d(a,b){if(e(null!=b,"accumulate(...): Accumulated items must be not be null or undefined."),null==a)return b;var c=Array.isArray(a),d=Array.isArray(b);return c?a.concat(b):d?[a].concat(b):[a,b]}var e=a("./invariant");b.exports=d},{"./invariant":109}],86:[function(a,b,c){"use strict";function d(a){for(var b=1,c=0,d=0;d<a.length;d++)b=(b+a.charCodeAt(d))%e,c=(c+b)%e;return b|c<<16}var e=65521;b.exports=d},{}],87:[function(a,b,c){function d(a,b){return a&&b?a===b?!0:e(a)?!1:e(b)?d(a,b.parentNode):a.contains?a.contains(b):a.compareDocumentPosition?!!(16&a.compareDocumentPosition(b)):!1:!1}var e=a("./isTextNode");b.exports=d},{"./isTextNode":113}],88:[function(a,b,c){function d(a,b,c,d,e,f,g){if(a=a||{},g)throw new Error("Too many arguments passed to copyProperties");for(var h,i=[b,c,d,e,f],j=0;i[j];){h=i[j++];for(var k in h)a[k]=h[k];h.hasOwnProperty&&h.hasOwnProperty("toString")&&"undefined"!=typeof h.toString&&a.toString!==h.toString&&(a.toString=h.toString)}return a}b.exports=d},{}],89:[function(a,b,c){function d(a){return!!a&&("object"==typeof a||"function"==typeof a)&&"length"in a&&!("setInterval"in a)&&"number"!=typeof a.nodeType&&(Array.isArray(a)||"callee"in a||"item"in a)}function e(a){if(!d(a))return[a];if(a.item){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}return Array.prototype.slice.call(a)}b.exports=e},{}],90:[function(a,b,c){function d(a){var b=a.match(k);return b&&b[1].toLowerCase()}function e(a,b){var c=j;i(!!j,"createNodesFromMarkup dummy not initialized");var e=d(a),f=e&&h(e);if(f){c.innerHTML=f[1]+a+f[2];for(var k=f[0];k--;)c=c.lastChild}else c.innerHTML=a;var l=c.getElementsByTagName("script");l.length&&(i(b,"createNodesFromMarkup(...): Unexpected <script> element rendered."),g(l).forEach(b));for(var m=g(c.childNodes);c.lastChild;)c.removeChild(c.lastChild);return m}var f=a("./ExecutionEnvironment"),g=a("./createArrayFrom"),h=a("./getMarkupWrap"),i=a("./invariant"),j=f.canUseDOM?document.createElement("div"):null,k=/^\s*<(\w+)/;b.exports=e},{"./ExecutionEnvironment":21,"./createArrayFrom":89,"./getMarkupWrap":103,"./invariant":109}],91:[function(a,b,c){function d(a,b){if(!Array.isArray(a))throw new TypeError("Must pass an array of keys.");var c={},d=Array.isArray(b);"undefined"==typeof b&&(b=!0);for(var e=a.length;e--;)c[a[e]]=d?b[e]:b;return c}b.exports=d},{}],92:[function(a,b,c){function d(a){return"object"==typeof a?Object.keys(a).map(function(b){return a[b]?b:""}).join(" "):Array.prototype.join.call(arguments," ")}b.exports=d},{}],93:[function(a,b,c){"use strict";function d(a,b){var c=null==b||"boolean"==typeof b||""===b;if(c)return"";var d=isNaN(b);return d||0===b||e.isUnitlessNumber[a]?""+b:b+"px"}var e=a("./CSSProperty");b.exports=d},{"./CSSProperty":3}],94:[function(a,b,c){function d(a){return function(){return a}}function e(){}var f=a("./copyProperties");f(e,{thatReturns:d,thatReturnsFalse:d(!1),thatReturnsTrue:d(!0),thatReturnsNull:d(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(a){return a}}),b.exports=e},{"./copyProperties":88}],95:[function(a,b,c){"use strict";function d(a){return f[a]}function e(a){return(""+a).replace(g,d)}var f={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},g=/[&><"'\/]/g;b.exports=e},{}],96:[function(a,b,c){var d=function(a){var b=Array.prototype.slice.call(arguments).map(function(a){return String(a)}),c=a.split("%s").length-1;return c!==b.length-1?d("ex args number mismatch: %s",JSON.stringify(b)):d._prefix+JSON.stringify(b)+d._suffix};d._prefix="<![EX[",d._suffix="]]>",b.exports=d},{}],97:[function(a,b,c){"use strict";function d(a,b,c){for(var d=a.attributes,e=d.length,f=[],g=0;e>g;g++){var h=d.item(g);b.call(c,h)&&f.push(h)}return f}b.exports=d},{}],98:[function(a,b,c){"use strict";function d(a,b,c){var d=a;f(!d.hasOwnProperty(c),"flattenChildren(...): Encountered two children with the same key, `%s`. Children keys must be unique.",c),d[c]=b}function e(a){if(null==a)return a;var b={};return g(a,d,b),b}var f=a("./invariant"),g=a("./traverseAllChildren");b.exports=e},{"./invariant":109,"./traverseAllChildren":127}],99:[function(a,b,c){"use strict";var d=function(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)};b.exports=d},{}],100:[function(a,b,c){function d(a,b,c){return"string"!=typeof a?a:b?e(a,b,c):document.getElementById(a)}function e(a,b,c){var d,g,h;if(f(b)==a)return b;if(b.getElementsByTagName){for(g=b.getElementsByTagName(c||"*"),h=0;h<g.length;h++)if(f(g[h])==a)return g[h]}else for(g=b.childNodes,h=0;h<g.length;h++)if(d=e(a,g[h]))return d;return null}function f(a){var b=a.getAttributeNode&&a.getAttributeNode("id");return b?b.value:null}b.exports=d},{}],101:[function(a,b,c){function d(){try{return document.activeElement}catch(a){return null}}b.exports=d},{}],102:[function(a,b,c){"use strict";function d(a){var b=a.target||a.srcElement||window;return 3===b.nodeType?b.parentNode:b}b.exports=d},{}],103:[function(a,b,c){function d(a){return f(!!g,"Markup wrapping node not initialized"),m.hasOwnProperty(a)||(a="*"),h.hasOwnProperty(a)||("*"===a?g.innerHTML="<link />":g.innerHTML="<"+a+"></"+a+">",h[a]=!g.firstChild),h[a]?m[a]:null}var e=a("./ExecutionEnvironment"),f=a("./invariant"),g=e.canUseDOM?document.createElement("div"):null,h={circle:!0,g:!0,line:!0,path:!0,polyline:!0,rect:!0,text:!0},i=[1,'<select multiple="true">',"</select>"],j=[1,"<table>","</table>"],k=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],m={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:i,option:i,caption:j,colgroup:j,tbody:j,tfoot:j,thead:j,td:k,th:k,circle:l,g:l,line:l,path:l,polyline:l,rect:l,text:l};b.exports=d},{"./ExecutionEnvironment":21,"./invariant":109}],104:[function(a,b,c){"use strict";function d(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function e(a){for(;a;){if(a.nextSibling)return a.nextSibling;a=a.parentNode}}function f(a,b){for(var c=d(a),f=0,g=0;c;){if(3==c.nodeType){if(g=f+c.textContent.length,b>=f&&g>=b)return{node:c,offset:b-f};f=g}c=d(e(c))}}b.exports=f},{}],105:[function(a,b,c){"use strict";function d(a){return a?a.nodeType===e?a.documentElement:a.firstChild:null}var e=9;b.exports=d},{}],106:[function(a,b,c){"use strict";function d(){return!f&&e.canUseDOM&&(f="innerText"in document.createElement("div")?"innerText":"textContent"),f}var e=a("./ExecutionEnvironment"),f=null;b.exports=d},{"./ExecutionEnvironment":21}],107:[function(a,b,c){"use strict";function d(a){return a===window?{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}:{x:a.scrollLeft,y:a.scrollTop}}b.exports=d},{}],108:[function(a,b,c){function d(a){return a.replace(e,"-$1").toLowerCase()}var e=/([A-Z])/g;b.exports=d},{}],109:[function(a,b,c){function d(a){if(!a)throw new Error("Invariant Violation")}b.exports=d;var e=function(a,b,c,d,e,f,g,h){if(void 0===b)throw new Error("invariant requires an error message argument");if(!a){var i=[c,d,e,f,g,h],j=0;throw new Error("Invariant Violation: "+b.replace(/%s/g,function(){return i[j++]}))}};b.exports=e},{}],110:[function(a,b,c){"use strict";function d(a,b){if(!e||b&&!e.addEventListener)return!1;var c=document.createElement("div"),d="on"+a,g=d in c;return g||(c.setAttribute(d,"return;"),g="function"==typeof c[d],"undefined"!=typeof c[d]&&(c[d]=void 0),c.removeAttribute(d)),!g&&f&&"wheel"===a&&(g=document.implementation.hasFeature("Events.wheel","3.0")),c=null,g}var e,f,g=a("./ExecutionEnvironment");g.canUseDOM&&(e=document.createElement("div"),f=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),b.exports=d},{"./ExecutionEnvironment":21}],111:[function(a,b,c){function d(a){return!(!a||!("undefined"!=typeof Node?a instanceof Node:"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName))}b.exports=d},{}],112:[function(a,b,c){"use strict";function d(a){return a&&("INPUT"===a.nodeName&&e[a.type]||"TEXTAREA"===a.nodeName)}var e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};b.exports=d},{}],113:[function(a,b,c){function d(a){return e(a)&&3==a.nodeType}var e=a("./isNode");b.exports=d},{"./isNode":111}],114:[function(a,b,c){"use strict";function d(a){a||(a="");var b,c=arguments.length;if(c>1)for(var d=1;c>d;d++)b=arguments[d],b&&(a+=" "+b);return a}b.exports=d},{}],115:[function(a,b,c){"use strict";var d=a("./invariant"),e=function(a){var b,c={};d(a instanceof Object&&!Array.isArray(a),"keyMirror(...): Argument must be an object.");for(b in a)a.hasOwnProperty(b)&&(c[b]=b);return c};b.exports=e},{"./invariant":109}],116:[function(a,b,c){var d=function(a){var b;for(b in a)if(a.hasOwnProperty(b))return b;return null};b.exports=d},{}],117:[function(a,b,c){"use strict";function d(a){var b={};return function(c){return b.hasOwnProperty(c)?b[c]:b[c]=a.call(this,c)}}b.exports=d},{}],118:[function(a,b,c){"use strict";var d=a("./mergeInto"),e=function(a,b){var c={};return d(c,a),d(c,b),c};b.exports=e},{"./mergeInto":120}],119:[function(a,b,c){"use strict";var d=a("./invariant"),e=a("./keyMirror"),f=36,g=function(a){return"object"!=typeof a||null===a},h={MAX_MERGE_DEPTH:f,isTerminal:g,normalizeMergeArg:function(a){return void 0===a||null===a?{}:a},checkMergeArrayArgs:function(a,b){d(Array.isArray(a)&&Array.isArray(b),"Critical assumptions about the merge functions have been violated. This is the fault of the merge functions themselves, not necessarily the callers.")},checkMergeObjectArgs:function(a,b){h.checkMergeObjectArg(a),h.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){d(!g(a)&&!Array.isArray(a),"Critical assumptions about the merge functions have been violated. This is the fault of the merge functions themselves, not necessarily the callers.")},checkMergeLevel:function(a){d(f>a,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way.")},checkArrayStrategy:function(a){d(void 0===a||a in h.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays.")},ArrayStrategies:e({Clobber:!0,IndexByIndex:!0})};b.exports=h},{"./invariant":109,"./keyMirror":115}],120:[function(a,b,c){"use strict";function d(a,b){if(f(a),null!=b){f(b);for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}}var e=a("./mergeHelpers"),f=e.checkMergeObjectArg;b.exports=d},{"./mergeHelpers":119}],121:[function(a,b,c){"use strict";var d=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a.prototype[c]=b[c])};b.exports=d},{}],122:[function(a,b,c){"use strict";function d(a,b){g("html"===a.tagName.toLowerCase(),'mutateHTMLNodeWithMarkup(): node must have tagName of "html", got %s',a.tagName),b=b.trim(),g(0===b.toLowerCase().indexOf("<html"),"mutateHTMLNodeWithMarkup(): markup must start with <html");var c=b.indexOf(">")+1,d=b.lastIndexOf("<"),h=b.substring(0,c),i=b.substring(c,d),j=h.indexOf(" ")>-1,k=null;if(j){k=e(h.replace("html ","span ")+"</span>")[0];var l=f(k,function(b){return a.getAttributeNS(b.namespaceURI,b.name)!==b.value});l.forEach(function(b){a.setAttributeNS(b.namespaceURI,b.name,b.value)})}var m=f(a,function(a){return!(k&&k.hasAttributeNS(a.namespaceURI,a.name))});m.forEach(function(b){a.removeAttributeNS(b.namespaceURI,b.name)}),a.innerHTML=i}var e=a("./createNodesFromMarkup"),f=a("./filterAttributes"),g=a("./invariant");b.exports=d},{"./createNodesFromMarkup":90,
"./filterAttributes":97,"./invariant":109}],123:[function(a,b,c){"use strict";function d(a,b,c){if(!a)return null;var d=0,e={};for(var f in a)a.hasOwnProperty(f)&&(e[f]=b.call(c,a[f],f,d++));return e}b.exports=d},{}],124:[function(a,b,c){"use strict";function d(a,b,c){if(!a)return null;var d=0,e={};for(var f in a)a.hasOwnProperty(f)&&(e[f]=b.call(c,f,a[f],d++));return e}b.exports=d},{}],125:[function(a,b,c){"use strict";var d=a("./ExecutionEnvironment"),e=null;d.canUseDOM&&(e=window.performance||window.webkitPerformance),e&&e.now||(e=Date);var f=e.now.bind(e);b.exports=f},{"./ExecutionEnvironment":21}],126:[function(a,b,c){"use strict";function d(a,b){if(a===b)return!0;var c;for(c in a)if(a.hasOwnProperty(c)&&(!b.hasOwnProperty(c)||a[c]!==b[c]))return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}b.exports=d},{}],127:[function(a,b,c){"use strict";function d(a,b,c){null!==a&&void 0!==a&&h(a,"",0,b,c)}var e=a("./ReactComponent"),f=a("./ReactTextComponent"),g=a("./invariant"),h=function(a,b,c,d,i){var j=0;if(Array.isArray(a))for(var k=0;k<a.length;k++){var l=a[k],m=b+e.getKey(l,k),n=c+j;j+=h(l,m,n,d,i)}else{var o=typeof a,p=""===b,q=p?e.getKey(a,0):b;if(null===a||void 0===a||"boolean"===o)d(i,null,q,c),j=1;else if(a.mountComponentIntoNode)d(i,a,q,c),j=1;else if("object"===o){g(!a||1!==a.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var r in a)a.hasOwnProperty(r)&&(j+=h(a[r],b+"{"+r+"}",c+j,d,i))}else if("string"===o){var s=new f(a);d(i,s,q,c),j+=1}else if("number"===o){var t=new f(""+a);d(i,t,q,c),j+=1}}return j};b.exports=d},{"./ReactComponent":28,"./ReactTextComponent":65,"./invariant":109}]},{},[71])(71)}),define("helpers/react-mixins",["backbone"],function(a){"use strict";var b={componentWillMount:function(){this.intervals=[]},setInterval:function(){this.intervals.push(setInterval.apply(null,arguments))},componentWillUnmount:function(){this.intervals.map(clearInterval)}},c={componentWillMount:function(){var b=a.Model.extend({urlRoot:this.props.url});this.model=new b},componentDidMount:function(){this.props.vent&&this.listenTo(this.props.vent,"poll",this.poll),this.setInterval(this.poll,this.props.frequencyMs)},poll:function(){this.model.fetch()}};return{SetIntervalMixin:b,PollerMixin:c}}),define("views/type-one-view",["underscore","backbone","loglevel","react","helpers/react-mixins","helpers/animation","l20nCtx!locales/{{locale}}/strings"],function(a,b,c,d,e,f,g){"use strict";var h=d.createClass({mixins:[b.Events,e.SetIntervalMixin,e.PollerMixin],getInitialState:function(){return{status:"ok",headline:"",subline:"",subtext:"",style:{display:"block"}}},getDefaultProps:function(){return{size:"col-lg-3 col-md-3 col-sm-6 col-xs-6",classId:"typeOne",icon:"fa-heart",title:g.getSync("unconfigured"),fields:["primary","secondary"],frequencyMs:3e4,headlineTemplate:a.template("<%- primary %> / <%- secondary %>")}},disappearAnimation:f.single("fadeOutUpAnim"),reappearAnimation:f.single("fadeInDownAnim"),propTypes:{size:d.PropTypes.string,classId:d.PropTypes.string,icon:d.PropTypes.string,title:d.PropTypes.string,url:d.PropTypes.string.isRequired,fields:d.PropTypes.array,frequencyMs:d.PropTypes.number,headlineTemplate:d.PropTypes.func},componentDidMount:function(){this.props.vent&&(this.listenTo(this.props.vent,"gauges:collapse",this.collapse),this.listenTo(this.props.vent,"gauges:expand",this.expand),this.listenTo(this.props.vent,"gauges:disappear",this.disappear),this.listenTo(this.props.vent,"gauges:reappear",this.reappear),this.listenTo(this,"status:ok",this.ok),this.listenTo(this,"status:warn",this.warn),this.listenTo(this,"status:fail",this.fail)),this.model&&(this.listenTo(this.model,"change",this.modelChangeHandler),this.props.vent.trigger("poll"))},modelChangeHandler:function(b){c.info("model changed!");var d=a.reduce(this.props.fields,function(a,c){return a[c]=b.get(c),a},{});a.isString(this.props.headlineTemplate)&&this.setProps({headlineTemplate:a.template(this.props.headlineTemplate)});var e=b.get("status"),f={};if(e&&a.isObject(e)&&e.state){var g=e.state;("ok"===g||"warn"===g||"fail"===g)&&(this.trigger("status:"+e.state),f={subtext:e.message})}this.setState(a.extend({headline:this.props.headlineTemplate(d)},f))},ok:function(){this.setState({status:"ok"})},warn:function(){this.setState({status:"warn"})},fail:function(){this.setState({status:"fail"})},collapse:function(b){this.setState({style:{display:"none"}}),a.isFunction(b)&&b.apply(this)},expand:function(b){this.setState({style:{display:"block"}}),a.isFunction(b)&&b.apply(this)},disappear:function(){this.disappearAnimation(this.getDOMNode(),function(b){this.setState({style:{visibility:"hidden"}}),a.isFunction(b)&&b.apply(this)})},reappear:function(){this.reappearAnimation(this.getDOMNode(),function(b){this.setState({style:{visibility:"visible"}}),a.isFunction(b)&&b.apply(this)})},componentWillUnmount:function(){this.stopListening()},render:function(){var a={fa:!0,"fa-stack-1x":!0,"fa-check":"ok"===this.state.status,"fa-warning":"warn"===this.state.status,"fa-exclamation-circle":"fail"===this.state.status},b={"card-icon":!0,ok:"ok"===this.state.status,warn:"warn"===this.state.status,fail:"fail"===this.state.status},c={fa:!0,"fa-lg":!0};c[this.props.icon]=!0;var e=d.addons.classSet,f={"custom-gutter":!0};f[this.props.size]=!0;var g={gauge:!0,card:!0};return g[this.props.classId]=!0,d.DOM.div({style:this.state.style},[d.DOM.div({className:e(f)},[d.DOM.div({className:e(g)},[d.DOM.span({className:"card-title"},[d.DOM.i({className:e(c)})," "+this.props.title]),d.DOM.div({className:"content"},[d.DOM.div({className:"headline",ref:"headline"},this.state.headline),d.DOM.div({className:"subline",ref:"subline"},this.state.subline),d.DOM.div({className:"subtext",ref:"subtext"},this.state.subtext)]),d.DOM.div({className:e(b)},[d.DOM.span({className:"fa-stack fa-lg fa-2x"},[d.DOM.i({className:"fa fa-square-o fa-stack-2x"}),d.DOM.i({className:e(a)})])])])])])}});return h}),define("views/dashboard-row",["react"],function(a){"use strict";var b=a.createClass({getInitialState:function(){return{one:"",two:"",three:"",four:""}},render:function(){return a.DOM.div({className:"row gauges"},[a.DOM.div({className:"one"},this.props.one),a.DOM.div({className:"two"},this.props.two),a.DOM.div({className:"three"},this.props.three),a.DOM.div({className:"four"},this.props.four)])}});return b}),define("collections/user-request-collection",["underscore","backbone","models/user-request-model"],function(a,b,c){"use strict";var d=b.Collection.extend({url:function(){return"/api/v2/cluster/"+this.cluster+"/request"+this.params},parse:function(a){return a.results},model:c,params:"?page_size=32",initialize:function(a,b){b&&b.cluster&&(this.cluster=b.cluster)},getSubmitted:function(a){this.params="?state=submitted&page_size=32";var b=this;return this.fetch(a).always(function(){b.params="?page_size=32"})}});return d}),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qa.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&da.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ta[a]||Ua[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}da[b]=function(e,f){var g,h,i=da.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=da().utc().set(d,a);return i.call(da.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ja]<0||a._a[ja]>11?ja:a._a[ka]<1||a._a[ka]>t(a._a[ia],a._a[ja])?ka:a._a[la]<0||a._a[la]>23?la:a._a[ma]<0||a._a[ma]>59?ma:a._a[na]<0||a._a[na]>59?na:a._a[oa]<0||a._a[oa]>999?oa:-1,a._pf._overflowDayOfYear&&(ia>b||b>ka)&&(b=ka),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?da(a).zone(b._offset||0):da(a).local()}function A(a,b){return b.abbr=a,pa[a]||(pa[a]=new e),pa[a].set(b),pa[a]}function B(a){delete pa[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pa[a]&&ra)try{require("./lang/"+a)}catch(b){}return pa[a]};if(!a)return da.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return da.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(va);for(b=0,c=d.length;c>b;b++)Ya[d[b]]?d[b]=Ya[d[b]]:d[b]=D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Va[b]||(Va[b]=E(b)),Va[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wa.lastIndex=0;d>=0&&wa.test(a);)a=a.replace(wa,c),wa.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ia;case"YYYY":case"GGGG":case"gggg":return d?Ja:za;case"Y":case"G":case"g":return La;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ka:Aa;case"S":if(d)return Ga;case"SS":if(d)return Ha;case"SSS":if(d)return Ia;case"DDD":return ya;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ca;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fa;case"Z":case"ZZ":return Da;case"T":return Ea;case"SSSS":return Ba;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ha:xa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xa;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Da)||[],c=b[b.length-1]||[],d=(c+"").match(Qa)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ja]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[ja]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ka]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ia]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ia]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[la]=s(b);break;case"m":case"mm":e[ma]=s(b);break;case"s":case"ss":e[na]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[oa]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[ka]&&null==a._a[ja]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ia]?da().weekYear():a._a[ia]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ia]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ia]?d[ia]:a._a[ia],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[ja]=c.getUTCMonth(),a._a[ka]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[la]+=s((a._tzm||0)/60),l[ma]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(va)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ya[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[la]<12&&(a._a[la]+=12),a._isPm===!1&&12===a._a[la]&&(a._a[la]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Ma.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Oa.length;c>b;b++)if(Oa[b][1].exec(d)){a._f=Oa[b][0]+(e[6]||" ");break}for(b=0,c=Pa.length;c>b;b++)if(Pa[b][1].exec(d)){a._f+=Pa[b][0];break}d.match(Da)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sa.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ha(Math.abs(a)/1e3),e=ha(d/60),f=ha(e/60),g=ha(f/24),h=ha(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ha(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=da(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?da.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),da.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){da.fn[a]=da.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),da.updateOffset(this),this):this._d["get"+c+b]()}}function aa(a){da.duration.fn[a]=function(){return this._data[a]}}function ba(a,b){da.duration.fn["as"+a]=function(){return+this/b}}function ca(a){var b=!1,c=da;"undefined"==typeof ender&&(a?(ga.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(ga.moment,c)):ga.moment=da)}for(var da,ea,fa="2.5.1",ga=this,ha=Math.round,ia=0,ja=1,ka=2,la=3,ma=4,na=5,oa=6,pa={},qa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ra="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sa=/^\/?Date\((\-?\d+)/i,ta=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ua=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,va=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xa=/\d\d?/,ya=/\d{1,3}/,za=/\d{1,4}/,Aa=/[+\-]?\d{1,6}/,Ba=/\d+/,Ca=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Da=/Z|[\+\-]\d\d:?\d\d/gi,Ea=/T/i,Fa=/[\+\-]?\d+(\.\d{1,3})?/,Ga=/\d/,Ha=/\d\d/,Ia=/\d{3}/,Ja=/\d{4}/,Ka=/[+-]?\d{6}/,La=/[+-]?\d+/,Ma=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Na="YYYY-MM-DDTHH:mm:ssZ",Oa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pa=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qa=/([\+\-]|\d\d)/gi,Ra="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sa={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ta={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ua={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Va={},Wa="DDD w W M D d".split(" "),Xa="M D H h m s w W".split(" "),Ya={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Za=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wa.length;)ea=Wa.pop(),Ya[ea+"o"]=d(Ya[ea],ea);for(;Xa.length;)ea=Xa.pop(),Ya[ea+ea]=c(Ya[ea],2);for(Ya.DDDD=c(Ya.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=da.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),da=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},da.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},da.unix=function(a){return da(1e3*a)},da.duration=function(a,b){var c,d,e,f=a,h=null;return da.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=ta.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[ka])*c,h:s(h[la])*c,m:s(h[ma])*c,s:s(h[na])*c,ms:s(h[oa])*c}):(h=ua.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),da.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},da.version=fa,da.defaultFormat=Na,da.updateOffset=function(){},da.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pa[a]||C(a),c=da.duration.fn._lang=da.fn._lang=C(a),c._abbr):da.fn._lang._abbr},da.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},da.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},da.isDuration=function(a){return a instanceof g},ea=Za.length-1;ea>=0;--ea)r(Za[ea]);for(da.normalizeUnits=function(a){return p(a)},da.invalid=function(a){var b=da.utc(NaN);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},da.parseZone=function(a){return da(a).parseZone()},h(da.fn=f.prototype,{clone:function(){return da(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=da(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?da.utc(this._a):da(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||da.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-da(this).startOf("month")-(f-da(f).startOf("month")))/d,e-=6e4*(this.zone()-da(this).startOf("month").zone()-(f.zone()-da(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return da.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(da(),a)},calendar:function(){var a=z(da(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),da.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+da(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+da(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=da.apply(null,arguments),this>a?this:a},max:function(a){return a=da.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,da.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?da(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ha((da(this).startOf("day")-da(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),ea=0;ea<Ra.length;ea++)_(Ra[ea].toLowerCase().replace(/s$/,""),Ra[ea]);_("year","FullYear"),da.fn.days=da.fn.day,da.fn.months=da.fn.month,da.fn.weeks=da.fn.week,da.fn.isoWeeks=da.fn.isoWeek,da.fn.toJSON=da.fn.toISOString,h(da.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=da.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=da.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:da.fn.lang,
toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ea in Sa)Sa.hasOwnProperty(ea)&&(ba(ea,Sa[ea]),aa(ea.toLowerCase()));ba("Weeks",6048e5),da.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},da.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),ra?(module.exports=da,ca(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&ca(d.config().noGlobal===a),da}):ca()}.call(this),define("views/user-request-view",["jquery","underscore","templates","backbone","collections/user-request-collection","l20nCtx!locales/{{locale}}/strings","moment","helpers/animation","marionette"],function(a,b,c,d,e,f,g){"use strict";var h=d.Marionette.ItemView.extend({template:c["app/scripts/templates/user-request.ejs"],requestTemplate:c["app/scripts/templates/request.ejs"],requestErrorTemplate:c["app/scripts/templates/request-error.ejs"],norequestTemplate:c["app/scripts/templates/no-request.ejs"],tagName:"div",className:"",pollerHandle:null,events:{"click .closer":"hide"},ui:{tbody:"tbody"},initialize:function(){b.bindAll(this,"show","hide","refresh","updateCollection","buildCollectionView"),this.App=d.Marionette.getOption(this,"App"),this.clusterId=d.Marionette.getOption(this,"cluster"),this.collection=new e([],{cluster:this.clusterId}),this.listenToOnce(this,"render",function(){this.collection.fetch().then(this.updateCollection);var a=this.$(".am-fade-and-slide-right").addClass("ng-enter");setTimeout(function(){a.addClass("ng-enter-active")}.bind(this),10)}.bind(this)),this.listenToOnce(this,"render",function(){this.getPollTimeInMs=this.getPollTimeFn(),this.pollerHandle=setTimeout(this.refresh,this.getPollTimeInMs())}.bind(this))},serializeData:function(){return{title:f.getSync("UserRequestViewTitle"),colTask:f.getSync("UserRequestViewColTask"),colStatus:f.getSync("UserRequestViewColStatus"),colUpdated:f.getSync("UserRequestViewColUpdated"),closeBtn:f.getSync("UserRequestViewCloseBtn")}},buildCollectionView:function(a){return b.reduce(a,function(a,b){var c=b.state,d="text-success fa fa-check-circle",e=this.requestTemplate;"submitted"===b.state?d="text-info fa fa-spinner fa-spin":b.error&&(d="text-warning fa fa-exclamation-circle",c=f.getSync("UserRequestViewError"),e=this.requestErrorTemplate);var h=g("complete"===b.state?b.completed_at:b.requested_at).fromNow();return a.push(e({clazz:d,headline:b.headline,state:c,time:h,error_message:b.error_message})),a}.bind(this),[])},updateCollection:function(a){return 0===a.results.length?void this.ui.tbody.html(this.norequestTemplate()):(this.ui.tbody.html(this.buildCollectionView(a.results).join("")),void this.ui.tbody.find(".errorPop").popover())},refresh:function(){this.collection.fetch().then(this.updateCollection).then(function(){this.pollerHandle=setTimeout(this.refresh,this.getPollTimeInMs())}.bind(this))},getPollTimeFn:function(){var a=1250;return function(){return 2e4>a&&(a*=2),a}},show:function(){this.$el.show(),this.$(".am-fade-and-slide-right").addClass("ng-enter"),setTimeout(function(){this.$(".ng-enter").addClass("ng-enter-active"),this.collection.fetch().then(this.updateCollection)}.bind(this),10),this.getPollTimeInMs=this.getPollTimeFn(),this.pollerHandle=setTimeout(this.refresh,this.getPollTimeInMs())},hide:function(){var a=this.$(".am-fade-and-slide-right");a.removeClass("ng-enter ng-enter-active").addClass("ng-leave"),setTimeout(function(){this.$el.hide(),a.removeClass("ng-leave")}.bind(this),300),this.pollerHandle&&(clearTimeout(this.pollerHandle),this.pollerHandle=null)}});return h}),define("views/notification-bell-view",["jquery","underscore","backbone","marionette"],function(a,b,c){"use strict";var d=c.Marionette.ItemView.extend({className:"",events:{click:"sendEvent"},initialize:function(){this.App=c.Marionette.getOption(this,"App"),b.bindAll(this,"sendEvent")},sendEvent:function(){this.App.vent.trigger("UserRequestView:toggle")}});return d}),define("views/application-view",["views/notification-card-view","views/notification-collection-view","views/notification-item-view","views/osd-detail-view","views/osd-visualization","views/usage-view","views/gauges-layout","views/breadcrumb-view","views/alerts-view","views/osd-dash-view","views/mon-dash-view","views/pgmap-view","views/status-line-view","views/osd-hex-view","views/hosts-dash-view","views/pools-dash-view","views/iops-dash-view","views/health-view","views/type-one-view","views/dashboard-row","views/user-request-view","views/notification-bell-view"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return{NotificationCardView:a,NotificationCollectionView:b,NotificationitemView:c,OSDDetailView:d,OSDVisualization:e,UsageView:f,GaugesLayout:g,BreadCrumbView:h,AlertsView:i,OsdView:j,MonView:k,PgView:l,StatusLine:m,OsdHexView:n,HostsView:o,PoolsView:p,IopsView:q,HealthView:r,TypeOneView:s,DashboardRow:t,UserRequestView:u,NotificationBellView:v}}),define("helpers/config-loader",["jquery","loglevel"],function(a,b){"use strict";return function(c){var d=a.Deferred(),e=a.ajax(c,{type:"HEAD",dataType:"text"});return e.then(function(d){return b.debug(d),a.ajax(c,{type:"GET",dataType:"text"})},function(a,e,f){return"Not Found"===f?(b.info(c+" "+f),b.info(c+" "+f),d.reject({})):(b.info(e+": "+c+" "+f),d.reject(a,e,f),b.info(e+": "+c+" "+f),void d.reject(a,e,f))}).done(function(a,e){b.info("Loading "+c+"..."+e);try{var f=JSON.parse(a);d.resolve(f)}catch(g){d.reject("JSON Parsing failed for "+c+"! Please contact Calamari Admin")}}),d.promise()}}),define("models/cluster-model",["underscore","backbone"],function(a,b){"use strict";var c=b.Model.extend({url:function(){return"/api/v1/cluster/"+this.get("cluster")},defaults:{name:"unknown",id:0,api_base_url:""}});return c}),define("poller",["jquery","underscore","backbone","loglevel","models/usage-model","models/health-model","models/status-model","models/cluster-model","marionette"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,c,e){var f=a+"Poller",g=a+"Timer",h=a+"Model",i=c,j=c.App;b.each(["request","sync","error"],function(b){this.listenTo(this[h],b,function(){j.vent.trigger(a+":"+b)})},c);var k=b.extend({timeout:i.defaultTimeout,delay:i.defaultDelay},e);return function(){var b=null===this[g]?0:k.delay;return this[g]=setTimeout(function(){i[h].fetch({success:function(b){j.vent.trigger(a+":update",b),i[g]=i[f].apply(i)},error:function(b,c){d.error(a+"/error: "+c.statusText),j.vent.trigger("app:neterror",a,c),i[g]=i[f].apply(i)},timeout:k.timeout})},b),this[g]}}function j(a,b,c,d){return function(){var e=this,f=null===this[b]?0:d;return this[b]=setTimeout(function(){e.App.vent.trigger(c),e[b]=e[a].apply(e)},f),this[b]}}return c.Marionette.ItemView.extend({usageTimer:null,usageModel:null,healthTimer:null,healthModel:null,statusModel:null,statusTimer:null,osdUpdateTimer:null,poolUpdateTimer:null,hostUpdateTimer:null,defaultDelay:2e4,defaultTimeout:3e3,heartBeatDelay:6e4,krakenHeartBeatTimer:null,initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.App.Config&&(this.delay=c.Marionette.getOption(this.App.Config,"long-polling-interval-ms")||this.delay,this.timeout=c.Marionette.getOption(this.App.Config,"api-request-timeout-ms")||this.defaultTimeout,this.disableNetworkChecks=c.Marionette.getOption(this.App.Config,"disable-network-checks")||!1),this.cluster=c.Marionette.getOption(this,"cluster"),this.healthModel=new f({cluster:this.cluster}),this.usageModel=new e({cluster:this.cluster}),this.statusModel=new g({cluster:this.cluster}),this.krakenHeartBeatModel=new h({cluster:this.cluster}),this.healthPoller=i("health",this,{timeout:this.timeout}),this.usagePoller=i("usage",this,{timeout:this.timeout}),this.statusPoller=i("status",this,{timeout:this.timeout}),this.disableNetworkChecks||(this.krakenHeartBeatPoller=i("krakenHeartBeat",this,{delay:this.heartBeatDelay})),this.osdUpdateEvent=j("osdUpdateEvent","osdUpdateTimer","osd:update",this.delay),this.poolUpdateEvent=j("poolUpdateEvent","poolUpdateTimer","pool:update",this.delay),this.hostUpdateEvent=j("hostUpdateEvent","hostUpdateTimer","host:update",this.delay),this.iopsUpdateEvent=j("iopsUpdateEvent","iopsUpdateTimer","iops:update",6e4),this.listenTo(this.App.vent,"cluster:update",this.updateModels),b.bindAll(this,"stop","updateModels","start"),this.models=["health","krakenHeartBeat","status","usage"],this.timers=["health","krakenHeartBeat","status","update","usage"],this.pollers=["healthPoller","hostUpdateEvent","iopsUpdateEvent","krakenHeartBeatPoller","osdUpdateEvent","poolUpdateEvent","statusPoller","usagePoller"]},updateModels:function(a){b.each(this.models,function(b){this[b+"Model"].set("cluster",a.get("id"))},this),this.stop(),this.start()},start:function(){b.each(this.pollers,function(a){b.isFunction(this[a])&&this[a].call(this)},this)},stop:function(){b.each(this.timers,function(a){var b=this[a+"Timer"];clearTimeout(b),this[a+"Timer"]=null},this)}})}),define("collections/osd-collection",["underscore","backbone","models/application-model"],function(a,b,c){"use strict";var d=b.Collection.extend({cluster:1,epoch:1,cluster_update_time_unix:0,url:function(){return"/api/v1/cluster/"+this.cluster+"/osd"},initialize:function(a,b){b&&b.cluster&&(this.cluster=b.cluster)},parse:function(b){if(this.epoch=b.epoch,this.cluster_update_time_unix=b.cluster_update_time_unix,this.pg_state_counts=b.pg_state_counts,b.osds)return b.osds;var c=b["new"],d=b.changed,e=b.removed;if(c&&c.length>0&&this.add(c),d&&d.length>0&&this.set(d,{merge:!0,remove:!1,add:!1}),e&&e.length>0){var f=a.pluck(e,"osd"),g=this;this.each(function(b){a.contains(f,b.get("osd"))&&g.remove(b)}),this.remove(e)}return{}},update:function(b){return b=b?a.clone(b):{},b.url=this.url()+"/epoch/"+(this.epoch+1),b.add=!1,b.remove=!1,b.merge=!1,this.fetch(b)},model:c.OSDModel});return d}),define("views/userdropdown-view",["jquery","underscore","templates","backbone","Backbone.Modal","marionette"],function(a,b,c,d){"use strict";var e=d.Marionette.ItemView.extend({template:c["app/scripts/templates/userdropdown.ejs"],tagName:"div",className:"nav navbar-nav navbar-right",events:{"click .logout":"logout","click .settings":"settings","click .about":"about"},initialize:function(){this.App=d.Marionette.getOption(this,"App");var a=d.Model.extend({url:"/api/v1/user/me"});this.model=new a,this.model.set({username:"",settingsIcon:"fa fa-cogs",settingsLabel:"Settings",logoutIcon:"fa fa-power-off",logoutLabel:"Logout",aboutIcon:"fa fa-info-circle",aboutLabel:"About Calamari"}),this.listenTo(this.model,"change",this.render),b.bindAll(this,"settings","logout")},fetch:function(){return this.model.fetch()},logout:function(){var b=a.get("/api/v1/auth/logout");b.always(function(){document.location="/login/"})},settings:function(){document.location="/admin/"},about:function(){a.get("/api/v2/info").then(function(b){var e=d.Modal.extend({template:function(){return c["app/scripts/templates/about-modal.ejs"]({version:{calamariAPI:b.version,client:window.inktank.commit}})},cancelEl:".btn-primary"}),f=new e;a("body").append(f.render().el)})}});return e}),define("collections/cluster-collection",["underscore","backbone","models/cluster-model"],function(a,b,c){"use strict";var d=b.Collection.extend({url:"/api/v1/cluster",model:c});return d}),define("views/clusterdropdown-view",["jquery","underscore","templates","backbone","loglevel","collections/cluster-collection","marionette"],function(a,b,c,d,e,f){"use strict";var g=d.Marionette.ItemView.extend({template:c["app/scripts/templates/clusterdropdown.ejs"],tagName:"ul",className:"nav pull-right",rowTemplate:b.template('<li><a class="cluster" tabindex="-1" href="#" data-id="<%- id %>"><%- name %></a></li>'),ui:{label:".dropdown-toggle",menu:".dropdown-menu"},events:{"click .cluster":"clusterHandler"},initialize:function(){this.App=d.Marionette.getOption(this,"App"),this.collection=new f,this.listenTo(this.collection,"sync",this.render),this.listenTo(this,"render",this.postRender),b.bindAll(this,"clusterHandler"),this.App.ReqRes.setHandler("get:cluster",function(){return b.clone(this.cluster)}.bind(this))},clusterLabelTemplate:b.template("Cluster : <%- text %>"),clusterHandler:function(b){var c=a(b.target),d=c.attr("data-id");this.ui.label.text(this.clusterLabelTemplate({text:c.text()})),this.cluster=this.collection.get(d),this.App.vent.trigger("cluster:update",this.cluster)},postRender:function(){var a=this.rowTemplate,b=[];this.collection.each(function(c){e.debug(c.toJSON()),b.push(a(c.toJSON()))}),this.ui.menu.html(b.join("")),this.cluster=this.collection.first(),this.ui.label.text(this.clusterLabelTemplate({text:this.cluster.get("name")})),this.App.vent.trigger("cluster:update",this.cluster)},fetch:function(a){return this.collection.fetch(a)}});return g}),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),define("modal",function(){}),define("views/graphwall-view",["jquery","underscore","backbone","templates","helpers/graph-utils","models/application-model","collections/server-collection","dygraphs","l20nCtx!locales/{{locale}}/strings","marionette","modal"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=c.Marionette.ItemView.extend({template:d["app/scripts/templates/graphwall.ejs"],graphTemplate:d["app/scripts/templates/graph.ejs"],graphHelpTemplate:i.getSync("GraphHelp"),graphFailToLoadTemplate:b.template('<i title="<%- msg %>" class="fa fa-warning fa-3x warn"></i>'),className:"graph-mode",currentGraph:"",ui:{title:".title",buttons:".btn-toolbar",hosts:".hosts-select"},events:{"click .btn-graph .btn":"clickHandler","change .hosts-select select":"hostChangeHandler","input .graph-range input":"changeGraphRange"},collectionEvents:{sync:"resetGraphsOnClusterUpdate"},rangeText:[i.getSync("Graph1Week"),i.getSync("Graph3Days"),i.getSync("Graph24Hours"),i.getSync("Graph12Hours"),i.getSync("GraphHour")],rangeQuery:["-7d","-3d","-1d","-12hour","-1hour"],rangeLabel:[i.getSync("GraphLabelWeek"),i.getSync("GraphLabel3Days"),i.getSync("GraphLabel24Hours"),i.getSync("GraphLabel12Hours"),i.getSync("GraphLabelHour")],graphTitleTemplates:{},graphOptions:{},graphs:[{metrics:["byte_free","byte_used"],fn:"makeDiskSpaceBytesGraphUrl",util:"makeDiskSpaceTargets",titleTemplate:"TitleGraphDiskSpaceBytes",options:{labelsKMG2:!0,stackedGraph:!0,fillGraph:!0,ylabel:"Bytes",labels:["Date","Free","Used"]}},{metrics:["inodes_free","inodes_used"],fn:"makeDiskSpaceInodesGraphUrl",util:"makeDiskSpaceTargets",titleTemplate:"TitleGraphDiskSpaceInodes",options:{labelsKMB:!0,stackedGraph:!0,fillGraph:!0,ylabel:"Inodes",labels:["Date","Free","Used"]}},{metrics:["system","user","idle"],fn:"makeCPUGraphUrl",util:"makeCPUTargets",titleTemplate:"TitleGraphHostCPUSummary",options:{labels:["Date","System","User","Idle"],stackedGraph:!0,fillGraph:!0,ylabel:"Percent",stepPlot:!0}},{metrics:["system","user","nice","idle","iowait","irq","softirq","steal"],fn:"makeCPUDetailGraphUrl",util:"makeCPUDetailedTargets",titleTemplate:"TitleGraphCPUDetail",options:{labels:["Date","System","User","Nice","Idle","IOWait","IRQ","Soft IRQ","Steal"],stackedGraph:!0,fillGraph:!0,ylabel:"Percent",stepPlot:!0}},{metrics:["op_r_latency","op_w_latency","op_rw_latency"],fn:"makeOpsLatencyGraphUrl",util:"makeOpLatencyTargets",titleTemplate:"TitleGraphOpsLatency",options:{ylabel:"Ms",labels:["Date","Read Latency","Write Latency","RW Latency"]}},{metrics:["journal_ops","journal_wr"],fn:"makeJournalOpsGraphUrl",util:"makeFilestoreTargets",titleTemplate:"TitleGraphJournalOps",options:{ylabel:"Operations",labels:["Date","Journal Ops","Journal Writes"]}},{metrics:["01","05","15"],fn:"makeLoadAvgGraphUrl",util:"makeLoadAvgTargets",titleTemplate:"TitleGraphLoadAverage",options:{ylabel:"Load Average",labels:["Date","1 Min","5 Min","15 Min"]}},{metrics:["Active","Buffers","Cached","MemFree"],fn:"makeMemoryGraphUrl",util:"makeMemoryTargets",titleTemplate:"TitleGraphMemory",options:{labelsKMG2:!0,labels:["Date","Active","Buffers","Cached","Free"],fillGraph:!0,ylabel:"Bytes",stackedGraph:!0}},{metrics:["read_byte_per_second","write_byte_per_second"],fn:"makeHostDeviceRWBytesGraphUrl",util:"makeIOStatIOPSTargets",titleTemplate:"TitleGraphRWBytes",options:{labelsKMG2:!0,ylabel:"Bytes/Second",labels:["Date","Read Bytes/Sec","Write Bytes/Sec"]}},{metrics:["read_await","write_await"],fn:"makeHostDeviceRWAwaitGraphUrl",util:"makeIOStatIOPSTargets",titleTemplate:"TitleGraphRWAwait",options:{ylabel:"Millis",labels:["Date","Reads","Writes"]}},{metrics:["iops"],fn:"makeHostDeviceIOPSGraphUrl",util:"makeIOStatIOPSTargets",titleTemplate:"TitleGraphIOPS",options:{ylabel:"IOPS",labels:["Date","IOPS"]}},{metrics:["tx_byte","rx_byte"],fn:"makeHostNetworkTXRXBytesGraphURL",util:"makeNetworkTargets",titleTemplate:"TitleGraphNetworkTXRXBytes",options:{labelsKMG2:!0,ylabel:"Bytes",labels:["Date","TX Bytes","RX Bytes"]}},{metrics:["tx_packets","rx_packets"],fn:"makeHostNetworkTXRXPacketsGraphURL",util:"makeNetworkTargets",titleTemplate:"TitleGraphNetworkTXRXPackets",options:{labelsKMB:!0,ylabel:"Packets",labels:["Date","TX Packets","RX Packets"]}},{metrics:["tx_errors","rx_errors"],fn:"makeHostNetworkTXRXErrorsGraphURL",util:"makeNetworkTargets",titleTemplate:"TitleGraphNetworkTXRXErrors",options:{labelsKMB:!0,ylabel:"Packets",labels:["Date","TX Errors","RX Errors"]}},{metrics:["tx_drop","rx_drop"],fn:"makeHostNetworkTXRXDropGraphURL",util:"makeNetworkTargets",titleTemplate:"TitleGraphNetworkTXRXDrops",options:{labelsKMB:!0,ylabel:"Packets",labels:["Date","TX Drops","RX Drops"]}},{metrics:["num_read","num_write"],fn:"makePoolIOPSGraphURL",util:"makePoolIOPSTargets",titleTemplate:"TitleGraphPoolIOPS",options:{labelsKMB:!0,ylabel:"IOPS",labels:["Date","Read","Write"],stackedGraph:!0,fillGraph:!0}},{metrics:["total_avail","total_used"],fn:"makePoolDiskFreeGraphURL",util:"makePoolDiskFreeTargets",titleTemplate:"TitleGraphPoolTotalDiskFree",options:{labelsKMG2:!0,ylabel:"Bytes",labels:["Date","Available","Used"],stackedGraph:!0,fillGraph:!0}}],selectTemplate:b.template('<select class="form-control" name="hosts"><option value="all" selected><%- Cluster %></option><option value="iops"><%- PoolIOPS %></option><%= list %></select>'),optionTemplate:b.template('<option value="<%- args.host %>">Host - <%- args.host %></option>"',null,{variable:"args"}),selectResetTemplate:b.template('select option[value="<%- id %>"]'),findSelectorTemplate:b.template('[data-id="<%- id %>"]'),selectors:[],dygraphDefaultOptions:{labelsKMG2:!1,labelsKMB:!1,stackedGraph:!1,fillGraph:!1,stepPlot:!1,xlabel:"Time (Last 24 hours)",connectSeparatedPoints:!0,colors:["#8fc97f","#beaed4","#fdc086","#386cb0","#f0027f","#bf5b17","#666666"],labelsSeparateLines:!0,legend:"always",axes:{x:{valueFormatter:function(a){return new Date(a).strftime("%Y-%m-%d @ %H:%M%Z")}}}},initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.AppRouter=c.Marionette.getOption(this,"AppRouter"),this.graphiteHost=c.Marionette.getOption(this,"graphiteHost"),this.graphiteRequestDelayMs=c.Marionette.getOption(this,"graphiteRequestDelayMs"),this.baseUrl=e.makeBaseUrl(this.graphiteHost),this.heightWidth=e.makeHeightWidthParams(442,266),b.bindAll(this,"makeGraphFunctions","renderHostSelector","dygraphLoader","renderGraphTemplates","onItemBeforeClose","renderGraph","poolIopsGraphTitleTemplate","clusterUpdate","renderGraphs"),b.each(this.graphs,this.makeGraphFunctions),this.collection=new g,this.collection.cluster=c.Marionette.getOption(this,"clusterId"),this.collection.clusterName=c.Marionette.getOption(this,"clusterName"),this.collection.fetch(),this.wrapTitleTemplate("makePoolIOPSGraphURL",this.poolIopsGraphTitleTemplate),this.cpuTargetModels=new f.GraphiteCPUModel(void 0,{graphiteHost:this.graphiteHost}),this.ioTargetModels=new f.GraphiteIOModel(void 0,{graphiteHost:this.graphiteHost}),this.netTargetModels=new f.GraphiteNetModel(void 0,{graphiteHost:this.graphiteHost}),this.iopsTargetModels=new f.GraphitePoolIOPSModel(void 0,{graphiteHost:this.graphiteHost,clusterName:this.App.ReqRes.request("get:cluster").get("id")}),this.iopsTargetModels.filter=function(a){var c=this.App.ReqRes.request("get:pools");return c.all=!0,b.filter(a,function(a){return void 0!==c[a]})}.bind(this),this.render=b.wrap(this.render,this.renderWrapper),this.listenTo(this,"item:before:close",this.onItemBeforeClose),this.debouncedChangedGraph=b.debounce(this.debouncedChangedGraph,500),this.readyDeferred=a.Deferred(),this.readyPromise=this.readyDeferred.promise()},isReady:function(){return this.readyPromise},listenToClusterChanges:function(a){this.listenTo(a,"cluster:update",this.clusterUpdate)},debouncedChangedGraph:function(a,b,c){this.dygraphLoader(a,b,c)},changeGraphRange:function(c){c.preventDefault();var d=a(c.target),e=d.closest(".graph-card"),f=e.find(".workarea_g"),g=f.data("url"),h=d.val(),i=b.extend(f.data("opts"),{xlabel:this.rangeLabel[h]});e.find(".graph-value").text(this.rangeText[h]);var j=g.indexOf("&from");-1!==j&&(g=g.slice(0,j)),this.debouncedChangedGraph(e,g+"&from="+this.rangeQuery[h],i)},navigateTemplate:b.template("graph/<%- host %>"),currentHostGraphTemplate:b.template("graph/<%- host %>/<%- currentGraph %>"),hostChangeHandler:function(b){var c=b.target,d=a(c.options[c.selectedIndex]),e=d.attr("value"),f="";c.selectedIndex<2||""===this.currentGraph?(this.currentGraph="",f=this.navigateTemplate({host:e})):f=this.currentHostGraphTemplate({host:e,currentGraph:this.currentGraph}),this.AppRouter.navigate(f,{trigger:!0})},graphRouteIdTemplate:b.template("graph/<%- hostname %>/<%- id %>"),graphRouteTemplate:b.template("graph/<%- hostname %>"),clickHandler:function(b){var c=a(b.target),d=c.attr("data-id"),e=this.graphRouteIdTemplate({hostname:this.hostname,id:d});this.currentGraph=d,"overview"===d&&(e=this.graphRouteTemplate({hostname:this.hostname}),this.currentGraph=""),this.AppRouter.navigate(e,{trigger:!0})},onItemBeforeClose:function(){this.$(".workarea_g").each(function(b,c){var d=a(c),e=d.data("graph");e&&null!==e.maindiv_&&e.destroy(),d.data("graph",void 0),d.data("url",void 0),d.data("opts",void 0)})},poolIopsGraphTitleTemplate:function(a){var b=this;return function(c){var d=b.App.ReqRes.request("get:pools");return d.all="Aggregate",c.id&&(c.id=d[c.id]),a(c)}},makeGraphFunctions:function(a){var b=e.makeTargets(e[a.util](a.metrics)),c=[e.makeParam("format","json-array"),b];this[a.fn]=e.makeGraphURL(this.baseUrl,c),this.graphTitleTemplates[a.fn]=function(){var b=Array.prototype.slice.call(arguments,0);return b.unshift(a.titleTemplate),i.getSync.apply(null,b)},this.graphOptions[a.fn]=a.options},wrapTitleTemplate:function(a,b){this.graphTitleTemplates[a]=b(this.graphTitleTemplates[a])},clusterUpdate:function(a){a&&(this.collection.cluster=a.get("id"),this.collection.clusterName=a.get("name"),this.collection.fetch()),this.iopsTargetModels=new f.GraphitePoolIOPSModel(void 0,{graphiteHost:this.graphiteHost,clusterName:a.get("id")})},renderWrapper:function(a){a.call(this),this.renderGraphTemplates(),this.renderHostSelector(),this.delegateEvents(this.events),this.readyDeferred.resolve()},renderGraphTemplates:function(){var a=this;this.selectors=b.map(b.range(96),function(b){var c="graph-"+b,d=a.graphTemplate({graphid:c});return a.$el.append(d),"."+c})},makeCPUDetail:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeCPUDetailGraphUrl",this.cpuTargetModels)},makeHostDeviceIOPS:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeHostDeviceIOPSGraphUrl",this.ioTargetModels)},makeHostDeviceRWBytes:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeHostDeviceRWBytesGraphUrl",this.ioTargetModels)},makeHostDeviceRWAwait:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeHostDeviceRWAwaitGraphUrl",this.ioTargetModels)},makePoolIOPS:function(){return this.makePerHostModelGraphs("","makePoolIOPSGraphURL",this.iopsTargetModels,this.iopsTargetModels.clusterName)},updateBtns:function(a){this.ui.buttons.find(".btn").removeClass("active"),this.ui.buttons.find(this.findSelectorTemplate({id:a})).addClass("active")},getOSDIDs:function(){var b=this.App.ReqRes,c={};return c.fetchMetrics=function(d){var e=a.Deferred();return setTimeout(function(){var a=b.request("get:osdids",d);c.ids=a,e.resolve(a)},0),e.promise()},c.keys=function(){return c.ids},c.clear=function(){},c},makeHostDeviceDiskSpaceBytes:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeDiskSpaceBytesGraphUrl",this.getOSDIDs())},makeHostDeviceDiskSpaceInodes:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeDiskSpaceInodesGraphUrl",this.getOSDIDs())},makeHostNetworkBytesMetrics:function(a,b){return this.updateBtns(b),this.makePerHostModelGraphs(a,"makeHostNetworkTXRXBytesGraphURL",this.netTargetModels)},makeHostNetworkPacketsMetrics:function(c,d){this.updateBtns(d);var e=this,f=b.map(["makeHostNetworkTXRXPacketsGraphURL","makeHostNetworkTXRXErrorsGraphURL","makeHostNetworkTXRXDropGraphURL"],function(a){return e.makePerHostModelGraphs(c,a,e.netTargetModels)});return a.when.apply(void 0,f).then(function(a,b,c){return a.concat(b).concat(c)})},makeClusterWideMetrics:function(){var c=this,d={keys:function(){return["all"]},clear:function(){},fetchMetrics:function(){var b=a.Deferred();return b.resolve(),b.promise()}},e=this.App.ReqRes.request("get:cluster").get("id"),f=b.map(["makePoolIOPSGraphURL","makePoolDiskFreeGraphURL"],function(a){return c.makePerHostModelGraphs("",a,d,e)});return a.when.apply(void 0,f).then(function(a,b){return a.concat(b)})},showButtons:function(){this.ui.buttons.css("visibility","visible")},hideButtons:function(){this.ui.buttons.css("visibility","hidden")},makePerHostGraphs:function(a,b){var c,d=this[b],e=this.graphTitleTemplates[b];e&&(c=e({hostname:a}));var f=this.graphOptions[b];return{url:d.call(this,a),title:c,options:f}},makePerHostModelGraphs:function(c,d,e,f){var g=this,h=this.graphTitleTemplates[d],i=this[d],j=this.graphOptions[d];this.hostname=c;var k=a.Deferred();return e.clear({silent:!0}),e.fetchMetrics(c).done(function(){var a=e.keys();k.resolve(b.map(a,function(a){var b;return h&&(b=h({hostname:c,id:a})),{url:i.call(g,c,a,f),title:b,options:j}}))}).fail(function(a){k.reject(a)}),k.promise()},renderHostSelector:function(){var a=this.collection.pluck("addr"),c=b.reduce(a,function(a,b){return a+this.optionTemplate({host:b})},"",this),d=this.ui.hosts;d.html(this.selectTemplate({Cluster:i.getSync("Cluster")+" - "+this.collection.clusterName,PoolIOPS:i.getSync("PoolIOPS"),list:c}))},resetGraphsOnClusterUpdate:function(){this.renderHostSelector(),this.currentGraph="";var a=this.navigateTemplate({host:"all"});this.AppRouter.navigate(a,{trigger:!0})},jsonRequest:function(b){return a.ajax({url:b,dataType:"json"})},useCustomLabels:function(a,c){return c&&c.labels?b.map(["Date"].concat(a.labels),function(a,b){return void 0!==c.labels[b]?c.labels[b]:a}):a.labels},allocateGraph:function(a,c,d){var e=a.data("graph");return e?(e.isZoomed("x")&&e.resetZoom(),e.updateOptions(b.extend({file:c},d))):(e=new h(a[0],c,d),a.data("graph",e)),e},renderGraph:function(c,d,f,g){var h=c.find(".workarea_g");h.css("visibility","hidden"),h.data("url",d),h.data("opts",f);var i=a.Deferred(),j=this;b.defer(function(){i.resolve(e.graphiteJsonArrayToDygraph(g))}),i.promise().done(function(a){c.find("input").removeAttr("disabled"),f.labels=j.useCustomLabels(a,f);var d=b.extend({labelsDiv:c.find(".dygraph-legend")[0]},j.dygraphDefaultOptions,f);h.css("visibility","visible"),j.allocateGraph(h,a.data,d),h.append('<div class="help-icon"><i class="fa fa-question-circle fa-2x"></i></div>');var e=h.find(".help-icon i.fa");e.popover("destroy"),e.popover({title:"Help",trigger:"hover",container:"body",content:j.graphHelpTemplate,placement:"top"})})},graphErrorTemplate:b.template("Graph Error: <%- status %><%- response %>"),
dygraphLoader:function(a,c,d){var e=this,f=a.find(".graph-spinner").removeClass("hidden"),g=this.jsonRequest(c);a.find(".icon-space").text(""),a.find("input").attr("disabled","disabled"),g.done(b.partial(this.renderGraph,a,c,d)).fail(function(b){var c=e.graphErrorTemplate({status:b.statusText,response:b.responseText});a.find(".graph-spinner").addClass("hidden"),a.find(".icon-space").append(e.graphFailToLoadTemplate({msg:c}));var d=a.find(".workarea_g").data("graph");d&&(d.updateOptions({labels:[],file:{}}),a.find(".dygraph-legend").text(""))}).always(function(){f.addClass("hidden")})},makeHostOverviewGraphUrl:function(a){var c=this;return function(){return b.map(["makeCPUGraphUrl","makeLoadAvgGraphUrl","makeMemoryGraphUrl"],function(b){return c.makePerHostGraphs(a,b)})}},hideGraphs:function(){this.$(".graph-card, .workarea_g").css("visibility","hidden"),this.$(".graph-range input").each(function(a,b){b.value=2});var b=this;this.$(".graph-value").each(function(c,d){a(d).text(b.rangeText[2])})},renderGraphs:function(a,c){var d=c.call(this);this.ui.title.text(a);var e=this;b.each(d,function(a,c){var d=e.$(e.selectors[c]);d.css("visibility","visible"),a.title&&d.find(".graph-subtitle").text(a.title),b.delay(function(){e.dygraphLoader(d,a.url,a.options)},e.graphiteRequestDelayMs*c)})},updateSelect:function(a){this.$("select option[selected]").prop("selected",!1),this.$(this.selectResetTemplate({id:a})).prop("selected",!0)}});return j}),define("gitcommit",[],function(){"use strict";return{"git-commit":"v1.2.2-32-931ee58"}}),function(a){var b={VERSION:"2.2.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(a,c){var d="string"==typeof a.initial?{state:a.initial}:a.initial,e=a.terminal||a["final"],f=c||a.target||{},g=a.events||[],h=a.callbacks||{},i={},j=function(a){var c=a.from instanceof Array?a.from:a.from?[a.from]:[b.WILDCARD];i[a.name]=i[a.name]||{};for(var d=0;d<c.length;d++)i[a.name][c[d]]=a.to||c[d]};d&&(d.event=d.event||"startup",j({name:d.event,from:"none",to:d.state}));for(var k=0;k<g.length;k++)j(g[k]);for(var l in i)i.hasOwnProperty(l)&&(f[l]=b.buildEvent(l,i[l]));for(var l in h)h.hasOwnProperty(l)&&(f[l]=h[l]);return f.current="none",f.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},f.can=function(a){return!this.transition&&(i[a].hasOwnProperty(this.current)||i[a].hasOwnProperty(b.WILDCARD))},f.cannot=function(a){return!this.can(a)},f.error=a.error||function(a,b,c,d,e,f,g){throw g||f},f.isFinished=function(){return this.is(e)},d&&!d.defer&&f[d.event](),f},doCallback:function(a,c,d,e,f,g){if(c)try{return c.apply(a,[d,e,f].concat(g))}catch(h){return a.error(d,e,f,g,b.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",h)}},beforeAnyEvent:function(a,c,d,e,f){return b.doCallback(a,a.onbeforeevent,c,d,e,f)},afterAnyEvent:function(a,c,d,e,f){return b.doCallback(a,a.onafterevent||a.onevent,c,d,e,f)},leaveAnyState:function(a,c,d,e,f){return b.doCallback(a,a.onleavestate,c,d,e,f)},enterAnyState:function(a,c,d,e,f){return b.doCallback(a,a.onenterstate||a.onstate,c,d,e,f)},changeState:function(a,c,d,e,f){return b.doCallback(a,a.onchangestate,c,d,e,f)},beforeThisEvent:function(a,c,d,e,f){return b.doCallback(a,a["onbefore"+c],c,d,e,f)},afterThisEvent:function(a,c,d,e,f){return b.doCallback(a,a["onafter"+c]||a["on"+c],c,d,e,f)},leaveThisState:function(a,c,d,e,f){return b.doCallback(a,a["onleave"+d],c,d,e,f)},enterThisState:function(a,c,d,e,f){return b.doCallback(a,a["onenter"+e]||a["on"+e],c,d,e,f)},beforeEvent:function(a,c,d,e,f){return!1===b.beforeThisEvent(a,c,d,e,f)||!1===b.beforeAnyEvent(a,c,d,e,f)?!1:void 0},afterEvent:function(a,c,d,e,f){b.afterThisEvent(a,c,d,e,f),b.afterAnyEvent(a,c,d,e,f)},leaveState:function(a,c,d,e,f){var g=b.leaveThisState(a,c,d,e,f),h=b.leaveAnyState(a,c,d,e,f);return!1===g||!1===h?!1:b.ASYNC===g||b.ASYNC===h?b.ASYNC:void 0},enterState:function(a,c,d,e,f){b.enterThisState(a,c,d,e,f),b.enterAnyState(a,c,d,e,f)},buildEvent:function(a,c){return function(){var d=this.current,e=c[d]||c[b.WILDCARD]||d,f=Array.prototype.slice.call(arguments);if(this.transition)return this.error(a,d,e,f,b.Error.PENDING_TRANSITION,"event "+a+" inappropriate because previous transition did not complete");if(this.cannot(a))return this.error(a,d,e,f,b.Error.INVALID_TRANSITION,"event "+a+" inappropriate in current state "+this.current);if(!1===b.beforeEvent(this,a,d,e,f))return b.Result.CANCELLED;if(d===e)return b.afterEvent(this,a,d,e,f),b.Result.NOTRANSITION;var g=this;this.transition=function(){return g.transition=null,g.current=e,b.enterState(g,a,d,e,f),b.changeState(g,a,d,e,f),b.afterEvent(g,a,d,e,f),b.Result.SUCCEEDED},this.transition.cancel=function(){g.transition=null,b.afterEvent(g,a,d,e,f)};var h=b.leaveState(this,a,d,e,f);return!1===h?(this.transition=null,b.Result.CANCELLED):b.ASYNC===h?b.Result.PENDING:this.transition?this.transition():void 0}}};"function"==typeof define?define("statemachine",["require"],function(a){return b}):a.StateMachine=b}(this),define("application",["jquery","underscore","backbone","helpers/animation","statemachine","loglevel","marionette"],function(a,b,c,d,e,f){"use strict";var g=b.template("<%- prefix %> <%- event %> FROM <%- from %> TO <%- to %>"),h=c.Marionette.Application.extend({onInitializeBefore:function(a){a.appRouter&&(this.appRouter=a.appRouter),b.bindAll(this),this.fsm=e.create({initial:a.initial||"dashmode",events:[{name:"dashboard",from:["dashmode","vizmode","graphmode"],to:"dashmode"},{name:"viz",from:["dashmode","graphmode","vizmode"],to:"vizmode"},{name:"graph",from:["dashmode","vizmode","graphmode"],to:"graphmode"}],callbacks:{onentervizmode:this.onentervizmode,onleavevizmode:this.onleavevizmode,onentergraphmode:this.onentergraphmode,onleavegraphmode:this.onleavegraphmode,onenterdashmode:this.onenterdashmode,onleavedashmode:this.onleavedashmode,ongraph:this.ongraph,ondashboard:this.ondashboard}}),b.bindAll(this.fsm),this.listenTo(this.vent,"app:fullscreen",function(){this.appRouter.navigate("workbench",{trigger:!0})}),this.listenTo(this.vent,"app:dashboard",function(){this.appRouter.navigate("dashboard",{trigger:!0})});var c=b.template("graph/<%- host %>");this.listenTo(this.vent,"app:graph",function(a){void 0===a&&(a="all"),this.appRouter.navigate(c({host:a}),{trigger:!0})})},onInitializeAfter:function(){c.history&&c.history.start()},graphEvents:{cpudetail:{fn:"makeCPUDetail",title:b.template("Host <%- host %> CPU Detail Host")},iops:{fn:"makeHostDeviceIOPS",title:b.template("Host <%- host %> IOPS Per Device")},rwbytes:{fn:"makeHostDeviceRWBytes",title:b.template("Host <%- host %> RW Bytes/Sec Per Device")},rwawait:{fn:"makeHostDeviceRWAwait",title:b.template("Host <%- host %> RW Await Per Device")},diskinodes:{fn:"makeHostDeviceDiskSpaceInodes",title:b.template("Host <%- host %> DiskSpace Inodes Device")},diskbytes:{fn:"makeHostDeviceDiskSpaceBytes",title:b.template("Host <%- host %> DiskSpace Bytes Device")},netpackets:{fn:"makeHostNetworkPacketsMetrics",title:b.template("Host <%- host %> Network Interface Packets TX/RX")},netbytes:{fn:"makeHostNetworkBytesMetrics",title:b.template("Host <%- host %> Network Interface Bytes TX/RX")}},onentergraphmode:function(b,c,d){f.debug(g({prefix:"ENTER",event:b,from:c,to:d})),a(".row").css("display","none");var e=this.ReqRes.request("get:ready"),h=this;h.graphWall.listenToClusterChanges(this.vent),e.then(function(){h.graphWall.render(),a(".container").append(h.graphWall.$el),"startup"===b&&"none"===c&&h.ongraph(b,c,d,"all")})},ongraph:function(a,c,d,e,h){f.debug(g({prefix:"AFTER",event:a,from:c,to:d}));var i=this.graphWall,j=this;i.isReady().then(function(){i.hideGraphs();var a;if("all"===e)i.hideButtons(),i.makeClusterWideMetrics.call(i).then(function(a){i.renderGraphs("Cluster",function(){return b.flatten(a)})});else if("iops"===e)i.hideButtons(),i.makePoolIOPS.call(i).then(function(a){i.renderGraphs("Per Pool IOPS",function(){return b.flatten(a)})});else if(void 0!==h&&null!==h){i.showButtons();var c=j.graphEvents[h];if(void 0!==c)return void i[c.fn].call(i,e,h).then(function(a){i.renderGraphs(c.title({host:e}),function(){return b.flatten(a)})}).fail(function(){})}else a=j.ReqRes.request("get:fqdns"),b.contains(a,e)&&(i.showButtons(),i.updateSelect(e),i.updateBtns("overview"),i.hostname=e,i.renderGraphs(j.hostGraphTitleTemplate({fqdn:e}),i.makeHostOverviewGraphUrl(e)))})},hostGraphTitleTemplate:b.template("Host Graphs for <%- fqdn %>"),onleavegraphmode:function(){this.graphWall.close(),a(".row").css("display","block")},onentervizmode:function(c,d){var e=a.Deferred(),f=a("body"),g=this.vent;"dashmode"===d?g.trigger("gauges:disappear",function(){e.resolve()}):e.resolve(),e.promise().then(function(){f.addClass("workbench-mode");var a=function(){g.trigger("gauges:collapse")};g.trigger("viz:fullscreen",b.once(a))})},onleavevizmode:function(c,d,e){var f=a("body"),g=this.vent;f.removeClass("workbench-mode");var h=a.Deferred();"dashmode"===e?g.trigger("viz:dashboard",function(){h.resolve()}):g.trigger("viz:dashboard",function(){h.resolve()}),h.promise().then(function(){g.trigger("gauges:expand",b.once(function(){g.trigger("gauges:reappear")}))})},onenterdashmode:function(){a(".initial-hide").removeClass("initial-hide")},onleavedashmode:function(){},ondashboard:function(a,b,c){f.debug(g({prefix:"ondashboard",event:a,from:b,to:c})),setTimeout(function(){this.vent.trigger("dashboard:refresh")}.bind(this),500)}});return h}),function(a,b,c){"function"==typeof define?define("idbwrapper",b):"undefined"!=typeof module&&module.exports?module.exports=b():c[a]=b()}("IDBStore",function(){"use strict";var a=function(a){throw a},b={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:a,indexes:[]},c=function(a,c){"undefined"==typeof c&&"function"==typeof a&&(c=a),"[object Object]"!=Object.prototype.toString.call(a)&&(a={});for(var d in b)this[d]="undefined"!=typeof a[d]?a[d]:b[d];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,c&&(this.onStoreReady=c);var e="object"==typeof window?window:self;this.idb=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB,this.keyRange=e.IDBKeyRange||e.webkitIDBKeyRange||e.mozIDBKeyRange,this.features={hasAutoIncrement:!e.mozIndexedDB},this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()};c.prototype={constructor:c,version:"1.4.1",db:null,dbName:null,dbVersion:null,store:null,storeName:null,keyPath:null,autoIncrement:null,indexes:null,features:null,onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var a=this.idb.open(this.dbName,this.dbVersion),b=!1;a.onerror=function(a){var b=!1;"error"in a.target?b="VersionError"==a.target.error.name:"errorCode"in a.target&&(b=12==a.target.errorCode),b?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(a)}.bind(this),a.onsuccess=function(a){if(!b){if(this.db)return void this.onStoreReady();if(this.db=a.target.result,"string"==typeof this.db.version)return void this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."));if(!this.db.objectStoreNames.contains(this.storeName))return void this.onError(new Error("Something is wrong with the IndexedDB implementation in this browser. Please upgrade your browser."));var c=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=c.objectStore(this.storeName);var d=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(a){var c=a.name;if(!c)return b=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(a),this.hasIndex(c)){var e=this.store.index(c),f=this.indexComplies(e,a);f||(b=!0,this.onError(new Error('Cannot modify index "'+c+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),d.splice(d.indexOf(c),1)}else b=!0,this.onError(new Error('Cannot create new index "'+c+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),d.length&&(b=!0,this.onError(new Error('Cannot delete index(es) "'+d.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),b||this.onStoreReady()}}.bind(this),a.onupgradeneeded=function(a){if(this.db=a.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=a.target.transaction.objectStore(this.storeName);else{var c={autoIncrement:this.autoIncrement};null!==this.keyPath&&(c.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,c)}var d=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(a){var c=a.name;if(c||(b=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(a),this.hasIndex(c)){var e=this.store.index(c),f=this.indexComplies(e,a);f||(this.store.deleteIndex(c),this.store.createIndex(c,a.keyPath,{unique:a.unique,multiEntry:a.multiEntry})),d.splice(d.indexOf(c),1)}else this.store.createIndex(c,a.keyPath,{unique:a.unique,multiEntry:a.multiEntry})},this),d.length&&d.forEach(function(a){this.store.deleteIndex(a)},this)}.bind(this)},deleteDatabase:function(){this.idb.deleteDatabase&&this.idb.deleteDatabase(this.dbName)},put:function(b,c,e,f){null!==this.keyPath&&(f=e,e=c,c=b),f||(f=a),e||(e=d);var g,h=!1,i=null,j=this.db.transaction([this.storeName],this.consts.READ_WRITE);return j.oncomplete=function(){var a=h?e:f;a(i)},j.onabort=f,j.onerror=f,null!==this.keyPath?(this._addIdPropertyIfNeeded(c),g=j.objectStore(this.storeName).put(c)):g=j.objectStore(this.storeName).put(c,b),g.onsuccess=function(a){h=!0,i=a.target.result},g.onerror=f,j},get:function(b,c,e){e||(e=a),c||(c=d);var f=!1,g=null,h=this.db.transaction([this.storeName],this.consts.READ_ONLY);h.oncomplete=function(){var a=f?c:e;a(g)},h.onabort=e,h.onerror=e;var i=h.objectStore(this.storeName).get(b);return i.onsuccess=function(a){f=!0,g=a.target.result},i.onerror=e,h},remove:function(b,c,e){e||(e=a),c||(c=d);var f=!1,g=null,h=this.db.transaction([this.storeName],this.consts.READ_WRITE);h.oncomplete=function(){var a=f?c:e;a(g)},h.onabort=e,h.onerror=e;var i=h.objectStore(this.storeName)["delete"](b);return i.onsuccess=function(a){f=!0,g=a.target.result},i.onerror=e,h},batch:function(b,c,e){e||(e=a),c||(c=d),"[object Array]"!=Object.prototype.toString.call(b)&&e(new Error("dataArray argument must be of type Array."));var f=this.db.transaction([this.storeName],this.consts.READ_WRITE);f.oncomplete=function(){var a=i?c:e;a(i)},f.onabort=e,f.onerror=e;var g=b.length,h=!1,i=!1,j=function(){g--,0!==g||h||(h=!0,i=!0)};return b.forEach(function(a){var b=a.type,c=a.key,d=a.value,g=function(a){f.abort(),h||(h=!0,e(a,b,c))};if("remove"==b){var i=f.objectStore(this.storeName)["delete"](c);i.onsuccess=j,i.onerror=g}else if("put"==b){var k;null!==this.keyPath?(this._addIdPropertyIfNeeded(d),k=f.objectStore(this.storeName).put(d)):k=f.objectStore(this.storeName).put(d,c),k.onsuccess=j,k.onerror=g}},this),f},putBatch:function(a,b,c){var d=a.map(function(a){return{type:"put",value:a}});return this.batch(d,b,c)},removeBatch:function(a,b,c){var d=a.map(function(a){return{type:"remove",key:a}});return this.batch(d,b,c)},getBatch:function(b,c,e,f){e||(e=a),c||(c=d),f||(f="sparse"),"[object Array]"!=Object.prototype.toString.call(b)&&e(new Error("keyArray argument must be of type Array."));var g=this.db.transaction([this.storeName],this.consts.READ_ONLY);g.oncomplete=function(){var a=k?c:e;a(l)},g.onabort=e,g.onerror=e;var h=[],i=b.length,j=!1,k=!1,l=null,m=function(a){a.target.result||"dense"==f?h.push(a.target.result):"sparse"==f&&h.length++,i--,0===i&&(j=!0,k=!0,l=h)};return b.forEach(function(a){var b=function(a){j=!0,l=a,e(a),g.abort()},c=g.objectStore(this.storeName).get(a);c.onsuccess=m,c.onerror=b},this),g},getAll:function(b,c){c||(c=a),b||(b=d);var e=this.db.transaction([this.storeName],this.consts.READ_ONLY),f=e.objectStore(this.storeName);return f.getAll?this._getAllNative(e,f,b,c):this._getAllCursor(e,f,b,c),e},_getAllNative:function(a,b,c,d){var e=!1,f=null;a.oncomplete=function(){var a=e?c:d;a(f)},a.onabort=d,a.onerror=d;var g=b.getAll();g.onsuccess=function(a){e=!0,f=a.target.result},g.onerror=d},_getAllCursor:function(a,b,c,d){var e=[],f=!1,g=null;a.oncomplete=function(){var a=f?c:d;a(g)},a.onabort=d,a.onerror=d;var h=b.openCursor();h.onsuccess=function(a){var b=a.target.result;b?(e.push(b.value),b["continue"]()):(f=!0,g=e)},h.onError=d},clear:function(b,c){c||(c=a),b||(b=d);var e=!1,f=null,g=this.db.transaction([this.storeName],this.consts.READ_WRITE);g.oncomplete=function(){var a=e?b:c;a(f)},g.onabort=c,g.onerror=c;var h=g.objectStore(this.storeName).clear();return h.onsuccess=function(a){e=!0,f=a.target.result},h.onerror=c,g},_addIdPropertyIfNeeded:function(a){this.features.hasAutoIncrement||"undefined"!=typeof a[this.keyPath]||(a[this.keyPath]=this._insertIdCount++ +Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(a){return this.store.indexNames.contains(a)},normalizeIndexData:function(a){a.keyPath=a.keyPath||a.name,a.unique=!!a.unique,a.multiEntry=!!a.multiEntry},indexComplies:function(a,b){var c=["keyPath","unique","multiEntry"].every(function(c){if("multiEntry"==c&&void 0===a[c]&&b[c]===!1)return!0;if("keyPath"==c&&"[object Array]"==Object.prototype.toString.call(b[c])){var d=b.keyPath,e=a.keyPath;if("string"==typeof e)return d.toString()==e;if("function"!=typeof e.contains&&"function"!=typeof e.indexOf)return!1;if(e.length!==d.length)return!1;for(var f=0,g=d.length;g>f;f++)if(!(e.contains&&e.contains(d[f])||e.indexOf(-1!==d[f])))return!1;return!0}return b[c]==a[c]});return c},iterate:function(b,c){c=f({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:a},c||{});var d="desc"==c.order.toLowerCase()?"PREV":"NEXT";c.filterDuplicates&&(d+="_NO_DUPLICATE");var e=!1,g=this.db.transaction([this.storeName],this.consts[c.writeAccess?"READ_WRITE":"READ_ONLY"]),h=g.objectStore(this.storeName);c.index&&(h=h.index(c.index)),g.oncomplete=function(){return e?void(c.onEnd?c.onEnd():b(null)):void c.onError(null)},g.onabort=c.onError,g.onerror=c.onError;var i=h.openCursor(c.keyRange,this.consts[d]);return i.onerror=c.onError,i.onsuccess=function(a){var d=a.target.result;d?(b(d.value,d,g),c.autoContinue&&d["continue"]()):e=!0},g},query:function(a,b){var c=[];return b=b||{},b.onEnd=function(){a(c)},this.iterate(function(a){c.push(a)},b)},count:function(b,c){c=f({index:null,keyRange:null},c||{});var d=c.onError||a,e=!1,g=null,h=this.db.transaction([this.storeName],this.consts.READ_ONLY);h.oncomplete=function(){var a=e?b:d;a(g)},h.onabort=d,h.onerror=d;var i=h.objectStore(this.storeName);c.index&&(i=i.index(c.index));var j=i.count(c.keyRange);return j.onsuccess=function(a){e=!0,g=a.target.result},j.onError=d,h},makeKeyRange:function(a){var b,c="undefined"!=typeof a.lower,d="undefined"!=typeof a.upper,e="undefined"!=typeof a.only;switch(!0){case e:b=this.keyRange.only(a.only);break;case c&&d:b=this.keyRange.bound(a.lower,a.upper,a.excludeLower,a.excludeUpper);break;case c:b=this.keyRange.lowerBound(a.lower,a.excludeLower);break;case d:b=this.keyRange.upperBound(a.upper,a.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return b}};var d=function(){},e={},f=function(a,b){var c,d;for(c in b)d=b[c],d!==e[c]&&d!==a[c]&&(a[c]=d);return a};return c.version=c.prototype.version,c},this),function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define("q",a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else Q=a()}(function(){"use strict";function a(a){return function(){return X.apply(a,arguments)}}function b(a){return a===Object(a)}function c(a){return"[object StopIteration]"===da(a)||a instanceof T}function d(a,b){if(Q&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(fa)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var f=c.join("\n"+fa+"\n");a.stack=e(f)}}function e(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];h(e)||f(e)||!e||c.push(e)}return c.join("\n")}function f(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function g(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function h(a){var b=g(a);if(!b)return!1;var c=b[0],d=b[1];return c===S&&d>=U&&ka>=d}function i(){if(Q)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=g(c);if(!d)return;return S=d[0],d[1]}}function j(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function k(a){return r(a)?a:s(a)?D(a):C(a)}function l(){function a(a){b=a,f.source=a,Z(c,function(b,c){W(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=aa(l.prototype),f=aa(o.prototype);if(f.promiseDispatch=function(a,e,f){var g=Y(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):W(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=q(b);return r(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},k.longStackSupport&&Q)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(k(c))},e.fulfill=function(c){b||a(C(c))},e.reject=function(c){b||a(B(c))},e.notify=function(a){b||Z(d,function(b,c){W(function(){c(a)})},void 0)},e}function m(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=l();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function n(a){return m(function(b,c){for(var d=0,e=a.length;e>d;d++)k(a[d]).then(b,c)})}function o(a,b,c){void 0===b&&(b=function(a){return B(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=aa(o.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=B(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function p(a,b,c,d){return k(a).then(b,c,d)}function q(a){if(r(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function r(a){return b(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function s(a){return b(a)&&"function"==typeof a.then}function t(a){return r(a)&&"pending"===a.inspect().state}function u(a){return!r(a)||"fulfilled"===a.inspect().state}function v(a){return r(a)&&"rejected"===a.inspect().state}function w(){!ia&&"undefined"!=typeof window&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",ga),ia=!0}function x(){for(var a=0;a<ga.length;a++){var b=ga[a];console.warn("Unhandled rejection reason:",b)}}function y(){ga.length=0,ha.length=0,ia=!1,ja||(ja=!0,"undefined"!=typeof process&&process.on&&process.on("exit",x))}function z(a,b){ja&&(ha.push(a),b&&"undefined"!=typeof b.stack?ga.push(b.stack):ga.push("(no stack) "+b),w())}function A(a){if(ja){var b=$(ha,a);-1!==b&&(ha.splice(b,1),ga.splice(b,1))}}function B(a){var b=o({when:function(b){return b&&A(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return z(b,a),b}function C(a){return o({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return ca(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function D(a){var b=l();return W(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function E(a){return o({isDef:function(){}},function(b,c){return K(a,b,c)},function(){return k(a).inspect()})}function F(a,b,c){return k(a).spread(b,c)}function G(a){return function(){function b(a,b){var g;if(ea){try{g=d[a](b)}catch(h){return B(h)}return g.done?g.value:p(g.value,e,f)}try{g=d[a](b)}catch(h){return c(h)?h.value:B(h)}return p(g,e,f)}var d=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function H(a){k.done(k.async(a)())}function I(a){throw new T(a)}function J(a){return function(){return F([this,L(arguments)],function(b,c){return a.apply(b,c)})}}function K(a,b,c){return k(a).dispatch(b,c)}function L(a){return p(a,function(a){var b=0,c=l();return Z(a,function(d,e,f){var g;r(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,p(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function M(a){return p(a,function(a){return a=_(a,k),p(L(_(a,function(a){return p(a,V,V)})),function(){return a})})}function N(a){return k(a).allSettled()}function O(a,b){return k(a).then(void 0,void 0,b)}function P(a,b){return k(a).nodeify(b)}var Q=!1;try{throw new Error}catch(R){Q=!!R.stack}var S,T,U=i(),V=function(){},W=function(){function a(){for(;b.next;){b=b.next;var c=b.task;b.task=void 0;var e=b.domain;e&&(b.domain=void 0,e.enter());try{c()}catch(g){if(f)throw e&&e.exit(),setTimeout(a,0),e&&e.enter(),g;setTimeout(function(){throw g},0)}e&&e.exit()}d=!1}var b={task:void 0,next:null},c=b,d=!1,e=void 0,f=!1;if(W=function(a){c=c.next={task:a,domain:f&&process.domain,next:null},d||(d=!0,e())},"undefined"!=typeof process&&process.nextTick)f=!0,e=function(){process.nextTick(a)};else if("function"==typeof setImmediate)e="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var g=new MessageChannel;g.port1.onmessage=function(){e=h,g.port1.onmessage=a,a()};var h=function(){g.port2.postMessage(0)};e=function(){setTimeout(a,0),h()}}else e=function(){setTimeout(a,0)};return W}(),X=Function.call,Y=a(Array.prototype.slice),Z=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),$=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),_=a(Array.prototype.map||function(a,b){var c=this,d=[];return Z(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),aa=Object.create||function(a){function b(){}return b.prototype=a,new b},ba=a(Object.prototype.hasOwnProperty),ca=Object.keys||function(a){var b=[];for(var c in a)ba(a,c)&&b.push(c);return b},da=a(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var ea;try{new Function("(function* (){ yield 1; })"),ea=!0}catch(R){ea=!1}var fa="From previous event:";k.resolve=k,k.nextTick=W,k.longStackSupport=!1,k.defer=l,l.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(Y(arguments,1)):a.resolve(c)}},k.promise=m,k.passByCopy=function(a){return a},o.prototype.passByCopy=function(){return this},k.join=function(a,b){return k(a).join(b)},o.prototype.join=function(a){return k([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},k.race=n,o.prototype.race=function(){return this.then(k.race)},k.makePromise=o,o.prototype.toString=function(){return"[object Promise]"},o.prototype.then=function(a,b,c){function e(b){try{return"function"==typeof a?a(b):b}catch(c){return B(c)}}function f(a){if("function"==typeof b){d(a,h);try{return b(a)}catch(c){return B(c)}}return B(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=l(),j=!1;return W(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(e(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!k.onerror)throw d;k.onerror(d)}c||i.notify(b)}]),i.promise},k.when=p,o.prototype.thenResolve=function(a){return this.then(function(){return a})},k.thenResolve=function(a,b){return k(a).thenResolve(b)},o.prototype.thenReject=function(a){return this.then(function(){throw a})},k.thenReject=function(a,b){return k(a).thenReject(b)},k.nearer=q,k.isPromise=r,k.isPromiseAlike=s,k.isPending=t,o.prototype.isPending=function(){return"pending"===this.inspect().state},k.isFulfilled=u,o.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},k.isRejected=v,o.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ga=[],ha=[],ia=!1,ja=!0;k.resetUnhandledRejections=y,k.getUnhandledReasons=function(){return ga.slice()},k.stopUnhandledRejectionTracking=function(){y(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",x),ja=!1},y(),k.reject=B,k.fulfill=C,k.master=E,k.spread=F,o.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},k.async=G,k.spawn=H,k["return"]=I,k.promised=J,k.dispatch=K,o.prototype.dispatch=function(a,b){var c=this,d=l();return W(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},k.get=function(a,b){return k(a).dispatch("get",[b])},o.prototype.get=function(a){return this.dispatch("get",[a])},k.set=function(a,b,c){return k(a).dispatch("set",[b,c])},o.prototype.set=function(a,b){return this.dispatch("set",[a,b])},k.del=k["delete"]=function(a,b){return k(a).dispatch("delete",[b])},o.prototype.del=o.prototype["delete"]=function(a){return this.dispatch("delete",[a])},k.mapply=k.post=function(a,b,c){return k(a).dispatch("post",[b,c])},o.prototype.mapply=o.prototype.post=function(a,b){return this.dispatch("post",[a,b])},k.send=k.mcall=k.invoke=function(a,b){return k(a).dispatch("post",[b,Y(arguments,2)])},o.prototype.send=o.prototype.mcall=o.prototype.invoke=function(a){return this.dispatch("post",[a,Y(arguments,1)])},k.fapply=function(a,b){return k(a).dispatch("apply",[void 0,b])},o.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},k["try"]=k.fcall=function(a){return k(a).dispatch("apply",[void 0,Y(arguments,1)])},o.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},k.fbind=function(a){var b=k(a),c=Y(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(Y(arguments))])}},o.prototype.fbind=function(){var a=this,b=Y(arguments);return function(){return a.dispatch("apply",[this,b.concat(Y(arguments))])}},k.keys=function(a){return k(a).dispatch("keys",[])},o.prototype.keys=function(){return this.dispatch("keys",[])},k.all=L,o.prototype.all=function(){return L(this)},k.allResolved=j(M,"allResolved","allSettled"),o.prototype.allResolved=function(){return M(this)},k.allSettled=N,o.prototype.allSettled=function(){return this.then(function(a){return L(_(a,function(a){function b(){return a.inspect()}return a=k(a),a.then(b,b)}))})},k.fail=k["catch"]=function(a,b){return k(a).then(void 0,b)},o.prototype.fail=o.prototype["catch"]=function(a){return this.then(void 0,a)},k.progress=O,o.prototype.progress=function(a){return this.then(void 0,void 0,a)},k.fin=k["finally"]=function(a,b){return k(a)["finally"](b)},o.prototype.fin=o.prototype["finally"]=function(a){return a=k(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},k.done=function(a,b,c,d){return k(a).done(b,c,d)},o.prototype.done=function(a,b,c){
var e=function(a){W(function(){if(d(a,f),!k.onerror)throw a;k.onerror(a)})},f=a||b||c?this.then(a,b,c):this;"object"==typeof process&&process&&process.domain&&(e=process.domain.bind(e)),f.then(void 0,e)},k.timeout=function(a,b,c){return k(a).timeout(b,c)},o.prototype.timeout=function(a,b){var c=l(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},k.delay=function(a,b){return void 0===b&&(b=a,a=void 0),k(a).delay(b)},o.prototype.delay=function(a){return this.then(function(b){var c=l();return setTimeout(function(){c.resolve(b)},a),c.promise})},k.nfapply=function(a,b){return k(a).nfapply(b)},o.prototype.nfapply=function(a){var b=l(),c=Y(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},k.nfcall=function(a){var b=Y(arguments,1);return k(a).nfapply(b)},o.prototype.nfcall=function(){var a=Y(arguments),b=l();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},k.nfbind=k.denodeify=function(a){var b=Y(arguments,1);return function(){var c=b.concat(Y(arguments)),d=l();return c.push(d.makeNodeResolver()),k(a).fapply(c).fail(d.reject),d.promise}},o.prototype.nfbind=o.prototype.denodeify=function(){var a=Y(arguments);return a.unshift(this),k.denodeify.apply(void 0,a)},k.nbind=function(a,b){var c=Y(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(Y(arguments)),f=l();return e.push(f.makeNodeResolver()),k(d).fapply(e).fail(f.reject),f.promise}},o.prototype.nbind=function(){var a=Y(arguments,0);return a.unshift(this),k.nbind.apply(void 0,a)},k.nmapply=k.npost=function(a,b,c){return k(a).npost(b,c)},o.prototype.nmapply=o.prototype.npost=function(a,b){var c=Y(b||[]),d=l();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},k.nsend=k.nmcall=k.ninvoke=function(a,b){var c=Y(arguments,2),d=l();return c.push(d.makeNodeResolver()),k(a).dispatch("post",[b,c]).fail(d.reject),d.promise},o.prototype.nsend=o.prototype.nmcall=o.prototype.ninvoke=function(a){var b=Y(arguments,1),c=l();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},k.nodeify=P,o.prototype.nodeify=function(a){return a?void this.then(function(b){W(function(){a(null,b)})},function(b){W(function(){a(b)})}):this};var ka=i();return k}),define("tracker",["jquery","underscore","backbone","templates","idbwrapper","loglevel","collections/user-request-collection","models/user-request-model","q","moment","Backbone.Modal","marionette"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return c.Marionette.ItemView.extend({deferred:{},myid:0,defaultTimer:15e3,shortTimer:5e3,initialize:function(){this.App=c.Marionette.getOption(this,"App"),this.cluster=c.Marionette.getOption(this,"cluster"),this.collection=new g([],{cluster:this.cluster}),this.model=new h({cluster:this.cluster}),this.listenTo(this.App.vent,"cluster:update",this.updateFSID);var i=this;this.requests=new e({dbVersion:2,storeName:"InktankUserRequest",keyPath:"id",autoIncrement:!1,onStoreReady:function(){f.info("Inktank User Request Store ready!"),i.timeout=setTimeout(this.checkWorkToDo,this.shortTimer)},onError:function(){f.error("Your browser may be in incognito or private browsing mode. Request Tracking Disabled");var b=c.Modal.extend({template:d["app/scripts/templates/modal.ejs"],cancelEl:".bbm-button"}),e=new b;a("body").append(e.render().el),i.add=i.remove=function(){},i.getTrackedTasks=function(){return[]},i.getSubmitted=function(){return[]},i.getLength=function(){return 0}}}),b.bindAll(this,"updateFSID","processTasks","checkWorkToDo","getTrackedTasks","getSubmitted","_resolvePromise","_rejectPromise","remove","showNotification","showError")},add:function(a){var b=i.defer();return this.deferred[a]=b,this.requests.put({id:a,timestamp:Date.now()},function(a){f.debug("tracking new request "+a)},function(b){f.error("error inserting request "+a+" error ",b)}),clearTimeout(this.timeout),this.timeout=setTimeout(this.checkWorkToDo,0),b.promise},getSubmitted:function(){return this.collection.getSubmitted()},getLength:function(){var a=i.defer();return this.requests.count(a.resolve,a.reject),a.promise},getTrackedTasks:function(){var a=i.defer();return this.requests.getAll(a.resolve,a.reject),a.promise},_resolvePromise:function(a){this.deferred[a]&&(this.deferred[a].resolve(a),delete this.deferred[a])},_rejectPromise:function(a,b){this.deferred[a]&&(this.deferred[a].reject(a,b),delete this.deferred[a])},remove:function(a){var b=i.defer();this.requests.remove(a,b.resolve,b.reject);var c=this;return b.promise.then(function(){f.debug("Removed task id "+a),c._resolvePromise(a)},function(b){f.error("Error removing task id "+a,b),c._rejectPromise(a,b)}),b.promise},showNotification:function(a){this.App.vent.trigger("request:success",a)},showError:function(a){this.App.vent.trigger("request:error",a)},updateFSID:function(a){this.collection.cluster=a.get("id"),this.model.set("cluster",a.get("id"))},processTasks:function(a,c){b.each(c,function(c){var d=c.id,e=b.find(a,function(a){return a.id===d});if(void 0===e){var g=this;this.model.set("id",d).fetch().then(function(a){if(f.debug("Checking task "+d),a.error)g.showError(a),g.remove(d);else if("complete"===a.state)f.debug("Task "+d+" is complete"),g.showNotification(a),g.remove(d);else if(f.debug("task "+d+" is still active."),c.timestamp){var b=j(c.timestamp),e=j();e.diff(b,"days")>=1&&(f.warn("task "+d+" is older than 24 hours. Reaping old task."),g.remove(d))}},function(a){f.debug("Error "+a.status+" checking task "+d,a),404===a.status&&(f.warn("Task "+d+" NOT FOUND"),g.remove(d))})}else f.debug("Task "+d+" is still executing")},this),f.debug("Server has "+a.length+" running tasks"),this.timeout=setTimeout(this.checkWorkToDo,this.shortTimer)},checkWorkToDo:function(){var a=this;this.getLength().then(function(c){return 0===c?(f.debug("["+a.myid+"] No tasks to track. sleeping "+a.defaultTimer),void(a.timeout=setTimeout(a.checkWorkToDo,a.defaultTimer))):(f.debug("["+a.myid+"] tracking "+c+" tasks"),void a.getSubmitted().then(function(c){a.getTrackedTasks().then(b.partial(a.processTasks,c.results),function(a){f.error("Unexpected DB error getting tracked task list ",a)})},function(b){f.error(b),a.timeout=setTimeout(a.checkWorkToDo,a.defaultTimer)}))},function(b){f.error("Error Counting Request DB ",b),a.timeout=setTimeout(a.checkWorkToDo,a.defaultTimer)})}})}),function(a){function b(a){return a=decodeURIComponent(a),a=a.replace("+"," ")}function c(a){var b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d=b.exec(a||""),e={};return c.forEach(function(a,b){e[a]=d[b]||""}),e}function d(a){var b,c,d,e,f,g,h=[];if("undefined"==typeof a||null===a||""===a)return h;for(0===a.indexOf("?")&&(a=a.substring(1)),c=a.toString().split(/[&;]/),b=0;b<c.length;b++)d=c[b],e=d.split("="),f=e[0],g=-1===d.indexOf("=")?null:null===e[1]?"":e[1],h.push([f,g]);return h}function e(a){this.uriParts=c(a),this.queryPairs=d(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b||this,this[c],c,this)}),["protocol","userInfo","host","port","path","anchor"].forEach(function(a){e.prototype[a]=function(b){return"undefined"!=typeof b&&(this.uriParts[a]=b),this.uriParts[a]}}),e.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},e.prototype.query=function(a){var b,c,e="";for("undefined"!=typeof a&&(this.queryPairs=d(a)),b=0;b<this.queryPairs.length;b++)c=this.queryPairs[b],e.length>0&&(e+="&"),e+=null===c[1]?c[0]:c.join("=");return e.length>0?"?"+e:e},e.prototype.getQueryParamValue=function(a){var c,d;for(d=0;d<this.queryPairs.length;d++)if(c=this.queryPairs[d],b(a)===b(c[0]))return c[1]},e.prototype.getQueryParamValues=function(a){var c,d,e=[];for(c=0;c<this.queryPairs.length;c++)d=this.queryPairs[c],b(a)===b(d[0])&&e.push(d[1]);return e},e.prototype.deleteQueryParam=function(a,c){var d,e,f,g,h=[];for(d=0;d<this.queryPairs.length;d++)e=this.queryPairs[d],f=b(e[0])===b(a),g=b(e[1])===b(c),(1===arguments.length&&!f||2===arguments.length&&!f&&!g)&&h.push(e);return this.queryPairs=h,this},e.prototype.addQueryParam=function(a,b,c){return 3===arguments.length&&-1!==c?(c=Math.min(c,this.queryPairs.length),this.queryPairs.splice(c,0,[a,b])):arguments.length>0&&this.queryPairs.push([a,b]),this},e.prototype.replaceQueryParam=function(a,c,d){var e,f,g=-1;if(3===arguments.length){for(e=0;e<this.queryPairs.length;e++)if(f=this.queryPairs[e],b(f[0])===b(a)&&decodeURIComponent(f[1])===b(d)){g=e;break}this.deleteQueryParam(a,d).addQueryParam(a,c,g)}else{for(e=0;e<this.queryPairs.length;e++)if(f=this.queryPairs[e],b(f[0])===b(a)){g=e;break}this.deleteQueryParam(a),this.addQueryParam(a,c,g)}return this},["protocol","hasAuthorityPrefix","userInfo","host","port","path","query","anchor"].forEach(function(a){var b="set"+a.charAt(0).toUpperCase()+a.slice(1);e.prototype[b]=function(b){return this[a](b),this}}),e.prototype.scheme=function(){var a="";return this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//"),a},e.prototype.origin=function(){var a=this.scheme();return this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@")),this.host()&&(a+=this.host(),this.port()&&(a+=":"+this.port())),a},e.prototype.toString=function(){var a=this.origin();return this.path()?a+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(a+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(a+="?"),a+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(a+="#"),a+=this.anchor()),a},e.prototype.clone=function(){return new e(this.toString())},"undefined"==typeof module?a.Uri=e:module.exports=e}(this),define("jsuri",function(){}),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a){var b={init:function(b){return this.options=a.extend({},a.noty.defaults,b),this.options.layout=this.options.custom?a.noty.layouts.inline:a.noty.layouts[this.options.layout],this.options.theme=a.noty.themes[this.options.theme],delete b.layout,delete b.theme,this.options=a.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=a.extend({},this.options,b),this._build(),this},_build:function(){var b=a('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(b.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?a(this.options.layout.parent.object).css(this.options.layout.parent.css).append(b):b,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var c=a("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(c):this.$bar.append(c);var d=this;a.each(this.options.buttons,function(b,c){var e=a("<button/>").addClass(c.addClass?c.addClass:"gray").html(c.text).attr("id",c.id?c.id:"button-"+b).appendTo(d.$bar.find(".noty_buttons")).bind("click",function(){a.isFunction(c.onClick)&&c.onClick.call(e,d)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),a.noty.store[this.options.id]=this},show:function(){var b=this;return a(b.options.layout.container.selector).append(b.$bar),b.options.theme.style.apply(b),"function"===a.type(b.options.layout.css)?this.options.layout.css.apply(b.$bar):b.$bar.css(this.options.layout.css||{}),b.$bar.addClass(b.options.layout.addClass),b.options.layout.container.style.apply(a(b.options.layout.container.selector)),b.showing=!0,b.options.theme.callback.onShow.apply(this),a.inArray("click",b.options.closeWith)>-1&&b.$bar.css("cursor","pointer").one("click",function(a){b.stopPropagation(a),b.options.callback.onCloseClick&&b.options.callback.onCloseClick.apply(b),b.close()}),a.inArray("hover",b.options.closeWith)>-1&&b.$bar.one("mouseenter",function(){b.close()}),a.inArray("button",b.options.closeWith)>-1&&b.$closeButton.one("click",function(a){b.stopPropagation(a),b.close()}),-1==a.inArray("button",b.options.closeWith)&&b.$closeButton.remove(),b.options.callback.onShow&&b.options.callback.onShow.apply(b),b.$bar.animate(b.options.animation.open,b.options.animation.speed,b.options.animation.easing,function(){b.options.callback.afterShow&&b.options.callback.afterShow.apply(b),b.showing=!1,b.shown=!0}),b.options.timeout&&b.$bar.delay(b.options.timeout).promise().done(function(){b.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var b=this;if(this.showing)return void b.$bar.queue(function(){b.close.apply(b)});if(!this.shown&&!this.showing){var c=[];return a.each(a.noty.queue,function(a,d){d.options.id!=b.options.id&&c.push(d)}),void(a.noty.queue=c)}b.$bar.addClass("i-am-closing-now"),b.options.callback.onClose&&b.options.callback.onClose.apply(b),b.$bar.clearQueue().stop().animate(b.options.animation.close,b.options.animation.speed,b.options.animation.easing,function(){b.options.callback.afterClose&&b.options.callback.afterClose.apply(b)}).promise().done(function(){b.options.modal&&(a.notyRenderer.setModalCount(-1),0==a.notyRenderer.getModalCount()&&a(".noty_modal").fadeOut("fast",function(){a(this).remove()})),a.notyRenderer.setLayoutCountFor(b,-1),0==a.notyRenderer.getLayoutCountFor(b)&&a(b.options.layout.container.selector).remove(),"undefined"!=typeof b.$bar&&null!==b.$bar&&(b.$bar.remove(),b.$bar=null,b.closed=!0),delete a.noty.store[b.options.id],b.options.theme.callback.onClose.apply(b),b.options.dismissQueue||(a.noty.ontap=!0,a.notyRenderer.render()),b.options.maxVisible>0&&b.options.dismissQueue&&a.notyRenderer.render()})}},setText:function(a){return this.closed||(this.options.text=a,this.$bar.find(".noty_text").html(a)),this},setType:function(a){return this.closed||(this.options.type=a,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(a){if(!this.closed){var b=this;this.options.timeout=a,b.$bar.delay(b.options.timeout).promise().done(function(){b.close()})}return this},stopPropagation:function(a){a=a||window.event,"undefined"!=typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},closed:!1,showing:!1,shown:!1};a.notyRenderer={},a.notyRenderer.init=function(c){var d=Object.create(b).init(c);return d.options.force?a.noty.queue.unshift(d):a.noty.queue.push(d),a.notyRenderer.render(),"object"==a.noty.returns?d:d.options.id},a.notyRenderer.render=function(){var b=a.noty.queue[0];"object"===a.type(b)?b.options.dismissQueue?b.options.maxVisible>0?a(b.options.layout.container.selector+" li").length<b.options.maxVisible&&a.notyRenderer.show(a.noty.queue.shift()):a.notyRenderer.show(a.noty.queue.shift()):a.noty.ontap&&(a.notyRenderer.show(a.noty.queue.shift()),a.noty.ontap=!1):a.noty.ontap=!0},a.notyRenderer.show=function(b){b.options.modal&&(a.notyRenderer.createModalFor(b),a.notyRenderer.setModalCount(1)),0==a(b.options.layout.container.selector).length?b.options.custom?b.options.custom.append(a(b.options.layout.container.object).addClass("i-am-new")):a("body").append(a(b.options.layout.container.object).addClass("i-am-new")):a(b.options.layout.container.selector).removeClass("i-am-new"),a.notyRenderer.setLayoutCountFor(b,1),b.show()},a.notyRenderer.createModalFor=function(b){0==a(".noty_modal").length&&a("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(b.options.theme.modal.css).prependTo(a("body")).fadeIn("fast")},a.notyRenderer.getLayoutCountFor=function(b){return a(b.options.layout.container.selector).data("noty_layout_count")||0},a.notyRenderer.setLayoutCountFor=function(b,c){return a(b.options.layout.container.selector).data("noty_layout_count",a.notyRenderer.getLayoutCountFor(b)+c)},a.notyRenderer.getModalCount=function(){return a(".noty_modal").data("noty_modal_count")||0},a.notyRenderer.setModalCount=function(b){return a(".noty_modal").data("noty_modal_count",a.notyRenderer.getModalCount()+b)},a.fn.noty=function(b){return b.custom=a(this),a.notyRenderer.init(b)},a.noty={},a.noty.queue=[],a.noty.ontap=!0,a.noty.layouts={},a.noty.themes={},a.noty.returns="object",a.noty.store={},a.noty.get=function(b){return a.noty.store.hasOwnProperty(b)?a.noty.store[b]:!1},a.noty.close=function(b){return a.noty.get(b)?a.noty.get(b).close():!1},a.noty.setText=function(b,c){return a.noty.get(b)?a.noty.get(b).setText(c):!1},a.noty.setType=function(b,c){return a.noty.get(b)?a.noty.get(b).setType(c):!1},a.noty.clearQueue=function(){a.noty.queue=[]},a.noty.closeAll=function(){a.noty.clearQueue(),a.each(a.noty.store,function(a,b){b.close()})};var c=window.alert;a.noty.consumeAlert=function(b){window.alert=function(c){b?b.text=c:b={text:c},a.notyRenderer.init(b)}},a.noty.stopConsumeAlert=function(){window.alert=c},a.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},a(window).resize(function(){a.each(a.noty.layouts,function(b,c){c.container.style.apply(a(c.container.selector))})})}(jQuery),window.noty=function(a){var b=0,c={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onCloseClick:"callback.onCloseClick",onClosed:"callback.afterClose"};return jQuery.each(a,function(d,e){if(c[d]){b++;var f=c[d].split(".");a[f[0]]||(a[f[0]]={}),a[f[0]][f[1]]=e?e:function(){},delete a[d]}}),a.closeWith||(a.closeWith=jQuery.noty.defaults.closeWith),a.hasOwnProperty("closeButton")&&(b++,a.closeButton&&a.closeWith.push("button"),delete a.closeButton),a.hasOwnProperty("closeOnSelfClick")&&(b++,a.closeOnSelfClick&&a.closeWith.push("click"),delete a.closeOnSelfClick),a.hasOwnProperty("closeOnSelfOver")&&(b++,a.closeOnSelfOver&&a.closeWith.push("hover"),delete a.closeOnSelfOver),a.hasOwnProperty("custom")&&(b++,"null"!=a.custom.container&&(a.custom=a.custom.container)),a.hasOwnProperty("cssPrefix")&&(b++,delete a.cssPrefix),"noty_theme_default"==a.theme&&(b++,a.theme="defaultTheme"),a.hasOwnProperty("dismissQueue")||(a.dismissQueue=jQuery.noty.defaults.dismissQueue),a.hasOwnProperty("maxVisible")||(a.maxVisible=jQuery.noty.defaults.maxVisible),a.buttons&&jQuery.each(a.buttons,function(a,c){c.click&&(b++,c.onClick=c.click,delete c.click),c.type&&(b++,c.addClass=c.type,delete c.type)}),b&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(a)},define("noty",["jquery"],function(a){return function(){var b;return b||a.noty}}(this)),function(a){a.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){a(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),define("notylayoutTop",["noty"],function(){}),function(a){a.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var b=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),a(b).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){a(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){a(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),define("notytheme",["notylayoutTop"],function(){}),function(a){"use strict";a.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){a(this).css({top:10,right:48,"float":"right",width:"250px","min-height":"50px",position:"fixed",listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&a(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{opacity:0,padding:"5px"}},css:{display:"none",width:"250px"},addClass:""}}(jQuery),define("notylayoutTopRight",function(){}),function(a){"use strict";a.noty.themes.growlTheme={name:"growlTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var b=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topRight":a(b).css({"margin-bottom":"10px"});break;case"topCenter":case"topLeft":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),a(b).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":a(b).css({borderRadius:"0px 0px 0px 0px"}),a(b).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch("topRight"!==this.options.layout.name&&this.$bar.css({overflow:"hidden",background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==") repeat-x scroll left top #fff'}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",
display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){a(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){a(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#f2dede",borderColor:"#f2dede",color:"#a94442"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#dff0d8",borderColor:"#dff0d8",color:"#3c763d"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){a.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),define("notyGrowltheme",["notylayoutTopRight"],function(){}),require(["jquery","underscore","backbone","loglevel","humanize","views/application-view","models/application-model","helpers/config-loader","poller","collections/osd-collection","views/userdropdown-view","views/clusterdropdown-view","views/graphwall-view","helpers/graph-utils","gitcommit","application","tracker","jsuri","marionette","bootstrap","notytheme","notyGrowltheme"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new Uri(document.URL),s=r.getQueryParamValue("target"),t="dashmode",u="dashboard";d.setLevel(d.levels.WARN),s&&(console.log(s),"workbench"===s?(t="vizmode",u="workbench"):"graph"===s&&(t="graphmode",u="graph/all"),r.deleteQueryParam("target"),r.setAnchor(u),history.pushState("","Dashboard",r.toString()));var v={offline:!1,"delta-osd-api":!1,"graphite-host":"/graphite","api-request-timeout-ms":1e4,"long-polling-interval-ms":2e4,"disable-network-checks":!1,"graphite-request-delay-ms":50,"enable-demo-mode":!1},w=c.Router.extend({routes:{workbench:"workbench",dashboard:"dashboard","graph/:host(/:osd)":"graph"}}),x=new w,y="scripts/config.json",z=h(y).then(void 0,function(c,d,e){if(b.isString(c)){console.log(c);var f=function(){this.inktank.App.vent.trigger("app:configerror",c)};return a.Deferred().resolve(f)}return b.isObject(c)&&c.readState?void console.log(e+" loading "+y):(console.log("No "+y+" found. Using app defaults"),a.Deferred().resolve())});z.done(function(a){b.extend(v,a),v["graphite-host"]&&void 0===v["iops-host"]&&(v["iops-host"]=v["graphite-host"])});var A,B,C;z.then(function(h){A=new p,A.ReqRes=new c.Wreqr.RequestResponse,A.Config=v,B=new k({el:a(".usermenu"),App:A}),B.fetch();var r=new f.GaugesLayout({el:".gauges"});r.render();var s=new f.HealthView({App:A,model:new g.HealthModel});r.a.show(s);var u=new f.OsdView({App:A});r.b.show(u);var w=new f.MonView({App:A});r.c.show(w);var y=new f.UsageView({App:A,model:new g.UsageModel({}),title:"Usage"}),z=new f.PoolsView({App:A});r.d.show(z);var D=new f.GaugesLayout({el:".maps"});D.render();var E=new f.PgView({App:A});D.a.show(E);var F=new f.GaugesLayout({el:".iops"});F.render();var G=new f.HostsView({App:A});F.c.show(G);var H;H=new j([],{});var I=new f.OSDVisualization({App:A,collection:H,el:".raphael-one"});v["enable-demo-mode"]&&a("body").on("keyup",function(a){A.vent.trigger("keyup",a)}),b.extend(e.catalog,{seconds_ago:" secs ago",about_a_minute_ago:"1 min ago",minutes_ago:" mins ago",about_an_hour_ago:"1h ago",hours_ago:"h ago",one_day_ago:"1d ago",days_ago:"d ago"});var J=a.Deferred();C=new l({el:a(".clustermenu"),App:A}),C.fetch().done(function(){J.resolve(C.collection.first())}),J.promise().done(function(a){var c=new f.IopsView({graphiteHost:v["iops-host"],App:A});F.a.show(c);var e=new f.AlertsView({App:A}),j=new i({App:A,cluster:a.get("id")});A.graphWall=new m({App:A,AppRouter:x,clusterId:a.get("id"),clusterName:a.get("name"),graphiteHost:v["graphite-host"],graphiteRequestDelayMs:v["graphite-request-delay-ms"]}),I.render().then(function(){F.b.show(y),v.offline||j.start()}),x.on("route:workbench",function(){A.fsm.viz()}),x.on("route:dashboard",function(){A.fsm.dashboard()}),x.on("route:graph",function(a,b){d.debug("router>> host: "+a+" osd: "+b),A.fsm.graph(a,b)}),A.addInitializer(function(){b.isFunction(h)&&h.call(window)});var k=new f.BreadCrumbView({App:A,AppRouter:x,initial:t,el:".inknav"});k.render(),A.start({appRouter:x,initial:t});var l=new q({App:A,cluster:a.get("id")}),p=new f.UserRequestView({App:A,cluster:a.get("id"),el:".userrequests"});A.listenToOnce(A.vent,"UserRequestView:toggle",function(){p.render(),A.listenTo(A.vent,"UserRequestView:toggle",function(){p.show()})});var D=new f.NotificationBellView({App:A,el:".bell-button"});window.inktank={App:A,Router:x,ClusterMenu:C,Gauge:y,Gauges:r,GraphWallView:A.graphWall,Poller:j,OsdView:u,MonView:w,PgView:E,UserMenu:B,Viz:I,Alerts:e,models:g,helpers:n,commit:o["git-commit"],views:f,PoolsView:z,IopsView:c,HostsView:G,HealthView:s,UserRequestTracker:l,UserRequestView:p,NotificationBellView:D}})})}),define("app",function(){}),require.config({shim:{bootstrap:{deps:["jquery"],exports:"jquery"},gauge:{deps:["jquery"],exports:"Gauge"},raphael:{exports:"Raphael"},"bootstrap-switch":{deps:["bootstrap"]},noty:{deps:["jquery"],exports:"noty"},notylayoutTop:{deps:["noty"]},notylayoutRight:{deps:["noty"]},notyGrowltheme:{deps:["notylayoutTopRight"]},notytheme:{deps:["notylayoutTop"]},popover:{deps:["modal"]},l20n:{exports:"L20n"}},paths:{kinetic:"vendor/kinetic-v4.7.3",application:"application",jquery:"../bower_components/jquery/jquery",noty:"../bower_components/noty/js/noty/jquery.noty",notylayoutTop:"../bower_components/noty/js/noty/layouts/top",notylayoutTopRight:"helpers/noty-topRight",notyGrowltheme:"helpers/noty-theme",notytheme:"../bower_components/noty/js/noty/themes/default",backbone:"../bower_components/backbone-amd/backbone",underscore:"../bower_components/underscore-amd/underscore",bootstrap:"vendor/bootstrap",popover:"../bower_components/sass-bootstrap/js/popover",modal:"../bower_components/sass-bootstrap/js/modal",gauge:"vendor/gauge",bean:"../bower_components/bean/bean","backbone.babysitter":"../bower_components/backbone.babysitter/lib/amd/backbone.babysitter","backbone.wreqr":"../bower_components/backbone.wreqr/lib/amd/backbone.wreqr",raphael:"vendor/raphael",humanize:"vendor/humanize","bootstrap-switch":"../bower_components/bootstrap-switch/static/js/bootstrap-switch",statemachine:"../bower_components/javascript-state-machine/state-machine",marionette:"../bower_components/backbone.marionette/lib/core/amd/backbone.marionette",gitcommit:"git",dygraphs:"vendor/dygraph-combined",react:"../bower_components/react/react-with-addons",loglevel:"../bower_components/loglevel/dist/loglevel",l20n:"vendor/l20n.min",l20nCtx:"l20nCtxPlugin",jsuri:"../bower_components/jsuri/Uri",idbwrapper:"../bower_components/idbwrapper/idbstore",q:"../bower_components/q/q",moment:"../bower_components/momentjs/moment","Backbone.Modal":"vendor/backbone.modal"}}),require(["./app"],function(){}),define("main",function(){})}();